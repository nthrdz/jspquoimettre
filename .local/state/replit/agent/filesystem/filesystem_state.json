{"file_contents":{"lib/supabase.ts":{"content":"import { createClient } from '@supabase/supabase-js'\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\n\n// Client-side Supabase for file uploads\nexport const supabaseClient = createClient(supabaseUrl, supabaseAnonKey)\n","size_bytes":362},"components/ui-pro/badge.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\nimport { LucideIcon } from \"lucide-react\"\n\ninterface BadgeProps {\n  children: React.ReactNode\n  variant?: \"blue\" | \"orange\" | \"green\" | \"pink\" | \"purple\" | \"yellow\" | \"red\" | \"gray\"\n  size?: \"sm\" | \"md\" | \"lg\"\n  icon?: LucideIcon\n  className?: string\n}\n\nexport function Badge({\n  children,\n  variant = \"blue\",\n  size = \"md\",\n  icon: Icon,\n  className\n}: BadgeProps) {\n  const variantClasses = {\n    blue: \"bg-primary-blue-100 text-primary-blue-700 border-primary-blue-200\",\n    orange: \"bg-primary-orange-100 text-primary-orange-700 border-primary-orange-200\",\n    green: \"bg-primary-green-100 text-primary-green-700 border-primary-green-200\",\n    pink: \"bg-primary-pink-100 text-primary-pink-700 border-primary-pink-200\",\n    purple: \"bg-primary-purple-100 text-primary-purple-700 border-primary-purple-200\",\n    yellow: \"bg-primary-yellow-100 text-primary-yellow-700 border-primary-yellow-200\",\n    red: \"bg-primary-red-100 text-primary-red-700 border-primary-red-200\",\n    gray: \"bg-gray-100 text-gray-700 border-gray-200\"\n  }\n\n  const sizeClasses = {\n    sm: \"px-2 py-1 text-xs\",\n    md: \"px-4 py-2 text-sm\",\n    lg: \"px-6 py-3 text-base\"\n  }\n\n  return (\n    <motion.span\n      initial={{ scale: 0.8, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      transition={{ duration: 0.2 }}\n      className={cn(\n        \"inline-flex items-center gap-1.5 font-bold rounded-full border-2\",\n        variantClasses[variant],\n        sizeClasses[size],\n        className\n      )}\n    >\n      {Icon && <Icon className=\"w-4 h-4\" />}\n      {children}\n    </motion.span>\n  )\n}\n","size_bytes":1660},"deployment/scripts/backup-db.sh":{"content":"#!/bin/bash\n# Database backup script for AthLink\n\necho \"üíæ Creating database backup...\"\n\n# Get current timestamp\nTIMESTAMP=$(date +\"%Y%m%d_%H%M%S\")\nBACKUP_FILE=\"athlink_backup_${TIMESTAMP}.sql\"\n\n# Create backup directory if it doesn't exist\nmkdir -p ../backup\n\n# Export database\necho \"üì§ Exporting database to ${BACKUP_FILE}...\"\npg_dump $DATABASE_URL > ../backup/${BACKUP_FILE}\n\nif [ $? -eq 0 ]; then\n    echo \"‚úÖ Database backup created: backup/${BACKUP_FILE}\"\n    \n    # Compress backup\n    gzip ../backup/${BACKUP_FILE}\n    echo \"üóúÔ∏è Backup compressed: backup/${BACKUP_FILE}.gz\"\nelse\n    echo \"‚ùå Database backup failed!\"\n    exit 1\nfi\n\necho \"üéâ Backup process complete!\"\n","size_bytes":687},"components/analytics/view-tracker.tsx":{"content":"\"use client\"\n\nimport { useEffect } from \"react\"\n\ninterface ViewTrackerProps {\n  profileId: string\n}\n\nexport function ViewTracker({ profileId }: ViewTrackerProps) {\n  useEffect(() => {\n    // Tracker la vue une seule fois au chargement\n    const trackView = async () => {\n      try {\n        await fetch('/api/analytics/track-view', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ profileId })\n        })\n      } catch (error) {\n        console.error('Erreur tracking view:', error)\n      }\n    }\n\n    trackView()\n  }, [profileId])\n\n  return null // Composant invisible\n}\n\n","size_bytes":644},"media/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/lib/auth'\nimport { prisma } from '@/lib/db'\nimport { mediaSchema } from '@/lib/validations'\nimport { z } from 'zod'\n\n// PATCH - Mettre √† jour un m√©dia\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const { id } = await params\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    // V√©rifier que le m√©dia appartient √† l'utilisateur\n    const media = await prisma.media.findFirst({\n      where: { id, profileId: profile.id }\n    })\n\n    if (!media) {\n      return NextResponse.json({ error: 'M√©dia non trouv√©' }, { status: 404 })\n    }\n\n    const body = await req.json()\n    const validatedData = mediaSchema.partial().parse(body)\n\n    // Mettre √† jour la miniature YouTube si n√©cessaire\n    let thumbnail = validatedData.thumbnail\n    if (validatedData.type === 'YOUTUBE' && validatedData.url && !thumbnail) {\n      const videoId = extractYouTubeId(validatedData.url)\n      if (videoId) {\n        thumbnail = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\n      }\n    }\n\n    const updatedMedia = await prisma.media.update({\n      where: { id },\n      data: {\n        ...validatedData,\n        thumbnail: thumbnail || validatedData.thumbnail,\n      }\n    })\n\n    return NextResponse.json(updatedMedia, { status: 200 })\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return NextResponse.json({ error: 'Donn√©es invalides', details: error.issues }, { status: 400 })\n    }\n    console.error('PATCH media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// DELETE - Supprimer un m√©dia\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const { id } = await params\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    // V√©rifier que le m√©dia appartient √† l'utilisateur\n    const media = await prisma.media.findFirst({\n      where: { id, profileId: profile.id }\n    })\n\n    if (!media) {\n      return NextResponse.json({ error: 'M√©dia non trouv√©' }, { status: 404 })\n    }\n\n    await prisma.media.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ message: 'M√©dia supprim√©' }, { status: 200 })\n\n  } catch (error) {\n    console.error('DELETE media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// Helper pour extraire l'ID d'une vid√©o YouTube\nfunction extractYouTubeId(url: string): string | null {\n  const regex = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/\n  const match = url.match(regex)\n  return match ? match[1] : null\n}\n","size_bytes":3449},"lib/design-system.ts":{"content":"// Design System Complet - Athlink Pro\n// Palette de 7 couleurs vibrantes + Syst√®me complet\n\nexport const designSystem = {\n  colors: {\n    // Bleu √âlectrique (Primary)\n    blue: {\n      50: '#e6f0ff',\n      100: '#b3d7ff',\n      200: '#80beff',\n      300: '#4da5ff',\n      400: '#1a8cff',\n      500: '#0073e6',  // Main\n      600: '#005bb8',\n      700: '#00448a',\n      800: '#002d5c',\n      900: '#00162e',\n    },\n    \n    // Orange √ânergique (Accent)\n    orange: {\n      50: '#fff4e6',\n      100: '#ffe0b3',\n      200: '#ffcc80',\n      300: '#ffb84d',\n      400: '#ffa41a',\n      500: '#ff9000',  // Main\n      600: '#cc7300',\n      700: '#995600',\n      800: '#663a00',\n      900: '#331d00',\n    },\n    \n    // Vert Performance (Success)\n    green: {\n      50: '#e6f9f0',\n      100: '#b3efd4',\n      200: '#80e5b8',\n      300: '#4ddb9c',\n      400: '#1ad180',\n      500: '#00c766',  // Main\n      600: '#009f52',\n      700: '#00773d',\n      800: '#004f29',\n      900: '#002714',\n    },\n    \n    // Rose Dynamique (Tertiary)\n    pink: {\n      50: '#ffe6f0',\n      100: '#ffb3d4',\n      200: '#ff80b8',\n      300: '#ff4d9c',\n      400: '#ff1a80',\n      500: '#e6006b',  // Main\n      600: '#b80055',\n      700: '#8a0040',\n      800: '#5c002b',\n      900: '#2e0015',\n    },\n    \n    // Violet Premium (Quaternary)\n    purple: {\n      50: '#f0e6ff',\n      100: '#d4b3ff',\n      200: '#b880ff',\n      300: '#9c4dff',\n      400: '#801aff',\n      500: '#6b00e6',  // Main\n      600: '#5500b8',\n      700: '#40008a',\n      800: '#2b005c',\n      900: '#15002e',\n    },\n    \n    // Jaune Solaire (Warning)\n    yellow: {\n      50: '#fffbe6',\n      100: '#fff4b3',\n      200: '#ffed80',\n      300: '#ffe64d',\n      400: '#ffdf1a',\n      500: '#ffd700',  // Main\n      600: '#ccac00',\n      700: '#998100',\n      800: '#665600',\n      900: '#332b00',\n    },\n    \n    // Rouge Alerte (Danger)\n    red: {\n      50: '#ffe6e6',\n      100: '#ffb3b3',\n      200: '#ff8080',\n      300: '#ff4d4d',\n      400: '#ff1a1a',\n      500: '#e60000',  // Main\n      600: '#b80000',\n      700: '#8a0000',\n      800: '#5c0000',\n      900: '#2e0000',\n    },\n    \n    // Gris Moderne\n    gray: {\n      50: '#f8f9fa',\n      100: '#f1f3f5',\n      200: '#e9ecef',\n      300: '#dee2e6',\n      400: '#ced4da',\n      500: '#adb5bd',\n      600: '#6c757d',\n      700: '#495057',\n      800: '#343a40',\n      900: '#212529',\n    },\n  },\n  \n  gradients: {\n    hero: 'linear-gradient(135deg, #1a8cff 0%, #801aff 50%, #ff1a80 100%)',\n    performance: 'linear-gradient(90deg, #00c766 0%, #0073e6 100%)',\n    energy: 'linear-gradient(45deg, #ff9000 0%, #ffd700 100%)',\n    premium: 'linear-gradient(180deg, #6b00e6 0%, #ff1a80 100%)',\n    sunset: 'linear-gradient(135deg, #ff9000 0%, #ff1a80 100%)',\n    ocean: 'linear-gradient(135deg, #0073e6 0%, #00c766 100%)',\n    fire: 'linear-gradient(45deg, #e60000 0%, #ff9000 100%)',\n  },\n  \n  spacing: {\n    xs: '4px',\n    sm: '8px',\n    md: '12px',\n    base: '16px',\n    lg: '24px',\n    xl: '32px',\n    '2xl': '48px',\n    '3xl': '64px',\n    '4xl': '96px',\n    '5xl': '120px',\n  },\n  \n  borderRadius: {\n    sm: '6px',\n    md: '12px',\n    lg: '16px',\n    xl: '20px',\n    '2xl': '24px',\n    full: '9999px',\n  },\n  \n  shadows: {\n    subtle: '0 1px 3px rgba(0, 0, 0, 0.08)',\n    standard: '0 4px 12px rgba(0, 0, 0, 0.12)',\n    elevated: '0 8px 24px rgba(0, 0, 0, 0.15)',\n    floating: '0 16px 48px rgba(0, 0, 0, 0.20)',\n    'glow-blue': '0 0 40px rgba(0, 115, 230, 0.3)',\n    'glow-orange': '0 0 40px rgba(255, 144, 0, 0.3)',\n    'glow-green': '0 0 40px rgba(0, 199, 102, 0.3)',\n    'glow-pink': '0 0 40px rgba(230, 0, 107, 0.3)',\n    'glow-purple': '0 0 40px rgba(107, 0, 230, 0.3)',\n  },\n  \n  typography: {\n    fontFamily: '\"Inter\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", sans-serif',\n    fontSize: {\n      hero: '96px',\n      h1: '56px',\n      h2: '40px',\n      h3: '32px',\n      h4: '24px',\n      body: '16px',\n      small: '14px',\n      tiny: '12px',\n    },\n    fontWeight: {\n      regular: 400,\n      medium: 500,\n      semibold: 600,\n      bold: 700,\n      extrabold: 800,\n      black: 900,\n    },\n    lineHeight: {\n      tight: 1.1,\n      snug: 1.2,\n      normal: 1.5,\n      relaxed: 1.6,\n    },\n  },\n}","size_bytes":4214},"auth/signup/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { hash } from \"bcryptjs\"\nimport { prisma } from \"@/lib/db\"\nimport { signupSchema, mapSportToEnum, createStatsWithOriginalSport } from \"@/lib/validations\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const validatedData = signupSchema.parse(body)\n\n    // Check if email exists\n    const existingEmail = await prisma.user.findUnique({\n      where: { email: validatedData.email }\n    })\n\n    if (existingEmail) {\n      return NextResponse.json(\n        { error: \"Cet email est d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    // Check if username exists\n    const existingUsername = await prisma.profile.findUnique({\n      where: { username: validatedData.username }\n    })\n\n    if (existingUsername) {\n      return NextResponse.json(\n        { error: \"Ce nom d'utilisateur est d√©j√† pris\" },\n        { status: 400 }\n      )\n    }\n\n    // Hash password\n    const hashedPassword = await hash(validatedData.password, 12)\n\n    // Create user and profile\n    const user = await prisma.user.create({\n      data: {\n        email: validatedData.email,\n        name: validatedData.name,\n        password: hashedPassword,\n        profile: {\n          create: {\n            username: validatedData.username,\n            displayName: validatedData.name,\n            sport: mapSportToEnum(validatedData.sport),\n            stats: createStatsWithOriginalSport(null, validatedData.sport),\n            plan: \"FREE\"\n          }\n        }\n      },\n      include: {\n        profile: true\n      }\n    })\n\n    return NextResponse.json({\n      user: {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        username: user.profile?.username\n      }\n    }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"Signup error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json(\n      { error: \"Erreur lors de la cr√©ation du compte\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2168},"(dashboard)/layout.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { DashboardLayoutWrapper } from \"@/components/ui-pro/dashboard-layout-wrapper\"\n\nexport default async function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const session = await auth()\n\n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  // Get user profile for sidebar\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      username: true,\n      displayName: true,\n      avatarUrl: true,\n      plan: true,\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  return (\n    <DashboardLayoutWrapper\n      username={profile.username}\n      displayName={profile.displayName}\n      avatarUrl={profile.avatarUrl}\n      plan={profile.plan}\n    >\n      {children}\n    </DashboardLayoutWrapper>\n  )\n}","size_bytes":897},"components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1987},"components/ui-pro/promo-code-field.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Gift, Check, X, Sparkles } from \"lucide-react\"\n\ninterface PromoCodeFieldProps {\n  value: string\n  onChange: (value: string) => void\n  onValidation: (isValid: boolean, promoData?: any) => void\n}\n\ninterface PromoValidationResult {\n  valid: boolean\n  code?: string\n  type?: string\n  plan?: string\n  duration?: number\n  description?: string\n}\n\nexport function PromoCodeField({ value, onChange, onValidation }: PromoCodeFieldProps) {\n  const [isValidating, setIsValidating] = useState(false)\n  const [validationResult, setValidationResult] = useState<PromoValidationResult | null>(null)\n  const [showResult, setShowResult] = useState(false)\n\n  const handleValidate = async () => {\n    if (!value.trim()) {\n      setValidationResult(null)\n      onValidation(false)\n      setShowResult(false)\n      return\n    }\n\n    setIsValidating(true)\n\n    try {\n      const response = await fetch(\"/api/promo-codes/validate\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ code: value.trim() })\n      })\n\n      const result = await response.json()\n      setValidationResult(result)\n      setShowResult(true)\n      onValidation(result.valid, result)\n\n      // Masquer le r√©sultat apr√®s 5 secondes\n      setTimeout(() => {\n        setShowResult(false)\n      }, 5000)\n\n    } catch (error) {\n      console.error(\"Erreur validation code promo:\", error)\n      setValidationResult({ valid: false })\n      setShowResult(true)\n      onValidation(false)\n    } finally {\n      setIsValidating(false)\n    }\n  }\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.value.toUpperCase()\n    onChange(newValue)\n    \n    // Reset validation quand l'utilisateur tape\n    if (validationResult) {\n      setValidationResult(null)\n      setShowResult(false)\n      onValidation(false)\n    }\n  }\n\n  const getPromoIcon = () => {\n    if (!validationResult) return <Gift className=\"w-4 h-4\" />\n    \n    if (validationResult.valid) {\n      if (validationResult.type === \"plan_upgrade\") {\n        return <Sparkles className=\"w-4 h-4\" />\n      }\n      return <Check className=\"w-4 h-4\" />\n    }\n    \n    return <X className=\"w-4 h-4\" />\n  }\n\n  const getPromoColor = () => {\n    if (!validationResult) return \"text-gray-400\"\n    \n    if (validationResult.valid) {\n      if (validationResult.type === \"plan_upgrade\") {\n        return \"text-purple-500\"\n      }\n      return \"text-green-500\"\n    }\n    \n    return \"text-red-500\"\n  }\n\n  const getPromoMessage = () => {\n    if (!validationResult) return null\n    \n    if (validationResult.valid) {\n      if (validationResult.type === \"plan_upgrade\") {\n        return `üéâ Acc√®s ${validationResult.plan} gratuit !`\n      }\n      if (validationResult.type === \"trial\") {\n        return `üéÅ ${validationResult.duration} jours gratuits ${validationResult.plan} !`\n      }\n      return \"‚úÖ Code promo valide !\"\n    }\n    \n    return \"‚ùå Code promo invalide\"\n  }\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex gap-2\">\n        <div className=\"relative flex-1\">\n          <input\n            type=\"text\"\n            value={value}\n            onChange={handleInputChange}\n            placeholder=\"Code promo (optionnel)\"\n            className={`w-full px-4 py-3 pl-12 border rounded-xl transition-all ${\n              validationResult?.valid \n                ? \"border-green-300 bg-green-50 focus:ring-2 focus:ring-green-500\" \n                : validationResult?.valid === false\n                ? \"border-red-300 bg-red-50 focus:ring-2 focus:ring-red-500\"\n                : \"border-gray-300 focus:ring-2 focus:ring-primary-blue-500\"\n            } focus:border-transparent`}\n            maxLength={20}\n          />\n          <div className={`absolute left-4 top-1/2 -translate-y-1/2 ${getPromoColor()}`}>\n            {getPromoIcon()}\n          </div>\n        </div>\n        \n        <button\n          onClick={handleValidate}\n          disabled={!value.trim() || isValidating}\n          className=\"px-4 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-medium hover:shadow-glow-blue transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n        >\n          {isValidating ? (\n            <div className=\"w-4 h-4 border-2 border-gray-900 border-t-transparent rounded-full animate-spin\" />\n          ) : (\n            <Gift className=\"w-4 h-4\" />\n          )}\n          V√©rifier\n        </button>\n      </div>\n\n      {/* R√©sultat de validation */}\n      <AnimatePresence>\n        {showResult && validationResult && (\n          <motion.div\n            initial={{ opacity: 0, y: -10, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: -10, scale: 0.95 }}\n            className={`p-4 rounded-xl border-2 ${\n              validationResult.valid\n                ? \"bg-green-50 border-green-200\"\n                : \"bg-red-50 border-red-200\"\n            }`}\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                validationResult.valid\n                  ? \"bg-green-100\"\n                  : \"bg-red-100\"\n              }`}>\n                {getPromoIcon()}\n              </div>\n              <div>\n                <p className={`font-medium ${\n                  validationResult.valid\n                    ? \"text-green-800\"\n                    : \"text-red-800\"\n                }`}>\n                  {getPromoMessage()}\n                </p>\n                {validationResult.valid && validationResult.description && (\n                  <p className={`text-sm ${\n                    validationResult.valid\n                      ? \"text-green-600\"\n                      : \"text-red-600\"\n                  }`}>\n                    {validationResult.description}\n                  </p>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Astuce codes promo */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200\">\n        <div className=\"flex items-center gap-2\">\n          <Gift className=\"w-4 h-4 text-blue-600\" />\n          <span className=\"text-sm font-medium text-blue-700\">\n            Tu as un code promo ? Saisis-le pour b√©n√©ficier d'avantages exclusifs !\n          </span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":6597},"races/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { raceSchema } from \"@/lib/validations\"\n\n// PATCH update race\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = raceSchema.partial().parse(body)\n\n    // Verify race belongs to user\n    const race = await prisma.race.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!race) {\n      return NextResponse.json({ error: \"Course non trouv√©e\" }, { status: 404 })\n    }\n\n    if (race.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    // Convert date string to Date object if needed\n    const updateData = { ...validatedData }\n    if (updateData.date) {\n      updateData.date = typeof updateData.date === 'string' \n        ? new Date(updateData.date) \n        : updateData.date\n    }\n\n    const updatedRace = await prisma.race.update({\n      where: { id },\n      data: updateData\n    })\n\n    return NextResponse.json({ race: updatedRace })\n\n  } catch (error: any) {\n    console.error(\"PATCH race error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// DELETE race\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    // Verify race belongs to user\n    const race = await prisma.race.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!race) {\n      return NextResponse.json({ error: \"Course non trouv√©e\" }, { status: 404 })\n    }\n\n    if (race.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    await prisma.race.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error(\"DELETE race error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2633},"races/extract-logo/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\n\n// Fonction pour normaliser l'URL\nfunction normalizeUrl(url: string): string {\n  try {\n    const urlObj = new URL(url)\n    return `${urlObj.protocol}//${urlObj.hostname}`\n  } catch {\n    return url\n  }\n}\n\n// Fonction pour extraire le logo d'un √©v√©nement\nasync function extractEventLogo(url: string) {\n  const normalizedUrl = normalizeUrl(url)\n  console.log(`üîç Extraction du logo pour: ${normalizedUrl}`)\n\n  try {\n    // 0Ô∏è‚É£ PRIORIT√â 0: Clearbit API (rapide et fiable)\n    try {\n      const clearbitUrl = `https://logo.clearbit.com/${normalizedUrl.replace(/^https?:\\/\\//, '')}`\n      const clearbitResponse = await fetch(clearbitUrl, { method: 'HEAD' })\n      \n      if (clearbitResponse.ok) {\n        console.log(`‚úÖ Logo trouv√© via Clearbit: ${clearbitUrl}`)\n        return { logoUrl: clearbitUrl, method: 'clearbit' }\n      }\n    } catch (error) {\n      console.log(`‚ö†Ô∏è Clearbit failed: ${error}`)\n    }\n\n    // 1Ô∏è‚É£ PRIORIT√â 1: Scraping intelligent du site\n    try {\n      const response = await fetch(normalizedUrl, {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (compatible; AthLink/1.0)',\n          'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n          'Accept-Language': 'fr-FR,fr;q=0.9,en;q=0.8',\n          'Accept-Encoding': 'gzip, deflate',\n          'Connection': 'keep-alive',\n        },\n      })\n\n      if (!response.ok) {\n        console.log(`‚ö†Ô∏è Response status: ${response.status}`)\n        throw new Error(`HTTP ${response.status}`)\n      }\n\n      const html = await response.text()\n      console.log(`üìä Page charg√©e, taille: ${html.length} caract√®res`)\n\n      // Recherche d'images dans les sections header/nav\n      const headerImages = html.match(/<header[^>]*>[\\s\\S]*?<img[^>]*src=[\"']([^\"']+)[\"'][^>]*>/gi) || []\n      console.log(`üì∏ ${headerImages.length} images trouv√©es dans header/nav`)\n\n      for (const imgTag of headerImages) {\n        const srcMatch = imgTag.match(/src=[\"']([^\"']+)[\"']/)\n        if (srcMatch) {\n          let imgSrc = srcMatch[1]\n          \n          // Convertir les URLs relatives en absolues\n          if (imgSrc.startsWith('/')) {\n            imgSrc = `${normalizedUrl}${imgSrc}`\n          } else if (!imgSrc.startsWith('http')) {\n            imgSrc = `${normalizedUrl}/${imgSrc}`\n          }\n\n          // V√©rifier si c'est un logo (nom de fichier ou alt text)\n          if (imgSrc.match(/logo|brand|header|nav/i) || \n              imgTag.match(/alt=[\"'][^\"']*(logo|brand|header)[^\"']*[\"']/i)) {\n            console.log(`üéØ Logo potentiel trouv√©: ${imgSrc}`)\n            return { logoUrl: imgSrc, method: 'scraping' }\n          }\n        }\n      }\n\n    } catch (error) {\n      console.error(`‚ùå Erreur scraping:`, (error as Error).message)\n    }\n\n    // 2Ô∏è‚É£ PRIORIT√â 2: Open Graph meta tags\n    try {\n      const response = await fetch(normalizedUrl, {\n        headers: {\n          'User-Agent': 'Mozilla/5.0 (compatible; AthLink/1.0)',\n        },\n      })\n\n      if (response.ok) {\n        const html = await response.text()\n        \n        // Recherche des meta tags Open Graph\n        const ogImageMatch = html.match(/<meta[^>]*property=[\"']og:image[\"'][^>]*content=[\"']([^\"']+)[\"']/i)\n        if (ogImageMatch) {\n          let imgSrc = ogImageMatch[1]\n          \n          // Convertir les URLs relatives en absolues\n          if (imgSrc.startsWith('/')) {\n            imgSrc = `${normalizedUrl}${imgSrc}`\n          } else if (!imgSrc.startsWith('http')) {\n            imgSrc = `${normalizedUrl}/${imgSrc}`\n          }\n\n          console.log(`üì∏ Logo trouv√© via Open Graph: ${imgSrc}`)\n          return { logoUrl: imgSrc, method: 'opengraph' }\n        }\n      }\n    } catch (error) {\n      console.error(`‚ùå Erreur Open Graph:`, (error as Error).message)\n    }\n\n    // 3Ô∏è‚É£ PRIORIT√â 3: Favicon (derni√®re option)\n    try {\n      const faviconUrl = `${normalizedUrl}/favicon.ico`\n      const faviconResponse = await fetch(faviconUrl, { method: 'HEAD' })\n      \n      if (faviconResponse.ok) {\n        console.log(`üé® Favicon trouv√©: ${faviconUrl}`)\n        return { logoUrl: faviconUrl, method: 'favicon' }\n      }\n    } catch (error) {\n      console.error(`‚ùå Erreur favicon:`, (error as Error).message)\n    }\n\n    // ‚ùå Aucun logo trouv√©\n    console.log(`‚ùå Aucun logo trouv√© pour ${normalizedUrl}`)\n    return { logoUrl: null, method: null }\n\n  } catch (error) {\n    console.error(\"‚ùå Erreur extraction:\", (error as Error).message)\n    return { logoUrl: null, method: null, error: (error as Error).message }\n  }\n}\n\n// üéØ CLEARBIT API\nasync function testClearbitLogo(url: string) {\n  try {\n    const clearbitUrl = `https://logo.clearbit.com/${url.replace(/^https?:\\/\\//, '')}`\n    const response = await fetch(clearbitUrl, { method: 'HEAD' })\n    return response.ok ? clearbitUrl : null\n  } catch {\n    return null\n  }\n}\n\n// üéØ SCRAPING INTELLIGENT DU SITE\nasync function scrapeWebsiteLogo(url: string) {\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (compatible; AthLink/1.0)',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n        'Accept-Language': 'fr-FR,fr;q=0.9,en;q=0.8',\n        'Accept-Encoding': 'gzip, deflate',\n        'Connection': 'keep-alive',\n      },\n    })\n\n    if (!response.ok) {\n      console.log(`‚ö†Ô∏è Response status: ${response.status}`)\n      throw new Error(`HTTP ${response.status}`)\n    }\n\n    const html = await response.text()\n    console.log(`üìä Page charg√©e, taille: ${html.length} caract√®res`)\n\n    // Recherche d'images dans les sections header/nav\n    const headerImages = html.match(/<header[^>]*>[\\s\\S]*?<img[^>]*src=[\"']([^\"']+)[\"'][^>]*>/gi) || []\n    console.log(`üì∏ ${headerImages.length} images trouv√©es dans header/nav`)\n\n    // Recherche d'images avec des mots-cl√©s de logo\n    const logoImages = html.match(/<img[^>]*(?:logo|brand|header)[^>]*src=[\"']([^\"']+)[\"'][^>]*>/gi) || []\n    console.log(`üéØ ${logoImages.length} images de logo trouv√©es`)\n\n    // Recherche d'images avec alt text contenant \"logo\"\n    const altLogoImages = html.match(/<img[^>]*alt=[\"'][^\"']*logo[^\"']*[\"'][^>]*src=[\"']([^\"']+)[\"'][^>]*>/gi) || []\n    console.log(`üè∑Ô∏è ${altLogoImages.length} images avec alt=\"logo\" trouv√©es`)\n\n    // Combiner toutes les images potentielles\n    const allImages = [...headerImages, ...logoImages, ...altLogoImages]\n    \n    for (const imgTag of allImages) {\n      const srcMatch = imgTag.match(/src=[\"']([^\"']+)[\"']/)\n      if (srcMatch) {\n        let imgSrc = srcMatch[1]\n        \n        // Convertir les URLs relatives en absolues\n        if (imgSrc.startsWith('/')) {\n          imgSrc = `${url}${imgSrc}`\n        } else if (!imgSrc.startsWith('http')) {\n          imgSrc = `${url}/${imgSrc}`\n        }\n\n        // V√©rifier si l'image est accessible\n        try {\n          const imgResponse = await fetch(imgSrc, { method: 'HEAD' })\n          if (imgResponse.ok) {\n            console.log(`‚úÖ Logo accessible trouv√©: ${imgSrc}`)\n            return imgSrc\n          }\n        } catch {\n          continue\n        }\n      }\n    }\n\n    console.log(`üì∏ ${headerImages.length} images trouv√©es dans header/nav`)\n    return null\n  } catch (error) {\n      console.error(`‚ùå Erreur scraping:`, (error as Error).message)\n    return null\n  }\n}\n\n// üè∑Ô∏è OPEN GRAPH META TAGS\nasync function getOpenGraphImage(url: string) {\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (compatible; AthLink/1.0)',\n      },\n    })\n\n    if (response.ok) {\n      const html = await response.text()\n      \n      // Recherche des meta tags Open Graph\n      const ogImageMatch = html.match(/<meta[^>]*property=[\"']og:image[\"'][^>]*content=[\"']([^\"']+)[\"']/i)\n      if (ogImageMatch) {\n        let imgSrc = ogImageMatch[1]\n        \n        // Convertir les URLs relatives en absolues\n        if (imgSrc.startsWith('/')) {\n          const urlObj = new URL(url)\n          imgSrc = `${urlObj.protocol}//${urlObj.hostname}${imgSrc}`\n        } else if (!imgSrc.startsWith('http')) {\n          imgSrc = `${url}/${imgSrc}`\n        }\n\n        console.log(`üì∏ Logo trouv√© via Open Graph: ${imgSrc}`)\n        return imgSrc\n      }\n\n      // Recherche des meta tags Twitter\n      const twitterImageMatch = html.match(/<meta[^>]*name=[\"']twitter:image[\"'][^>]*content=[\"']([^\"']+)[\"']/i)\n      if (twitterImageMatch) {\n        let imgSrc = twitterImageMatch[1]\n        \n        if (imgSrc.startsWith('/')) {\n          const urlObj = new URL(url)\n          imgSrc = `${urlObj.protocol}//${urlObj.hostname}${imgSrc}`\n        } else if (!imgSrc.startsWith('http')) {\n          imgSrc = `${url}/${imgSrc}`\n        }\n\n        console.log(`üê¶ Logo trouv√© via Twitter: ${imgSrc}`)\n        return imgSrc\n      }\n    }\n\n    return null\n  } catch (error) {\n      console.error(`‚ùå Erreur Open Graph:`, (error as Error).message)\n    return null\n  }\n}\n\n// üé® FAVICON\nasync function getFavicon(url: string) {\n  try {\n    const urlObj = new URL(url)\n    const faviconUrl = `${urlObj.protocol}//${urlObj.hostname}/favicon.ico`\n    \n    const response = await fetch(faviconUrl, { method: 'HEAD' })\n    if (response.ok) {\n      console.log(`üé® Favicon trouv√©: ${faviconUrl}`)\n      return faviconUrl\n    }\n\n    // Essayer d'autres formats de favicon\n    const faviconFormats = ['favicon.png', 'favicon.jpg', 'favicon.svg']\n    for (const format of faviconFormats) {\n      const testUrl = `${urlObj.protocol}//${urlObj.hostname}/${format}`\n      try {\n        const testResponse = await fetch(testUrl, { method: 'HEAD' })\n        if (testResponse.ok) {\n          console.log(`üé® Favicon trouv√© (${format}): ${testUrl}`)\n          return testUrl\n        }\n      } catch {\n        continue\n      }\n    }\n\n    return null\n  } catch (error) {\n      console.error(`‚ùå Erreur favicon:`, (error as Error).message)\n    return null\n  }\n}\n\n// üõ†Ô∏è UTILITAIRES\nfunction isValidImageUrl(url: string): boolean {\n  try {\n    new URL(url)\n    return /\\.(jpg|jpeg|png|gif|svg|webp|ico)(\\?.*)?$/i.test(url)\n  } catch {\n    return false\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session?.user?.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const { url } = await request.json()\n\n    if (!url) {\n      return NextResponse.json({ error: \"URL requise\" }, { status: 400 })\n    }\n\n    const result = await extractEventLogo(url)\n\n    if (result.logoUrl) {\n      const methodLabels = {\n        clearbit: \"Clearbit API\",\n        scraping: \"scraping du site\",\n        opengraph: \"Open Graph\",\n        favicon: \"favicon\"\n      }\n      \n      return NextResponse.json({\n        success: true,\n        logoUrl: result.logoUrl,\n        method: result.method,\n        message: `Logo trouv√© via ${methodLabels[result.method as keyof typeof methodLabels] || result.method}`\n      })\n    } else {\n      return NextResponse.json({\n        success: false,\n        message: \"Aucun logo trouv√© pour cette URL\",\n        error: result.error\n      })\n    }\n\n  } catch (error: any) {\n    console.error(\"Erreur extraction logo √©v√©nement:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors de l'extraction du logo\", details: (error as Error).message },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":11515},"components/ui-pro/mobile-navigation.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { \n  LayoutDashboard, \n  Link2, \n  Trophy, \n  Award, \n  Image as ImageIcon,\n  User,\n  Settings,\n  LogOut,\n  Share2,\n  Menu,\n  X,\n  Users,\n  ChevronDown,\n  ChevronUp\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface MobileNavigationProps {\n  username: string\n  displayName: string\n  avatarUrl?: string | null\n  plan?: string\n  onSignOut: () => void\n}\n\ninterface MenuItem {\n  href: string\n  icon: any\n  label: string\n  planRequired?: string\n}\n\ninterface MenuSection {\n  title?: string\n  items: MenuItem[]\n  collapsible?: boolean\n}\n\nexport function MobileNavigation({ \n  username, \n  displayName, \n  avatarUrl,\n  plan,\n  onSignOut \n}: MobileNavigationProps) {\n  const pathname = usePathname()\n  const [isOpen, setIsOpen] = useState(false)\n  const [expandedSections, setExpandedSections] = useState<Record<string, boolean>>({\n    profil: true,\n    sources: true\n  })\n\n  const toggleSection = (sectionId: string) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [sectionId]: !prev[sectionId]\n    }))\n  }\n\n  const menuStructure: MenuSection[] = [\n    {\n      items: [\n        { href: \"/dashboard\", icon: LayoutDashboard, label: \"Dashboard\" },\n      ]\n    },\n    {\n      title: \"Profil\",\n      collapsible: true,\n      items: [\n        { href: \"/dashboard/profile\", icon: User, label: \"Profil\" },\n        { href: \"/dashboard/media\", icon: ImageIcon, label: \"Galerie\" },\n      ]\n    },\n    {\n      title: \"Sources\",\n      collapsible: true,\n      items: [\n        { href: \"/dashboard/sources#liens\", icon: Link2, label: \"Liens\" },\n        { href: \"/dashboard/sources#competitions\", icon: Trophy, label: \"Comp√©titions\" },\n        { href: \"/dashboard/sources#sponsors\", icon: Award, label: \"Sponsors\" },\n      ]\n    },\n    {\n      items: [\n        { href: \"/dashboard/coaching\", icon: Users, label: \"Services Coaching\", planRequired: \"ELITE\" },\n        { href: \"/dashboard/share\", icon: Share2, label: \"Partager\" },\n        { href: \"/dashboard/settings\", icon: Settings, label: \"Param√®tres\" },\n      ]\n    }\n  ]\n\n  // Filtrer les sections et items selon le plan\n  const filteredMenuStructure = menuStructure.map(section => ({\n    ...section,\n    items: section.items.filter(item => {\n      if (!item.planRequired) return true\n      if (item.planRequired === \"ELITE\") return plan === \"ELITE\"\n      if (item.planRequired === \"PRO\") return plan === \"PRO\" || plan === \"ELITE\" || plan === \"ELITE\"\n      return plan === item.planRequired\n    })\n  })).filter(section => section.items.length > 0)\n\n  return (\n    <>\n      {/* Mobile Header */}\n      <div className=\"lg:hidden fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\n        {/* Logo */}\n        <Link href=\"/dashboard\" className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg flex items-center justify-center\">\n            <span className=\"text-black font-black text-sm\">A</span>\n          </div>\n          <span className=\"font-black text-xl bg-gradient-to-r from-yellow-500 via-black to-yellow-600 bg-clip-text text-transparent\">\n            AthLink\n          </span>\n        </Link>\n\n        {/* Hamburger Button */}\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"p-2 rounded-lg hover:bg-gray-100 transition-colors\"\n          aria-label=\"Menu\"\n        >\n          {isOpen ? (\n            <X className=\"w-6 h-6 text-gray-700\" />\n          ) : (\n            <Menu className=\"w-6 h-6 text-gray-700\" />\n          )}\n        </button>\n      </div>\n\n      {/* Mobile Menu Overlay */}\n      <AnimatePresence>\n        {isOpen && (\n          <>\n            {/* Backdrop */}\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"lg:hidden fixed inset-0 bg-black/50 z-40\"\n              onClick={() => setIsOpen(false)}\n            />\n\n            {/* Mobile Menu */}\n            <motion.div\n              initial={{ x: \"-100%\" }}\n              animate={{ x: 0 }}\n              exit={{ x: \"-100%\" }}\n              transition={{ type: \"spring\", damping: 25, stiffness: 200 }}\n              className=\"lg:hidden fixed left-0 top-0 bottom-0 w-80 max-w-[85vw] bg-white z-50 flex flex-col shadow-2xl overflow-y-auto\"\n            >\n              {/* Header */}\n              <div className=\"p-6 border-b border-gray-200\">\n                <div className=\"flex items-center gap-3 mb-4\">\n                  <div className=\"w-12 h-12 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center\">\n                    {avatarUrl ? (\n                      <img \n                        src={avatarUrl} \n                        alt={displayName}\n                        className=\"w-12 h-12 rounded-xl object-cover\"\n                      />\n                    ) : (\n                      <span className=\"text-black font-black text-lg\">\n                        {displayName.charAt(0).toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                  <div>\n                    <h3 className=\"font-bold text-gray-900\">{displayName}</h3>\n                    <p className=\"text-sm text-gray-600\">@{username}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Navigation Items */}\n              <nav className=\"flex-1 px-6 py-4 space-y-6\">\n                {filteredMenuStructure.map((section, sectionIndex) => {\n                  const sectionId = section.title?.toLowerCase() || `section-${sectionIndex}`\n                  const isExpanded = expandedSections[sectionId] !== false\n\n                  return (\n                    <div key={sectionId} className=\"space-y-2\">\n                      {/* Section Title */}\n                      {section.title && (\n                        <button\n                          onClick={() => section.collapsible && toggleSection(sectionId)}\n                          className={cn(\n                            \"w-full flex items-center justify-between px-2 py-1\",\n                            section.collapsible && \"hover:bg-gray-50 rounded-lg cursor-pointer\"\n                          )}\n                        >\n                          <span className=\"text-xs font-bold text-gray-500 uppercase tracking-wider\">\n                            {section.title}\n                          </span>\n                          {section.collapsible && (\n                            isExpanded ? (\n                              <ChevronUp className=\"w-3 h-3 text-gray-400\" />\n                            ) : (\n                              <ChevronDown className=\"w-3 h-3 text-gray-400\" />\n                            )\n                          )}\n                        </button>\n                      )}\n\n                      {/* Section Items */}\n                      {isExpanded && (\n                        <div className=\"space-y-1\">\n                          {section.items.map((item) => {\n                            const isActive = pathname === item.href\n                            return (\n                              <Link\n                                key={item.href}\n                                href={item.href}\n                                onClick={() => setIsOpen(false)}\n                                className={cn(\n                                  \"flex items-center gap-3 px-4 py-3 rounded-xl font-medium transition-all\",\n                                  isActive\n                                    ? \"bg-gradient-to-r from-yellow-500/10 to-yellow-600/10 text-yellow-600 border border-yellow-500/20\"\n                                    : \"text-gray-700 hover:bg-gray-100 hover:text-gray-900\"\n                                )}\n                              >\n                                <item.icon className=\"w-5 h-5\" />\n                                {item.label}\n                              </Link>\n                            )\n                          })}\n                        </div>\n                      )}\n                    </div>\n                  )\n                })}\n              </nav>\n\n              {/* Footer */}\n              <div className=\"p-6 border-t border-gray-200\">\n                <button\n                  onClick={onSignOut}\n                  className=\"flex items-center gap-3 w-full px-4 py-3 text-red-600 hover:bg-red-50 rounded-xl font-medium transition-all\"\n                >\n                  <LogOut className=\"w-5 h-5\" />\n                  Se d√©connecter\n                </button>\n              </div>\n            </motion.div>\n          </>\n        )}\n      </AnimatePresence>\n    </>\n  )\n}\n","size_bytes":8937},"layout.tsx":{"content":"import type { Metadata } from \"next\";\nimport { Inter } from \"next/font/google\";\nimport \"./globals.css\";\nimport { Toaster } from \"sonner\";\nimport { ConditionalNavbar } from \"@/components/ConditionalNavbar\";\n\nconst inter = Inter({\n  subsets: [\"latin\"],\n  variable: \"--font-sans\",\n});\n\nexport const metadata: Metadata = {\n  title: \"Athlink - Le Profil Digital des Athl√®tes\",\n  description: \"Partage tes performances, trouve des sponsors, d√©veloppe ta communaut√©. Le link-in-bio con√ßu pour les sportifs.\",\n  keywords: [\"athl√®te\", \"running\", \"cyclisme\", \"triathlon\", \"link-in-bio\", \"sponsor\", \"performance\"],\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"fr\">\n      <body className={`${inter.variable} font-sans antialiased`}>\n        <ConditionalNavbar />\n        {children}\n        <Toaster position=\"top-center\" richColors />\n      </body>\n    </html>\n  );\n}\n","size_bytes":945},"components/ui-pro/scroll-to-top.tsx":{"content":"\"use client\"\n\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { ArrowUp } from \"lucide-react\"\nimport { useEffect, useState } from \"react\"\n\nexport function ScrollToTop() {\n  const [isVisible, setIsVisible] = useState(false)\n\n  useEffect(() => {\n    const toggleVisibility = () => {\n      if (window.pageYOffset > 300) {\n        setIsVisible(true)\n      } else {\n        setIsVisible(false)\n      }\n    }\n\n    window.addEventListener('scroll', toggleVisibility)\n    return () => window.removeEventListener('scroll', toggleVisibility)\n  }, [])\n\n  const scrollToTop = () => {\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    })\n  }\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.button\n          initial={{ opacity: 0, scale: 0.8, y: 20 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.8, y: 20 }}\n          whileHover={{ scale: 1.1, y: -2 }}\n          whileTap={{ scale: 0.9 }}\n          onClick={scrollToTop}\n          className=\"fixed bottom-6 left-6 z-40 w-12 h-12 md:w-14 md:h-14 rounded-full bg-white shadow-elevated hover:shadow-floating border-2 border-gray-200 flex items-center justify-center text-gray-700 hover:text-brand-blue-600 transition-colors group\"\n        >\n          <motion.div\n            animate={{ y: [0, -3, 0] }}\n            transition={{ duration: 1.5, repeat: Infinity, ease: \"easeInOut\" }}\n          >\n            <ArrowUp className=\"w-5 h-5 md:w-6 md:h-6\" />\n          </motion.div>\n        </motion.button>\n      )}\n    </AnimatePresence>\n  )\n}\n\n","size_bytes":1574},"components/ui-pro/sport-feature-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { LucideIcon } from \"lucide-react\"\n\ninterface SportFeatureCardProps {\n  icon: LucideIcon\n  title: string\n  description: string\n  color?: \"primary\" | \"accent\" | \"success\"\n  index?: number\n}\n\nexport function SportFeatureCard({\n  icon: Icon,\n  title,\n  description,\n  color = \"primary\",\n  index = 0\n}: SportFeatureCardProps) {\n  const colorClasses = {\n    primary: \"from-sport-primary-500 to-sport-primary-600\",\n    accent: \"from-sport-accent-500 to-sport-accent-600\",\n    success: \"from-sport-success-500 to-sport-success-600\"\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 30 }}\n      whileInView={{ opacity: 1, y: 0 }}\n      viewport={{ once: true }}\n      transition={{ duration: 0.5, delay: index * 0.1 }}\n      whileHover={{ y: -8 }}\n      className=\"group\"\n    >\n      <div className=\"relative h-full p-8 bg-white rounded-2xl shadow-sport-md hover:shadow-sport-lg transition-all duration-300\">\n        {/* Icon with gradient */}\n        <div className={`inline-flex p-4 rounded-2xl bg-gradient-to-br ${colorClasses[color]} mb-6 shadow-sport-md`}>\n          <Icon className=\"w-8 h-8 text-gray-900\" />\n        </div>\n\n        {/* Title */}\n        <h3 className=\"text-2xl font-bold text-gray-900 mb-3 group-hover:text-sport-primary-600 transition-colors\">\n          {title}\n        </h3>\n\n        {/* Description */}\n        <p className=\"text-gray-600 leading-relaxed\">\n          {description}\n        </p>\n\n        {/* Animated underline */}\n        <motion.div\n          className={`absolute bottom-0 left-0 h-1 bg-gradient-to-r ${colorClasses[color]}`}\n          initial={{ width: 0 }}\n          whileInView={{ width: \"100%\" }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6, delay: index * 0.1 + 0.3 }}\n        />\n      </div>\n    </motion.div>\n  )\n}\n","size_bytes":1862},"races/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { raceSchema } from \"@/lib/validations\"\n\n// GET all races\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        races: {\n          orderBy: { date: 'desc' }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ races: profile.races })\n\n  } catch (error) {\n    console.error(\"GET races error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// POST new race\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = raceSchema.parse(body)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Convert date string to Date object if needed\n    const raceDate = typeof validatedData.date === 'string' \n      ? new Date(validatedData.date) \n      : validatedData.date\n\n    const race = await prisma.race.create({\n      data: {\n        ...validatedData,\n        date: raceDate,\n        profileId: profile.id,\n      }\n    })\n\n    return NextResponse.json({ race }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"POST race error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2110},"coaching/upload-pdf/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { writeFile, mkdir } from \"fs/promises\"\nimport { join } from \"path\"\nimport { existsSync } from \"fs\"\n\n// Configuration pour permettre l'upload de fichiers jusqu'√† 50MB\nexport const runtime = 'nodejs'\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const formData = await request.formData()\n    const pdfFile = formData.get('pdfFile') as File | null\n    const planId = formData.get('planId') as string\n\n    if (!pdfFile) {\n      return NextResponse.json({ error: \"Aucun fichier PDF fourni\" }, { status: 400 })\n    }\n\n    if (!planId) {\n      return NextResponse.json({ error: \"ID du plan manquant\" }, { status: 400 })\n    }\n\n    // V√©rifier que le fichier est un PDF\n    if (pdfFile.type !== 'application/pdf') {\n      return NextResponse.json({ error: \"Le fichier doit √™tre un PDF\" }, { status: 400 })\n    }\n\n    // V√©rifier la taille du fichier (max 50MB)\n    if (pdfFile.size > 50 * 1024 * 1024) {\n      return NextResponse.json({ error: \"Le fichier est trop volumineux (max 50MB)\" }, { status: 400 })\n    }\n\n    // Cr√©er le dossier de stockage s'il n'existe pas\n    const uploadDir = join(process.cwd(), 'public', 'uploads', 'coaching', profile.id)\n    if (!existsSync(uploadDir)) {\n      await mkdir(uploadDir, { recursive: true })\n    }\n\n    // G√©n√©rer un nom de fichier unique\n    const timestamp = Date.now()\n    const randomString = Math.random().toString(36).substring(2, 15)\n    const fileName = `plan_${planId}_${timestamp}_${randomString}.pdf`\n    const filePath = join(uploadDir, fileName)\n\n    // Sauvegarder le fichier\n    const bytes = await pdfFile.arrayBuffer()\n    const buffer = Buffer.from(bytes)\n    await writeFile(filePath, buffer)\n\n    // G√©n√©rer l'URL publique\n    const publicUrl = `/uploads/coaching/${profile.id}/${fileName}`\n\n    return NextResponse.json({ \n      success: true, \n      fileName: fileName, // Nom du fichier g√©n√©r√©\n      originalName: pdfFile.name, // Nom original du fichier\n      fileUrl: publicUrl,\n      fileSize: pdfFile.size\n    })\n\n  } catch (error) {\n    console.error(\"Erreur lors de l'upload du PDF:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n","size_bytes":2791},"components/ui-pro/race-countdown-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { Calendar, MapPin, Ruler } from \"lucide-react\"\nimport { useEffect, useState } from \"react\"\n\ninterface Race {\n  id: string\n  name: string\n  date: Date\n  location: string | null\n  distance: string | null\n}\n\ninterface RaceCountdownCardProps {\n  race: Race\n}\n\nexport function RaceCountdownCard({ race }: RaceCountdownCardProps) {\n  const [timeLeft, setTimeLeft] = useState(calculateTimeLeft(race.date))\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setTimeLeft(calculateTimeLeft(race.date))\n    }, 1000)\n\n    return () => clearInterval(timer)\n  }, [race.date])\n\n  const daysUntil = Math.ceil((new Date(race.date).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n\n  return (\n    <motion.div\n      initial={{ y: 20, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      transition={{ duration: 0.5 }}\n      className=\"relative overflow-hidden rounded-3xl shadow-elevated\"\n    >\n      {/* Animated background gradient */}\n      <motion.div\n        className=\"absolute inset-0 bg-gradient-ocean\"\n        animate={{\n          backgroundPosition: [\"0% 50%\", \"100% 50%\", \"0% 50%\"],\n        }}\n        transition={{\n          duration: 10,\n          repeat: Infinity,\n          ease: \"linear\"\n        }}\n        style={{ backgroundSize: \"200% 200%\" }}\n      />\n\n      {/* Content */}\n      <div className=\"relative z-10 p-6 md:p-8 lg:p-10\">\n        <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-6\">\n          {/* Race Info */}\n          <div className=\"flex-1\">\n            <motion.div\n              initial={{ x: -20, opacity: 0 }}\n              animate={{ x: 0, opacity: 1 }}\n              transition={{ delay: 0.2 }}\n            >\n              <p className=\"text-xs md:text-sm opacity-80 mb-2 uppercase tracking-wider font-semibold text-gray-900\">\n                Prochaine Course\n              </p>\n              <h2 className=\"text-2xl md:text-3xl lg:text-4xl font-black mb-3 md:mb-4 text-gray-900\">\n                {race.name}\n              </h2>\n              <div className=\"flex flex-wrap gap-3 md:gap-4 text-sm md:text-base text-gray-900/90\">\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"w-4 h-4 md:w-5 md:h-5\" />\n                  <span className=\"font-semibold\">\n                    {new Date(race.date).toLocaleDateString('fr-FR', { \n                      day: 'numeric', \n                      month: 'long', \n                      year: 'numeric' \n                    })}\n                  </span>\n                </div>\n                {race.location && (\n                  <div className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-4 h-4 md:w-5 md:h-5\" />\n                    <span className=\"font-semibold\">{race.location}</span>\n                  </div>\n                )}\n                {race.distance && (\n                  <div className=\"flex items-center gap-2\">\n                    <Ruler className=\"w-4 h-4 md:w-5 md:h-5\" />\n                    <span className=\"font-semibold\">{race.distance}</span>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Countdown Display */}\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: 0.4, type: \"spring\", damping: 15 }}\n            className=\"w-full lg:w-auto\"\n          >\n            {daysUntil > 7 ? (\n              // Show days for races more than a week away\n              <div className=\"text-center bg-white/25 backdrop-blur-md rounded-2xl px-8 py-6 md:px-10 md:py-8 min-w-[160px] border-2 border-white/30 shadow-elevated\">\n                <motion.p \n                  key={daysUntil}\n                  initial={{ scale: 1.2, opacity: 0 }}\n                  animate={{ scale: 1, opacity: 1 }}\n                  className=\"text-5xl md:text-6xl font-black mb-2 text-gray-900\"\n                >\n                  {daysUntil}\n                </motion.p>\n                <p className=\"text-xs md:text-sm font-bold uppercase tracking-wide text-gray-900/80\">\n                  {daysUntil === 1 ? 'jour' : 'jours'}\n                </p>\n              </div>\n            ) : (\n              // Show detailed countdown for races within a week\n              <div className=\"grid grid-cols-4 gap-2 md:gap-3\">\n                {[\n                  { label: 'Jours', value: timeLeft.days },\n                  { label: 'Heures', value: timeLeft.hours },\n                  { label: 'Min', value: timeLeft.minutes },\n                  { label: 'Sec', value: timeLeft.seconds },\n                ].map((item, index) => (\n                  <motion.div\n                    key={item.label}\n                    initial={{ y: 20, opacity: 0 }}\n                    animate={{ y: 0, opacity: 1 }}\n                    transition={{ delay: 0.5 + index * 0.1 }}\n                    className=\"text-center bg-white/25 backdrop-blur-md rounded-xl px-3 py-3 md:px-4 md:py-4 border-2 border-white/30\"\n                  >\n                    <motion.p \n                      key={item.value}\n                      initial={{ scale: 1.2, opacity: 0 }}\n                      animate={{ scale: 1, opacity: 1 }}\n                      className=\"text-2xl md:text-3xl font-black mb-1 text-gray-900\"\n                    >\n                      {String(item.value).padStart(2, '0')}\n                    </motion.p>\n                    <p className=\"text-[10px] md:text-xs font-bold uppercase tracking-wide text-gray-900/70\">\n                      {item.label}\n                    </p>\n                  </motion.div>\n                ))}\n              </div>\n            )}\n          </motion.div>\n        </div>\n\n        {/* Progress bar */}\n        {daysUntil <= 30 && (\n          <motion.div\n            initial={{ scaleX: 0, opacity: 0 }}\n            animate={{ scaleX: 1, opacity: 1 }}\n            transition={{ delay: 0.8, duration: 1 }}\n            className=\"mt-6 md:mt-8\"\n          >\n            <div className=\"h-2 bg-white/20 rounded-full overflow-hidden\">\n              <motion.div\n                initial={{ width: 0 }}\n                animate={{ width: `${Math.max(0, 100 - (daysUntil / 30) * 100)}%` }}\n                transition={{ delay: 1, duration: 1.5, ease: \"easeOut\" }}\n                className=\"h-full bg-white/80 rounded-full shadow-glow-blue\"\n              />\n            </div>\n            <p className=\"text-xs text-gray-900/70 mt-2 font-semibold text-center\">\n              {Math.max(0, Math.round(100 - (daysUntil / 30) * 100))}% avant le jour J\n            </p>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Animated particles */}\n      <div className=\"absolute inset-0 pointer-events-none overflow-hidden\">\n        {[...Array(8)].map((_, i) => (\n          <motion.div\n            key={i}\n            className=\"absolute w-2 h-2 bg-white/20 rounded-full\"\n            animate={{\n              x: [Math.random() * 100 + '%', Math.random() * 100 + '%'],\n              y: [Math.random() * 100 + '%', Math.random() * 100 + '%'],\n              scale: [0, 1, 0],\n            }}\n            transition={{\n              duration: 3 + Math.random() * 2,\n              repeat: Infinity,\n              delay: i * 0.3,\n            }}\n          />\n        ))}\n      </div>\n    </motion.div>\n  )\n}\n\nfunction calculateTimeLeft(targetDate: Date) {\n  const difference = new Date(targetDate).getTime() - Date.now()\n  \n  if (difference <= 0) {\n    return { days: 0, hours: 0, minutes: 0, seconds: 0 }\n  }\n\n  return {\n    days: Math.floor(difference / (1000 * 60 * 60 * 24)),\n    hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\n    minutes: Math.floor((difference / 1000 / 60) % 60),\n    seconds: Math.floor((difference / 1000) % 60)\n  }\n}\n\n","size_bytes":7866},"components/ui-pro/section-header.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { Link as LinkIcon, Award, ImageIcon, Calendar } from \"lucide-react\"\n\ninterface SectionHeaderProps {\n  title: string\n  count?: number\n  iconName?: \"link\" | \"award\" | \"image\" | \"calendar\"\n  gradient?: string\n  badgeColor?: {\n    bg: string\n    text: string\n  }\n}\n\nconst iconMap = {\n  link: LinkIcon,\n  award: Award,\n  image: ImageIcon,\n  calendar: Calendar,\n}\n\nexport function SectionHeader({ \n  title, \n  count, \n  iconName,\n  gradient = \"from-primary-600 to-quaternary-600\",\n  badgeColor = { bg: \"bg-brand-blue-100\", text: \"text-brand-blue-700\" }\n}: SectionHeaderProps) {\n  const Icon = iconName ? iconMap[iconName] : null\n\n  return (\n    <motion.div\n      initial={{ y: 20, opacity: 0 }}\n      whileInView={{ y: 0, opacity: 1 }}\n      viewport={{ once: true }}\n      transition={{ duration: 0.5 }}\n      className=\"flex items-center justify-between mb-6 md:mb-8\"\n    >\n      <div className=\"flex items-center gap-3\">\n        {Icon && (\n          <motion.div\n            initial={{ scale: 0, rotate: -180 }}\n            whileInView={{ scale: 1, rotate: 0 }}\n            viewport={{ once: true }}\n            transition={{ type: \"spring\", damping: 15 }}\n            className={`p-2.5 md:p-3 rounded-xl bg-gradient-to-br ${gradient} shadow-standard`}\n          >\n            <Icon className=\"w-5 h-5 md:w-6 md:h-6 text-gray-900\" />\n          </motion.div>\n        )}\n        <h2 className={`text-2xl md:text-3xl font-bold bg-gradient-to-r ${gradient} bg-clip-text text-transparent`}>\n          {title}\n        </h2>\n      </div>\n\n      {count !== undefined && (\n        <motion.div\n          initial={{ scale: 0 }}\n          whileInView={{ scale: 1 }}\n          viewport={{ once: true }}\n          transition={{ type: \"spring\", damping: 15, delay: 0.1 }}\n          className={`${badgeColor.bg} ${badgeColor.text} px-4 py-2 rounded-full text-sm md:text-base font-bold shadow-standard`}\n        >\n          {count}\n        </motion.div>\n      )}\n    </motion.div>\n  )\n}\n\n","size_bytes":2028},"(dashboard)/dashboard/settings/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { SettingsClient } from \"./settings-client\"\n\nexport default async function SettingsPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      id: true,\n      username: true,\n      plan: true,\n      theme: true,\n      isPublic: true,\n      customDomain: true,\n      stats: true\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  // Extraire les donn√©es du code promo depuis stats\n  const stats = profile.stats as any\n  const promoCodeUsed = stats?.promoCodeUsed || null\n  const trialEndsAt = stats?.trialEndsAt || null\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-10 -mt-10 px-10 pt-12 pb-24 mb-12 bg-gradient-hero rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <h1 className=\"text-4xl font-black mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n            Param√®tres\n          </h1>\n          <p className=\"text-lg text-primary-600 font-semibold\">\n            Personnalisez votre exp√©rience et g√©rez vos pr√©f√©rences\n          </p>\n        </div>\n      </div>\n\n      <SettingsClient \n        profileId={profile.id}\n        username={profile.username}\n        userPlan={profile.plan as \"FREE\" | \"PRO\" | \"ELITE\"}\n        initialCustomDomain={profile.customDomain || \"\"}\n        promoCodeUsed={promoCodeUsed}\n        trialEndsAt={trialEndsAt}\n      />\n    </div>\n  )\n}","size_bytes":1983},"components/ui-pro/glass-link-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { ExternalLink, TrendingUp } from \"lucide-react\"\nimport { useState } from \"react\"\n\ninterface GlassLinkCardProps {\n  id: string\n  title: string\n  description?: string\n  url: string\n  icon?: string\n  clicks: number\n  index: number\n}\n\nexport function GlassLinkCard({ id, title, description, url, icon, clicks, index }: GlassLinkCardProps) {\n  const [isHovered, setIsHovered] = useState(false)\n\n  const handleClick = async () => {\n    try {\n      await fetch(`/api/links/${id}/click`, { method: 'POST' })\n    } catch (err) {\n      console.error('Failed to track click', err)\n    }\n  }\n\n  return (\n    <motion.a\n      href={url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={handleClick}\n      initial={{ opacity: 0, y: 20 }}\n      whileInView={{ opacity: 1, y: 0 }}\n      viewport={{ once: true }}\n      transition={{ delay: index * 0.05 }}\n      whileHover={{ y: -4, scale: 1.01 }}\n      whileTap={{ scale: 0.99 }}\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      className=\"block group\"\n    >\n      <div className=\"backdrop-blur-xl bg-white/5 hover:bg-white/10 border border-yellow-500/20 hover:border-yellow-500/40 rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 p-3 md:p-4 relative overflow-hidden\">\n        {/* Gradient overlay on hover */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: isHovered ? 1 : 0 }}\n          className=\"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-yellow-600/10 pointer-events-none\"\n        />\n\n        <div className=\"relative flex items-center gap-3\">\n          {/* Icon */}\n          <motion.div\n            animate={{ rotate: isHovered ? 5 : 0 }}\n            className=\"text-2xl flex-shrink-0\"\n          >\n            {icon || \"\"}\n          </motion.div>\n\n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <h3 className=\"font-bold text-sm md:text-base text-white truncate group-hover:text-yellow-500 transition-colors\">\n                {title}\n              </h3>\n              <motion.div\n                initial={{ x: -5, opacity: 0 }}\n                animate={{ x: isHovered ? 0 : -5, opacity: isHovered ? 1 : 0 }}\n              >\n                <ExternalLink className=\"w-4 h-4 text-yellow-500 flex-shrink-0\" />\n              </motion.div>\n            </div>\n\n            {description && (\n              <p className=\"text-xs text-gray-400 truncate mb-1\">\n                {description}\n              </p>\n            )}\n\n            {/* Clicks counter */}\n            <motion.div\n              initial={{ opacity: 0, y: 5 }}\n              animate={{ opacity: isHovered ? 1 : 0.7, y: 0 }}\n              className=\"flex items-center gap-1.5 text-xs text-gray-500\"\n            >\n              <TrendingUp className=\"w-3.5 h-3.5\" />\n              <span className=\"font-medium\">{clicks} clics</span>\n            </motion.div>\n          </div>\n\n          {/* Arrow */}\n          <motion.div\n            animate={{ x: isHovered ? 5 : 0 }}\n            className=\"text-gray-600 group-hover:text-yellow-500 transition-colors flex-shrink-0\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </motion.div>\n        </div>\n\n        {/* Bottom gradient bar */}\n        <motion.div\n          initial={{ scaleX: 0 }}\n          animate={{ scaleX: isHovered ? 1 : 0 }}\n          transition={{ duration: 0.3 }}\n          className=\"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-yellow-500 to-yellow-600 origin-left\"\n        />\n      </div>\n    </motion.a>\n  )\n}\n\n","size_bytes":3867},"components/analytics/click-tracker.tsx":{"content":"\"use client\"\n\nimport { useEffect, useRef } from \"react\"\n\ninterface ClickTrackerProps {\n  profileId: string\n  children: React.ReactNode\n}\n\nexport function ClickTracker({ profileId, children }: ClickTrackerProps) {\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    const container = containerRef.current\n    if (!container) return\n\n    const handleClick = async (e: MouseEvent) => {\n      // Calculer la position relative en pourcentage\n      const rect = container.getBoundingClientRect()\n      const x = ((e.clientX - rect.left) / rect.width) * 100\n      const y = ((e.clientY - rect.top) / rect.height) * 100\n\n      // D√©terminer l'√©l√©ment cliqu√©\n      const target = e.target as HTMLElement\n      let element = 'unknown'\n      \n      if (target.closest('[data-link-card]')) {\n        element = 'link'\n      } else if (target.closest('[data-sponsor]')) {\n        element = 'sponsor'\n      } else if (target.closest('[data-media]')) {\n        element = 'media'\n      } else if (target.closest('[data-race]')) {\n        element = 'race'\n      } else if (target.closest('header')) {\n        element = 'header'\n      }\n\n      // R√©cup√©rer le linkId si c'est un lien\n      const linkCard = target.closest('[data-link-id]')\n      const linkId = linkCard?.getAttribute('data-link-id') || undefined\n\n      try {\n        await fetch('/api/analytics/track-click', {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({\n            profileId,\n            linkId,\n            x: Math.round(x * 10) / 10,\n            y: Math.round(y * 10) / 10,\n            element,\n            userAgent: navigator.userAgent\n          })\n        })\n      } catch (error) {\n        console.error('Erreur tracking click:', error)\n      }\n    }\n\n    container.addEventListener('click', handleClick)\n    return () => container.removeEventListener('click', handleClick)\n  }, [profileId])\n\n  return (\n    <div ref={containerRef} className=\"w-full\">\n      {children}\n    </div>\n  )\n}\n\n","size_bytes":2048},"deployment/security/security-checklist.md":{"content":"# üîí Security Checklist for AthLink\n\n## Environment Security\n- [ ] All secrets stored in environment variables\n- [ ] No hardcoded credentials in code\n- [ ] Database credentials secured\n- [ ] API keys rotated regularly\n\n## Authentication & Authorization\n- [ ] NextAuth properly configured\n- [ ] OAuth providers secured\n- [ ] Session management implemented\n- [ ] Row Level Security (RLS) enabled on Supabase\n\n## Data Protection\n- [ ] User data encrypted at rest\n- [ ] HTTPS enforced\n- [ ] Input validation implemented\n- [ ] SQL injection prevention\n\n## API Security\n- [ ] Rate limiting implemented\n- [ ] CORS properly configured\n- [ ] API endpoints secured\n- [ ] Request validation\n\n## Monitoring\n- [ ] Error logging enabled\n- [ ] Security alerts configured\n- [ ] Performance monitoring\n- [ ] Uptime monitoring\n\n## Compliance\n- [ ] GDPR compliance\n- [ ] Data retention policies\n- [ ] User consent management\n- [ ] Privacy policy updated\n","size_bytes":937},"sponsors/extract-logo/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport * as cheerio from \"cheerio\"\n\ninterface LogoResult {\n  logoUrl: string | null\n  method: \"scraping\" | \"opengraph\" | \"favicon\" | \"clearbit\" | \"none\"\n  confidence: \"high\" | \"medium\" | \"low\"\n  brandName?: string\n  message?: string\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { websiteUrl, brandName } = await req.json()\n\n    if (!websiteUrl) {\n      return NextResponse.json(\n        { error: \"URL du site web requise\" },\n        { status: 400 }\n      )\n    }\n\n    // Normaliser l'URL\n    const normalizedUrl = normalizeUrl(websiteUrl)\n    console.log(`üîç Extraction du logo pour: ${normalizedUrl}`)\n\n    // 0Ô∏è‚É£ PRIORIT√â 0: Clearbit API (rapide et fiable)\n    const clearbitLogo = getClearbitLogo(normalizedUrl)\n    if (await isImageValid(clearbitLogo)) {\n      console.log(`‚úÖ Logo trouv√© via Clearbit: ${clearbitLogo}`)\n      return NextResponse.json({\n        logoUrl: clearbitLogo,\n        method: \"clearbit\",\n        confidence: \"high\"\n      })\n    }\n\n    // 1Ô∏è‚É£ PRIORIT√â 1: Scraping intelligent du site\n    const scrapedLogo = await scrapeLogo(normalizedUrl, brandName)\n    if (scrapedLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via scraping: ${scrapedLogo.logoUrl}`)\n      return NextResponse.json(scrapedLogo)\n    }\n\n    // 2Ô∏è‚É£ PRIORIT√â 2: Open Graph meta tags\n    const ogLogo = await extractOpenGraph(normalizedUrl)\n    if (ogLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via Open Graph: ${ogLogo.logoUrl}`)\n      return NextResponse.json(ogLogo)\n    }\n\n    // 3Ô∏è‚É£ PRIORIT√â 3: Favicon (derni√®re option)\n    const faviconLogo = await extractFavicon(normalizedUrl)\n    if (faviconLogo.logoUrl) {\n      console.log(`‚úÖ Favicon trouv√©: ${faviconLogo.logoUrl}`)\n      return NextResponse.json(faviconLogo)\n    }\n\n    // ‚ùå Aucun logo trouv√©\n    console.log(`‚ùå Aucun logo trouv√© pour ${normalizedUrl}`)\n    return NextResponse.json({\n      logoUrl: null,\n      method: \"none\",\n      confidence: \"low\",\n      message: \"Aucun logo trouv√©. Upload manuel recommand√©.\"\n    })\n\n  } catch (error: any) {\n    console.error(\"‚ùå Erreur extraction:\", error.message)\n    return NextResponse.json(\n      { \n        error: \"Erreur lors de l'extraction\", \n        details: error.message \n      },\n      { status: 500 }\n    )\n  }\n}\n\n// ==========================================\n// üéØ CLEARBIT API\n// ==========================================\nfunction getClearbitLogo(url: string): string {\n  try {\n    const urlObj = new URL(url)\n    return `https://logo.clearbit.com/${urlObj.hostname}`\n  } catch {\n    return \"\"\n  }\n}\n\n// ==========================================\n// üéØ SCRAPING INTELLIGENT DU SITE\n// ==========================================\nasync function scrapeLogo(url: string, brandName?: string): Promise<LogoResult> {\n  try {\n    console.log(`üìÑ Chargement de la page: ${url}`)\n\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n        'Accept-Language': 'fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7',\n      },\n      signal: AbortSignal.timeout(10000),\n    })\n\n    if (!response.ok) {\n      console.log(`‚ö†Ô∏è Response status: ${response.status}`)\n      return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n    }\n\n    const html = await response.text()\n    const $ = cheerio.load(html)\n\n    console.log(`üìä Page charg√©e, taille: ${html.length} caract√®res`)\n\n    const logoSelectors = [\n      'img.logo',\n      'img.site-logo',\n      'img.header-logo',\n      'img.navbar-logo',\n      'img.brand-logo',\n      'img[class*=\"logo\"]',\n      'img[class*=\"Logo\"]',\n      'img[class*=\"brand\"]',\n      '.logo img',\n      '.site-logo img',\n      '.header-logo img',\n      '.navbar-brand img',\n      'header .logo img',\n      'nav .logo img',\n      '#logo',\n      '#site-logo',\n      '#logo img',\n      'img[alt*=\"logo\" i]',\n      'img[alt*=\"Logo\" i]',\n      ...(brandName ? [\n        `img[alt*=\"${brandName}\" i]`,\n        `img[title*=\"${brandName}\" i]`,\n      ] : []),\n    ]\n\n    console.log(`üîç Test de ${logoSelectors.length} s√©lecteurs...`)\n\n    for (const selector of logoSelectors) {\n      const elements = $(selector)\n      \n      if (elements.length > 0) {\n        console.log(`‚úì Trouv√© ${elements.length} √©l√©ment(s) avec: ${selector}`)\n        \n        const element = elements.first()\n        let logoUrl: string | null = null\n\n        if (element.is('img')) {\n          logoUrl = element.attr('src') || \n                    element.attr('data-src') || \n                    element.attr('data-lazy-src') || \n                    null\n        }\n\n        if (logoUrl) {\n          logoUrl = makeAbsoluteUrl(logoUrl, url)\n          \n          if (await isImageValid(logoUrl)) {\n            console.log(`‚úÖ Logo valide trouv√©: ${logoUrl}`)\n            return {\n              logoUrl,\n              method: \"scraping\",\n              confidence: \"high\"\n            }\n          }\n        }\n      }\n    }\n\n    // Recherche dans header/nav\n    const headerImages = $('header img, nav img, [role=\"banner\"] img').toArray()\n    console.log(`üì∏ ${headerImages.length} images trouv√©es dans header/nav`)\n\n    for (const img of headerImages.slice(0, 3)) {\n      const src = $(img).attr('src') || $(img).attr('data-src')\n      \n      if (src) {\n        const absoluteUrl = makeAbsoluteUrl(src, url)\n        \n        if (await isImageValid(absoluteUrl)) {\n          console.log(`‚úÖ Logo trouv√© dans header: ${absoluteUrl}`)\n          return {\n            logoUrl: absoluteUrl,\n            method: \"scraping\",\n            confidence: \"medium\"\n          }\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n\n  } catch (error: any) {\n    console.error(`‚ùå Erreur scraping:`, error.message)\n    return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üè∑Ô∏è OPEN GRAPH META TAGS\n// ==========================================\nasync function extractOpenGraph(url: string): Promise<LogoResult> {\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      },\n      signal: AbortSignal.timeout(10000)\n    })\n\n    if (!response.ok) {\n      return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n    }\n\n    const html = await response.text()\n    const $ = cheerio.load(html)\n\n    const ogImage = \n      $('meta[property=\"og:image\"]').attr('content') ||\n      $('meta[property=\"twitter:image\"]').attr('content') ||\n      $('meta[itemprop=\"image\"]').attr('content')\n\n    if (ogImage) {\n      const absoluteUrl = makeAbsoluteUrl(ogImage, url)\n      \n      if (await isImageValid(absoluteUrl)) {\n        return {\n          logoUrl: absoluteUrl,\n          method: \"opengraph\",\n          confidence: \"medium\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üé® FAVICON\n// ==========================================\nasync function extractFavicon(url: string): Promise<LogoResult> {\n  try {\n    const domain = new URL(url).origin\n    \n    const faviconUrls = [\n      `${domain}/favicon.svg`,\n      `${domain}/favicon.png`,\n      `${domain}/apple-touch-icon.png`,\n      `${domain}/favicon-192x192.png`,\n    ]\n\n    for (const faviconUrl of faviconUrls) {\n      if (await isImageValid(faviconUrl)) {\n        return {\n          logoUrl: faviconUrl,\n          method: \"favicon\",\n          confidence: \"low\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"favicon\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"favicon\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üõ†Ô∏è UTILITAIRES\n// ==========================================\n\nfunction normalizeUrl(url: string): string {\n  url = url.trim()\n  \n  if (!url.startsWith('http://') && !url.startsWith('https://')) {\n    url = 'https://' + url\n  }\n  \n  try {\n    const urlObj = new URL(url)\n    return urlObj.href\n  } catch {\n    return 'https://' + url\n  }\n}\n\nfunction makeAbsoluteUrl(relativeUrl: string, baseUrl: string): string {\n  try {\n    if (relativeUrl.startsWith('http://') || relativeUrl.startsWith('https://')) {\n      return relativeUrl\n    }\n    \n    if (relativeUrl.startsWith('//')) {\n      return 'https:' + relativeUrl\n    }\n    \n    if (relativeUrl.startsWith('data:')) {\n      return relativeUrl\n    }\n    \n    const base = new URL(baseUrl)\n    \n    if (relativeUrl.startsWith('/')) {\n      return base.origin + relativeUrl\n    }\n    \n    return new URL(relativeUrl, baseUrl).href\n    \n  } catch (error) {\n    return relativeUrl\n  }\n}\n\nasync function isImageValid(url: string): Promise<boolean> {\n  try {\n    if (url.startsWith('data:')) {\n      return false\n    }\n\n    const response = await fetch(url, {\n      method: 'HEAD',\n      signal: AbortSignal.timeout(5000)\n    })\n    \n    if (!response.ok) {\n      return false\n    }\n\n    const contentType = response.headers.get('content-type') || ''\n    return contentType.startsWith('image/')\n\n  } catch (error) {\n    return false\n  }\n}\n","size_bytes":9507},"[username]/coaching/pdf-purchase-modal.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { X, Download, Lock, CreditCard, Check, AlertCircle } from \"lucide-react\"\n\ninterface TrainingPlan {\n  id: string\n  title: string\n  description: string\n  price: number\n  pdfFileName?: string\n}\n\ninterface PdfPurchaseModalProps {\n  plan: TrainingPlan | null\n  isOpen: boolean\n  onClose: () => void\n  coachName: string\n}\n\nexport function PdfPurchaseModal({ plan, isOpen, onClose, coachName }: PdfPurchaseModalProps) {\n  const [formData, setFormData] = useState({\n    clientName: \"\",\n    clientEmail: \"\",\n    clientPhone: \"\"\n  })\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [paymentSuccess, setPaymentSuccess] = useState(false)\n  const [error, setError] = useState(\"\")\n\n  if (!plan) return null\n\n  const handlePurchase = async () => {\n    if (!formData.clientName || !formData.clientEmail) {\n      setError(\"Veuillez remplir tous les champs obligatoires\")\n      return\n    }\n\n    setIsProcessing(true)\n    setError(\"\")\n\n    try {\n      const response = await fetch(\"/api/coaching/access-pdf\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          planId: plan.id,\n          clientEmail: formData.clientEmail,\n          clientName: formData.clientName\n        })\n      })\n\n      const result = await response.json()\n\n      if (result.success) {\n        setPaymentSuccess(true)\n        // Rediriger vers le PDF apr√®s 2 secondes\n        setTimeout(() => {\n          window.open(result.pdfUrl, '_blank')\n        }, 2000)\n      } else {\n        setError(result.error || \"Erreur lors du paiement\")\n      }\n    } catch (error) {\n      setError(\"Une erreur est survenue\")\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const handleClose = () => {\n    setFormData({ clientName: \"\", clientEmail: \"\", clientPhone: \"\" })\n    setError(\"\")\n    setPaymentSuccess(false)\n    onClose()\n  }\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50\"\n          onClick={handleClose}\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.9, opacity: 0 }}\n            className=\"bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary-blue-500 to-primary-blue-600 flex items-center justify-center\">\n                  <Lock className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900\">Acc√®s Payant</h3>\n                  <p className=\"text-sm text-gray-600\">Contenu premium</p>\n                </div>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n\n            {paymentSuccess ? (\n              /* Succ√®s */\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"text-center py-8\"\n              >\n                <div className=\"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4\">\n                  <Check className=\"w-8 h-8 text-green-600\" />\n                </div>\n                <h4 className=\"text-xl font-bold text-gray-900 mb-2\">Paiement R√©ussi !</h4>\n                <p className=\"text-gray-600 mb-4\">\n                  Vous allez √™tre redirig√© vers le PDF dans quelques secondes...\n                </p>\n                <div className=\"bg-green-50 rounded-xl p-4\">\n                  <p className=\"text-sm text-green-700\">\n                    <strong>Acc√®s valide 24h</strong> - T√©l√©chargez votre PDF maintenant\n                  </p>\n                </div>\n              </motion.div>\n            ) : (\n              /* Formulaire de paiement */\n              <>\n                {/* Plan Info */}\n                <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 mb-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h4 className=\"font-bold text-gray-900\">{plan.title}</h4>\n                    <div className=\"flex items-center gap-2\">\n                      <Download className=\"w-4 h-4 text-gray-500\" />\n                      <span className=\"text-xs text-gray-500\">PDF</span>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{plan.description}</p>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-500\">Coach: {coachName}</span>\n                    <div className=\"text-right\">\n                      <div className=\"text-2xl font-bold text-primary-blue-600\">{plan.price}‚Ç¨</div>\n                      <div className=\"text-xs text-gray-500\">Acc√®s 24h</div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Formulaire */}\n                <div className=\"space-y-4 mb-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Nom complet *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={formData.clientName}\n                      onChange={(e) => setFormData({ ...formData, clientName: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"Jean Dupont\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Email *\n                    </label>\n                    <input\n                      type=\"email\"\n                      value={formData.clientEmail}\n                      onChange={(e) => setFormData({ ...formData, clientEmail: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"jean@example.com\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      T√©l√©phone (optionnel)\n                    </label>\n                    <input\n                      type=\"tel\"\n                      value={formData.clientPhone}\n                      onChange={(e) => setFormData({ ...formData, clientPhone: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"+33 6 12 34 56 78\"\n                    />\n                  </div>\n                </div>\n\n                {/* Erreur */}\n                {error && (\n                  <motion.div\n                    initial={{ opacity: 0, y: -10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <AlertCircle className=\"w-4 h-4 text-red-600\" />\n                      <p className=\"text-sm text-red-700\">{error}</p>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Paiement Info */}\n                <div className=\"bg-blue-50 rounded-xl p-4 mb-6\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <CreditCard className=\"w-4 h-4 text-primary-blue-600\" />\n                    <span className=\"text-sm font-medium text-primary-blue-700\">Paiement S√©curis√©</span>\n                  </div>\n                  <p className=\"text-xs text-blue-600\">\n                    Mode d√©mo - Le paiement est simul√©. En production, Stripe sera int√©gr√©.\n                  </p>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={handleClose}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={handlePurchase}\n                    disabled={isProcessing || !formData.clientName || !formData.clientEmail}\n                    className=\"flex-1 px-6 py-3 bg-gradient-to-r from-primary-blue-600 to-primary-blue-700 text-white rounded-xl font-bold hover:from-primary-blue-700 hover:to-primary-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                  >\n                    {isProcessing ? (\n                      <>\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                        Traitement...\n                      </>\n                    ) : (\n                      <>\n                        <CreditCard className=\"w-4 h-4\" />\n                        Payer {plan.price}‚Ç¨\n                      </>\n                    )}\n                  </button>\n                </div>\n              </>\n            )}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  )\n}\n\n","size_bytes":10251},"lib/brands.ts":{"content":"// Base de donn√©es des marques sportives populaires\nexport interface Brand {\n  name: string\n  website: string\n  logo?: string\n  category: string\n}\n\nexport const sportBrands: Brand[] = [\n  // √âquipementiers majeurs\n  { name: \"Nike\", website: \"https://www.nike.com\", category: \"√âquipementier\" },\n  { name: \"Adidas\", website: \"https://www.adidas.com\", category: \"√âquipementier\" },\n  { name: \"Asics\", website: \"https://www.asics.com\", category: \"√âquipementier\" },\n  { name: \"New Balance\", website: \"https://www.newbalance.com\", category: \"√âquipementier\" },\n  { name: \"Puma\", website: \"https://www.puma.com\", category: \"√âquipementier\" },\n  { name: \"Under Armour\", website: \"https://www.underarmour.com\", category: \"√âquipementier\" },\n  { name: \"Reebok\", website: \"https://www.reebok.com\", category: \"√âquipementier\" },\n  { name: \"Salomon\", website: \"https://www.salomon.com\", category: \"√âquipementier\" },\n  { name: \"Brooks\", website: \"https://www.brooksrunning.com\", category: \"Running\" },\n  { name: \"Hoka\", website: \"https://www.hoka.com\", category: \"Running\" },\n  { name: \"On Running\", website: \"https://www.on-running.com\", category: \"Running\" },\n  { name: \"Saucony\", website: \"https://www.saucony.com\", category: \"Running\" },\n  \n  // Cyclisme\n  { name: \"Specialized\", website: \"https://www.specialized.com\", category: \"Cyclisme\" },\n  { name: \"Trek\", website: \"https://www.trekbikes.com\", category: \"Cyclisme\" },\n  { name: \"Giant\", website: \"https://www.giant-bicycles.com\", category: \"Cyclisme\" },\n  { name: \"Cannondale\", website: \"https://www.cannondale.com\", category: \"Cyclisme\" },\n  { name: \"Shimano\", website: \"https://www.shimano.com\", category: \"Cyclisme\" },\n  { name: \"Canyon\", website: \"https://www.canyon.com\", category: \"Cyclisme\" },\n  { name: \"Wahoo\", website: \"https://www.wahoofitness.com\", category: \"Tech cyclisme\" },\n  \n  // Nutrition sportive\n  { name: \"GU Energy\", website: \"https://www.guenergy.com\", category: \"Nutrition\" },\n  { name: \"Maurten\", website: \"https://www.maurten.com\", category: \"Nutrition\" },\n  { name: \"SIS\", website: \"https://www.scienceinsport.com\", category: \"Nutrition\" },\n  { name: \"Overstim.s\", website: \"https://www.overstims.com\", category: \"Nutrition\" },\n  { name: \"Aptonia\", website: \"https://www.decathlon.fr/aptonia\", category: \"Nutrition\" },\n  { name: \"Powerbar\", website: \"https://www.powerbar.com\", category: \"Nutrition\" },\n  \n  // Montres & Tech\n  { name: \"Garmin\", website: \"https://www.garmin.com\", category: \"Technologie\" },\n  { name: \"Polar\", website: \"https://www.polar.com\", category: \"Technologie\" },\n  { name: \"Suunto\", website: \"https://www.suunto.com\", category: \"Technologie\" },\n  { name: \"Coros\", website: \"https://www.coros.com\", category: \"Technologie\" },\n  { name: \"Apple\", website: \"https://www.apple.com\", category: \"Technologie\" },\n  { name: \"Strava\", website: \"https://www.strava.com\", category: \"App\" },\n  \n  // Triathlon\n  { name: \"Zoot\", website: \"https://www.zootsports.com\", category: \"Triathlon\" },\n  { name: \"2XU\", website: \"https://www.2xu.com\", category: \"Triathlon\" },\n  { name: \"Zone3\", website: \"https://www.zone3.com\", category: \"Triathlon\" },\n  { name: \"Orca\", website: \"https://www.orca.com\", category: \"Triathlon\" },\n  \n  // Accessoires\n  { name: \"Compressport\", website: \"https://www.compressport.com\", category: \"Accessoires\" },\n  { name: \"CEP\", website: \"https://www.cepsports.com\", category: \"Compression\" },\n  { name: \"Buff\", website: \"https://www.buff.com\", category: \"Accessoires\" },\n  { name: \"Oakley\", website: \"https://www.oakley.com\", category: \"Lunettes\" },\n  \n  // Distributeurs\n  { name: \"Decathlon\", website: \"https://www.decathlon.fr\", category: \"Distributeur\" },\n  { name: \"Go Sport\", website: \"https://www.go-sport.com\", category: \"Distributeur\" },\n  { name: \"I-Run\", website: \"https://www.i-run.fr\", category: \"Distributeur\" },\n]\n\n// Fonction pour rechercher une marque par nom\nexport function searchBrand(query: string): Brand[] {\n  const lowerQuery = query.toLowerCase().trim()\n  if (!lowerQuery) return []\n  \n  return sportBrands.filter(brand => \n    brand.name.toLowerCase().includes(lowerQuery)\n  ).slice(0, 5) // Limiter √† 5 r√©sultats\n}\n\n// Fonction pour obtenir le logo depuis Clearbit\nexport function getBrandLogoUrl(website: string): string {\n  try {\n    const url = new URL(website)\n    return `https://logo.clearbit.com/${url.hostname}`\n  } catch {\n    return \"\"\n  }\n}\n","size_bytes":4395},"components/ui-pro/stats-progress-grid.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { AdvancedProgressBar } from \"./advanced-progress-bar\"\n\ninterface StatGoal {\n  id: string\n  label: string\n  current: number\n  target: number\n  unit?: string\n  color?: \"blue\" | \"orange\" | \"green\" | \"purple\" | \"red\"\n  icon?: string\n  description?: string\n}\n\ninterface StatsProgressGridProps {\n  goals: StatGoal[]\n  title?: string\n  columns?: 1 | 2 | 3\n}\n\nexport function StatsProgressGrid({\n  goals,\n  title = \"Progression des objectifs\",\n  columns = 2\n}: StatsProgressGridProps) {\n  const gridCols = {\n    1: \"grid-cols-1\",\n    2: \"grid-cols-1 md:grid-cols-2\", \n    3: \"grid-cols-1 md:grid-cols-2 lg:grid-cols-3\"\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.6 }}\n      className=\"bg-white rounded-2xl shadow-lg p-6 border border-gray-100\"\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-xl font-bold text-gray-800 flex items-center gap-2\">\n          <span className=\"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full\"></span>\n          {title}\n        </h2>\n        \n        <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n          <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\n          En temps r√©el\n        </div>\n      </div>\n\n      {/* Progress bars grid */}\n      <div className={`grid ${gridCols[columns]} gap-3`}>\n        {goals.map((goal, index) => (\n          <motion.div\n            key={goal.id}\n            initial={{ opacity: 0, scale: 0.95 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: index * 0.1, duration: 0.5 }}\n            className=\"bg-gray-50 rounded-xl p-2 border border-gray-100 hover:shadow-md transition-shadow\"\n          >\n            <AdvancedProgressBar\n              label={goal.label}\n              current={goal.current}\n              target={goal.target}\n              unit={goal.unit}\n              color={goal.color}\n              size=\"md\"\n              showIcon={!!goal.icon}\n              icon={goal.icon}\n              description={goal.description}\n            />\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Summary stats */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.8 }}\n        className=\"mt-6 pt-4 border-t border-gray-200\"\n      >\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {goals.filter(g => g.current >= g.target).length}\n            </div>\n            <div className=\"text-xs text-gray-500\">Objectifs atteints</div>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {Math.round(goals.reduce((acc, g) => acc + (g.current / g.target) * 100, 0) / goals.length)}%\n            </div>\n            <div className=\"text-xs text-gray-500\">Progression moyenne</div>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {goals.reduce((acc, g) => acc + g.current, 0).toLocaleString('fr-FR')}\n            </div>\n            <div className=\"text-xs text-gray-500\">Total atteint</div>\n          </div>\n          \n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-gray-900\">\n              {goals.reduce((acc, g) => acc + g.target, 0).toLocaleString('fr-FR')}\n            </div>\n            <div className=\"text-xs text-gray-500\">Total cible</div>\n          </div>\n        </div>\n      </motion.div>\n    </motion.div>\n  )\n}\n","size_bytes":3831},"(dashboard)/dashboard/profile/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { User, Image as ImageIcon } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { ProfileContent } from \"./profile-content\"\nimport { GalerieContent } from \"./galerie-content\"\n\nexport default function ProfilePage() {\n  // V√©rifier l'URL pour ouvrir l'onglet Galerie si on vient de /dashboard/media\n  const [activeTab, setActiveTab] = useState<'profile' | 'galerie'>(() => {\n    if (typeof window !== 'undefined') {\n      return window.location.pathname.includes('media') || window.location.hash === '#galerie' \n        ? 'galerie' \n        : 'profile'\n    }\n    return 'profile'\n  })\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Onglets */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => {\n              setActiveTab('profile')\n              window.location.hash = ''\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'profile'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <User className=\"w-4 h-4\" />\n            Mon Profil\n          </button>\n          <button\n            onClick={() => {\n              setActiveTab('galerie')\n              window.location.hash = 'galerie'\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'galerie'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <ImageIcon className=\"w-4 h-4\" />\n            Galerie\n          </button>\n        </nav>\n      </div>\n\n      {/* Contenu de l'onglet Profil */}\n      {activeTab === 'profile' && <ProfileContent />}\n\n      {/* Contenu de l'onglet Galerie */}\n      {activeTab === 'galerie' && <GalerieContent />}\n    </div>\n  )\n}\n","size_bytes":2143},"components/ui-pro/promo-badge.tsx":{"content":"\"use client\"\n\nimport { Gift, Sparkles, Clock } from \"lucide-react\"\nimport { motion } from \"framer-motion\"\n\ninterface PromoBadgeProps {\n  promoCode: string\n  trialEndsAt?: string | null\n}\n\nexport function PromoBadge({ promoCode, trialEndsAt }: PromoBadgeProps) {\n  const isElite = promoCode === \"ELITE\"\n  const isTrial = !!trialEndsAt\n\n  // Calculer les jours restants pour un trial\n  const daysRemaining = isTrial && trialEndsAt \n    ? Math.ceil((new Date(trialEndsAt).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n    : 0\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      className={`relative overflow-hidden rounded-2xl p-6 ${\n        isElite \n          ? \"bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500\" \n          : \"bg-gradient-to-br from-blue-500 via-cyan-500 to-teal-500\"\n      }`}\n    >\n      {/* Pattern de fond */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMzLjMxNCAwIDYgMi42ODYgNiA2cy0yLjY4NiA2LTYgNi02LTIuNjg2LTYtNiAyLjY4Ni02IDYtNnoiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLW9wYWNpdHk9Ii4zIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PC9zdmc+')]\" />\n      </div>\n\n      <div className=\"relative z-10\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          {isElite ? (\n            <Sparkles className=\"w-6 h-6 text-white\" />\n          ) : (\n            <Gift className=\"w-6 h-6 text-white\" />\n          )}\n          <h3 className=\"text-xl font-bold text-white\">\n            Code Promo Activ√©\n          </h3>\n        </div>\n\n        <div className=\"space-y-2\">\n          <div className=\"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-lg px-4 py-2\">\n            <span className=\"text-sm font-medium text-white/80\">Code:</span>\n            <span className=\"text-lg font-black text-white font-mono\">{promoCode}</span>\n          </div>\n\n          {isTrial && daysRemaining > 0 ? (\n            <div className=\"flex items-center gap-2 text-white\">\n              <Clock className=\"w-4 h-4\" />\n              <span className=\"text-sm font-medium\">\n                {daysRemaining} jour{daysRemaining > 1 ? 's' : ''} restant{daysRemaining > 1 ? 's' : ''}\n              </span>\n            </div>\n          ) : isElite ? (\n            <div className=\"flex items-center gap-2 text-white\">\n              <Sparkles className=\"w-4 h-4\" />\n              <span className=\"text-sm font-medium\">Acc√®s permanent</span>\n            </div>\n          ) : null}\n        </div>\n\n        {isTrial && daysRemaining <= 7 && daysRemaining > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"mt-4 bg-white/20 backdrop-blur-sm rounded-lg p-3 border border-white/30\"\n          >\n            <p className=\"text-sm text-white font-medium\">\n              ‚ö° Ton essai se termine bient√¥t ! Passe en Pro pour continuer √† profiter de tous les avantages.\n            </p>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}\n\n","size_bytes":3267},"[username]/galerie/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { ArrowLeft, Play } from \"lucide-react\"\n\ninterface Props {\n  params: Promise<{ username: string }>\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true }\n  })\n\n  if (!profile) return {}\n\n  return {\n    title: `Galerie de ${profile.displayName} - Athlink`,\n    description: `D√©couvrez les photos et vid√©os de ${profile.displayName}`,\n  }\n}\n\nexport default async function GaleriePage({ params }: Props) {\n  const { username } = await params\n\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    include: {\n      media: { \n        orderBy: { position: 'asc' }\n      }\n    }\n  })\n\n  if (!profile || !profile.isPublic) {\n    notFound()\n  }\n\n  const photos = profile.media.filter(m => m.type === \"IMAGE\")\n  const videos = profile.media.filter(m => m.type === \"VIDEO\")\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-50 bg-black/80 backdrop-blur-xl border-b border-white/10\">\n        <div className=\"container mx-auto px-4 sm:px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <Link \n              href={`/${username}`}\n              className=\"flex items-center gap-2 text-white hover:text-yellow-400 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Retour au profil</span>\n            </Link>\n            <h1 className=\"text-xl font-bold text-white\">Galerie</h1>\n            <div className=\"w-32\"></div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 sm:px-6 py-8\">\n        {/* Stats */}\n        <div className=\"grid grid-cols-2 gap-4 mb-8 max-w-md mx-auto\">\n          <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 text-center\">\n            <p className=\"text-3xl font-bold text-white\">{photos.length}</p>\n            <p className=\"text-sm text-gray-400\">Photos</p>\n          </div>\n          <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 text-center\">\n            <p className=\"text-3xl font-bold text-white\">{videos.length}</p>\n            <p className=\"text-sm text-gray-400\">Vid√©os</p>\n          </div>\n        </div>\n\n        {/* Photos Section */}\n        {photos.length > 0 && (\n          <section className=\"mb-12\">\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\n              <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                  <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" ry=\"2\"/>\n                  <circle cx=\"9\" cy=\"9\" r=\"2\"/>\n                  <path d=\"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\"/>\n                </svg>\n              </div>\n              Photos\n            </h2>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n              {photos.map((photo) => (\n                <div \n                  key={photo.id}\n                  className=\"group relative aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/10 hover:border-white/30 transition-all cursor-pointer\"\n                >\n                  <Image\n                    src={photo.url}\n                    alt={photo.title || \"Photo\"}\n                    fill\n                    className=\"object-cover group-hover:scale-110 transition-transform duration-300\"\n                  />\n                  {photo.title && (\n                    <div className=\"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <p className=\"text-white text-sm font-medium truncate\">{photo.title}</p>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Videos Section */}\n        {videos.length > 0 && (\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\n              <div className=\"w-8 h-8 rounded-full bg-red-500 flex items-center justify-center\">\n                <Play className=\"w-5 h-5 text-white\" fill=\"white\" />\n              </div>\n              Vid√©os\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {videos.map((video) => (\n                <div \n                  key={video.id}\n                  className=\"group relative aspect-video rounded-xl overflow-hidden bg-white/5 border border-white/10 hover:border-white/30 transition-all cursor-pointer\"\n                >\n                  {video.thumbnail ? (\n                    <Image\n                      src={video.thumbnail}\n                      alt={video.title || \"Video\"}\n                      fill\n                      className=\"object-cover\"\n                    />\n                  ) : (\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900\">\n                      <Play className=\"w-16 h-16 text-white/30\" />\n                    </div>\n                  )}\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors\">\n                    <div className=\"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform\">\n                      <Play className=\"w-8 h-8 text-black ml-1\" fill=\"black\" />\n                    </div>\n                  </div>\n                  {video.title && (\n                    <div className=\"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4\">\n                      <p className=\"text-white text-sm font-medium\">{video.title}</p>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Empty State */}\n        {profile.media.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n            <div className=\"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-gray-500\">\n                <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" ry=\"2\"/>\n                <circle cx=\"9\" cy=\"9\" r=\"2\"/>\n                <path d=\"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\"/>\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold text-white mb-2\">Aucun m√©dia</h3>\n            <p className=\"text-gray-400\">La galerie est vide pour le moment</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n","size_bytes":7434},"next-auth.d.ts":{"content":"import \"next-auth\"\n\ndeclare module \"next-auth\" {\n  interface Session {\n    user: {\n      id: string\n      email: string\n      name: string\n    }\n  }\n\n  interface User {\n    id: string\n    email: string\n    name: string\n  }\n}\n\ndeclare module \"next-auth/jwt\" {\n  interface JWT {\n    id: string\n  }\n}\n","size_bytes":298},"(dashboard)/dashboard/settings/settings-client.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { RealtimeNotifications, useRealtimeNotifications } from \"@/components/ui-pro/realtime-notifications\"\nimport { PromoBadge } from \"@/components/ui-pro/promo-badge\"\nimport { AnalyticsWithFilter } from \"@/components/ui-pro/analytics-with-filter\"\nimport { \n  Settings, \n  Bell, \n  Globe, \n  Shield, \n  Save,\n  RotateCcw,\n  Zap,\n  Crown,\n  BarChart3\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { canUserAccessFeature, PLAN_FEATURES } from \"@/lib/features\"\nimport Link from \"next/link\"\n\ninterface SettingsClientProps {\n  profileId: string\n  username: string\n  userPlan: \"FREE\" | \"PRO\" | \"ELITE\"\n  initialCustomDomain: string\n  promoCodeUsed?: string | null\n  trialEndsAt?: string | null\n}\n\nexport function SettingsClient({\n  profileId,\n  username,\n  userPlan,\n  initialCustomDomain,\n  promoCodeUsed,\n  trialEndsAt\n}: SettingsClientProps) {\n  // Initialiser avec 'general' par d√©faut pour √©viter les erreurs d'hydratation\n  const [activeTab, setActiveTab] = useState<'general' | 'analytics'>('general')\n  const [customDomain, setCustomDomain] = useState(initialCustomDomain)\n  const [notifications, setNotifications] = useState({\n    email: true,\n    push: false\n  })\n  const [isLoading, setIsLoading] = useState(false)\n  const [hasChanges, setHasChanges] = useState(false)\n\n  // V√©rifier l'URL apr√®s le montage du composant\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      if (window.location.pathname.includes('analytics') || window.location.hash === '#analytics') {\n        setActiveTab('analytics')\n      }\n    }\n  }, [])\n\n  // Hook pour les notifications temps r√©el\n  const realtimeNotifications = useRealtimeNotifications(userPlan)\n\n  const canAccessCustomDomain = canUserAccessFeature(userPlan, \"customDomain\")\n  const canAccessRealtimeNotifications = canUserAccessFeature(userPlan, \"realtimeNotifications\")\n\n  // V√©rifier les changements\n  useEffect(() => {\n    const hasChanged = \n      customDomain !== initialCustomDomain\n    \n    setHasChanges(hasChanged)\n  }, [customDomain, initialCustomDomain])\n\n  const handleSaveSettings = async () => {\n    setIsLoading(true)\n    \n    try {\n      const response = await fetch('/api/profile', {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          customDomain: customDomain || null\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error('Erreur lors de la sauvegarde')\n      }\n\n      // R√©initialiser les changements\n      setHasChanges(false)\n      \n      // Afficher un message de succ√®s\n      alert(\"Param√®tres sauvegard√©s avec succ√®s!\")\n      \n    } catch (error) {\n      console.error('Erreur:', error)\n      alert(\"Erreur lors de la sauvegarde des param√®tres\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleResetSettings = () => {\n    setCustomDomain(initialCustomDomain)\n    setNotifications({\n      email: true,\n      push: false\n    })\n    setHasChanges(false)\n  }\n\n  const handleUpgradePlan = async (newPlan: \"FREE\" | \"PRO\" | \"ELITE\") => {\n    setIsLoading(true)\n    try {\n      const response = await fetch('/api/upgrade-plan', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ plan: newPlan })\n      })\n\n      if (!response.ok) throw new Error('Erreur lors de la mise √† jour')\n\n      alert(`‚úÖ Plan mis √† jour vers ${newPlan} ! Rechargez la page pour voir les changements.`)\n      window.location.reload()\n    } catch (error) {\n      alert('‚ùå Erreur lors de la mise √† jour du plan')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Onglets */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => {\n              setActiveTab('general')\n              window.location.hash = ''\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'general'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <Settings className=\"w-4 h-4\" />\n            Param√®tres G√©n√©raux\n          </button>\n          <button\n            onClick={() => {\n              setActiveTab('analytics')\n              window.location.hash = 'analytics'\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'analytics'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <BarChart3 className=\"w-4 h-4\" />\n            Analytics\n          </button>\n        </nav>\n      </div>\n\n      {/* Contenu de l'onglet G√©n√©ral */}\n      {activeTab === 'general' && (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Param√®tres g√©n√©raux */}\n          <div className=\"lg:col-span-2 space-y-6\">\n\n        {/* Domaine personnalis√© */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Globe className=\"w-5 h-5\" />\n              Domaine personnalis√©\n              {!canAccessCustomDomain && (\n                <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">\n                  Elite uniquement\n                </Badge>\n              )}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {canAccessCustomDomain ? (\n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"custom-domain\">Votre domaine</Label>\n                  <Input\n                    id=\"custom-domain\"\n                    placeholder=\"monprofil.com\"\n                    value={customDomain}\n                    onChange={(e) => setCustomDomain(e.target.value)}\n                    className=\"mt-2\"\n                  />\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Configurez votre domaine personnalis√© pour un profil plus professionnel.\n                  </p>\n                  {customDomain !== initialCustomDomain && (\n                    <p className=\"text-sm text-green-600 mt-1\">\n                      ‚úì Domaine modifi√© - Sauvegardez pour appliquer les changements\n                    </p>\n                  )}\n                </div>\n                {/* Configuration DNS */}\n                <div className=\"p-4 bg-gradient-to-br from-gray-800 to-gray-900 border border-yellow-400 rounded-lg\">\n                  <h4 className=\"font-semibold text-yellow-400 mb-3 flex items-center gap-2\">\n                    <Globe className=\"w-4 h-4\" />\n                    Configuration DNS requise\n                  </h4>\n                  \n                  <div className=\"space-y-3\">\n                    <p className=\"text-sm text-gray-200\">\n                      Pour connecter votre domaine personnalis√©, ajoutez cet enregistrement DNS chez votre h√©bergeur :\n                    </p>\n                    \n                    <div className=\"bg-black/50 rounded-md p-3 border border-white/10\">\n                      <div className=\"grid grid-cols-3 gap-3 text-xs\">\n                        <div>\n                          <p className=\"text-gray-400 mb-1\">Type</p>\n                          <p className=\"font-mono text-yellow-300 font-semibold\">CNAME</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-400 mb-1\">Nom</p>\n                          <p className=\"font-mono text-yellow-300 font-semibold\">@</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-400 mb-1\">Valeur</p>\n                          <p className=\"font-mono text-yellow-300 font-semibold\">athlink.app</p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"text-xs text-gray-300 space-y-1\">\n                      <p>‚Ä¢ La propagation DNS peut prendre jusqu'√† 24-48h</p>\n                      <p>‚Ä¢ V√©rifiez que votre domaine n'a pas d'enregistrement A existant</p>\n                      <p>‚Ä¢ Si vous utilisez un sous-domaine (ex: profil.votredomaine.com), remplacez @ par le sous-domaine</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <Globe className=\"w-12 h-12 text-yellow-600 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">\n                  Domaine personnalis√©\n                </h3>\n                <p className=\"text-yellow-700 mb-4\">\n                  Les domaines personnalis√©s sont disponibles uniquement avec le plan Elite.\n                </p>\n                <Button className=\"bg-yellow-600 hover:bg-yellow-700\">\n                  Upgrade vers Elite\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n\n        {/* Notifications */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5\" />\n              Notifications\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label htmlFor=\"email-notifications\">Notifications email</Label>\n                <p className=\"text-sm text-gray-600\">\n                  Recevoir des notifications par email\n                </p>\n              </div>\n              <Switch\n                id=\"email-notifications\"\n                checked={notifications.email}\n                onCheckedChange={(checked) => setNotifications(prev => ({ ...prev, email: checked }))}\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label htmlFor=\"push-notifications\">Notifications push</Label>\n                <p className=\"text-sm text-gray-600\">\n                  Recevoir des notifications push dans le navigateur\n                </p>\n              </div>\n              <Switch\n                id=\"push-notifications\"\n                checked={notifications.push}\n                onCheckedChange={(checked) => setNotifications(prev => ({ ...prev, push: checked }))}\n              />\n            </div>\n\n            {!canAccessRealtimeNotifications && (\n              <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                <p className=\"text-sm text-yellow-800\">\n                  <strong>Notifications temps r√©el :</strong> Disponibles uniquement avec le plan Elite\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Actions */}\n      <div className=\"space-y-6\">\n        {/* Actions rapides */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Settings className=\"w-5 h-5\" />\n              Actions\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <Button \n              onClick={handleSaveSettings} \n              className=\"w-full\"\n              disabled={!hasChanges || isLoading}\n            >\n              <Save className=\"w-4 h-4 mr-2\" />\n              {isLoading ? \"Sauvegarde...\" : \"Sauvegarder\"}\n            </Button>\n            \n            <Button \n              onClick={handleResetSettings} \n              variant=\"outline\" \n              className=\"w-full\"\n              disabled={!hasChanges || isLoading}\n            >\n              <RotateCcw className=\"w-4 h-4 mr-2\" />\n              R√©initialiser\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Badge Code Promo */}\n        {promoCodeUsed && (\n          <PromoBadge \n            promoCode={promoCodeUsed}\n            trialEndsAt={trialEndsAt}\n          />\n        )}\n\n        {/* Plan actuel */}\n        <Card className=\"border-2\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"w-5 h-5\" />\n              Plan actuel\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"text-center\">\n              <div className=\"inline-flex items-center gap-2 mb-2\">\n                {userPlan === \"PRO\" && <Zap className=\"w-6 h-6 text-yellow-600\" />}\n                {userPlan === \"ELITE\" && <Crown className=\"w-6 h-6 text-gray-800\" />}\n                <div className=\"text-3xl font-bold text-gray-900\">\n                  {userPlan === \"FREE\" && \"Gratuit\"}\n                  {userPlan === \"PRO\" && \"Pro\"}\n                  {userPlan === \"ELITE\" && \"Elite\"}\n                </div>\n              </div>\n              \n              {/* Limites du plan */}\n              <div className=\"mt-4 space-y-2 text-left bg-gray-50 p-4 rounded-lg\">\n                <div className=\"text-xs font-semibold text-gray-700 uppercase mb-2\">Vos limites</div>\n                <div className=\"space-y-1 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Liens</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxLinks === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxLinks}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Comp√©titions</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxRaces === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxRaces}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Sponsors</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxSponsors === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxSponsors}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">M√©dias</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxMedia === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxMedia}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Analytics</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].analyticsDays === null ? \"Illimit√©\" : `${PLAN_FEATURES[userPlan].analyticsDays} jours`}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Boutons d'upgrade */}\n              {userPlan === \"FREE\" && (\n                <div className=\"space-y-3 mt-4\">\n                  <p className=\"text-sm text-gray-600\">\n                    D√©bloquez plus de fonctionnalit√©s\n                  </p>\n                  <Link href=\"/dashboard/upgrade\">\n                    <Button className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\">\n                      <Zap className=\"w-4 h-4 mr-2\" />\n                      Voir les plans\n                    </Button>\n                  </Link>\n                </div>\n              )}\n\n              {userPlan === \"PRO\" && (\n                <div className=\"space-y-3 mt-4\">\n                  <div className=\"flex items-center justify-center gap-2 mb-2\">\n                    <Badge className=\"bg-yellow-600 text-white\">\n                      <Zap className=\"w-3 h-3 mr-1\" />\n                      Pro\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-gray-600\">\n                    Passez Elite pour encore plus\n                  </p>\n                  <Link href=\"/dashboard/upgrade\">\n                    <Button className=\"w-full bg-gray-800 hover:bg-gray-900 text-white\">\n                      <Crown className=\"w-4 h-4 mr-2\" />\n                      Upgrade vers Elite\n                    </Button>\n                  </Link>\n                </div>\n              )}\n\n              {userPlan === \"ELITE\" && (\n                <div className=\"space-y-3 mt-4\">\n                  <div className=\"flex items-center justify-center gap-2 mb-2\">\n                    <Badge className=\"bg-gray-800 text-white\">\n                      <Crown className=\"w-3 h-3 mr-1\" />\n                      Elite\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-green-600 font-medium\">\n                    Vous avez acc√®s √† toutes les fonctionnalit√©s premium !\n                  </p>\n                  <div className=\"text-xs text-gray-500 mt-2\">\n                    Merci pour votre soutien\n                  </div>\n                </div>\n              )}\n\n            </div>\n          </CardContent>\n        </Card>\n\n      </div>\n    </div>\n      )}\n\n      {/* Contenu de l'onglet Analytics */}\n      {activeTab === 'analytics' && (\n        <div>\n          <AnalyticsWithFilter\n            userPlan={userPlan}\n            username={username}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":18353},"components/ui-pro/plan-badge.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { Crown, Zap, Sparkles } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { PlanType } from \"@/lib/features\"\n\ninterface PlanBadgeProps {\n  plan: PlanType\n  size?: \"sm\" | \"md\" | \"lg\"\n  showIcon?: boolean\n  className?: string\n}\n\nexport function PlanBadge({ plan, size = \"md\", showIcon = true, className }: PlanBadgeProps) {\n  if (plan === PlanType.FREE) return null // Pas de badge pour le plan gratuit\n\n  const planConfig: Record<PlanType, {\n    label: string\n    icon: any\n    gradient: string\n    bgColor: string\n    textColor: string\n    shadowColor: string\n  }> = {\n    [PlanType.FREE]: {\n      label: \"\",\n      icon: Zap,\n      gradient: \"\",\n      bgColor: \"\",\n      textColor: \"\",\n      shadowColor: \"\"\n    },\n    [PlanType.PRO]: {\n      label: \"Pro\",\n      icon: Zap,\n      gradient: \"from-yellow-500 to-black\",\n      bgColor: \"bg-gradient-to-r from-yellow-500 to-black\",\n      textColor: \"text-white\",\n      shadowColor: \"shadow-yellow-500/20\"\n    },\n    [PlanType.ELITE]: {\n      label: \"Elite\", \n      icon: Crown,\n      gradient: \"from-gray-800 to-black\",\n      bgColor: \"bg-gradient-to-r from-gray-800 to-black\",\n      textColor: \"text-white\",\n      shadowColor: \"shadow-gray-800/20\"\n    }\n  }\n\n  const config = planConfig[plan]\n  if (!config) return null // Si le plan n'est pas reconnu, ne rien afficher\n  \n  const Icon = config.icon\n\n  const sizeClasses = {\n    sm: \"px-2 py-0.5 text-xs\",\n    md: \"px-3 py-1 text-sm\", \n    lg: \"px-4 py-1.5 text-base\"\n  }\n\n  const iconSizes = {\n    sm: \"w-3 h-3\",\n    md: \"w-4 h-4\",\n    lg: \"w-5 h-5\"\n  }\n\n  return (\n    <motion.div\n      initial={{ scale: 0, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      transition={{ type: \"spring\", stiffness: 200 }}\n      className={cn(\n        \"inline-flex items-center gap-1.5 font-bold rounded-full border-2 border-white/20 backdrop-blur-sm\",\n        config.bgColor,\n        config.textColor,\n        config.shadowColor,\n        sizeClasses[size],\n        \"shadow-lg hover:shadow-xl transition-all duration-200\",\n        className\n      )}\n    >\n      {showIcon && (\n        <Icon className={iconSizes[size]} />\n      )}\n      <span>{config.label}</span>\n      <motion.div\n        animate={{ \n          opacity: [0.5, 1, 0.5],\n          scale: [1, 1.1, 1]\n        }}\n        transition={{\n          duration: 2,\n          repeat: Infinity,\n          ease: \"easeInOut\"\n        }}\n        className=\"w-1.5 h-1.5 bg-white/80 rounded-full\"\n      />\n    </motion.div>\n  )\n}\n\n// Composant pour afficher le badge dans le header du profil\nexport function ProfilePlanBadge({ plan, className }: { plan: PlanType, className?: string }) {\n  if (plan === PlanType.FREE) return null\n\n  return (\n    <div className={cn(\"flex justify-center\", className)}>\n      <PlanBadge plan={plan} size=\"sm\" />\n    </div>\n  )\n}\n","size_bytes":2873},"lib/db.ts":{"content":"import { PrismaClient } from \"@prisma/client\"\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient({\n  log: process.env.NODE_ENV === \"development\" ? [\"query\", \"error\", \"warn\"] : [\"error\"],\n})\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma\n","size_bytes":370},"components/ui/responsive-container.tsx":{"content":"\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { forwardRef } from \"react\"\n\ninterface ResponsiveContainerProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Maximum width of the container\n   */\n  maxWidth?: \"sm\" | \"md\" | \"lg\" | \"xl\" | \"2xl\" | \"4xl\" | \"6xl\" | \"full\"\n  /**\n   * Horizontal padding\n   */\n  padding?: \"none\" | \"sm\" | \"md\" | \"lg\"\n}\n\nconst ResponsiveContainer = forwardRef<HTMLDivElement, ResponsiveContainerProps>(\n  ({ className, maxWidth = \"4xl\", padding = \"md\", children, ...props }, ref) => {\n    const maxWidthClasses = {\n      sm: \"max-w-sm\",\n      md: \"max-w-md\", \n      lg: \"max-w-lg\",\n      xl: \"max-w-xl\",\n      \"2xl\": \"max-w-2xl\",\n      \"4xl\": \"max-w-4xl\",\n      \"6xl\": \"max-w-6xl\",\n      full: \"max-w-full\"\n    }\n\n    const paddingClasses = {\n      none: \"\",\n      sm: \"px-2 sm:px-4\",\n      md: \"px-4 sm:px-6\",\n      lg: \"px-6 sm:px-8 lg:px-10\"\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"container mx-auto\",\n          maxWidthClasses[maxWidth],\n          paddingClasses[padding],\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\n\nResponsiveContainer.displayName = \"ResponsiveContainer\"\n\nexport { ResponsiveContainer }\n","size_bytes":1254},"components/ui/responsive-grid.tsx":{"content":"\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { forwardRef } from \"react\"\n\ninterface ResponsiveGridProps extends React.HTMLAttributes<HTMLDivElement> {\n  /**\n   * Number of columns on different screen sizes\n   */\n  cols?: {\n    default?: 1 | 2 | 3 | 4 | 5 | 6\n    sm?: 1 | 2 | 3 | 4 | 5 | 6\n    md?: 1 | 2 | 3 | 4 | 5 | 6\n    lg?: 1 | 2 | 3 | 4 | 5 | 6\n    xl?: 1 | 2 | 3 | 4 | 5 | 6\n  }\n  /**\n   * Gap between grid items\n   */\n  gap?: \"none\" | \"sm\" | \"md\" | \"lg\" | \"xl\"\n}\n\nconst ResponsiveGrid = forwardRef<HTMLDivElement, ResponsiveGridProps>(\n  ({ className, cols = { default: 1, sm: 2, lg: 3 }, gap = \"md\", children, ...props }, ref) => {\n    const colClasses = []\n    \n    // Default columns\n    if (cols.default) {\n      colClasses.push(`grid-cols-${cols.default}`)\n    }\n    \n    // Responsive columns\n    if (cols.sm) colClasses.push(`sm:grid-cols-${cols.sm}`)\n    if (cols.md) colClasses.push(`md:grid-cols-${cols.md}`)\n    if (cols.lg) colClasses.push(`lg:grid-cols-${cols.lg}`)\n    if (cols.xl) colClasses.push(`xl:grid-cols-${cols.xl}`)\n\n    const gapClasses = {\n      none: \"gap-0\",\n      sm: \"gap-2 sm:gap-3\",\n      md: \"gap-4 sm:gap-6\",\n      lg: \"gap-6 sm:gap-8\",\n      xl: \"gap-8 sm:gap-10\"\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid\",\n          ...colClasses,\n          gapClasses[gap],\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n)\n\nResponsiveGrid.displayName = \"ResponsiveGrid\"\n\nexport { ResponsiveGrid }\n","size_bytes":1534},"components/ui-pro/simple-image-cropper.tsx":{"content":"\"use client\";\n\nimport { useState, useRef, useCallback } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { X, RotateCw, ZoomIn, ZoomOut, Move, Crop } from \"lucide-react\";\n\ninterface SimpleImageCropperProps {\n  imageUrl: string;\n  onCrop: (croppedImageUrl: string) => void;\n  onClose: () => void;\n}\n\nexport default function SimpleImageCropper({ imageUrl, onCrop, onClose }: SimpleImageCropperProps) {\n  const [crop, setCrop] = useState({ x: 50, y: 50, width: 200, height: 200 });\n  const [scale, setScale] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const imageRef = useRef<HTMLImageElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setIsDragging(true);\n    setDragStart({ x: e.clientX - crop.x, y: e.clientY - crop.y });\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDragging) return;\n    setCrop({\n      ...crop,\n      x: e.clientX - dragStart.x,\n      y: e.clientY - dragStart.y,\n    });\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const handleCrop = useCallback(async () => {\n    console.log(\"Starting SIMPLE crop operation...\")\n    setIsProcessing(true);\n    \n    try {\n      const canvas = canvasRef.current;\n      const image = imageRef.current;\n      const container = containerRef.current;\n      \n      if (!canvas || !image || !container) {\n        console.error(\"Missing refs\")\n        setIsProcessing(false);\n        return;\n      }\n\n      const ctx = canvas.getContext(\"2d\");\n      if (!ctx) {\n        console.error(\"Could not get canvas context\")\n        setIsProcessing(false);\n        return;\n      }\n\n      // Get container dimensions\n      const containerRect = container.getBoundingClientRect();\n      const containerWidth = containerRect.width;\n      const containerHeight = containerRect.height;\n\n      // Calculate image display dimensions\n      const imageAspect = image.naturalWidth / image.naturalHeight;\n      const containerAspect = containerWidth / containerHeight;\n      \n      let displayWidth, displayHeight;\n      if (imageAspect > containerAspect) {\n        displayWidth = containerWidth;\n        displayHeight = containerWidth / imageAspect;\n      } else {\n        displayHeight = containerHeight;\n        displayWidth = containerHeight * imageAspect;\n      }\n\n      // Calculate offset to center image\n      const offsetX = (containerWidth - displayWidth) / 2;\n      const offsetY = (containerHeight - displayHeight) / 2;\n\n      // Calculate crop area relative to the displayed image\n      const cropX = crop.x - offsetX;\n      const cropY = crop.y - offsetY;\n      const cropWidth = crop.width;\n      const cropHeight = crop.height;\n\n      // Convert to source coordinates\n      const sourceX = (cropX / displayWidth) * image.naturalWidth;\n      const sourceY = (cropY / displayHeight) * image.naturalHeight;\n      const sourceWidth = (cropWidth / displayWidth) * image.naturalWidth;\n      const sourceHeight = (cropHeight / displayHeight) * image.naturalHeight;\n\n      console.log(\"SIMPLE CROP CALCULATION:\", {\n        container: { width: containerWidth, height: containerHeight },\n        display: { width: displayWidth, height: displayHeight },\n        offset: { x: offsetX, y: offsetY },\n        crop: { x: cropX, y: cropY, width: cropWidth, height: cropHeight },\n        source: { x: sourceX, y: sourceY, width: sourceWidth, height: sourceHeight }\n      });\n\n      // Set canvas size to crop area\n      canvas.width = cropWidth;\n      canvas.height = cropHeight;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Draw the cropped portion\n      ctx.drawImage(\n        image,\n        sourceX,\n        sourceY,\n        sourceWidth,\n        sourceHeight,\n        0,\n        0,\n        cropWidth,\n        cropHeight\n      );\n\n      console.log(\"Image drawn to canvas successfully\");\n\n      // Convert to dataURL (more reliable than blob)\n      const dataURL = canvas.toDataURL(\"image/jpeg\", 0.9);\n      console.log(\"DataURL created:\", dataURL.substring(0, 50) + \"...\");\n      \n      onCrop(dataURL);\n      setIsProcessing(false);\n      \n    } catch (error) {\n      console.error(\"SIMPLE Crop error:\", error)\n      setIsProcessing(false);\n    }\n  }, [crop, onCrop]);\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n      >\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n            <div className=\"flex items-center gap-3\">\n              <Crop className=\"w-5 h-5 text-gray-700\" />\n              <h3 className=\"text-xl font-semibold text-gray-900\">Rogner l'image</h3>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Image Container */}\n          <div className=\"p-6 flex-1 overflow-y-auto\">\n            <div className=\"relative bg-gray-50 rounded-xl overflow-hidden mb-6\">\n              <div \n                ref={containerRef}\n                className=\"relative overflow-hidden\" \n                style={{ height: \"350px\" }}\n              >\n                <img\n                  ref={imageRef}\n                  src={imageUrl}\n                  alt=\"Image √† rogner\"\n                  crossOrigin=\"anonymous\"\n                  className=\"absolute top-0 left-0 w-full h-full object-contain\"\n                  style={{\n                    transform: `scale(${scale}) rotate(${rotation}deg)`,\n                    transformOrigin: \"center center\",\n                  }}\n                />\n                \n                {/* Crop overlay */}\n                <div\n                  className=\"absolute border-2 border-white shadow-lg cursor-move\"\n                  style={{\n                    left: crop.x,\n                    top: crop.y,\n                    width: crop.width,\n                    height: crop.height,\n                  }}\n                  onMouseDown={handleMouseDown}\n                  onMouseMove={handleMouseMove}\n                  onMouseUp={handleMouseUp}\n                  onMouseLeave={handleMouseUp}\n                >\n                  {/* Corner handles */}\n                  {[\n                    { x: 0, y: 0, cursor: \"nw-resize\" },\n                    { x: crop.width, y: 0, cursor: \"ne-resize\" },\n                    { x: 0, y: crop.height, cursor: \"sw-resize\" },\n                    { x: crop.width, y: crop.height, cursor: \"se-resize\" },\n                  ].map((handle, i) => (\n                    <div\n                      key={i}\n                      className=\"absolute w-3 h-3 bg-white border-2 border-gray-700 rounded-full\"\n                      style={{\n                        left: handle.x - 6,\n                        top: handle.y - 6,\n                        cursor: handle.cursor,\n                      }}\n                    />\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Controls */}\n            <div className=\"space-y-4\">\n              {/* Scale */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Zoom ({Math.round(scale * 100)}%)\n                </label>\n                <div className=\"flex items-center gap-3\">\n                  <button\n                    onClick={() => setScale(Math.max(0.5, scale - 0.1))}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <ZoomOut className=\"w-4 h-4\" />\n                  </button>\n                  <input\n                    type=\"range\"\n                    min=\"0.5\"\n                    max=\"3\"\n                    step=\"0.1\"\n                    value={scale}\n                    onChange={(e) => setScale(parseFloat(e.target.value))}\n                    className=\"flex-1\"\n                  />\n                  <button\n                    onClick={() => setScale(Math.min(3, scale + 0.1))}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <ZoomIn className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Rotation */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Rotation ({rotation}¬∞)\n                </label>\n                <div className=\"flex items-center gap-3\">\n                  <button\n                    onClick={() => setRotation(rotation - 90)}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <RotateCw className=\"w-4 h-4\" />\n                  </button>\n                  <input\n                    type=\"range\"\n                    min=\"-180\"\n                    max=\"180\"\n                    step=\"15\"\n                    value={rotation}\n                    onChange={(e) => setRotation(parseInt(e.target.value))}\n                    className=\"flex-1\"\n                  />\n                  <button\n                    onClick={() => setRotation(rotation + 90)}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <RotateCw className=\"w-4 h-4 rotate-180\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-200 flex-shrink-0\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors\"\n            >\n              Annuler\n            </button>\n            <button\n              onClick={handleCrop}\n              disabled={isProcessing}\n              className=\"px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isProcessing ? \"Traitement...\" : \"Valider et sauvegarder\"}\n            </button>\n          </div>\n\n          {/* Hidden canvas for cropping */}\n          <canvas ref={canvasRef} className=\"hidden\" />\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","size_bytes":11245},"deployment/deployment-guides/vercel-deployment.md":{"content":"# üöÄ Vercel Deployment Guide for AthLink\n\n## Prerequisites\n- GitHub repository with your code\n- Vercel account\n- Supabase project configured\n- Environment variables ready\n\n## Step 1: Connect to Vercel\n1. Go to [vercel.com](https://vercel.com)\n2. Click \"New Project\"\n3. Import your GitHub repository\n4. Vercel will auto-detect Next.js\n\n## Step 2: Configure Environment Variables\nAdd these in Vercel Dashboard > Settings > Environment Variables:\n\n### Required Variables:\n```\nNEXT_PUBLIC_SUPABASE_URL\nNEXT_PUBLIC_SUPABASE_ANON_KEY\nSUPABASE_SERVICE_ROLE_KEY\nDATABASE_URL\nNEXTAUTH_SECRET\nNEXTAUTH_URL\nGOOGLE_CLIENT_ID\nGOOGLE_CLIENT_SECRET\nRESEND_API_KEY\nRESEND_FROM_EMAIL\n```\n\n## Step 3: Build Settings\n- Framework Preset: Next.js\n- Build Command: `npm run build`\n- Output Directory: `.next`\n- Install Command: `npm install`\n\n## Step 4: Deploy\n1. Click \"Deploy\"\n2. Wait for build to complete\n3. Your app will be available at `https://your-project.vercel.app`\n\n## Step 5: Custom Domain (Optional)\n1. Go to Settings > Domains\n2. Add your custom domain\n3. Configure DNS records as instructed\n\n## Troubleshooting\n- Check build logs for errors\n- Verify all environment variables are set\n- Ensure database is accessible\n- Check NextAuth configuration\n","size_bytes":1242},"analytics/export-pdf/route.ts":{"content":"import { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { NextRequest, NextResponse } from \"next/server\"\nimport jsPDF from \"jspdf\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    \n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        links: { where: { isActive: true }, orderBy: { position: 'asc' } }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // R√©cup√©rer les param√®tres de la requ√™te\n    const { days = 7 } = await request.json()\n    \n    // Calculer la date de d√©but\n    const startDate = new Date()\n    startDate.setDate(startDate.getDate() - days)\n\n    // R√©cup√©rer les analytics pour la p√©riode\n    const analytics = await prisma.analytics.findMany({\n      where: {\n        profileId: profile.id,\n        date: { gte: startDate }\n      },\n      orderBy: { date: 'asc' }\n    })\n\n    // R√©cup√©rer les clics sur les liens\n    const linkClicks = await prisma.link.aggregate({\n      where: { profileId: profile.id },\n      _sum: { clicks: true }\n    })\n\n    // Calculer les totaux avec pr√©cision\n    const totalViews = analytics.reduce((sum, day) => sum + (day.views || 0), 0)\n    const totalUniqueViews = analytics.reduce((sum, day) => sum + (day.uniqueViews || 0), 0)\n    const totalClicks = linkClicks._sum.clicks || 0\n    const clickRate = totalViews > 0 ? ((totalClicks / totalViews) * 100) : 0\n    \n    // Calculer la moyenne par jour\n    const avgViewsPerDay = days > 0 ? Math.round(totalViews / days) : 0\n    const avgUniquePerDay = days > 0 ? Math.round(totalUniqueViews / days) : 0\n\n    // Cr√©er le PDF (format A4)\n    const pdf = new jsPDF()\n    \n    // Configuration des couleurs (RGB)\n    const colors = {\n      primary: [31, 41, 55],      // gray-800\n      secondary: [107, 114, 128], // gray-500\n      accent: [239, 68, 68],      // red-500\n      success: [16, 185, 129],    // emerald-500\n      blue: [59, 130, 246],       // blue-500\n      orange: [245, 158, 11]      // amber-500\n    }\n\n    // Fonction helper pour d√©finir les couleurs\n    const setColor = (color: number[]) => pdf.setTextColor(color[0], color[1], color[2])\n    const setDrawColor = (color: number[]) => pdf.setDrawColor(color[0], color[1], color[2])\n    const setFillColor = (color: number[]) => pdf.setFillColor(color[0], color[1], color[2])\n\n    // === EN-T√äTE ===\n    // Logo/Titre principal\n    pdf.setFontSize(22)\n    setColor(colors.accent)\n    pdf.text('ATHLINK', 20, 25)\n    \n    pdf.setFontSize(14)\n    setColor(colors.primary)\n    pdf.text('Rapport de Performance', 20, 35)\n    \n    // Informations du profil\n    pdf.setFontSize(10)\n    setColor(colors.secondary)\n    pdf.text(`${profile.displayName} (@${profile.username})`, 20, 43)\n    pdf.text(`${days} derniers jours ‚Ä¢ ${new Date().toLocaleDateString('fr-FR')}`, 20, 50)\n\n    // Ligne de s√©paration\n    setDrawColor(colors.accent)\n    pdf.setLineWidth(1)\n    pdf.line(20, 55, 190, 55)\n\n    // === STATISTIQUES PRINCIPALES ===\n    let yPos = 70\n\n    // Titre section\n    pdf.setFontSize(12)\n    setColor(colors.primary)\n    pdf.text('PERFORMANCE GLOBALE', 20, yPos)\n    yPos += 12\n\n    // Grille des statistiques principales (2x2)\n    const stats = [\n      { \n        label: 'VUES TOTALES', \n        value: totalViews.toLocaleString('fr-FR'), \n        color: colors.accent,\n        subtitle: `${avgViewsPerDay}/jour`\n      },\n      { \n        label: 'VISITEURS UNIQUES', \n        value: totalUniqueViews.toLocaleString('fr-FR'), \n        color: colors.success,\n        subtitle: `${avgUniquePerDay}/jour`\n      },\n      { \n        label: 'CLICS TOTAL', \n        value: totalClicks.toLocaleString('fr-FR'), \n        color: colors.blue,\n        subtitle: `${Math.round(totalClicks / Math.max(days, 1))}/jour`\n      },\n      { \n        label: 'TAUX DE CLIC', \n        value: `${clickRate.toFixed(1)}%`, \n        color: colors.orange,\n        subtitle: `${Math.round(totalClicks / Math.max(totalViews, 1) * 100)}% efficace`\n      }\n    ]\n\n    // Affichage en grille 2x2 avec espacement optimis√©\n    stats.forEach((stat, index) => {\n      const x = 20 + (index % 2) * 90\n      const y = yPos + Math.floor(index / 2) * 32\n\n      // Cadre de la stat avec ombre l√©g√®re\n      pdf.setLineWidth(0.5)\n      setDrawColor(stat.color)\n      pdf.rect(x, y, 85, 28)\n\n      // Label\n      pdf.setFontSize(8)\n      setColor(colors.secondary)\n      pdf.text(stat.label, x + 5, y + 8)\n\n      // Valeur principale\n      pdf.setFontSize(16)\n      setColor(stat.color)\n      pdf.text(stat.value, x + 5, y + 18)\n\n      // Sous-titre\n      pdf.setFontSize(7)\n      setColor(colors.secondary)\n      pdf.text(stat.subtitle, x + 5, y + 24)\n    })\n\n    yPos += 70\n\n    // === TOP 5 DES LIENS ===\n    if (profile.links.length > 0) {\n      pdf.setFontSize(12)\n      setColor(colors.primary)\n      pdf.text('TOP 5 DES LIENS', 20, yPos)\n      yPos += 12\n\n      // Top 5 des liens tri√©s\n      const topLinks = profile.links\n        .sort((a, b) => (b.clicks || 0) - (a.clicks || 0))\n        .slice(0, 5)\n\n      topLinks.forEach((link, index) => {\n        const clicks = link.clicks || 0\n        const percentage = totalClicks > 0 ? ((clicks / totalClicks) * 100) : 0\n        \n        // Nom du lien (tronqu√© intelligemment)\n        let linkName = link.title\n        if (linkName.length > 30) {\n          linkName = linkName.substring(0, 27) + '...'\n        }\n        \n        // Rang et nom\n        pdf.setFontSize(9)\n        setColor(colors.primary)\n        pdf.text(`${index + 1}. ${linkName}`, 20, yPos)\n        \n        // Valeurs align√©es √† droite\n        pdf.text(clicks.toString(), 140, yPos)\n        pdf.text(`${percentage.toFixed(1)}%`, 165, yPos)\n        \n        // Barre de progression visuelle\n        const barWidth = Math.max(1, (percentage / 100) * 35)\n        setFillColor(colors.accent)\n        pdf.rect(20, yPos + 1, barWidth, 2, 'F')\n        \n        yPos += 6\n      })\n    }\n\n    // === ANALYSE DE PERFORMANCE ===\n    yPos += 6\n    pdf.setFontSize(10)\n    setColor(colors.primary)\n    pdf.text('ANALYSE DE PERFORMANCE', 20, yPos)\n    yPos += 8\n\n    // Calculer des m√©triques avanc√©es\n    const conversionRate = totalViews > 0 ? ((totalClicks / totalViews) * 100) : 0\n    const engagementScore = Math.min(100, Math.round((totalClicks * 2 + totalUniqueViews) / Math.max(totalViews, 1) * 10))\n    const growthRate = analytics.length > 1 ? \n      Math.round(((analytics[analytics.length - 1]?.views || 0) - (analytics[0]?.views || 0)) / Math.max(analytics[0]?.views || 1, 1) * 100) : 0\n    \n    // M√©triques de performance en grille 2x2\n    const performanceMetrics = [\n      { \n        label: 'TAUX DE CONVERSION', \n        value: `${conversionRate.toFixed(1)}%`, \n        color: conversionRate > 5 ? colors.success : conversionRate > 2 ? colors.orange : colors.accent,\n        description: conversionRate > 5 ? 'Excellent' : conversionRate > 2 ? 'Correct' : '√Ä am√©liorer'\n      },\n      { \n        label: 'SCORE ENGAGEMENT', \n        value: `${engagementScore}/100`, \n        color: engagementScore > 70 ? colors.success : engagementScore > 40 ? colors.orange : colors.accent,\n        description: engagementScore > 70 ? 'Fort' : engagementScore > 40 ? 'Mod√©r√©' : 'Faible'\n      },\n      { \n        label: 'CROISSANCE', \n        value: `${growthRate > 0 ? '+' : ''}${growthRate}%`, \n        color: growthRate > 10 ? colors.success : growthRate > 0 ? colors.orange : colors.accent,\n        description: growthRate > 10 ? 'En hausse' : growthRate > 0 ? 'Stable' : 'En baisse'\n      },\n      { \n        label: 'R√âTENTION', \n        value: `${totalUniqueViews > 0 ? ((totalUniqueViews / totalViews) * 100).toFixed(0) : 0}%`, \n        color: (totalUniqueViews / Math.max(totalViews, 1)) > 0.6 ? colors.success : colors.orange,\n        description: (totalUniqueViews / Math.max(totalViews, 1)) > 0.6 ? 'Bonne' : 'Moyenne'\n      }\n    ]\n\n    // Affichage en grille 2x2 compacte\n    performanceMetrics.forEach((metric, index) => {\n      const x = 20 + (index % 2) * 90\n      const y = yPos + Math.floor(index / 2) * 20\n\n      // Cadre de la m√©trique\n      pdf.setLineWidth(0.3)\n      setDrawColor(metric.color)\n      pdf.rect(x, y, 85, 16)\n\n      // Label\n      pdf.setFontSize(7)\n      setColor(colors.secondary)\n      pdf.text(metric.label, x + 3, y + 5)\n\n      // Valeur\n      pdf.setFontSize(12)\n      setColor(metric.color)\n      pdf.text(metric.value, x + 3, y + 12)\n\n      // Description\n      pdf.setFontSize(6)\n      setColor(colors.secondary)\n      pdf.text(metric.description, x + 3, y + 15)\n    })\n\n    // === CONSEILS D'OPTIMISATION ===\n    yPos += 45\n    \n    // Titre principal de la section\n    pdf.setFontSize(12)\n    setColor(colors.accent)\n    pdf.text('üí° CONSEILS D\\'OPTIMISATION', 20, yPos)\n    yPos += 12\n\n    // Ligne de s√©paration\n    setDrawColor(colors.accent)\n    pdf.setLineWidth(0.5)\n    pdf.line(20, yPos - 2, 190, yPos - 2)\n    yPos += 8\n\n    // G√©n√©rer des conseils bas√©s sur l'analyse (toujours afficher au moins 2 conseils)\n    const advice = []\n    \n    // Toujours afficher des conseils bas√©s sur les performances r√©elles\n    const retentionRate = (totalUniqueViews / Math.max(totalViews, 1)) * 100\n    \n    // Conseil 1: Bas√© sur le taux de conversion\n    advice.push({\n      priority: 1,\n      icon: 'üéØ',\n      title: 'OPTIMISER VOS TITRES',\n      problem: `Taux de clic: ${conversionRate.toFixed(1)}% (objectif: >3%)`,\n      description: 'Am√©liorez l\\'attractivit√© de vos titres pour g√©n√©rer plus de clics:',\n      tips: [\n        'Utilisez des verbes d\\'action: \"D√©couvrir\", \"T√©l√©charger\", \"Voir\"',\n        'Ajoutez des √©mojis pertinents: üèÉ‚Äç‚ôÇÔ∏è üì± üèÜ',\n        'Cr√©ez de l\\'urgence: \"Nouveau\", \"Limit√©\", \"Exclusif\"'\n      ]\n    })\n    \n    // Conseil 2: Bas√© sur l'engagement\n    advice.push({\n      priority: 2,\n      icon: 'üí¨',\n      title: 'AUGMENTER L\\'ENGAGEMENT',\n      problem: `Score engagement: ${engagementScore}/100 (objectif: >50)`,\n      description: 'Cr√©ez plus d\\'interaction avec votre audience:',\n      tips: [\n        'Posez des questions directes: \"Quel est votre objectif?\"',\n        'Cr√©ez du contenu interactif: sondages, quiz, d√©fis',\n        'R√©pondez rapidement aux commentaires'\n      ]\n    })\n    \n    // Conseil 3: Bas√© sur la croissance (si applicable)\n    if (analytics.length > 1) {\n      advice.push({\n        priority: 3,\n        icon: 'üìà',\n        title: 'BOOSTER LA VISIBILIT√â',\n        problem: `Croissance: ${growthRate > 0 ? '+' : ''}${growthRate}%`,\n        description: 'Attirez plus de nouveaux visiteurs:',\n        tips: [\n          'Publiez 3-5 fois par semaine minimum',\n          'Utilisez les hashtags pertinents: #running #fitness',\n          'Collaborez avec d\\'autres athl√®tes'\n        ]\n      })\n    }\n    \n    // Conseil 4: Bas√© sur la r√©tention\n    advice.push({\n      priority: 4,\n      icon: 'üîÑ',\n      title: 'FID√âLISER VOS VISITEURS',\n      problem: `R√©tention: ${retentionRate.toFixed(0)}% (objectif: >70%)`,\n      description: 'Faites revenir vos visiteurs:',\n      tips: [\n        'Cr√©ez du contenu en s√©rie: \"Jour 1\", \"Jour 2\"...',\n        '√âtablissez une routine: \"Mardi Performance\"',\n        'Offrez du contenu exclusif'\n      ]\n    })\n    \n    // Afficher les 2 premiers conseils avec un design simplifi√©\n    advice.slice(0, 2).forEach((item, index) => {\n      if (yPos > 230) return // √âviter les d√©bordements\n      \n      // Titre du conseil\n      pdf.setFontSize(9)\n      setColor(colors.accent)\n      pdf.text(`${item.icon} ${item.title}`, 20, yPos)\n      \n      // Probl√®me identifi√©\n      pdf.setFontSize(7)\n      setColor(colors.secondary)\n      pdf.text(item.problem, 20, yPos + 6)\n      \n      // Description\n      pdf.setFontSize(7)\n      setColor(colors.primary)\n      pdf.text(item.description, 20, yPos + 12)\n      \n      // Tips\n      pdf.setFontSize(6)\n      setColor(colors.secondary)\n      item.tips.forEach((tip, tipIndex) => {\n        pdf.text(`‚Ä¢ ${tip}`, 22, yPos + 18 + (tipIndex * 4))\n      })\n      \n      yPos += 18 + (item.tips.length * 4) + 12\n    })\n\n    // === INFORMATIONS COMPL√âMENTAIRES ===\n    yPos += 15\n    \n    // Informations sur la p√©riode et la performance\n    pdf.setFontSize(8)\n    setColor(colors.secondary)\n    \n    const periodInfo = []\n    if (days === 1) periodInfo.push('P√©riode: Derni√®re 24h')\n    else if (days === 7) periodInfo.push('P√©riode: 7 derniers jours')\n    else if (days === 30) periodInfo.push('P√©riode: 30 derniers jours')\n    else periodInfo.push(`P√©riode: ${days} derniers jours`)\n    \n    periodInfo.push(`Performance: ${clickRate > 5 ? 'Excellente' : clickRate > 2 ? 'Bonne' : '√Ä am√©liorer'}`)\n    periodInfo.push(`Engagement: ${totalClicks > 100 ? 'Fort' : totalClicks > 20 ? 'Mod√©r√©' : 'Faible'}`)\n    \n    periodInfo.forEach((info, index) => {\n      pdf.text(`‚Ä¢ ${info}`, 20, yPos + (index * 4))\n    })\n\n    // === PIED DE PAGE ===\n    const footerY = 275\n    pdf.setFontSize(7)\n    setColor(colors.secondary)\n    pdf.text('G√©n√©r√© par Athlink ‚Ä¢ athlink.com', 20, footerY)\n    pdf.text(`Rapport cr√©√© le ${new Date().toLocaleString('fr-FR')}`, 120, footerY)\n\n    // Convertir en buffer\n    const pdfBuffer = Buffer.from(pdf.output('arraybuffer'))\n\n    // Retourner le PDF\n    return new NextResponse(pdfBuffer, {\n      headers: {\n        'Content-Type': 'application/pdf',\n        'Content-Disposition': `attachment; filename=\"rapport-${profile.username}-${days}j-${new Date().toISOString().split('T')[0]}.pdf\"`\n      }\n    })\n\n  } catch (error) {\n    console.error('Erreur g√©n√©ration PDF:', error)\n    return NextResponse.json({ error: \"Erreur lors de la g√©n√©ration du PDF\" }, { status: 500 })\n  }\n}\n","size_bytes":13945},"(dashboard)/dashboard/links/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function LinksPage() {\n  // Rediriger vers Sources avec l'onglet Liens\n  redirect(\"/dashboard/sources#liens\")\n}\n","size_bytes":171},"sponsors/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { sponsorSchema } from \"@/lib/validations\"\n\n// PATCH update sponsor\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = sponsorSchema.partial().parse(body)\n\n    // Verify sponsor belongs to user\n    const sponsor = await prisma.sponsor.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!sponsor) {\n      return NextResponse.json({ error: \"Sponsor non trouv√©\" }, { status: 404 })\n    }\n\n    if (sponsor.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    const updatedSponsor = await prisma.sponsor.update({\n      where: { id },\n      data: validatedData\n    })\n\n    return NextResponse.json({ sponsor: updatedSponsor })\n\n  } catch (error: any) {\n    console.error(\"PATCH sponsor error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// DELETE sponsor\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    // Verify sponsor belongs to user\n    const sponsor = await prisma.sponsor.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!sponsor) {\n      return NextResponse.json({ error: \"Sponsor non trouv√©\" }, { status: 404 })\n    }\n\n    if (sponsor.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    await prisma.sponsor.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error(\"DELETE sponsor error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2445},"media/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/lib/auth'\nimport { prisma } from '@/lib/db'\nimport { mediaSchema } from '@/lib/validations'\nimport { z } from 'zod'\n\n// GET - R√©cup√©rer tous les m√©dias de l'utilisateur\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    const media = await prisma.media.findMany({\n      where: { profileId: profile.id },\n      orderBy: { position: 'asc' }\n    })\n\n    return NextResponse.json(media, { status: 200 })\n\n  } catch (error) {\n    console.error('GET media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// POST - Cr√©er un nouveau m√©dia\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    const body = await req.json()\n    const validatedData = mediaSchema.parse(body)\n\n    // G√©n√©rer la miniature pour YouTube\n    let thumbnail = validatedData.thumbnail\n    if (validatedData.type === 'YOUTUBE' && !thumbnail) {\n      // Extraire l'ID YouTube de l'URL\n      const videoId = extractYouTubeId(validatedData.url)\n      if (videoId) {\n        thumbnail = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\n      }\n    }\n\n    // Obtenir la position maximale actuelle\n    const maxPosition = await prisma.media.findFirst({\n      where: { profileId: profile.id },\n      orderBy: { position: 'desc' },\n      select: { position: true }\n    })\n\n    const newMedia = await prisma.media.create({\n      data: {\n        profileId: profile.id,\n        type: validatedData.type,\n        url: validatedData.url,\n        thumbnail,\n        title: validatedData.title,\n        description: validatedData.description,\n        position: maxPosition ? maxPosition.position + 1 : 0,\n      }\n    })\n\n    return NextResponse.json(newMedia, { status: 201 })\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return NextResponse.json({ error: 'Donn√©es invalides', details: error.issues }, { status: 400 })\n    }\n    console.error('POST media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// Helper pour extraire l'ID d'une vid√©o YouTube\nfunction extractYouTubeId(url: string): string | null {\n  const regex = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/\n  const match = url.match(regex)\n  return match ? match[1] : null\n}\n","size_bytes":3164},"lib/validations.ts":{"content":"import { z } from \"zod\"\n\n// Fonction pour mapper les sports libres vers l'enum Prisma\nexport function mapSportToEnum(sport: string): \"RUNNING\" | \"CYCLING\" | \"TRIATHLON\" | \"SWIMMING\" | \"SKIING\" | \"OTHER\" {\n  const sportLower = sport.toLowerCase()\n  \n  // Mapping intelligent des sports\n  if (sportLower.includes(\"course\") || sportLower.includes(\"running\") || sportLower.includes(\"marathon\") || sportLower.includes(\"trail\")) {\n    return \"RUNNING\"\n  }\n  if (sportLower.includes(\"cycl\") || sportLower.includes(\"v√©lo\") || sportLower.includes(\"bike\") || sportLower.includes(\"vtt\")) {\n    return \"CYCLING\"\n  }\n  if (sportLower.includes(\"triathlon\") || sportLower.includes(\"tri\")) {\n    return \"TRIATHLON\"\n  }\n  if (sportLower.includes(\"natation\") || sportLower.includes(\"swimming\") || sportLower.includes(\"nage\")) {\n    return \"SWIMMING\"\n  }\n  if (sportLower.includes(\"ski\") || sportLower.includes(\"snow\")) {\n    return \"SKIING\"\n  }\n  \n  // Pour tous les autres sports (football, basketball, tennis, etc.)\n  return \"OTHER\"\n}\n\n// Fonction pour stocker le sport original dans les stats\nexport function createStatsWithOriginalSport(currentStats: any, originalSport: string) {\n  const stats = currentStats || {}\n  return {\n    ...stats,\n    originalSport: originalSport\n  }\n}\n\n// Fonction pour r√©cup√©rer le sport original depuis les stats\nexport function getOriginalSportFromStats(stats: any): string | null {\n  return stats?.originalSport || null\n}\n\n// Auth schemas\nexport const signupSchema = z.object({\n  email: z.string().email(\"Email invalide\"),\n  password: z.string().min(8, \"Minimum 8 caract√®res\"),\n  name: z.string().min(2, \"Nom requis\"),\n  username: z.string()\n    .min(3, \"Minimum 3 caract√®res\")\n    .max(30, \"Maximum 30 caract√®res\")\n    .regex(/^[a-zA-Z0-9_-]+$/, \"Uniquement lettres, chiffres, - et _\"),\n  sport: z.string().min(2, \"Sport requis\").max(50, \"Maximum 50 caract√®res\"),\n})\n\nexport const loginSchema = z.object({\n  email: z.string().email(\"Email invalide\"),\n  password: z.string().min(1, \"Mot de passe requis\"),\n})\n\n// Link schemas\nexport const linkSchema = z.object({\n  title: z.string().min(1, \"Titre requis\").max(100, \"Maximum 100 caract√®res\"),\n  url: z.string().url(\"URL invalide\"),\n  description: z.string().max(200, \"Maximum 200 caract√®res\").optional(),\n  icon: z.string().max(10, \"Maximum 10 caract√®res\").optional(),\n})\n\nexport const linkUpdateSchema = linkSchema.partial()\n\n// Profile schemas\nexport const profileUpdateSchema = z.object({\n  displayName: z.string().min(2, \"Minimum 2 caract√®res\").optional(),\n  bio: z.string().max(500, \"Maximum 500 caract√®res\").nullable().optional(),\n  location: z.string().max(100, \"Maximum 100 caract√®res\").nullable().optional(),\n  sport: z.string().min(2, \"Minimum 2 caract√®res\").max(50, \"Maximum 50 caract√®res\").optional(),\n  instagram: z.string().max(100).nullable().optional(),\n  strava: z.union([z.string().url(\"URL invalide\"), z.literal(\"\"), z.null()]).optional(),\n  youtube: z.union([z.string().url(\"URL invalide\"), z.literal(\"\"), z.null()]).optional(),\n  tiktok: z.string().max(100).nullable().optional(),\n  twitter: z.string().max(100).nullable().optional(),\n  whatsapp: z.string().max(50).nullable().optional(),\n  theme: z.string().optional(),\n  isPublic: z.boolean().optional(),\n  customDomain: z.union([z.string().max(100, \"Maximum 100 caract√®res\"), z.literal(\"\"), z.null()]).optional(),\n  customCSS: z.string().nullable().optional(),\n})\n\n// Race schemas\nexport const raceSchema = z.object({\n  name: z.string().min(1, \"Nom requis\").max(200, \"Maximum 200 caract√®res\"),\n  date: z.string().or(z.date()),\n  location: z.string().max(200, \"Maximum 200 caract√®res\").optional(),\n  distance: z.string().max(50, \"Maximum 50 caract√®res\").optional(),\n  result: z.string().max(100, \"Maximum 100 caract√®res\").optional(),\n  status: z.enum([\"upcoming\", \"completed\"]).default(\"upcoming\"),\n  url: z.string().url(\"URL invalide\").or(z.literal(\"\")).optional(),\n  logoUrl: z.preprocess(\n    (val) => (val === \"\" ? undefined : val),\n    z.string().url(\"URL invalide\").optional()\n  ),\n})\n\n// Sponsor schemas\nexport const sponsorSchema = z.object({\n  name: z.string().min(1, \"Nom requis\").max(200, \"Maximum 200 caract√®res\"),\n  logoUrl: z.string().url(\"URL invalide\").or(z.literal(\"\")).optional(),\n  websiteUrl: z.string().url(\"URL invalide\").or(z.literal(\"\")).optional(),\n  promoCode: z.string().max(50, \"Maximum 50 caract√®res\").optional(),\n  description: z.string().max(500, \"Maximum 500 caract√®res\").optional(),\n})\n\n// Media schemas\nexport const mediaSchema = z.object({\n  type: z.enum([\"IMAGE\", \"VIDEO\", \"YOUTUBE\"]),\n  url: z.string().url(\"URL invalide\"),\n  thumbnail: z.string().url(\"URL invalide\").optional(),\n  title: z.string().max(200, \"Maximum 200 caract√®res\").optional(),\n  description: z.string().max(500, \"Maximum 500 caract√®res\").optional(),\n})\n\n// Coaching Training Plan schemas\nexport const trainingPlanSchema = z.object({\n  title: z.string().min(1, \"Titre requis\").max(200, \"Maximum 200 caract√®res\"),\n  description: z.string().min(1, \"Description requise\").max(1000, \"Maximum 1000 caract√®res\"),\n  price: z.number().min(0, \"Le prix ne peut pas √™tre n√©gatif\").max(10000, \"Prix maximum 10000‚Ç¨\"),\n  duration: z.number().int().min(1, \"Dur√©e minimum 1 semaine\").max(52, \"Dur√©e maximum 52 semaines\"),\n  difficulty: z.enum([\"DEBUTANT\", \"INTERMEDIAIRE\", \"AVANCE\"], {\n    message: \"Niveau invalide (DEBUTANT, INTERMEDIAIRE ou AVANCE)\"\n  }),\n  category: z.string().min(1, \"Cat√©gorie requise\").max(100, \"Maximum 100 caract√®res\"),\n  isActive: z.boolean().default(true),\n  pdfFileName: z.string().max(255, \"Nom de fichier trop long\").nullable().optional(),\n  pdfFileUrl: z.string().url(\"URL PDF invalide\").nullable().optional(),\n})\n\nexport const trainingPlanUpdateSchema = trainingPlanSchema.partial()\n\n// Coaching Booking schemas\nexport const bookingSchema = z.object({\n  clientName: z.string().min(1, \"Nom du client requis\").max(200, \"Maximum 200 caract√®res\"),\n  clientEmail: z.string().email(\"Email invalide\").max(200, \"Maximum 200 caract√®res\"),\n  clientPhone: z.string().max(50, \"Maximum 50 caract√®res\").nullable().optional(),\n  date: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"Format de date invalide (YYYY-MM-DD)\"),\n  startTime: z.string().regex(/^\\d{2}:\\d{2}$/, \"Format d'heure invalide (HH:MM)\"),\n  duration: z.number().int().min(15, \"Dur√©e minimum 15 minutes\").max(480, \"Dur√©e maximum 8 heures\"),\n  service: z.string().min(1, \"Service requis\").max(200, \"Maximum 200 caract√®res\"),\n  price: z.number().min(0, \"Le prix ne peut pas √™tre n√©gatif\").max(10000, \"Prix maximum 10000‚Ç¨\"),\n  notes: z.string().max(1000, \"Maximum 1000 caract√®res\").nullable().optional(),\n})\n\nexport const bookingUpdateSchema = z.object({\n  status: z.enum([\"PENDING\", \"CONFIRMED\", \"COMPLETED\", \"CANCELLED\"], {\n    message: \"Statut invalide\"\n  }).optional(),\n  clientName: z.string().min(1, \"Nom du client requis\").max(200, \"Maximum 200 caract√®res\").optional(),\n  clientEmail: z.string().email(\"Email invalide\").max(200, \"Maximum 200 caract√®res\").optional(),\n  clientPhone: z.string().max(50, \"Maximum 50 caract√®res\").nullable().optional(),\n  date: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"Format de date invalide (YYYY-MM-DD)\").optional(),\n  startTime: z.string().regex(/^\\d{2}:\\d{2}$/, \"Format d'heure invalide (HH:MM)\").optional(),\n  duration: z.number().int().min(15, \"Dur√©e minimum 15 minutes\").max(480, \"Dur√©e maximum 8 heures\").optional(),\n  service: z.string().min(1, \"Service requis\").max(200, \"Maximum 200 caract√®res\").optional(),\n  price: z.number().min(0, \"Le prix ne peut pas √™tre n√©gatif\").max(10000, \"Prix maximum 10000‚Ç¨\").optional(),\n  notes: z.string().max(1000, \"Maximum 1000 caract√®res\").nullable().optional(),\n})\n\nexport type SignupInput = z.infer<typeof signupSchema>\nexport type LoginInput = z.infer<typeof loginSchema>\nexport type LinkInput = z.infer<typeof linkSchema>\nexport type LinkUpdateInput = z.infer<typeof linkUpdateSchema>\nexport type ProfileUpdateInput = z.infer<typeof profileUpdateSchema>\nexport type RaceInput = z.infer<typeof raceSchema>\nexport type SponsorInput = z.infer<typeof sponsorSchema>\nexport type MediaInput = z.infer<typeof mediaSchema>\nexport type TrainingPlanInput = z.infer<typeof trainingPlanSchema>\nexport type TrainingPlanUpdateInput = z.infer<typeof trainingPlanUpdateSchema>\nexport type BookingInput = z.infer<typeof bookingSchema>\nexport type BookingUpdateInput = z.infer<typeof bookingUpdateSchema>\n","size_bytes":8434},"components/ui-pro/interactive-link-card.tsx":{"content":"\"use client\"\n\nimport { motion, useMotionValue, useTransform } from \"framer-motion\"\nimport { Card } from \"@/components/ui/card\"\nimport { ExternalLink, TrendingUp } from \"lucide-react\"\nimport { useState } from \"react\"\n\ninterface InteractiveLinkCardProps {\n  title: string\n  description?: string\n  url: string\n  icon?: string\n  clicks: number\n  onTrackClick: () => void\n}\n\nexport function InteractiveLinkCard({\n  title,\n  description,\n  url,\n  icon,\n  clicks,\n  onTrackClick\n}: InteractiveLinkCardProps) {\n  const [isHovered, setIsHovered] = useState(false)\n  \n  // Parallax effect\n  const x = useMotionValue(0)\n  const y = useMotionValue(0)\n  \n  const rotateX = useTransform(y, [-100, 100], [5, -5])\n  const rotateY = useTransform(x, [-100, 100], [-5, 5])\n\n  const handleMouseMove = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    const rect = e.currentTarget.getBoundingClientRect()\n    const centerX = rect.left + rect.width / 2\n    const centerY = rect.top + rect.height / 2\n    x.set(e.clientX - centerX)\n    y.set(e.clientY - centerY)\n  }\n\n  const handleMouseLeave = () => {\n    x.set(0)\n    y.set(0)\n    setIsHovered(false)\n  }\n\n  return (\n    <motion.a\n      href={url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={onTrackClick}\n      className=\"block w-full\"\n      onMouseMove={handleMouseMove}\n      onMouseLeave={handleMouseLeave}\n      onHoverStart={() => setIsHovered(true)}\n      style={{\n        rotateX,\n        rotateY,\n        transformStyle: \"preserve-3d\"\n      }}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n    >\n      <Card className=\"relative overflow-hidden border-2 hover:border-blue-500 transition-colors duration-300 cursor-pointer group\">\n        {/* Animated background gradient */}\n        <motion.div\n          className=\"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10\"\n          initial={{ x: \"-100%\" }}\n          animate={{ x: isHovered ? \"0%\" : \"-100%\" }}\n          transition={{ duration: 0.3 }}\n        />\n\n        {/* Shine effect on hover */}\n        <motion.div\n          className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent\"\n          initial={{ x: \"-100%\", skewX: -20 }}\n          animate={{ x: isHovered ? \"200%\" : \"-100%\" }}\n          transition={{ duration: 0.6 }}\n        />\n\n        <div className=\"relative p-5 flex items-center gap-4\">\n          {/* Icon with bounce animation */}\n          <motion.div\n            animate={{\n              y: isHovered ? [0, -5, 0] : 0,\n            }}\n            transition={{\n              duration: 0.5,\n              repeat: isHovered ? Infinity : 0,\n              repeatDelay: 0.5\n            }}\n            className=\"text-4xl flex-shrink-0\"\n          >\n            {icon || \"\"}\n          </motion.div>\n\n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <h3 className=\"font-semibold text-lg truncate group-hover:text-blue-600 transition-colors\">\n                {title}\n              </h3>\n              <motion.div\n                initial={{ x: -5, opacity: 0 }}\n                animate={{ x: isHovered ? 0 : -5, opacity: isHovered ? 1 : 0 }}\n              >\n                <ExternalLink className=\"w-4 h-4 text-blue-600\" />\n              </motion.div>\n            </div>\n            \n            {description && (\n              <p className=\"text-sm text-muted-foreground truncate\">\n                {description}\n              </p>\n            )}\n\n            {/* Clicks counter */}\n            <motion.div\n              initial={{ opacity: 0, y: 5 }}\n              animate={{ opacity: isHovered ? 1 : 0, y: isHovered ? 0 : 5 }}\n              className=\"flex items-center gap-1 mt-2 text-xs text-muted-foreground\"\n            >\n              <TrendingUp className=\"w-3 h-3\" />\n              <span>{clicks} clics</span>\n            </motion.div>\n          </div>\n\n          {/* Animated arrow */}\n          <motion.div\n            animate={{\n              x: isHovered ? 5 : 0,\n            }}\n            transition={{ type: \"spring\", stiffness: 300 }}\n            className=\"text-muted-foreground group-hover:text-blue-600 transition-colors\"\n          >\n            <svg\n              width=\"24\"\n              height=\"24\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            >\n              <path d=\"M5 12h14M12 5l7 7-7 7\" />\n            </svg>\n          </motion.div>\n        </div>\n\n        {/* Progress bar at bottom */}\n        <motion.div\n          className=\"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500\"\n          initial={{ scaleX: 0 }}\n          animate={{ scaleX: isHovered ? 1 : 0 }}\n          transition={{ duration: 0.3 }}\n          style={{ originX: 0 }}\n        />\n      </Card>\n    </motion.a>\n  )\n}\n","size_bytes":5095},"components/ui-pro/sidebar-navigation.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { \n  LayoutDashboard, \n  Link2,\n  Trophy,\n  Award,\n  Image,\n  User,\n  Settings,\n  LogOut,\n  ChevronLeft,\n  ChevronRight,\n  Share2,\n  Users,\n  ChevronDown,\n  ChevronUp\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { useState } from \"react\"\n\ninterface SidebarNavigationProps {\n  username: string\n  displayName: string\n  avatarUrl?: string | null\n  plan?: string\n  onSignOut: () => void\n}\n\ninterface MenuItem {\n  href: string\n  icon: any\n  label: string\n  planRequired?: string\n}\n\ninterface MenuSection {\n  title?: string\n  items: MenuItem[]\n  collapsible?: boolean\n}\n\nexport function SidebarNavigation({ \n  username, \n  displayName, \n  avatarUrl,\n  plan,\n  onSignOut \n}: SidebarNavigationProps) {\n  const pathname = usePathname()\n  const [isCollapsed, setIsCollapsed] = useState(false)\n  const [expandedSections, setExpandedSections] = useState<Record<string, boolean>>({\n    profil: true,\n    sources: true\n  })\n\n  const toggleSection = (sectionId: string) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [sectionId]: !prev[sectionId]\n    }))\n  }\n\n  const menuStructure: MenuSection[] = [\n    {\n      items: [\n        { href: \"/dashboard\", icon: LayoutDashboard, label: \"Dashboard\" },\n      ]\n    },\n    {\n      title: \"Profil\",\n      collapsible: true,\n      items: [\n        { href: \"/dashboard/profile\", icon: User, label: \"Profil\" },\n        { href: \"/dashboard/media\", icon: Image, label: \"Galerie\" },\n      ]\n    },\n    {\n      title: \"Sources\",\n      collapsible: true,\n      items: [\n        { href: \"/dashboard/sources#liens\", icon: Link2, label: \"Liens\" },\n        { href: \"/dashboard/sources#competitions\", icon: Trophy, label: \"Comp√©titions\" },\n        { href: \"/dashboard/sources#sponsors\", icon: Award, label: \"Sponsors\" },\n      ]\n    },\n    {\n      items: [\n        { href: \"/dashboard/coaching\", icon: Users, label: \"Services Coaching\", planRequired: \"ELITE\" },\n        { href: \"/dashboard/share\", icon: Share2, label: \"Partager\" },\n        { href: \"/dashboard/settings\", icon: Settings, label: \"Param√®tres\" },\n      ]\n    }\n  ]\n\n  // Filtrer les sections et items selon le plan\n  const filteredMenuStructure = menuStructure.map(section => ({\n    ...section,\n    items: section.items.filter(item => {\n      if (!item.planRequired) return true\n      if (item.planRequired === \"ELITE\") return plan === \"ELITE\"\n      if (item.planRequired === \"PRO\") return plan === \"PRO\" || plan === \"ELITE\" || plan === \"ELITE\"\n      return plan === item.planRequired\n    })\n  })).filter(section => section.items.length > 0)\n\n  return (\n    <motion.div\n      initial={{ x: -280 }}\n      animate={{ x: 0, width: isCollapsed ? 80 : 280 }}\n      transition={{ duration: 0.3 }}\n      className=\"fixed left-0 top-0 h-screen bg-white border-r border-gray-200 z-50 flex flex-col\"\n    >\n      {/* Logo Section */}\n      <div className=\"h-20 flex items-center justify-between px-6 border-b border-gray-200\">\n        {!isCollapsed && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"flex items-center gap-2\"\n          >\n            <motion.span \n              className=\"font-black text-xl bg-gradient-to-r from-yellow-500 via-black to-yellow-600 bg-clip-text text-transparent\"\n              animate={{\n                backgroundPosition: [\"0% 50%\", \"100% 50%\", \"0% 50%\"],\n              }}\n              transition={{\n                duration: 3,\n                repeat: Infinity,\n                ease: \"linear\"\n              }}\n              style={{ backgroundSize: \"200% 100%\" }}\n            >\n              Athlink\n            </motion.span>\n          </motion.div>\n        )}\n        \n        <button\n          onClick={() => setIsCollapsed(!isCollapsed)}\n          className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n        >\n          {isCollapsed ? (\n            <ChevronRight className=\"w-5 h-5\" />\n          ) : (\n            <ChevronLeft className=\"w-5 h-5\" />\n          )}\n        </button>\n      </div>\n\n      {/* Menu Items */}\n      <nav className=\"flex-1 px-4 py-6 space-y-6 overflow-y-auto\">\n        {filteredMenuStructure.map((section, sectionIndex) => {\n          const sectionId = section.title?.toLowerCase() || `section-${sectionIndex}`\n          const isExpanded = expandedSections[sectionId] !== false\n\n          return (\n            <div key={sectionId} className=\"space-y-2\">\n              {/* Section Title */}\n              {section.title && !isCollapsed && (\n                <button\n                  onClick={() => section.collapsible && toggleSection(sectionId)}\n                  className={cn(\n                    \"w-full flex items-center justify-between px-2 py-1\",\n                    section.collapsible && \"hover:bg-gray-50 rounded-lg cursor-pointer\"\n                  )}\n                >\n                  <span className=\"text-xs font-bold text-gray-500 uppercase tracking-wider\">\n                    {section.title}\n                  </span>\n                  {section.collapsible && (\n                    isExpanded ? (\n                      <ChevronUp className=\"w-3 h-3 text-gray-400\" />\n                    ) : (\n                      <ChevronDown className=\"w-3 h-3 text-gray-400\" />\n                    )\n                  )}\n                </button>\n              )}\n\n              {/* Section Items */}\n              {isExpanded && (\n                <div className=\"space-y-1\">\n                  {section.items.map((item) => {\n                    const isActive = pathname === item.href\n                    const Icon = item.icon\n\n                    return (\n                      <Link key={item.href} href={item.href}>\n                        <motion.div\n                          whileHover={{ x: 4 }}\n                          className={cn(\n                            \"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200\",\n                            isActive\n                              ? \"bg-gradient-to-r from-primary-blue-50 to-primary-blue-100 text-primary-blue-700 border-l-4 border-primary-blue-500\"\n                              : \"text-gray-700 hover:bg-gray-50 hover:text-primary-blue-600\"\n                          )}\n                        >\n                          <Icon className={cn(\n                            \"w-5 h-5 flex-shrink-0\",\n                            isActive ? \"text-primary-blue-600\" : \"text-gray-500\"\n                          )} />\n                          {!isCollapsed && (\n                            <span className=\"font-semibold text-sm\">{item.label}</span>\n                          )}\n                          {isActive && !isCollapsed && (\n                            <motion.div\n                              layoutId=\"activeIndicator\"\n                              className=\"ml-auto w-2 h-2 rounded-full bg-primary-blue-600\"\n                            />\n                          )}\n                        </motion.div>\n                      </Link>\n                    )\n                  })}\n                </div>\n              )}\n            </div>\n          )\n        })}\n      </nav>\n\n      {/* User Profile Footer */}\n      <div className=\"border-t border-gray-200 p-4\">\n        <div className={cn(\n          \"flex items-center gap-3 mb-2\",\n          isCollapsed && \"justify-center\"\n        )}>\n          <div className=\"w-10 h-10 rounded-full bg-gradient-hero flex items-center justify-center text-gray-900 font-bold\">\n            {avatarUrl ? (\n              <img src={avatarUrl} alt={displayName} className=\"w-full h-full rounded-full object-cover\" />\n            ) : (\n              displayName[0]\n            )}\n          </div>\n          {!isCollapsed && (\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-semibold text-gray-900 truncate\">\n                {displayName}\n              </p>\n              <p className=\"text-xs text-gray-500 truncate\">\n                @{username}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {!isCollapsed && (\n          <div className=\"space-y-1\">\n            <Link href={`/${username}`} target=\"_blank\">\n              <button className=\"w-full flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg transition-colors\">\n                <User className=\"w-4 h-4\" />\n                Profil public\n              </button>\n            </Link>\n            <button\n              onClick={onSignOut}\n              className=\"w-full flex items-center gap-2 px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n            >\n              <LogOut className=\"w-4 h-4\" />\n              D√©connexion\n            </button>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  )\n}\n","size_bytes":8935},"(dashboard)/dashboard/sources/liens-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { linkSchema, type LinkInput } from \"@/lib/validations\"\nimport { toast } from \"sonner\"\nimport { \n  Plus, \n  Edit2, \n  Trash2, \n  Link2, \n  ExternalLink, \n  GripVertical,\n  Eye,\n  EyeOff,\n  BarChart3,\n  Copy,\n  Check\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface Link extends LinkInput {\n  id: string\n  position: number\n  clicks: number\n  isActive: boolean\n}\n\nexport function LiensContent() {\n  const [links, setLinks] = useState<Link[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showForm, setShowForm] = useState(false)\n  const [copiedId, setCopiedId] = useState<string | null>(null)\n\n  const form = useForm<LinkInput>({\n    resolver: zodResolver(linkSchema),\n    defaultValues: {\n      title: \"\",\n      url: \"\",\n      description: \"\",\n      icon: \"üîó\",\n    }\n  })\n\n  useEffect(() => {\n    fetchLinks()\n  }, [])\n\n  async function fetchLinks() {\n    try {\n      const res = await fetch(\"/api/links\")\n      const data = await res.json()\n      setLinks(data.links || [])\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement des liens\")\n    }\n  }\n\n  async function onSubmit(values: LinkInput) {\n    setIsLoading(true)\n    try {\n      const url = editingId ? `/api/links/${editingId}` : \"/api/links\"\n      const method = editingId ? \"PATCH\" : \"POST\"\n      \n      const res = await fetch(url, {\n        method,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(values)\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur\")\n      }\n\n      toast.success(editingId ? \"Lien modifi√© !\" : \"Lien cr√©√© !\")\n      form.reset()\n      setEditingId(null)\n      setShowForm(false)\n      fetchLinks()\n    } catch (error: any) {\n      toast.error(error.message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  async function deleteLink(id: string) {\n    if (!confirm(\"Supprimer ce lien ?\")) return\n\n    try {\n      const res = await fetch(`/api/links/${id}`, {\n        method: \"DELETE\",\n      })\n\n      if (!res.ok) {\n        throw new Error(\"Erreur lors de la suppression\")\n      }\n\n      toast.success(\"Lien supprim√© !\")\n      fetchLinks()\n    } catch (error: any) {\n      toast.error(error.message)\n    }\n  }\n\n  function editLink(link: Link) {\n    setEditingId(link.id)\n    setShowForm(true)\n    form.setValue(\"title\", link.title)\n    form.setValue(\"url\", link.url)\n    form.setValue(\"description\", link.description || \"\")\n    form.setValue(\"icon\", link.icon || \"\")\n  }\n\n  function copyToClipboard(text: string, id: string) {\n    navigator.clipboard.writeText(text)\n    setCopiedId(id)\n    setTimeout(() => setCopiedId(null), 2000)\n    toast.success(\"Lien copi√© !\")\n  }\n\n  const totalClicks = links.reduce((sum, link) => sum + link.clicks, 0)\n  const activeLinks = links.filter(link => link.isActive).length\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n    >\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Link2 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Liens</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{links.length}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Eye className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Liens Actifs</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{activeLinks}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <BarChart3 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Clics</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalClicks}</p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Add Button */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">Mes Liens</h2>\n          <p className=\"text-gray-600\">G√©rez vos liens personnalis√©s</p>\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => {\n            setShowForm(!showForm)\n            setEditingId(null)\n            form.reset()\n          }}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          {showForm ? \"Annuler\" : \"Nouveau Lien\"}\n        </motion.button>\n      </motion.div>\n\n      {/* Form */}\n      <AnimatePresence>\n        {showForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\"\n          >\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">\n                {editingId ? \"Modifier le lien\" : \"Cr√©er un nouveau lien\"}\n              </h3>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"title\">Titre *</Label>\n                    <Input\n                      id=\"title\"\n                      {...form.register(\"title\")}\n                      placeholder=\"Mon lien\"\n                      className=\"mt-1\"\n                    />\n                    {form.formState.errors.title && (\n                      <p className=\"text-sm text-red-500 mt-1\">\n                        {form.formState.errors.title.message}\n                      </p>\n                    )}\n                  </div>\n                  <div>\n                    <Label htmlFor=\"url\">URL *</Label>\n                    <Input\n                      id=\"url\"\n                      type=\"url\"\n                      {...form.register(\"url\")}\n                      placeholder=\"https://example.com\"\n                      className=\"mt-1\"\n                    />\n                    {form.formState.errors.url && (\n                      <p className=\"text-sm text-red-500 mt-1\">\n                        {form.formState.errors.url.message}\n                      </p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"description\">Description</Label>\n                    <Input\n                      id=\"description\"\n                      {...form.register(\"description\")}\n                      placeholder=\"Description optionnelle\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"icon\">Ic√¥ne</Label>\n                    <Input\n                      id=\"icon\"\n                      {...form.register(\"icon\")}\n                      placeholder=\"üîó\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <motion.button\n                    type=\"submit\"\n                    disabled={isLoading}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 disabled:opacity-50\"\n                  >\n                    {isLoading ? (\n                      <>\n                        <motion.div\n                          animate={{ rotate: 360 }}\n                          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                          className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                        />\n                        Sauvegarde...\n                      </>\n                    ) : (\n                      <>\n                        <Plus className=\"w-4 h-4\" />\n                        {editingId ? \"Modifier\" : \"Cr√©er\"}\n                      </>\n                    )}\n                  </motion.button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Links List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {links.map((link, index) => (\n            <motion.div\n              key={link.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 group\"\n            >\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-4\">\n                    <motion.div\n                      whileHover={{ scale: 1.1, rotate: 5 }}\n                      className=\"text-3xl cursor-pointer\"\n                    >\n                      {link.icon}\n                    </motion.div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{link.title}</h3>\n                        <div className={cn(\n                          \"px-2 py-1 rounded-full text-xs font-medium\",\n                          link.isActive \n                            ? \"bg-green-100 text-green-800\" \n                            : \"bg-gray-100 text-gray-800\"\n                        )}>\n                          {link.isActive ? \"Actif\" : \"Inactif\"}\n                        </div>\n                      </div>\n                      <p className=\"text-sm text-gray-600 truncate max-w-md\">{link.url}</p>\n                      {link.description && (\n                        <p className=\"text-sm text-gray-500 mt-1\">{link.description}</p>\n                      )}\n                      <div className=\"flex items-center gap-4 mt-2\">\n                        <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                          <BarChart3 className=\"w-4 h-4\" />\n                          {link.clicks} clics\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => copyToClipboard(link.url, link.id)}\n                      className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Copier le lien\"\n                    >\n                      {copiedId === link.id ? (\n                        <Check className=\"w-4 h-4 text-green-600\" />\n                      ) : (\n                        <Copy className=\"w-4 h-4\" />\n                      )}\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => window.open(link.url, '_blank')}\n                      className=\"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\n                      title=\"Ouvrir le lien\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => editLink(link)}\n                      className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Modifier\"\n                    >\n                      <Edit2 className=\"w-4 h-4\" />\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => deleteLink(link.id)}\n                      className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                      title=\"Supprimer\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </motion.button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        {links.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"text-6xl mb-4\">üîó</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Aucun lien cr√©√©</h3>\n            <p className=\"text-gray-600 mb-4\">Commencez par cr√©er votre premier lien personnalis√©</p>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setShowForm(true)}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-3 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Cr√©er mon premier lien\n            </motion.button>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}","size_bytes":16118},"icon.tsx":{"content":"import { ImageResponse } from 'next/og'\n\nexport const runtime = 'edge'\nexport const size = {\n  width: 32,\n  height: 32,\n}\nexport const contentType = 'image/png'\n\nexport default function Icon() {\n  return new ImageResponse(\n    (\n      <div\n        style={{\n          width: '100%',\n          height: '100%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          background: 'linear-gradient(135deg, #1a8cff 0%, #801aff 50%, #ff1a80 100%)',\n          borderRadius: '8px',\n        }}\n      >\n        <div\n          style={{\n            fontSize: 20,\n            fontWeight: 900,\n            color: 'white',\n          }}\n        >\n          A\n        </div>\n      </div>\n    ),\n    {\n      ...size,\n    }\n  )\n}\n","size_bytes":759},"(auth)/layout.tsx":{"content":"export default function AuthLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50\">\n      {children}\n    </div>\n  )\n}\n","size_bytes":211},"components/ui/touch-input.tsx":{"content":"\"use client\"\n\nimport { Input } from \"@/components/ui/input\"\nimport { cn } from \"@/lib/utils\"\nimport { forwardRef } from \"react\"\n\ninterface TouchInputProps extends React.ComponentProps<typeof Input> {\n  /**\n   * Minimum touch target size (default: 44px for accessibility)\n   */\n  minTouchSize?: number\n}\n\nconst TouchInput = forwardRef<HTMLInputElement, TouchInputProps>(\n  ({ className, minTouchSize = 44, ...props }, ref) => {\n    return (\n      <Input\n        ref={ref}\n        className={cn(\n          // Ensure minimum touch target size\n          `min-h-[${minTouchSize}px]`,\n          // Mobile-first responsive sizing\n          \"h-11 sm:h-12\",\n          // Better touch experience\n          \"text-base\", // Prevents zoom on iOS\n          // Better spacing for mobile\n          \"px-4 py-3\",\n          className\n        )}\n        {...props}\n      />\n    )\n  }\n)\n\nTouchInput.displayName = \"TouchInput\"\n\nexport { TouchInput }\n","size_bytes":928},"components/ui-pro/share-profile-button.tsx":{"content":"\"use client\"\n\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Share2, Copy, Check, Facebook, Twitter, Linkedin, MessageCircle } from \"lucide-react\"\nimport { useState } from \"react\"\n\ninterface ShareProfileButtonProps {\n  username: string\n  displayName: string\n}\n\nexport function ShareProfileButton({ username, displayName }: ShareProfileButtonProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [copied, setCopied] = useState(false)\n\n  const profileUrl = typeof window !== 'undefined' ? window.location.href : `https://athlink.app/${username}`\n\n  const handleCopyLink = async () => {\n    try {\n      await navigator.clipboard.writeText(profileUrl)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Failed to copy link', err)\n    }\n  }\n\n  const shareLinks = [\n    {\n      name: 'Copier le lien',\n      icon: copied ? Check : Copy,\n      onClick: handleCopyLink,\n      color: 'from-gray-600 to-gray-700',\n    },\n    {\n      name: 'WhatsApp',\n      icon: MessageCircle,\n      onClick: () => window.open(`https://wa.me/?text=${encodeURIComponent(`D√©couvre le profil de ${displayName} sur Athlink : ${profileUrl}`)}`, '_blank'),\n      color: 'from-green-600 to-green-700',\n    },\n    {\n      name: 'Facebook',\n      icon: Facebook,\n      onClick: () => window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(profileUrl)}`, '_blank'),\n      color: 'from-blue-600 to-blue-700',\n    },\n    {\n      name: 'Twitter',\n      icon: Twitter,\n      onClick: () => window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`D√©couvre le profil de ${displayName} sur Athlink`)}&url=${encodeURIComponent(profileUrl)}`, '_blank'),\n      color: 'from-sky-500 to-sky-600',\n    },\n    {\n      name: 'LinkedIn',\n      icon: Linkedin,\n      onClick: () => window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(profileUrl)}`, '_blank'),\n      color: 'from-blue-700 to-blue-800',\n    },\n  ]\n\n  return (\n    <div className=\"fixed bottom-6 right-6 z-40\">\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.8, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.8, y: 20 }}\n            transition={{ type: \"spring\", damping: 20 }}\n            className=\"absolute bottom-16 right-0 bg-white rounded-2xl shadow-floating p-3 mb-2 min-w-[200px]\"\n          >\n            <p className=\"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-3 px-2\">\n              Partager ce profil\n            </p>\n            <div className=\"space-y-2\">\n              {shareLinks.map((link, index) => (\n                <motion.button\n                  key={link.name}\n                  initial={{ x: 20, opacity: 0 }}\n                  animate={{ x: 0, opacity: 1 }}\n                  transition={{ delay: index * 0.05 }}\n                  whileHover={{ x: 4 }}\n                  whileTap={{ scale: 0.95 }}\n                  onClick={() => {\n                    link.onClick()\n                    if (link.name !== 'Copier le lien') {\n                      setIsOpen(false)\n                    }\n                  }}\n                  className=\"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl hover:bg-gray-50 transition-colors group\"\n                >\n                  <div className={`p-2 rounded-lg bg-gradient-to-br ${link.color} text-white shadow-standard`}>\n                    <link.icon className=\"w-4 h-4\" />\n                  </div>\n                  <span className=\"text-sm font-medium text-gray-700 group-hover:text-gray-900\">\n                    {link.name}\n                  </span>\n                </motion.button>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Main Share Button */}\n      <motion.button\n        whileHover={{ scale: 1.05 }}\n        whileTap={{ scale: 0.95 }}\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-14 h-14 rounded-full bg-gradient-hero text-gray-900 shadow-floating hover:shadow-glow-blue flex items-center justify-center transition-all\"\n      >\n        <motion.div\n          animate={{ rotate: isOpen ? 45 : 0 }}\n          transition={{ type: \"spring\", damping: 15 }}\n        >\n          <Share2 className=\"w-6 h-6\" />\n        </motion.div>\n      </motion.button>\n\n      {/* Backdrop */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={() => setIsOpen(false)}\n            className=\"fixed inset-0 -z-10\"\n          />\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n\n","size_bytes":4776},"(dashboard)/dashboard/sponsors/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function SponsorsPage() {\n  // Rediriger vers Sources avec l'onglet Sponsors\n  redirect(\"/dashboard/sources#sponsors\")\n}\n","size_bytes":180},"(dashboard)/dashboard/coaching/bookings/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { BookingsClientPro } from \"./bookings-client-pro\"\n\nexport default async function BookingsPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      id: true,\n      stats: true\n    }\n  })\n\n  if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n    redirect(\"/dashboard\")\n  }\n\n  // R√©cup√©rer les r√©servations depuis le champ stats (temporaire)\n  const profileStats = profile.stats as any || {}\n  const bookings = profileStats.bookings || []\n  const availabilities = profileStats.availabilities || []\n\n  // Statistiques\n  const now = new Date()\n  const upcomingBookings = bookings.filter((b: any) => new Date(b.date) >= now && b.status === \"CONFIRMED\")\n  const completedBookings = bookings.filter((b: any) => b.status === \"COMPLETED\")\n  const totalRevenue = completedBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0)\n\n  const stats = {\n    totalBookings: bookings.length,\n    upcomingBookings: upcomingBookings.length,\n    completedBookings: completedBookings.length,\n    totalRevenue\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <a\n                href=\"/dashboard/coaching\"\n                className=\"inline-flex items-center gap-2 text-gray-900 hover:text-gray-700 font-medium transition-colors mb-4\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Retour au Centre de Coaching\n              </a>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                R√©servations\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                G√®re ton calendrier et tes bookings clients\n              </p>\n            </div>\n            <PlanBadge plan=\"COACH\" size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Total r√©servations</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalBookings}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">√Ä venir</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.upcomingBookings}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Compl√©t√©es</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.completedBookings}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Revenus</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <BookingsClientPro \n        initialBookings={bookings}\n        profileId={profile.id}\n        coachName={profile.displayName}\n      />\n    </div>\n  )\n}\n","size_bytes":6793},"components/ui-pro/realtime-notifications.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { \n  Bell, \n  Eye, \n  MousePointer, \n  Users, \n  TrendingUp,\n  X,\n  Settings,\n  Volume2,\n  VolumeX\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { PlanType } from \"@/lib/features\"\n\ninterface Notification {\n  id: string\n  type: \"view\" | \"click\" | \"follower\" | \"engagement\"\n  title: string\n  message: string\n  timestamp: Date\n  read: boolean\n  data?: any\n}\n\ninterface RealtimeNotificationsProps {\n  notifications: Notification[]\n  userPlan: PlanType\n  onMarkAsRead: (id: string) => void\n  onMarkAllAsRead: () => void\n  onClearNotification: (id: string) => void\n  onToggleSound: () => void\n  soundEnabled: boolean\n  className?: string\n}\n\nexport function RealtimeNotifications({\n  notifications,\n  userPlan,\n  onMarkAsRead,\n  onMarkAllAsRead,\n  onClearNotification,\n  onToggleSound,\n  soundEnabled,\n  className\n}: RealtimeNotificationsProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const [unreadCount, setUnreadCount] = useState(0)\n\n  const canAccessRealtimeNotifications = userPlan === \"ELITE\"\n\n  useEffect(() => {\n    const unread = notifications.filter(n => !n.read).length\n    setUnreadCount(unread)\n  }, [notifications])\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case \"view\":\n        return Eye\n      case \"click\":\n        return MousePointer\n      case \"follower\":\n        return Users\n      case \"engagement\":\n        return TrendingUp\n      default:\n        return Bell\n    }\n  }\n\n  const getNotificationColor = (type: string) => {\n    switch (type) {\n      case \"view\":\n        return \"bg-blue-100 text-blue-600 border-blue-200\"\n      case \"click\":\n        return \"bg-green-100 text-green-600 border-green-200\"\n      case \"follower\":\n        return \"bg-purple-100 text-purple-600 border-purple-200\"\n      case \"engagement\":\n        return \"bg-orange-100 text-orange-600 border-orange-200\"\n      default:\n        return \"bg-gray-100 text-gray-600 border-gray-200\"\n    }\n  }\n\n  const formatTime = (timestamp: Date) => {\n    const now = new Date()\n    const diff = now.getTime() - timestamp.getTime()\n    const minutes = Math.floor(diff / 60000)\n    const hours = Math.floor(diff / 3600000)\n    const days = Math.floor(diff / 86400000)\n\n    if (minutes < 1) return \"√Ä l'instant\"\n    if (minutes < 60) return `Il y a ${minutes}min`\n    if (hours < 24) return `Il y a ${hours}h`\n    return `Il y a ${days}j`\n  }\n\n  const playNotificationSound = () => {\n    if (soundEnabled && canAccessRealtimeNotifications) {\n      // Cr√©er un son de notification simple\n      const audioContext = new (window.AudioContext || (window as any).webkitAudioContext)()\n      const oscillator = audioContext.createOscillator()\n      const gainNode = audioContext.createGain()\n      \n      oscillator.connect(gainNode)\n      gainNode.connect(audioContext.destination)\n      \n      oscillator.frequency.setValueAtTime(800, audioContext.currentTime)\n      gainNode.gain.setValueAtTime(0.3, audioContext.currentTime)\n      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5)\n      \n      oscillator.start(audioContext.currentTime)\n      oscillator.stop(audioContext.currentTime + 0.5)\n    }\n  }\n\n  useEffect(() => {\n    // Jouer un son pour les nouvelles notifications\n    if (notifications.length > 0 && !notifications[0].read) {\n      playNotificationSound()\n    }\n  }, [notifications])\n\n  if (!canAccessRealtimeNotifications) {\n    return (\n      <Card className={cn(\"border-yellow-200 bg-yellow-50\", className)}>\n        <CardContent className=\"p-6 text-center\">\n          <Bell className=\"w-12 h-12 text-yellow-600 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">\n            Notifications en temps r√©el\n          </h3>\n          <p className=\"text-yellow-700 mb-4\">\n            Les notifications en temps r√©el sont disponibles uniquement avec le plan Elite.\n            Recevez des alertes instantan√©es pour chaque vue, clic et interaction sur votre profil.\n          </p>\n          <Button className=\"bg-yellow-600 hover:bg-yellow-700\">\n            Upgrade vers Elite\n          </Button>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className={cn(\"relative\", className)}>\n      {/* Bouton de notification */}\n      <Button\n        onClick={() => setIsOpen(!isOpen)}\n        variant=\"outline\"\n        size=\"sm\"\n        className=\"relative\"\n      >\n        <Bell className=\"w-4 h-4\" />\n        {unreadCount > 0 && (\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\"\n          >\n            {unreadCount > 9 ? \"9+\" : unreadCount}\n          </motion.div>\n        )}\n      </Button>\n\n      {/* Panel des notifications */}\n      <AnimatePresence>\n        {isOpen && (\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.95 }}\n            transition={{ duration: 0.2 }}\n            className=\"absolute right-0 top-12 w-96 bg-white rounded-lg shadow-lg border border-gray-200 z-50 max-h-96 overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Bell className=\"w-5 h-5 text-gray-600\" />\n                <h3 className=\"font-semibold text-gray-900\">Notifications</h3>\n                {unreadCount > 0 && (\n                  <Badge variant=\"secondary\" className=\"bg-red-100 text-red-600\">\n                    {unreadCount}\n                  </Badge>\n                )}\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <Button\n                  onClick={onToggleSound}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"p-1\"\n                >\n                  {soundEnabled ? (\n                    <Volume2 className=\"w-4 h-4\" />\n                  ) : (\n                    <VolumeX className=\"w-4 h-4\" />\n                  )}\n                </Button>\n                \n                {unreadCount > 0 && (\n                  <Button\n                    onClick={onMarkAllAsRead}\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"text-xs\"\n                  >\n                    Tout marquer comme lu\n                  </Button>\n                )}\n              </div>\n            </div>\n\n            {/* Liste des notifications */}\n            <div className=\"max-h-80 overflow-y-auto\">\n              {notifications.length === 0 ? (\n                <div className=\"p-6 text-center text-gray-500\">\n                  <Bell className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n                  <p>Aucune notification</p>\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100\">\n                  {notifications.map((notification) => {\n                    const Icon = getNotificationIcon(notification.type)\n                    return (\n                      <motion.div\n                        key={notification.id}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        exit={{ opacity: 0, x: 20 }}\n                        className={cn(\n                          \"p-4 hover:bg-gray-50 transition-colors relative\",\n                          !notification.read && \"bg-blue-50/50\"\n                        )}\n                      >\n                        <div className=\"flex items-start gap-3\">\n                          <div className={cn(\n                            \"p-2 rounded-lg border\",\n                            getNotificationColor(notification.type)\n                          )}>\n                            <Icon className=\"w-4 h-4\" />\n                          </div>\n                          \n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center justify-between mb-1\">\n                              <p className=\"text-sm font-medium text-gray-900 truncate\">\n                                {notification.title}\n                              </p>\n                              <div className=\"flex items-center gap-2\">\n                                <span className=\"text-xs text-gray-500\">\n                                  {formatTime(notification.timestamp)}\n                                </span>\n                                <Button\n                                  onClick={() => onClearNotification(notification.id)}\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  className=\"p-1 h-auto\"\n                                >\n                                  <X className=\"w-3 h-3\" />\n                                </Button>\n                              </div>\n                            </div>\n                            \n                            <p className=\"text-sm text-gray-600 line-clamp-2\">\n                              {notification.message}\n                            </p>\n                            \n                            {!notification.read && (\n                              <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-blue-500 rounded-r\" />\n                            )}\n                          </div>\n                        </div>\n                      </motion.div>\n                    )\n                  })}\n                </div>\n              )}\n            </div>\n\n            {/* Footer */}\n            {notifications.length > 0 && (\n              <div className=\"p-3 border-t border-gray-200 bg-gray-50\">\n                <Button\n                  onClick={() => setIsOpen(false)}\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"w-full\"\n                >\n                  Fermer\n                </Button>\n              </div>\n            )}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Overlay */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => setIsOpen(false)}\n        />\n      )}\n    </div>\n  )\n}\n\n// Hook pour simuler les notifications en temps r√©el\nexport function useRealtimeNotifications(userPlan: PlanType) {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [soundEnabled, setSoundEnabled] = useState(true)\n\n  const addNotification = (notification: Omit<Notification, \"id\" | \"timestamp\">) => {\n    if (userPlan !== \"ELITE\") return\n\n    const newNotification: Notification = {\n      ...notification,\n      id: Math.random().toString(36).substr(2, 9),\n      timestamp: new Date()\n    }\n\n    setNotifications(prev => [newNotification, ...prev.slice(0, 49)]) // Garder max 50 notifications\n  }\n\n  const markAsRead = (id: string) => {\n    setNotifications(prev =>\n      prev.map(n => n.id === id ? { ...n, read: true } : n)\n    )\n  }\n\n  const markAllAsRead = () => {\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })))\n  }\n\n  const clearNotification = (id: string) => {\n    setNotifications(prev => prev.filter(n => n.id !== id))\n  }\n\n  const toggleSound = () => {\n    setSoundEnabled(prev => !prev)\n  }\n\n  // Simulation d'√©v√©nements en temps r√©el\n  useEffect(() => {\n    if (userPlan !== \"ELITE\") return\n\n    const interval = setInterval(() => {\n      const eventTypes = [\"view\", \"click\", \"follower\", \"engagement\"]\n      const randomType = eventTypes[Math.floor(Math.random() * eventTypes.length)]\n      \n      const notifications = {\n        view: {\n          title: \"Nouvelle vue\",\n          message: \"Quelqu'un a visit√© votre profil\"\n        },\n        click: {\n          title: \"Nouveau clic\",\n          message: \"Un lien a √©t√© cliqu√© sur votre profil\"\n        },\n        follower: {\n          title: \"Nouveau follower\",\n          message: \"Vous avez un nouveau follower\"\n        },\n        engagement: {\n          title: \"Engagement √©lev√©\",\n          message: \"Votre profil g√©n√®re beaucoup d'engagement aujourd'hui\"\n        }\n      }\n\n      addNotification({\n        type: randomType as any,\n        ...notifications[randomType as keyof typeof notifications],\n        read: false\n      })\n    }, Math.random() * 30000 + 10000) // Entre 10 et 40 secondes\n\n    return () => clearInterval(interval)\n  }, [userPlan])\n\n  return {\n    notifications,\n    soundEnabled,\n    addNotification,\n    markAsRead,\n    markAllAsRead,\n    clearNotification,\n    toggleSound\n  }\n}\n","size_bytes":13037},"[username]/coaching/coaching-public-client.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { Calendar, Clock, Euro, Target, Check, X, BookOpen, Users, Download, Lock } from \"lucide-react\"\nimport { PdfPurchaseModal } from \"./pdf-purchase-modal\"\n\ninterface TrainingPlan {\n  id: string\n  title: string\n  description: string\n  price: number\n  duration: number\n  difficulty: string\n  category: string\n  pdfFileName?: string\n  sessions: any[]\n  _count: {\n    sessions: number\n    subscribers: number\n  }\n}\n\ninterface CoachingPublicClientProps {\n  coachName: string\n  coachBio: string | null\n  coachAvatar: string | null\n  trainingPlans: TrainingPlan[]\n  availabilities: any[]\n  username: string\n}\n\nexport function CoachingPublicClient({\n  coachName,\n  coachBio,\n  coachAvatar,\n  trainingPlans,\n  availabilities,\n  username\n}: CoachingPublicClientProps) {\n  const [selectedPlan, setSelectedPlan] = useState<TrainingPlan | null>(null)\n  const [showBookingForm, setShowBookingForm] = useState(false)\n  const [viewMode, setViewMode] = useState<\"plans\" | \"booking\">(\"plans\")\n  const [showPdfPurchase, setShowPdfPurchase] = useState(false)\n  const [selectedPlanForPdf, setSelectedPlanForPdf] = useState<TrainingPlan | null>(null)\n\n  const [bookingForm, setBookingForm] = useState({\n    clientName: \"\",\n    clientEmail: \"\",\n    clientPhone: \"\",\n    service: \"\",\n    message: \"\"\n  })\n\n  const difficultyLabels: Record<string, string> = {\n    DEBUTANT: \"D√©butant\",\n    INTERMEDIAIRE: \"Interm√©diaire\",\n    AVANCE: \"Avanc√©\"\n  }\n\n  const difficultyColors: Record<string, string> = {\n    DEBUTANT: \"bg-green-100 text-green-800\",\n    INTERMEDIAIRE: \"bg-yellow-100 text-yellow-800\",\n    AVANCE: \"bg-red-100 text-red-800\"\n  }\n\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [submitSuccess, setSubmitSuccess] = useState(false)\n  const [submitError, setSubmitError] = useState(\"\")\n\n  const handleBookingSubmit = async () => {\n    setIsSubmitting(true)\n    setSubmitError(\"\")\n\n    try {\n      const response = await fetch(\"/api/public/booking-request\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          coachUsername: username,\n          ...bookingForm\n        })\n      })\n\n      if (response.ok) {\n        setSubmitSuccess(true)\n        setBookingForm({\n          clientName: \"\",\n          clientEmail: \"\",\n          clientPhone: \"\",\n          service: \"\",\n          message: \"\"\n        })\n        \n        // Masquer le message de succ√®s apr√®s 5 secondes\n        setTimeout(() => {\n          setSubmitSuccess(false)\n        }, 5000)\n      } else {\n        const error = await response.json()\n        setSubmitError(error.error || \"Une erreur est survenue\")\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'envoi:\", error)\n      setSubmitError(\"Impossible d'envoyer la demande. Veuillez r√©essayer.\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handlePdfPurchase = (plan: TrainingPlan) => {\n    setSelectedPlanForPdf(plan)\n    setShowPdfPurchase(true)\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Coach Header */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10\"\n      >\n        <div className=\"flex flex-col md:flex-row items-center md:items-start gap-6\">\n          {coachAvatar ? (\n            <Image\n              src={coachAvatar}\n              alt={coachName}\n              width={120}\n              height={120}\n              className=\"w-24 h-24 rounded-full object-cover border-4 border-white/20\"\n            />\n          ) : (\n            <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center border-4 border-white/20\">\n              <span className=\"text-3xl font-bold text-primary-blue-600\">\n                {coachName.charAt(0)}\n              </span>\n            </div>\n          )}\n          <div className=\"flex-1 text-center md:text-left\">\n            <h2 className=\"text-3xl font-bold mb-2\">{coachName}</h2>\n            <p className=\"text-lg text-yellow-400 mb-3\">Coach Certifi√©</p>\n            {coachBio && (\n              <p className=\"text-gray-300 mb-4\">{coachBio}</p>\n            )}\n            <div className=\"flex flex-wrap gap-3 justify-center md:justify-start\">\n              <div className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full\">\n                <BookOpen className=\"w-4 h-4 text-primary-blue-400\" />\n                <span className=\"text-sm\">{trainingPlans.length} Plans disponibles</span>\n              </div>\n              <div className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full\">\n                <Users className=\"w-4 h-4 text-primary-green-400\" />\n                <span className=\"text-sm\">Coaching personnalis√©</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex gap-4\">\n        <button\n          onClick={() => setViewMode(\"plans\")}\n          className={`flex-1 py-3 rounded-xl font-bold transition-all ${\n            viewMode === \"plans\"\n              ? \"bg-gradient-ocean text-gray-900\"\n              : \"bg-white/5 text-white hover:bg-white/10\"\n          }`}\n        >\n          Plans d'Entra√Ænement\n        </button>\n        <button\n          onClick={() => setViewMode(\"booking\")}\n          className={`flex-1 py-3 rounded-xl font-bold transition-all ${\n            viewMode === \"booking\"\n              ? \"bg-gradient-ocean text-gray-900\"\n              : \"bg-white/5 text-white hover:bg-white/10\"\n          }`}\n        >\n          R√©server une S√©ance\n        </button>\n      </div>\n\n      {/* Training Plans View */}\n      {viewMode === \"plans\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {trainingPlans.length > 0 ? (\n            trainingPlans.map((plan) => (\n              <motion.div\n                key={plan.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                whileHover={{ y: -5 }}\n                className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 hover:border-primary-blue-400/50 transition-all cursor-pointer flex flex-col h-full\"\n                onClick={() => setSelectedPlan(plan)}\n              >\n                {/* Header avec badge align√© */}\n                <div className=\"flex items-center justify-between mb-4 min-h-[3rem]\">\n                  <h3 className=\"text-xl font-bold text-white flex-1 pr-3\">{plan.title}</h3>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap flex-shrink-0 ${difficultyColors[plan.difficulty]}`}>\n                    {difficultyLabels[plan.difficulty]}\n                  </span>\n                </div>\n\n                {/* Description avec hauteur fixe */}\n                <div className=\"flex-1 mb-4\">\n                  <p className=\"text-gray-300 text-sm line-clamp-3 h-[4.5rem] overflow-hidden\">{plan.description}</p>\n                </div>\n\n                {/* D√©tails du programme avec alignement uniforme */}\n                <div className=\"space-y-2 mb-4\">\n                  <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                    <Calendar className=\"w-4 h-4 text-primary-blue-400 flex-shrink-0\" />\n                    <span className=\"min-w-0 flex-1\">{plan.duration} semaines</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                    <Target className=\"w-4 h-4 text-yellow-400 flex-shrink-0\" />\n                    <span className=\"min-w-0 flex-1\">{plan._count.sessions} s√©ances</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                    <Users className=\"w-4 h-4 text-primary-green-400 flex-shrink-0\" />\n                    <span className=\"min-w-0 flex-1\">{plan._count.subscribers} abonn√©s</span>\n                  </div>\n                </div>\n\n                {/* Footer avec alignement uniforme */}\n                <div className=\"pt-4 border-t border-white/10 mt-auto\">\n                  <div className=\"flex items-center justify-between mb-3 min-h-[2rem]\">\n                    <div className=\"flex items-center gap-2\">\n                      <Euro className=\"w-5 h-5 text-primary-green-400 flex-shrink-0\" />\n                      <span className=\"text-2xl font-bold text-white\">{plan.price}‚Ç¨</span>\n                    </div>\n                    {plan.pdfFileName && (\n                      <div className=\"flex items-center gap-1 text-xs text-gray-300 flex-shrink-0\">\n                        <Download className=\"w-3 h-3\" />\n                        <span>PDF disponible</span>\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex gap-2\">\n                    <button \n                      onClick={(e) => {\n                        e.stopPropagation()\n                        setSelectedPlan(plan)\n                      }}\n                      className=\"flex-1 px-3 py-2 bg-primary-blue-500 hover:bg-primary-blue-600 rounded-lg font-medium transition-colors text-sm\"\n                    >\n                      Voir plus\n                    </button>\n                    {plan.pdfFileName && (\n                      <button \n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handlePdfPurchase(plan)\n                        }}\n                        className=\"flex-1 px-3 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 rounded-lg font-medium transition-all text-sm flex items-center justify-center gap-1\"\n                      >\n                        <Lock className=\"w-3 h-3\" />\n                        Acheter PDF\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </motion.div>\n            ))\n          ) : (\n            <div className=\"col-span-full text-center py-12\">\n              <div className=\"w-24 h-24 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4\">\n                <BookOpen className=\"w-12 h-12 text-gray-400\" />\n              </div>\n              <p className=\"text-xl font-bold text-white mb-2\">Aucun plan disponible</p>\n              <p className=\"text-gray-400\">Les plans d'entra√Ænement seront bient√¥t disponibles</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Booking View */}\n      {viewMode === \"booking\" && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"max-w-2xl mx-auto\"\n        >\n          <div className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10\">\n            <h3 className=\"text-2xl font-bold mb-6 text-center\">Demander une r√©servation</h3>\n            <p className=\"text-gray-300 text-center mb-8\">\n              Remplis ce formulaire et {coachName} te contactera pour confirmer ta r√©servation\n            </p>\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Nom complet *\n                </label>\n                <input\n                  type=\"text\"\n                  value={bookingForm.clientName}\n                  onChange={(e) => setBookingForm({ ...bookingForm, clientName: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                  placeholder=\"Jean Dupont\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Email *\n                </label>\n                <input\n                  type=\"email\"\n                  value={bookingForm.clientEmail}\n                  onChange={(e) => setBookingForm({ ...bookingForm, clientEmail: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                  placeholder=\"jean@example.com\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  T√©l√©phone\n                </label>\n                <input\n                  type=\"tel\"\n                  value={bookingForm.clientPhone}\n                  onChange={(e) => setBookingForm({ ...bookingForm, clientPhone: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                  placeholder=\"+33 6 12 34 56 78\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Type de service *\n                </label>\n                <select\n                  value={bookingForm.service}\n                  onChange={(e) => setBookingForm({ ...bookingForm, service: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                >\n                  <option value=\"\">S√©lectionner un service</option>\n                  <option value=\"coaching\">Coaching personnalis√©</option>\n                  <option value=\"consultation\">Consultation technique</option>\n                  <option value=\"suivi\">Suivi de performance</option>\n                  <option value=\"autre\">Autre</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Message\n                </label>\n                <textarea\n                  value={bookingForm.message}\n                  onChange={(e) => setBookingForm({ ...bookingForm, message: e.target.value })}\n                  rows={4}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all resize-none\"\n                  placeholder=\"Dis-nous en plus sur tes objectifs...\"\n                />\n              </div>\n\n              {/* Messages de succ√®s/erreur */}\n              {submitSuccess && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className=\"bg-green-500/20 border border-green-500/50 rounded-xl p-4 flex items-start gap-3\"\n                >\n                  <Check className=\"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-green-400\">Demande envoy√©e avec succ√®s !</p>\n                    <p className=\"text-sm text-green-300/80 mt-1\">\n                      {coachName} a re√ßu votre demande et vous contactera bient√¥t pour confirmer les d√©tails.\n                    </p>\n                  </div>\n                </motion.div>\n              )}\n\n              {submitError && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className=\"bg-red-500/20 border border-red-500/50 rounded-xl p-4 flex items-start gap-3\"\n                >\n                  <X className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-red-400\">Erreur</p>\n                    <p className=\"text-sm text-red-300/80 mt-1\">{submitError}</p>\n                  </div>\n                </motion.div>\n              )}\n\n              <button\n                onClick={handleBookingSubmit}\n                disabled={!bookingForm.clientName || !bookingForm.clientEmail || !bookingForm.service || isSubmitting}\n                className=\"w-full py-4 bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold rounded-xl hover:from-gray-900 hover:to-black hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <svg className=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Envoi en cours...\n                  </span>\n                ) : (\n                  \"Envoyer la demande\"\n                )}\n              </button>\n\n              <p className=\"text-xs text-gray-400 text-center\">\n                En envoyant ce formulaire, tu acceptes d'√™tre contact√© par {coachName}\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Plan Details Modal */}\n      <AnimatePresence>\n        {selectedPlan && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\"\n            onClick={() => setSelectedPlan(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-gray-900 rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-white/20\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-white\">{selectedPlan.title}</h3>\n                <button\n                  onClick={() => setSelectedPlan(null)}\n                  className=\"p-2 text-gray-400 hover:text-white transition-colors\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div>\n                  <p className=\"text-gray-300 leading-relaxed\">{selectedPlan.description}</p>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Euro className=\"w-5 h-5 text-primary-green-400\" />\n                      <span className=\"text-sm text-gray-400\">Prix</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan.price}‚Ç¨</p>\n                  </div>\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Calendar className=\"w-5 h-5 text-primary-blue-400\" />\n                      <span className=\"text-sm text-gray-400\">Dur√©e</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan.duration} semaines</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Target className=\"w-5 h-5 text-yellow-400\" />\n                      <span className=\"text-sm text-gray-400\">S√©ances</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan._count.sessions}</p>\n                  </div>\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Users className=\"w-5 h-5 text-purple-400\" />\n                      <span className=\"text-sm text-gray-400\">Abonn√©s</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan._count.subscribers}</p>\n                  </div>\n                </div>\n\n                <div className=\"pt-6 border-t border-white/10\">\n                  <button\n                    onClick={() => {\n                      setSelectedPlan(null)\n                      setViewMode(\"booking\")\n                      setBookingForm(prev => ({ ...prev, service: `Plan: ${selectedPlan.title}` }))\n                    }}\n                    className=\"w-full py-4 bg-gradient-ocean text-gray-900 font-bold rounded-xl hover:shadow-glow-blue transition-all\"\n                  >\n                    Contacter pour ce plan\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* PDF Purchase Modal */}\n      <PdfPurchaseModal\n        plan={selectedPlanForPdf}\n        isOpen={showPdfPurchase}\n        onClose={() => {\n          setShowPdfPurchase(false)\n          setSelectedPlanForPdf(null)\n        }}\n        coachName={coachName}\n      />\n    </div>\n  )\n}\n\n","size_bytes":22034},"components/ui-pro/reading-progress.tsx":{"content":"\"use client\"\n\nimport { motion, useScroll, useSpring } from \"framer-motion\"\n\nexport function ReadingProgress() {\n  const { scrollYProgress } = useScroll()\n  const scaleX = useSpring(scrollYProgress, {\n    stiffness: 100,\n    damping: 30,\n    restDelta: 0.001\n  })\n\n  return (\n    <motion.div\n      className=\"fixed top-0 left-0 right-0 h-1 bg-gradient-hero origin-left z-50 shadow-glow-blue\"\n      style={{ scaleX }}\n    />\n  )\n}\n\n","size_bytes":430},"components/ui-pro/glass-media-gallery.tsx":{"content":"\"use client\"\n\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { useState } from \"react\"\nimport { X, Play, Maximize2 } from \"lucide-react\"\n\ninterface Media {\n  id: string\n  type: string\n  url: string\n  title: string | null\n  thumbnail: string | null\n}\n\ninterface GlassMediaGalleryProps {\n  media: Media[]\n}\n\nexport function GlassMediaGallery({ media }: GlassMediaGalleryProps) {\n  const [selectedMedia, setSelectedMedia] = useState<Media | null>(null)\n\n  return (\n    <>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-3\">\n        {media.map((item, index) => (\n          <MediaCard\n            key={item.id}\n            media={item}\n            index={index}\n            onClick={() => setSelectedMedia(item)}\n          />\n        ))}\n      </div>\n\n      {/* Lightbox */}\n      <AnimatePresence>\n        {selectedMedia && (\n          <MediaLightbox\n            media={selectedMedia}\n            onClose={() => setSelectedMedia(null)}\n          />\n        )}\n      </AnimatePresence>\n    </>\n  )\n}\n\nfunction MediaCard({ media, index, onClick }: { media: Media; index: number; onClick: () => void }) {\n  const isVideo = media.type === 'VIDEO' || media.type === 'YOUTUBE'\n  const [isHovered, setIsHovered] = useState(false)\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      whileInView={{ opacity: 1, scale: 1 }}\n      viewport={{ once: true }}\n      transition={{ delay: index * 0.05 }}\n      whileHover={{ y: -4 }}\n      className=\"relative aspect-square rounded-lg overflow-hidden group cursor-pointer\"\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      onClick={onClick}\n    >\n      {/* Image */}\n      <div className=\"relative w-full h-full\">\n        <Image\n          src={media.type === 'YOUTUBE' ? media.thumbnail! : media.url}\n          alt={media.title || 'Media'}\n          fill\n          className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\n          sizes=\"(max-width: 768px) 50vw, 33vw\"\n        />\n      </div>\n\n      {/* Glass overlay */}\n      <div className=\"absolute inset-0 backdrop-blur-0 group-hover:backdrop-blur-sm bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-60 group-hover:opacity-100 transition-all duration-300\" />\n\n      {/* Video indicator */}\n      {isVideo && (\n        <motion.div\n          className=\"absolute inset-0 flex items-center justify-center\"\n          initial={{ opacity: 0.8 }}\n          animate={{ opacity: isHovered ? 1 : 0.8 }}\n        >\n          <motion.div\n            className=\"backdrop-blur-xl bg-white/90 border border-white/60 w-12 h-12 rounded-xl flex items-center justify-center shadow-2xl\"\n            animate={{ scale: isHovered ? 1.1 : 1 }}\n            transition={{ type: \"spring\", stiffness: 300 }}\n          >\n            <Play className=\"w-6 h-6 text-yellow-600 ml-0.5\" fill=\"currentColor\" />\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Expand icon for images */}\n      {!isVideo && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: isHovered ? 1 : 0, scale: isHovered ? 1 : 0.8 }}\n          className=\"absolute top-3 right-3\"\n        >\n          <div className=\"backdrop-blur-xl bg-white/90 border border-white/60 p-2 rounded-xl shadow-lg\">\n            <Maximize2 className=\"w-4 h-4 text-gray-700\" />\n          </div>\n        </motion.div>\n      )}\n\n      {/* Title overlay */}\n      {media.title && (\n        <motion.div\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: isHovered ? 0 : 20, opacity: isHovered ? 1 : 0 }}\n          className=\"absolute bottom-0 left-0 right-0 p-4\"\n        >\n          <p className=\"text-white font-semibold text-sm line-clamp-2 drop-shadow-lg\">\n            {media.title}\n          </p>\n        </motion.div>\n      )}\n    </motion.div>\n  )\n}\n\nfunction MediaLightbox({ media, onClose }: { media: Media; onClose: () => void }) {\n  const isVideo = media.type === 'VIDEO' || media.type === 'YOUTUBE'\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-2xl bg-black/80 p-4\"\n      onClick={onClose}\n    >\n      {/* Close button */}\n      <motion.button\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        exit={{ scale: 0 }}\n        onClick={onClose}\n        className=\"absolute top-4 right-4 z-10 backdrop-blur-xl bg-white/20 hover:bg-white/30 border border-white/40 p-3 rounded-2xl transition-colors\"\n      >\n        <X className=\"w-5 h-5 text-white\" />\n      </motion.button>\n\n      {/* Media content */}\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.9, opacity: 0 }}\n        transition={{ type: \"spring\", damping: 25 }}\n        className=\"relative max-w-6xl w-full max-h-[90vh]\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {isVideo ? (\n          <div className=\"relative w-full aspect-video rounded-3xl overflow-hidden shadow-2xl backdrop-blur-xl border border-white/20\">\n            {media.type === 'YOUTUBE' ? (\n              <iframe\n                src={media.url}\n                className=\"w-full h-full\"\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n            ) : (\n              <video src={media.url} controls className=\"w-full h-full\" />\n            )}\n          </div>\n        ) : (\n          <div className=\"relative w-full h-full flex items-center justify-center\">\n            <Image\n              src={media.url}\n              alt={media.title || 'Media'}\n              width={1920}\n              height={1080}\n              className=\"max-h-[90vh] w-auto h-auto object-contain rounded-3xl shadow-2xl\"\n            />\n          </div>\n        )}\n\n        {/* Title */}\n        {media.title && (\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"mt-6 text-center backdrop-blur-xl bg-white/20 border border-white/40 rounded-2xl px-6 py-4\"\n          >\n            <p className=\"text-white text-lg font-semibold\">{media.title}</p>\n          </motion.div>\n        )}\n      </motion.div>\n    </motion.div>\n  )\n}\n\n","size_bytes":6493},"(dashboard)/dashboard/coaching/bookings/bookings-client-pro.tsx":{"content":"\"use client\"\n\nimport { useState, useMemo } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Plus, Calendar as CalendarIcon, Clock, User, Mail, Phone, Euro, Check, X, Edit3, Trash2, Settings, ChevronRight, AlertCircle, TrendingUp } from \"lucide-react\"\n\ninterface Booking {\n  id: string\n  clientName: string\n  clientEmail: string\n  clientPhone?: string\n  date: string\n  startTime: string\n  endTime: string\n  duration: number\n  service: string\n  price: number\n  status: \"PENDING\" | \"CONFIRMED\" | \"COMPLETED\" | \"CANCELLED\"\n  notes?: string\n  createdAt: string\n  isPublicRequest?: boolean\n}\n\ninterface BookingsClientProps {\n  initialBookings: Booking[]\n  profileId: string\n  coachName: string\n}\n\nexport function BookingsClientPro({ initialBookings, profileId, coachName }: BookingsClientProps) {\n  const [bookings, setBookings] = useState<Booking[]>(initialBookings)\n  const [showCreateBooking, setShowCreateBooking] = useState(false)\n  const [selectedBooking, setSelectedBooking] = useState<Booking | null>(null)\n  const [viewMode, setViewMode] = useState<\"calendar\" | \"list\">(\"calendar\")\n  const [filterStatus, setFilterStatus] = useState<\"all\" | \"PENDING\" | \"CONFIRMED\" | \"COMPLETED\">(\"all\")\n  const [selectedDate, setSelectedDate] = useState<string>(new Date().toISOString().split('T')[0])\n  const [currentMonth, setCurrentMonth] = useState(new Date().getMonth())\n  const [currentYear, setCurrentYear] = useState(new Date().getFullYear())\n\n  const [bookingForm, setBookingForm] = useState({\n    clientName: \"\",\n    clientEmail: \"\",\n    clientPhone: \"\",\n    date: \"\",\n    startTime: \"\",\n    duration: 60,\n    service: \"\",\n    price: 0,\n    notes: \"\"\n  })\n\n  const statusConfig = {\n    PENDING: { \n      label: \"En attente\", \n      color: \"text-yellow-700\", \n      bg: \"bg-yellow-50\",\n      border: \"border-yellow-200\",\n      icon: AlertCircle\n    },\n    CONFIRMED: { \n      label: \"Confirm√©e\", \n      color: \"text-primary-blue-700\", \n      bg: \"bg-primary-blue-50\",\n      border: \"border-primary-blue-200\",\n      icon: CalendarIcon\n    },\n    COMPLETED: { \n      label: \"Compl√©t√©e\", \n      color: \"text-primary-green-700\", \n      bg: \"bg-primary-green-50\",\n      border: \"border-primary-green-200\",\n      icon: Check\n    },\n    CANCELLED: { \n      label: \"Annul√©e\", \n      color: \"text-red-700\", \n      bg: \"bg-red-50\",\n      border: \"border-red-200\",\n      icon: X\n    }\n  }\n\n  // Statistiques\n  const stats = useMemo(() => {\n    const now = new Date()\n    const pending = bookings.filter(b => b.status === \"PENDING\")\n    const confirmed = bookings.filter(b => b.status === \"CONFIRMED\" && new Date(b.date) >= now)\n    const completed = bookings.filter(b => b.status === \"COMPLETED\")\n    const newRequests = bookings.filter(b => b.isPublicRequest && b.status === \"PENDING\")\n    const totalRevenue = completed.reduce((acc, b) => acc + b.price, 0)\n    const thisMonthRevenue = completed.filter(b => {\n      const d = new Date(b.date)\n      return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear()\n    }).reduce((acc, b) => acc + b.price, 0)\n\n    return {\n      total: bookings.length,\n      pending: pending.length,\n      confirmed: confirmed.length,\n      completed: completed.length,\n      newRequests: newRequests.length,\n      totalRevenue,\n      thisMonthRevenue\n    }\n  }, [bookings])\n\n  // Filtrer les r√©servations\n  const filteredBookings = useMemo(() => {\n    let filtered = bookings\n    if (filterStatus !== \"all\") {\n      filtered = filtered.filter(b => b.status === filterStatus)\n    }\n    return filtered.sort((a, b) => {\n      const dateA = new Date(`${a.date} ${a.startTime}`)\n      const dateB = new Date(`${b.date} ${b.startTime}`)\n      return dateA.getTime() - dateB.getTime()\n    })\n  }, [bookings, filterStatus])\n\n  // R√©servations par date\n  const bookingsByDate = useMemo(() => {\n    const grouped: Record<string, Booking[]> = {}\n    filteredBookings.forEach(booking => {\n      if (!grouped[booking.date]) {\n        grouped[booking.date] = []\n      }\n      grouped[booking.date].push(booking)\n    })\n    return grouped\n  }, [filteredBookings])\n\n  // R√©servations pour le jour s√©lectionn√©\n  const selectedDateBookings = useMemo(() => {\n    return bookings\n      .filter(b => b.date === selectedDate)\n      .sort((a, b) => a.startTime.localeCompare(b.startTime))\n  }, [bookings, selectedDate])\n\n  const handleCreateBooking = async () => {\n    try {\n      const response = await fetch(\"/api/coaching/bookings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...bookingForm, profileId })\n      })\n\n      if (response.ok) {\n        const newBooking = await response.json()\n        setBookings([newBooking, ...bookings])\n        setShowCreateBooking(false)\n        resetBookingForm()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la cr√©ation:\", error)\n    }\n  }\n\n  const handleUpdateBookingStatus = async (bookingId: string, status: string) => {\n    try {\n      const response = await fetch(`/api/coaching/bookings/${bookingId}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status })\n      })\n\n      if (response.ok) {\n        const updatedBooking = await response.json()\n        setBookings(bookings.map(b => b.id === bookingId ? updatedBooking : b))\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la mise √† jour:\", error)\n    }\n  }\n\n  const handleDeleteBooking = async (bookingId: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer cette r√©servation ?\")) return\n\n    try {\n      const response = await fetch(`/api/coaching/bookings/${bookingId}`, {\n        method: \"DELETE\"\n      })\n\n      if (response.ok) {\n        setBookings(bookings.filter(b => b.id !== bookingId))\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression:\", error)\n    }\n  }\n\n  const resetBookingForm = () => {\n    setBookingForm({\n      clientName: \"\",\n      clientEmail: \"\",\n      clientPhone: \"\",\n      date: \"\",\n      startTime: \"\",\n      duration: 60,\n      service: \"\",\n      price: 0,\n      notes: \"\"\n    })\n  }\n\n  // G√©n√©rer le calendrier du mois\n  const generateCalendar = () => {\n    const firstDay = new Date(currentYear, currentMonth, 1)\n    const lastDay = new Date(currentYear, currentMonth + 1, 0)\n    const daysInMonth = lastDay.getDate()\n    const startingDayOfWeek = firstDay.getDay()\n\n    const calendar = []\n    let currentWeek = []\n\n    // Jours vides avant le d√©but du mois\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      currentWeek.push(null)\n    }\n\n    // Jours du mois\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(currentYear, currentMonth, day)\n      const dateStr = date.toISOString().split('T')[0]\n      const dayBookings = bookings.filter(b => b.date === dateStr)\n      \n      currentWeek.push({\n        day,\n        date: dateStr,\n        bookings: dayBookings,\n        isToday: dateStr === new Date().toISOString().split('T')[0]\n      })\n\n      if (currentWeek.length === 7) {\n        calendar.push(currentWeek)\n        currentWeek = []\n      }\n    }\n\n    // Compl√©ter la derni√®re semaine\n    while (currentWeek.length > 0 && currentWeek.length < 7) {\n      currentWeek.push(null)\n    }\n    if (currentWeek.length > 0) {\n      calendar.push(currentWeek)\n    }\n\n    return calendar\n  }\n\n  const calendar = generateCalendar()\n\n  // Navigation du calendrier\n  const goToPreviousMonth = () => {\n    if (currentMonth === 0) {\n      setCurrentMonth(11)\n      setCurrentYear(currentYear - 1)\n    } else {\n      setCurrentMonth(currentMonth - 1)\n    }\n  }\n\n  const goToNextMonth = () => {\n    if (currentMonth === 11) {\n      setCurrentMonth(0)\n      setCurrentYear(currentYear + 1)\n    } else {\n      setCurrentMonth(currentMonth + 1)\n    }\n  }\n\n  const goToToday = () => {\n    const now = new Date()\n    setCurrentMonth(now.getMonth())\n    setCurrentYear(now.getFullYear())\n    setSelectedDate(now.toISOString().split('T')[0])\n  }\n\n  // Mois en fran√ßais\n  const monthNames = [\n    \"Janvier\", \"F√©vrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\",\n    \"Juillet\", \"Ao√ªt\", \"Septembre\", \"Octobre\", \"Novembre\", \"D√©cembre\"\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Quick Stats Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4\">\n        {/* Total */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-gray-400\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <CalendarIcon className=\"w-5 h-5 text-gray-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-gray-900\">{stats.total}</p>\n          <p className=\"text-xs text-gray-600\">Total</p>\n        </motion.div>\n\n        {/* Pending */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.15 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-yellow-400 cursor-pointer hover:shadow-elevated transition-all\"\n          onClick={() => setFilterStatus(\"PENDING\")}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <AlertCircle className=\"w-5 h-5 text-yellow-600\" />\n            {stats.newRequests > 0 && (\n              <span className=\"px-2 py-0.5 bg-yellow-500 text-white text-xs rounded-full font-bold\">\n                {stats.newRequests}\n              </span>\n            )}\n          </div>\n          <p className=\"text-2xl font-bold text-yellow-900\">{stats.pending}</p>\n          <p className=\"text-xs text-yellow-700\">En attente</p>\n        </motion.div>\n\n        {/* Confirmed */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-primary-blue-400 cursor-pointer hover:shadow-elevated transition-all\"\n          onClick={() => setFilterStatus(\"CONFIRMED\")}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <CalendarIcon className=\"w-5 h-5 text-primary-blue-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-primary-blue-900\">{stats.confirmed}</p>\n          <p className=\"text-xs text-primary-blue-700\">Confirm√©es</p>\n        </motion.div>\n\n        {/* Completed */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.25 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-primary-green-400 cursor-pointer hover:shadow-elevated transition-all\"\n          onClick={() => setFilterStatus(\"COMPLETED\")}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Check className=\"w-5 h-5 text-primary-green-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-primary-green-900\">{stats.completed}</p>\n          <p className=\"text-xs text-primary-green-700\">Compl√©t√©es</p>\n        </motion.div>\n\n        {/* Monthly Revenue */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-green-400\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Euro className=\"w-5 h-5 text-green-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-green-900\">{stats.thisMonthRevenue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-green-700\">Ce mois</p>\n        </motion.div>\n\n        {/* Total Revenue */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.35 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-primary-green-500\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <TrendingUp className=\"w-5 h-5 text-primary-green-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-primary-green-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-primary-green-700\">Revenus total</p>\n        </motion.div>\n\n        {/* New Requests */}\n        {stats.newRequests > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            transition={{ delay: 0.4 }}\n            className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-standard p-4 border-l-4 border-blue-400 cursor-pointer hover:shadow-elevated transition-all\"\n            onClick={() => setFilterStatus(\"PENDING\")}\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <AlertCircle className=\"w-5 h-5 text-white\" />\n              <span className=\"px-2 py-0.5 bg-white/30 text-white text-xs rounded-full font-bold\">\n                Nouveau\n              </span>\n            </div>\n            <p className=\"text-2xl font-bold text-white\">{stats.newRequests}</p>\n            <p className=\"text-xs text-blue-100\">Demandes web</p>\n          </motion.div>\n        )}\n      </div>\n\n      {/* View Toggle & Actions */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setViewMode(\"calendar\")}\n            className={`px-4 py-2 rounded-xl font-medium transition-all ${\n              viewMode === \"calendar\"\n                ? \"bg-gradient-ocean text-gray-900 shadow-elevated\"\n                : \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50\"\n            }`}\n          >\n            <CalendarIcon className=\"w-4 h-4 inline mr-2\" />\n            Calendrier\n          </button>\n          <button\n            onClick={() => setViewMode(\"list\")}\n            className={`px-4 py-2 rounded-xl font-medium transition-all ${\n              viewMode === \"list\"\n                ? \"bg-gradient-ocean text-gray-900 shadow-elevated\"\n                : \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50\"\n            }`}\n          >\n            Liste\n          </button>\n        </div>\n\n        {/* Status Filters */}\n        <div className=\"flex gap-2 flex-wrap\">\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value as any)}\n            className=\"px-4 py-2 bg-white border border-gray-300 rounded-xl text-gray-700 font-medium focus:ring-2 focus:ring-primary-blue-400 focus:border-transparent\"\n          >\n            <option value=\"all\">Tous les statuts</option>\n            <option value=\"PENDING\">En attente ({stats.pending})</option>\n            <option value=\"CONFIRMED\">Confirm√©es ({stats.confirmed})</option>\n            <option value=\"COMPLETED\">Compl√©t√©es ({stats.completed})</option>\n          </select>\n\n          <button\n            onClick={() => setShowCreateBooking(true)}\n            className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-2 rounded-xl font-bold shadow-elevated transition-all hover:scale-105\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Nouvelle r√©servation\n          </button>\n        </div>\n      </div>\n\n      {/* Calendar View */}\n      {viewMode === \"calendar\" && (\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          {/* Calendar Header with Navigation */}\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <button\n                onClick={goToPreviousMonth}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n              </button>\n\n              <div className=\"text-center\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">\n                  {monthNames[currentMonth]} {currentYear}\n                </h3>\n              </div>\n\n              <button\n                onClick={goToNextMonth}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"flex items-center justify-center gap-4\">\n              <button\n                onClick={goToToday}\n                className=\"px-4 py-2 bg-gray-900 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors text-sm\"\n              >\n                Aujourd'hui\n              </button>\n              <p className=\"text-sm text-gray-600\">Clique sur une date pour voir les r√©servations</p>\n            </div>\n          </div>\n\n          {/* Calendar Grid */}\n          <div className=\"grid grid-cols-7 gap-1 mb-2\">\n            {[\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"].map(day => (\n              <div key={day} className=\"text-center text-xs font-bold text-gray-600 py-1\">\n                {day}\n              </div>\n            ))}\n          </div>\n\n          <div className=\"space-y-1\">\n            {calendar.map((week, weekIndex) => (\n              <div key={weekIndex} className=\"grid grid-cols-7 gap-1\">\n                {week.map((day, dayIndex) => {\n                  if (!day) {\n                    return <div key={dayIndex} className=\"h-12\" />\n                  }\n\n                  const hasBookings = day.bookings.length > 0\n                  const hasPending = day.bookings.some(b => b.status === \"PENDING\")\n                  const isSelected = day.date === selectedDate\n\n                  return (\n                    <button\n                      key={dayIndex}\n                      onClick={() => setSelectedDate(day.date)}\n                      className={`h-12 rounded-md p-1 transition-all relative border ${\n                        isSelected\n                          ? \"bg-gray-900 text-white border-gray-900 shadow-md\"\n                          : day.isToday\n                          ? \"bg-blue-50 border-blue-400 text-gray-900 font-bold\"\n                          : hasBookings\n                          ? \"bg-gray-50 border-gray-300 text-gray-900 hover:bg-gray-100\"\n                          : \"bg-white border-gray-200 text-gray-600 hover:border-gray-300\"\n                      }`}\n                    >\n                      <span className=\"text-sm font-medium\">{day.day}</span>\n                      {hasBookings && (\n                        <div className=\"absolute bottom-0 right-0 text-[10px] font-bold text-gray-500 bg-white rounded px-1\">\n                          {day.bookings.length}\n                        </div>\n                      )}\n                      {hasPending && !isSelected && (\n                        <div className=\"absolute top-0 right-0 w-1.5 h-1.5 bg-yellow-400 rounded-full\" />\n                      )}\n                    </button>\n                  )\n                })}\n              </div>\n            ))}\n          </div>\n\n          {/* Selected Date Details */}\n          {selectedDate && (\n            <div className=\"mt-6 pt-6 border-t border-gray-200\">\n              <h4 className=\"text-lg font-bold text-gray-900 mb-4\">\n                {new Date(selectedDate).toLocaleDateString('fr-FR', { \n                  weekday: 'long', \n                  day: 'numeric', \n                  month: 'long' \n                })}\n              </h4>\n\n              {selectedDateBookings.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {selectedDateBookings.map((booking) => {\n                    const config = statusConfig[booking.status]\n                    const StatusIcon = config.icon\n\n                    return (\n                      <motion.div\n                        key={booking.id}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        className={`relative p-4 rounded-xl border-2 transition-all hover:shadow-md ${\n                          booking.isPublicRequest \n                            ? \"bg-blue-50 border-blue-300\" \n                            : `${config.bg} ${config.border}`\n                        }`}\n                      >\n                        {booking.isPublicRequest && (\n                          <div className=\"absolute -top-2 -right-2 px-2 py-1 bg-blue-500 text-white text-xs rounded-full font-bold shadow-lg\">\n                            Nouveau\n                          </div>\n                        )}\n\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <StatusIcon className={`w-4 h-4 ${config.color}`} />\n                              <span className={`text-xs font-bold uppercase ${config.color}`}>\n                                {config.label}\n                              </span>\n                            </div>\n\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <User className=\"w-4 h-4 text-gray-600\" />\n                              <span className=\"font-bold text-gray-900\">{booking.clientName}</span>\n                            </div>\n\n                            <div className=\"flex flex-col gap-1 text-sm text-gray-600\">\n                              <div className=\"flex items-center gap-2\">\n                                <Clock className=\"w-3 h-3\" />\n                                <span>{booking.startTime} - {booking.endTime}</span>\n                                <span className=\"text-xs text-gray-500\">({booking.duration}min)</span>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <Mail className=\"w-3 h-3\" />\n                                <span className=\"text-xs\">{booking.clientEmail}</span>\n                              </div>\n                              {booking.clientPhone && (\n                                <div className=\"flex items-center gap-2\">\n                                  <Phone className=\"w-3 h-3\" />\n                                  <span className=\"text-xs\">{booking.clientPhone}</span>\n                                </div>\n                              )}\n                            </div>\n\n                            <div className=\"mt-2 flex items-center gap-3\">\n                              <span className=\"text-sm font-medium text-gray-700\">{booking.service}</span>\n                              <span className=\"text-sm font-bold text-primary-green-600\">{booking.price}‚Ç¨</span>\n                            </div>\n                          </div>\n\n                          <div className=\"flex flex-col gap-2\">\n                            {booking.status === \"PENDING\" && (\n                              <>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CONFIRMED\")}\n                                  className=\"p-2 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors\"\n                                  title=\"Confirmer\"\n                                >\n                                  <Check className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CANCELLED\")}\n                                  className=\"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors\"\n                                  title=\"Annuler\"\n                                >\n                                  <X className=\"w-4 h-4\" />\n                                </button>\n                              </>\n                            )}\n                            {booking.status === \"CONFIRMED\" && (\n                              <button\n                                onClick={() => handleUpdateBookingStatus(booking.id, \"COMPLETED\")}\n                                className=\"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors\"\n                                title=\"Marquer comme compl√©t√©e\"\n                              >\n                                <Check className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                            <button\n                              onClick={() => setSelectedBooking(booking)}\n                              className=\"p-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors\"\n                              title=\"Modifier\"\n                            >\n                              <Edit3 className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteBooking(booking.id)}\n                              className=\"p-2 bg-gray-100 hover:bg-red-100 text-gray-700 hover:text-red-700 rounded-lg transition-colors\"\n                              title=\"Supprimer\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n\n                        {booking.notes && (\n                          <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                            <p className=\"text-xs text-gray-600 italic\">{booking.notes}</p>\n                          </div>\n                        )}\n                      </motion.div>\n                    )\n                  })}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <CalendarIcon className=\"w-12 h-12 mx-auto mb-2 text-gray-300\" />\n                  <p>Aucune r√©servation pour cette date</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* List View */}\n      {viewMode === \"list\" && (\n        <div className=\"space-y-6\">\n          {Object.entries(bookingsByDate).map(([date, dateBookings]) => {\n            const formattedDate = new Date(date).toLocaleDateString('fr-FR', {\n              weekday: 'long',\n              day: 'numeric',\n              month: 'long',\n              year: 'numeric'\n            })\n\n            return (\n              <motion.div\n                key={date}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-white rounded-2xl shadow-standard border border-gray-200 overflow-hidden\"\n              >\n                <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200\">\n                  <h3 className=\"text-lg font-bold text-gray-900 capitalize\">{formattedDate}</h3>\n                  <p className=\"text-sm text-gray-600\">{dateBookings.length} r√©servation{dateBookings.length > 1 ? \"s\" : \"\"}</p>\n                </div>\n\n                <div className=\"divide-y divide-gray-100\">\n                  {dateBookings.map((booking) => {\n                    const config = statusConfig[booking.status]\n                    const StatusIcon = config.icon\n\n                    return (\n                      <motion.div\n                        key={booking.id}\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        className={`relative p-6 transition-all hover:bg-gray-50 ${\n                          booking.isPublicRequest ? \"bg-blue-50/30\" : \"\"\n                        }`}\n                      >\n                        {booking.isPublicRequest && (\n                          <div className=\"absolute top-4 right-4\">\n                            <span className=\"px-3 py-1 bg-blue-500 text-white text-xs rounded-full font-bold\">\n                              Demande web\n                            </span>\n                          </div>\n                        )}\n\n                        <div className=\"flex items-start gap-6\">\n                          {/* Time Column */}\n                          <div className=\"flex-shrink-0 w-24\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <Clock className=\"w-4 h-4 text-gray-400\" />\n                              <span className=\"font-bold text-gray-900\">{booking.startTime}</span>\n                            </div>\n                            <div className=\"text-xs text-gray-500\">{booking.duration} min</div>\n                          </div>\n\n                          {/* Main Content */}\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-2\">\n                              <StatusIcon className={`w-5 h-5 ${config.color}`} />\n                              <h4 className=\"text-lg font-bold text-gray-900\">{booking.clientName}</h4>\n                              <span className={`px-3 py-1 rounded-full text-xs font-bold ${config.bg} ${config.color}`}>\n                                {config.label}\n                              </span>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n                              <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                                <Mail className=\"w-4 h-4\" />\n                                <a href={`mailto:${booking.clientEmail}`} className=\"hover:text-primary-blue-600 transition-colors\">\n                                  {booking.clientEmail}\n                                </a>\n                              </div>\n                              {booking.clientPhone && (\n                                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                                  <Phone className=\"w-4 h-4\" />\n                                  <a href={`tel:${booking.clientPhone}`} className=\"hover:text-primary-blue-600 transition-colors\">\n                                    {booking.clientPhone}\n                                  </a>\n                                </div>\n                              )}\n                            </div>\n\n                            <div className=\"flex items-center gap-4 mb-2\">\n                              <span className=\"text-sm font-medium text-gray-700 bg-gray-100 px-3 py-1 rounded-full\">\n                                {booking.service}\n                              </span>\n                              <span className=\"text-lg font-bold text-primary-green-600\">\n                                {booking.price}‚Ç¨\n                              </span>\n                            </div>\n\n                            {booking.notes && (\n                              <div className=\"mt-3 p-3 bg-gray-50 rounded-lg\">\n                                <p className=\"text-sm text-gray-600 italic\">{booking.notes}</p>\n                              </div>\n                            )}\n                          </div>\n\n                          {/* Actions */}\n                          <div className=\"flex flex-col gap-2\">\n                            {booking.status === \"PENDING\" && (\n                              <>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CONFIRMED\")}\n                                  className=\"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-all shadow-sm hover:shadow-md\"\n                                  title=\"Confirmer\"\n                                >\n                                  <Check className=\"w-5 h-5\" />\n                                </button>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CANCELLED\")}\n                                  className=\"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all shadow-sm hover:shadow-md\"\n                                  title=\"Annuler\"\n                                >\n                                  <X className=\"w-5 h-5\" />\n                                </button>\n                              </>\n                            )}\n                            {booking.status === \"CONFIRMED\" && (\n                              <button\n                                onClick={() => handleUpdateBookingStatus(booking.id, \"COMPLETED\")}\n                                className=\"p-2 bg-primary-blue-500 hover:bg-primary-blue-600 text-white rounded-lg transition-all shadow-sm hover:shadow-md\"\n                                title=\"Marquer comme compl√©t√©e\"\n                              >\n                                <Check className=\"w-5 h-5\" />\n                              </button>\n                            )}\n                            <button\n                              onClick={() => setSelectedBooking(booking)}\n                              className=\"p-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors\"\n                              title=\"Modifier\"\n                            >\n                              <Edit3 className=\"w-5 h-5\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteBooking(booking.id)}\n                              className=\"p-2 bg-gray-200 hover:bg-red-100 text-gray-700 hover:text-red-600 rounded-lg transition-colors\"\n                              title=\"Supprimer\"\n                            >\n                              <Trash2 className=\"w-5 h-5\" />\n                            </button>\n                          </div>\n                        </div>\n                      </motion.div>\n                    )\n                  })}\n                </div>\n              </motion.div>\n            )\n          })}\n\n          {Object.keys(bookingsByDate).length === 0 && (\n            <div className=\"text-center py-12 bg-white rounded-2xl shadow-standard border border-gray-200\">\n              <CalendarIcon className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Aucune r√©servation</h3>\n              <p className=\"text-gray-600 mb-6\">\n                {filterStatus !== \"all\" \n                  ? `Aucune r√©servation avec le statut \"${statusConfig[filterStatus as keyof typeof statusConfig]?.label}\"`\n                  : \"Commence par cr√©er ta premi√®re r√©servation\"\n                }\n              </p>\n              <button\n                onClick={() => setShowCreateBooking(true)}\n                className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-3 rounded-full font-bold shadow-elevated transition-all hover:scale-105\"\n              >\n                <Plus className=\"w-5 h-5\" />\n                Cr√©er une r√©servation\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Create Booking Modal */}\n      <AnimatePresence>\n        {showCreateBooking && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => {\n              setShowCreateBooking(false)\n              resetBookingForm()\n            }}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">Nouvelle r√©servation</h3>\n                <button\n                  onClick={() => setShowCreateBooking(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                {/* Client Info */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Nom du client *</label>\n                    <input\n                      type=\"text\"\n                      value={bookingForm.clientName}\n                      onChange={(e) => setBookingForm({ ...bookingForm, clientName: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"Jean Dupont\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email *</label>\n                    <input\n                      type=\"email\"\n                      value={bookingForm.clientEmail}\n                      onChange={(e) => setBookingForm({ ...bookingForm, clientEmail: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"jean@example.com\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">T√©l√©phone</label>\n                  <input\n                    type=\"tel\"\n                    value={bookingForm.clientPhone}\n                    onChange={(e) => setBookingForm({ ...bookingForm, clientPhone: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"+33 6 12 34 56 78\"\n                  />\n                </div>\n\n                {/* Booking Details */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Date *</label>\n                    <input\n                      type=\"date\"\n                      value={bookingForm.date}\n                      onChange={(e) => setBookingForm({ ...bookingForm, date: e.target.value })}\n                      min={new Date().toISOString().split('T')[0]}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Heure de d√©but *</label>\n                    <input\n                      type=\"time\"\n                      value={bookingForm.startTime}\n                      onChange={(e) => setBookingForm({ ...bookingForm, startTime: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Dur√©e (minutes) *</label>\n                    <select\n                      value={bookingForm.duration}\n                      onChange={(e) => setBookingForm({ ...bookingForm, duration: parseInt(e.target.value) })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"30\">30 min</option>\n                      <option value=\"45\">45 min</option>\n                      <option value=\"60\">1 heure</option>\n                      <option value=\"90\">1h30</option>\n                      <option value=\"120\">2 heures</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Prix (‚Ç¨) *</label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      value={bookingForm.price}\n                      onChange={(e) => setBookingForm({ ...bookingForm, price: parseFloat(e.target.value) || 0 })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service *</label>\n                  <input\n                    type=\"text\"\n                    value={bookingForm.service}\n                    onChange={(e) => setBookingForm({ ...bookingForm, service: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"Coaching personnalis√©\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Notes</label>\n                  <textarea\n                    value={bookingForm.notes}\n                    onChange={(e) => setBookingForm({ ...bookingForm, notes: e.target.value })}\n                    rows={3}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent resize-none\"\n                    placeholder=\"Notes additionnelles...\"\n                  />\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowCreateBooking(false)\n                      resetBookingForm()\n                    }}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={handleCreateBooking}\n                    className=\"flex-1 px-6 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-bold hover:shadow-glow-blue transition-all\"\n                  >\n                    Cr√©er la r√©servation\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n\n","size_bytes":43973},"components/ui-pro/analytics-with-filter.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { AdvancedAnalytics } from \"./advanced-analytics\"\n\ninterface AnalyticsWithFilterProps {\n  userPlan: \"FREE\" | \"PRO\" | \"ELITE\"\n  username: string\n}\n\nexport function AnalyticsWithFilter({ userPlan, username }: AnalyticsWithFilterProps) {\n  const [data, setData] = useState<any>(null)\n  const [timeRange, setTimeRange] = useState(\"7d\")\n  const [isLoading, setIsLoading] = useState(true)\n\n  const handleExportPDF = async () => {\n    try {\n      const days = getDaysFromRange(timeRange)\n      const response = await fetch('/api/analytics/export-pdf', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ days })\n      })\n      \n      if (!response.ok) throw new Error('Erreur export PDF')\n      \n      const blob = await response.blob()\n      const url = window.URL.createObjectURL(blob)\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `athlink-analytics-${username}-${timeRange}-${new Date().toISOString().split('T')[0]}.pdf`\n      document.body.appendChild(a)\n      a.click()\n      document.body.removeChild(a)\n      window.URL.revokeObjectURL(url)\n    } catch (error) {\n      console.error('Erreur export PDF:', error)\n      alert('Erreur lors de l\\'export PDF des donn√©es')\n    }\n  }\n\n  // Convertir le timeRange en nombre de jours\n  const getDaysFromRange = (range: string): number => {\n    switch (range) {\n      case \"24h\": return 1\n      case \"7d\": return 7\n      case \"30d\": return 30\n      case \"90d\": return 90\n      case \"1y\": return 365\n      default: return 7\n    }\n  }\n\n  // Charger les donn√©es selon la p√©riode\n  const loadData = async (range: string) => {\n    setIsLoading(true)\n    try {\n      const days = getDaysFromRange(range)\n      const response = await fetch(`/api/analytics/data?days=${days}`)\n      \n      if (response.ok) {\n        const analyticsData = await response.json()\n        setData(analyticsData)\n      } else {\n        // Fallback sur des donn√©es simul√©es\n        setData(generateMockData(days))\n      }\n    } catch (error) {\n      console.error('Erreur chargement analytics:', error)\n      setData(generateMockData(getDaysFromRange(range)))\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  // Charger les donn√©es au montage et lors du changement de p√©riode\n  useEffect(() => {\n    loadData(timeRange)\n  }, [timeRange])\n\n  // G√©n√©rer des donn√©es simul√©es si besoin\n  const generateMockData = (days: number) => {\n    return {\n      views: {\n        total: Math.floor(Math.random() * 1000) + days * 10,\n        unique: Math.floor(Math.random() * 800) + days * 8,\n        byDate: Array.from({ length: Math.min(days, 30) }, (_, i) => ({\n          date: new Date(Date.now() - (days - i - 1) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],\n          views: Math.floor(Math.random() * 100) + 20,\n          uniqueViews: Math.floor(Math.random() * 80) + 15,\n          clicks: Math.floor(Math.random() * 30) + 5\n        }))\n      },\n      clicks: {\n        total: Math.floor(Math.random() * 300) + days * 3,\n        byLink: Array.from({ length: 5 }, (_, i) => ({\n          linkTitle: `Lien ${i + 1}`,\n          clicks: Math.floor(Math.random() * 50) + 10,\n          percentage: Math.floor(Math.random() * 40) + 10\n        })),\n        byHour: Array.from({ length: 24 }, (_, hour) => ({\n          hour,\n          clicks: Math.floor(Math.random() * 20) + 2\n        }))\n      },\n      demographics: {\n        countries: [\n          { country: \"France\", visitors: Math.floor(Math.random() * 400) + 100, percentage: 60 },\n          { country: \"Belgique\", visitors: Math.floor(Math.random() * 200) + 50, percentage: 20 },\n          { country: \"Suisse\", visitors: Math.floor(Math.random() * 150) + 30, percentage: 15 },\n          { country: \"Canada\", visitors: Math.floor(Math.random() * 80) + 20, percentage: 5 }\n        ],\n        devices: [\n          { device: \"Mobile\", count: Math.floor(Math.random() * 500) + 200, percentage: 64 },\n          { device: \"Desktop\", count: Math.floor(Math.random() * 300) + 100, percentage: 36 }\n        ],\n        browsers: [\n          { browser: \"Chrome\", count: Math.floor(Math.random() * 500) + 200, percentage: 59 },\n          { browser: \"Safari\", count: Math.floor(Math.random() * 200) + 100, percentage: 26 },\n          { browser: \"Firefox\", count: Math.floor(Math.random() * 80) + 30, percentage: 10 },\n          { browser: \"Edge\", count: Math.floor(Math.random() * 40) + 20, percentage: 5 }\n        ]\n      },\n      heatmap: Array.from({ length: 20 }, () => ({\n        x: Math.random() * 80 + 10,\n        y: Math.random() * 80 + 10,\n        intensity: Math.random(),\n        clicks: Math.floor(Math.random() * 20) + 1\n      }))\n    }\n  }\n\n  if (!data || isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Chargement des analytics...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <AdvancedAnalytics\n      data={data}\n      userPlan={userPlan}\n      onExportPDF={handleExportPDF}\n      timeRange={timeRange}\n      onTimeRangeChange={setTimeRange}\n    />\n  )\n}\n\n","size_bytes":5355},"deployment/monitoring/health-check.js":{"content":"// Health check endpoint for monitoring\nexport default function handler(req, res) {\n  const healthCheck = {\n    uptime: process.uptime(),\n    message: 'OK',\n    timestamp: Date.now(),\n    status: 'healthy'\n  };\n\n  try {\n    res.status(200).json(healthCheck);\n  } catch (error) {\n    healthCheck.message = error;\n    res.status(503).json(healthCheck);\n  }\n}\n","size_bytes":357},"components/ui-pro/glass-profile-header.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { MapPin, Instagram, Youtube, Music } from \"lucide-react\"\n\ninterface GlassProfileHeaderProps {\n  displayName: string\n  bio: string | null\n  location: string | null\n  avatarUrl: string | null\n  sport: string\n  instagram: string | null\n  strava: string | null\n  youtube: string | null\n  tiktok: string | null\n}\n\nexport function GlassProfileHeader({\n  displayName,\n  bio,\n  location,\n  avatarUrl,\n  sport,\n  instagram,\n  strava,\n  youtube,\n  tiktok\n}: GlassProfileHeaderProps) {\n  const socialLinks = [\n    { icon: Instagram, url: instagram ? `https://instagram.com/${instagram}` : null, color: \"from-pink-500 to-purple-500\", name: \"Instagram\" },\n    { icon: StravaIcon, url: strava, color: \"from-yellow-500 to-red-500\", name: \"Strava\" },\n    { icon: Youtube, url: youtube, color: \"from-red-500 to-red-600\", name: \"YouTube\" },\n    { icon: Music, url: tiktok ? `https://tiktok.com/@${tiktok}` : null, color: \"from-gray-800 to-black\", name: \"TikTok\" },\n  ].filter(link => link.url)\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 30 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.6, ease: \"easeOut\" }}\n      className=\"backdrop-blur-2xl bg-black/40 border border-yellow-500/30 rounded-xl shadow-2xl p-4 md:p-6\"\n    >\n      <div className=\"flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6\">\n        {/* Avatar */}\n        <motion.div\n          initial={{ scale: 0.8, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n          className=\"relative flex-shrink-0\"\n        >\n          <div className=\"relative w-20 h-20 md:w-24 md:h-24\">\n            {/* Animated ring */}\n            <div className=\"absolute inset-0 rounded-full bg-gradient-to-br from-yellow-500 via-yellow-600 to-gray-900 animate-spin-slow opacity-75\" \n                 style={{ animationDuration: '8s' }} />\n            \n            {/* Avatar container */}\n            <div className=\"absolute inset-2 rounded-full bg-gray-900/90 backdrop-blur-sm p-1\">\n              {avatarUrl ? (\n                <Image\n                  src={avatarUrl}\n                  alt={displayName}\n                  width={160}\n                  height={160}\n                  className=\"rounded-full object-cover w-full h-full\"\n                  priority\n                />\n              ) : (\n                <div className=\"w-full h-full rounded-full bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center text-white text-2xl md:text-3xl font-black\">\n                  {displayName[0]}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Sport Badge */}\n          <motion.div\n            initial={{ scale: 0, y: 10 }}\n            animate={{ scale: 1, y: 0 }}\n            transition={{ delay: 0.4, type: \"spring\", stiffness: 200 }}\n            className=\"absolute -bottom-2 left-1/2 -translate-x-1/2\"\n          >\n            <div className=\"backdrop-blur-xl bg-black/60 border border-yellow-500/50 rounded-full px-2.5 py-0.5 shadow-lg\">\n              <span className=\"text-[10px] font-bold text-yellow-500 whitespace-nowrap\">\n                {sport}\n              </span>\n            </div>\n          </motion.div>\n        </motion.div>\n\n        {/* Info */}\n        <div className=\"flex-1 text-center md:text-left\">\n          <motion.h1\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"text-2xl md:text-3xl lg:text-4xl font-black mb-2 bg-gradient-to-r from-yellow-500 to-yellow-600 bg-clip-text text-transparent leading-tight\"\n          >\n            {displayName}\n          </motion.h1>\n\n          {bio && (\n            <motion.p\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.4 }}\n              className=\"text-sm md:text-base text-gray-300 mb-3 leading-relaxed max-w-2xl\"\n            >\n              {bio}\n            </motion.p>\n          )}\n\n          {location && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.5 }}\n              className=\"flex items-center justify-center md:justify-start gap-1.5 text-xs text-gray-400 mb-3\"\n            >\n              <MapPin className=\"w-3.5 h-3.5\" />\n              <span className=\"font-medium\">{location}</span>\n            </motion.div>\n          )}\n\n          {/* Social Links */}\n          {socialLinks.length > 0 && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.6 }}\n              className=\"flex flex-wrap gap-3 justify-center md:justify-start\"\n            >\n              {socialLinks.map((link, index) => (\n                <motion.a\n                  key={link.name}\n                  href={link.url!}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  initial={{ scale: 0, rotate: -180 }}\n                  animate={{ scale: 1, rotate: 0 }}\n                  transition={{ delay: 0.7 + index * 0.1, type: \"spring\", stiffness: 200 }}\n                  whileHover={{ scale: 1.1, y: -2 }}\n                  whileTap={{ scale: 0.95 }}\n                  className={`backdrop-blur-xl bg-white/10 border border-yellow-500/30 hover:bg-yellow-500/20 hover:border-yellow-500/50 w-8 h-8 rounded-lg flex items-center justify-center shadow-lg hover:shadow-xl transition-all group`}\n                >\n                  <link.icon className=\"w-4 h-4 text-yellow-500 group-hover:scale-110 transition-transform\" />\n                </motion.a>\n              ))}\n            </motion.div>\n          )}\n        </div>\n      </div>\n    </motion.div>\n  )\n}\n\nfunction StravaIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169\" />\n    </svg>\n  )\n}\n\n","size_bytes":6228},"lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n// Format numbers avec style sportif\nexport function formatNumber(num: number): string {\n  if (num >= 1000000) {\n    return (num / 1000000).toFixed(1) + 'M'\n  }\n  if (num >= 1000) {\n    return (num / 1000).toFixed(1) + 'K'\n  }\n  return num.toString()\n}\n\n// Format dur√©e pour courses\nexport function formatDuration(seconds: number): string {\n  const hours = Math.floor(seconds / 3600)\n  const minutes = Math.floor((seconds % 3600) / 60)\n  const secs = seconds % 60\n  \n  if (hours > 0) {\n    return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n  }\n  return `${minutes}:${secs.toString().padStart(2, '0')}`\n}\n\n// Calculer jours restants\nexport function daysUntil(date: Date): number {\n  const now = new Date()\n  const diff = date.getTime() - now.getTime()\n  return Math.ceil(diff / (1000 * 60 * 60 * 24))\n}\n\n// G√©n√©rer couleur de progression\nexport function getProgressColor(percentage: number): string {\n  if (percentage >= 80) return \"text-green-600\"\n  if (percentage >= 50) return \"text-blue-600\"\n  if (percentage >= 30) return \"text-yellow-600\"\n  return \"text-red-600\"\n}\n","size_bytes":1283},"(dashboard)/dashboard/sources/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Link2, Trophy, Award, Plus, BarChart3 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { LiensContent } from \"./liens-content\"\nimport { CompetitionsContent } from \"./competitions-content\"\nimport { SponsorsContent } from \"./sponsors-content\"\n\nconst tabVariants = {\n  hidden: { opacity: 0, y: 20 },\n  visible: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: -20 }\n}\n\nconst tabContentVariants = {\n  hidden: { opacity: 0, x: 20 },\n  visible: { \n    opacity: 1, \n    x: 0,\n    transition: {\n      duration: 0.3,\n      ease: \"easeOut\"\n    }\n  },\n  exit: { \n    opacity: 0, \n    x: -20,\n    transition: {\n      duration: 0.2,\n      ease: \"easeIn\"\n    }\n  }\n}\n\nexport default function SourcesPage() {\n  const [activeTab, setActiveTab] = useState<'liens' | 'competitions' | 'sponsors'>('liens')\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Animation d'entr√©e\n  useEffect(() => {\n    const timer = setTimeout(() => setIsLoading(false), 100)\n    return () => clearTimeout(timer)\n  }, [])\n\n  // D√©tection du hash URL\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const hash = window.location.hash\n      if (hash === '#liens' || window.location.pathname.includes('links')) {\n        setActiveTab('liens')\n      } else if (hash === '#competitions' || window.location.pathname.includes('races')) {\n        setActiveTab('competitions')\n      } else if (hash === '#sponsors' || window.location.pathname.includes('sponsors')) {\n        setActiveTab('sponsors')\n      }\n    }\n  }, [])\n\n  const tabs = [\n    {\n      id: 'liens' as const,\n      label: 'Liens',\n      icon: Link2,\n      description: 'G√©rez vos liens personnalis√©s',\n      color: 'from-gray-800 to-gray-900',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200'\n    },\n    {\n      id: 'competitions' as const,\n      label: 'Comp√©titions',\n      icon: Trophy,\n      description: 'Calendrier de vos courses',\n      color: 'from-gray-800 to-gray-900',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200'\n    },\n    {\n      id: 'sponsors' as const,\n      label: 'Sponsors',\n      icon: Award,\n      description: 'Partenaires et collaborations',\n      color: 'from-gray-800 to-gray-900',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200'\n    }\n  ]\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full\"\n        />\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5, ease: \"easeOut\" }}\n      className=\"space-y-8\"\n    >\n      {/* Header avec titre et stats */}\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.1, duration: 0.5 }}\n        className=\"bg-gradient-to-r from-gray-50 to-white rounded-2xl p-6 border border-gray-200 shadow-sm\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Sources</h1>\n            <p className=\"text-gray-600\">G√©rez vos liens, comp√©titions et partenaires en un seul endroit</p>\n          </div>\n          <motion.div\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            className=\"flex items-center gap-2 bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer\"\n          >\n            <BarChart3 className=\"w-4 h-4\" />\n            <span className=\"text-sm font-medium\">Analytics</span>\n          </motion.div>\n        </div>\n      </motion.div>\n\n      {/* Onglets am√©lior√©s */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.2, duration: 0.5 }}\n        className=\"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden\"\n      >\n        <div className=\"border-b border-gray-200 bg-gray-50/50\">\n          <nav className=\"flex\">\n            {tabs.map((tab, index) => {\n              const Icon = tab.icon\n              const isActive = activeTab === tab.id\n              \n              return (\n                <motion.button\n                  key={tab.id}\n                  onClick={() => {\n                    setActiveTab(tab.id)\n                    window.location.hash = tab.id\n                  }}\n                  whileHover={{ y: -2 }}\n                  whileTap={{ y: 0 }}\n                  className={cn(\n                    \"relative flex-1 px-6 py-4 text-sm font-medium transition-all duration-300 group\",\n                    isActive\n                      ? \"text-gray-900 bg-white\"\n                      : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\n                  )}\n                  style={{ zIndex: isActive ? 10 : 1 }}\n                >\n                  <div className=\"flex items-center justify-center gap-3\">\n                    <motion.div\n                      animate={isActive ? { scale: 1.1 } : { scale: 1 }}\n                      transition={{ duration: 0.2 }}\n                    >\n                      <Icon className={cn(\n                        \"w-5 h-5 transition-colors\",\n                        isActive ? \"text-gray-900\" : \"text-gray-500 group-hover:text-gray-700\"\n                      )} />\n                    </motion.div>\n                    <span>{tab.label}</span>\n                  </div>\n                  \n                  {/* Indicateur actif */}\n                  {isActive && (\n                    <motion.div\n                      layoutId=\"activeTab\"\n                      className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-gray-800 to-gray-900\"\n                      initial={false}\n                      transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n                    />\n                  )}\n                  \n                  {/* Tooltip au hover */}\n                  <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    whileHover={{ opacity: 1, y: 0 }}\n                    className=\"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 pointer-events-none whitespace-nowrap\"\n                  >\n                    {tab.description}\n                    <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900\" />\n                  </motion.div>\n                </motion.button>\n              )\n            })}\n          </nav>\n        </div>\n\n        {/* Contenu des onglets avec animation */}\n        <div className=\"relative min-h-[600px]\">\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              variants={tabContentVariants}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n              className=\"p-6\"\n            >\n              {activeTab === 'liens' && <LiensContent />}\n              {activeTab === 'competitions' && <CompetitionsContent />}\n              {activeTab === 'sponsors' && <SponsorsContent />}\n            </motion.div>\n          </AnimatePresence>\n        </div>\n      </motion.div>\n    </motion.div>\n  )\n}\n\n","size_bytes":7624},"next-env.d.ts":{"content":"/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n/// <reference path=\"./.next/types/routes.d.ts\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.\n","size_bytes":262},"components/ui-pro/skeleton-loader.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\n\nexport function SkeletonCard() {\n  return (\n    <div className=\"bg-white rounded-2xl p-6 shadow-standard\">\n      <div className=\"flex items-center gap-4 mb-4\">\n        <motion.div\n          animate={{\n            opacity: [0.5, 1, 0.5]\n          }}\n          transition={{\n            duration: 1.5,\n            repeat: Infinity,\n            ease: \"easeInOut\"\n          }}\n          className=\"w-12 h-12 bg-gray-200 rounded-xl\"\n        />\n        <div className=\"flex-1 space-y-2\">\n          <motion.div\n            animate={{\n              opacity: [0.5, 1, 0.5]\n            }}\n            transition={{\n              duration: 1.5,\n              repeat: Infinity,\n              ease: \"easeInOut\",\n              delay: 0.1\n            }}\n            className=\"h-4 bg-gray-200 rounded w-3/4\"\n          />\n          <motion.div\n            animate={{\n              opacity: [0.5, 1, 0.5]\n            }}\n            transition={{\n              duration: 1.5,\n              repeat: Infinity,\n              ease: \"easeInOut\",\n              delay: 0.2\n            }}\n            className=\"h-3 bg-gray-200 rounded w-1/2\"\n          />\n        </div>\n      </div>\n      \n      <motion.div\n        animate={{\n          opacity: [0.5, 1, 0.5]\n        }}\n        transition={{\n          duration: 1.5,\n          repeat: Infinity,\n          ease: \"easeInOut\",\n          delay: 0.3\n        }}\n        className=\"h-32 bg-gray-200 rounded-xl\"\n      />\n    </div>\n  )\n}\n\nexport function SkeletonStatCard() {\n  return (\n    <div className=\"bg-white rounded-2xl p-6 shadow-standard\">\n      <motion.div\n        animate={{\n          opacity: [0.5, 1, 0.5]\n        }}\n        transition={{\n          duration: 1.5,\n          repeat: Infinity,\n          ease: \"easeInOut\"\n        }}\n        className=\"space-y-4\"\n      >\n        <div className=\"h-12 w-12 bg-gray-200 rounded-xl\" />\n        <div className=\"h-10 bg-gray-200 rounded w-1/2\" />\n        <div className=\"h-4 bg-gray-200 rounded w-3/4\" />\n      </motion.div>\n    </div>\n  )\n}\n\nexport function SkeletonText({ width = \"100%\" }: { width?: string }) {\n  return (\n    <motion.div\n      animate={{\n        opacity: [0.5, 1, 0.5]\n      }}\n      transition={{\n        duration: 1.5,\n        repeat: Infinity,\n        ease: \"easeInOut\"\n      }}\n      className=\"h-4 bg-gray-200 rounded\"\n      style={{ width }}\n    />\n  )\n}\n","size_bytes":2409},"(dashboard)/dashboard/coaching/business-analytics/business-analytics-client.tsx":{"content":"\"use client\"\n\nimport { useState, useMemo } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { TrendingUp, TrendingDown, Users, Calendar, Euro, Target, Download, Filter } from \"lucide-react\"\n\ninterface Stats {\n  totalRevenue: number\n  monthlyRevenue: number\n  uniqueClients: number\n  upcomingBookings: number\n  totalSubscribers: number\n  trainingRevenue: number\n  conversionRate: number\n  averageBookingValue: number\n}\n\ninterface BusinessAnalyticsClientProps {\n  stats: Stats\n  bookings: any[]\n  trainingPlans: any[]\n  coachName: string\n}\n\nexport function BusinessAnalyticsClient({ stats, bookings, trainingPlans, coachName }: BusinessAnalyticsClientProps) {\n  const [selectedPeriod, setSelectedPeriod] = useState<\"7d\" | \"30d\" | \"90d\" | \"1y\">(\"30d\")\n  const [selectedMetric, setSelectedMetric] = useState<\"revenue\" | \"bookings\" | \"clients\">(\"revenue\")\n\n  // Calculer les donn√©es pour les graphiques\n  const chartData = useMemo(() => {\n    const now = new Date()\n    const periods = {\n      \"7d\": 7,\n      \"30d\": 30,\n      \"90d\": 90,\n      \"1y\": 365\n    }\n    const days = periods[selectedPeriod]\n    \n    const data = []\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(now)\n      date.setDate(date.getDate() - i)\n      const dateStr = date.toISOString().split('T')[0]\n      \n      const dayBookings = bookings.filter((b: any) => {\n        const bookingDate = new Date(b.date).toISOString().split('T')[0]\n        return bookingDate === dateStr && b.status === \"COMPLETED\"\n      })\n      \n      data.push({\n        date: dateStr,\n        revenue: dayBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0),\n        bookings: dayBookings.length,\n        clients: new Set(dayBookings.map((b: any) => b.clientEmail)).size\n      })\n    }\n    \n    return data\n  }, [selectedPeriod, bookings])\n\n  // Calculer les tendances\n  const trends = useMemo(() => {\n    const half = Math.floor(chartData.length / 2)\n    const firstHalf = chartData.slice(0, half)\n    const secondHalf = chartData.slice(half)\n    \n    const firstHalfRevenue = firstHalf.reduce((acc, d) => acc + d.revenue, 0)\n    const secondHalfRevenue = secondHalf.reduce((acc, d) => acc + d.revenue, 0)\n    \n    const revenueGrowth = firstHalfRevenue > 0 \n      ? ((secondHalfRevenue - firstHalfRevenue) / firstHalfRevenue * 100) \n      : 0\n    \n    return {\n      revenue: revenueGrowth,\n      isPositive: revenueGrowth >= 0\n    }\n  }, [chartData])\n\n  // Top clients\n  const topClients = useMemo(() => {\n    const clientMap = new Map()\n    bookings.filter((b: any) => b.status === \"COMPLETED\").forEach((b: any) => {\n      const current = clientMap.get(b.clientEmail) || { name: b.clientName, email: b.clientEmail, revenue: 0, bookings: 0 }\n      current.revenue += b.price || 0\n      current.bookings += 1\n      clientMap.set(b.clientEmail, current)\n    })\n    \n    return Array.from(clientMap.values())\n      .sort((a, b) => b.revenue - a.revenue)\n      .slice(0, 5)\n  }, [bookings])\n\n  // Top services\n  const topServices = useMemo(() => {\n    const serviceMap = new Map()\n    bookings.filter((b: any) => b.status === \"COMPLETED\").forEach((b: any) => {\n      const current = serviceMap.get(b.service) || { service: b.service, revenue: 0, bookings: 0 }\n      current.revenue += b.price || 0\n      current.bookings += 1\n      serviceMap.set(b.service, current)\n    })\n    \n    return Array.from(serviceMap.values())\n      .sort((a, b) => b.revenue - a.revenue)\n      .slice(0, 5)\n  }, [bookings])\n\n  const maxChartValue = Math.max(...chartData.map(d => d[selectedMetric]))\n\n  const exportData = () => {\n    const csv = [\n      [\"Date\", \"Revenus\", \"R√©servations\", \"Clients\"],\n      ...chartData.map(d => [d.date, d.revenue, d.bookings, d.clients])\n    ].map(row => row.join(\",\")).join(\"\\n\")\n    \n    const blob = new Blob([csv], { type: \"text/csv\" })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement(\"a\")\n    a.href = url\n    a.download = `analytics-${coachName}-${selectedPeriod}.csv`\n    a.click()\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Main Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center\">\n              <Euro className=\"w-6 h-6 text-primary-green-600\" />\n            </div>\n            <div className={`flex items-center gap-1 text-sm font-medium ${trends.isPositive ? \"text-green-600\" : \"text-red-600\"}`}>\n              {trends.isPositive ? <TrendingUp className=\"w-4 h-4\" /> : <TrendingDown className=\"w-4 h-4\" />}\n              <span>{Math.abs(trends.revenue).toFixed(1)}%</span>\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Revenus totaux</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-gray-500 mt-2\">Ce mois : {stats.monthlyRevenue.toFixed(0)}‚Ç¨</p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n              <Users className=\"w-6 h-6 text-primary-blue-600\" />\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Clients uniques</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.uniqueClients}</p>\n          <p className=\"text-xs text-gray-500 mt-2\">R√©servations √† venir : {stats.upcomingBookings}</p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center\">\n              <Target className=\"w-6 h-6 text-yellow-600\" />\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Taux de conversion</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.conversionRate.toFixed(1)}%</p>\n          <p className=\"text-xs text-gray-500 mt-2\">R√©servations confirm√©es</p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center\">\n              <Calendar className=\"w-6 h-6 text-green-600\" />\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Valeur moyenne</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.averageBookingValue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-gray-500 mt-2\">Par r√©servation</p>\n        </motion.div>\n      </div>\n\n      {/* Chart Section - Simplifi√© */}\n      <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6\">\n          <div>\n            <h3 className=\"text-lg font-bold text-gray-900\">√âvolution des performances</h3>\n          </div>\n          <div className=\"flex gap-2\">\n            <select\n              value={selectedPeriod}\n              onChange={(e) => setSelectedPeriod(e.target.value as any)}\n              className=\"px-3 py-2 bg-gray-100 rounded-lg text-sm font-medium text-gray-700 border-none\"\n            >\n              <option value=\"7d\">7 jours</option>\n              <option value=\"30d\">30 jours</option>\n              <option value=\"90d\">90 jours</option>\n              <option value=\"1y\">1 an</option>\n            </select>\n            <button\n              onClick={exportData}\n              className=\"p-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\"\n              title=\"Exporter en CSV\"\n            >\n              <Download className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Simple Bar Chart */}\n        <div className=\"h-48 flex items-end justify-between gap-0.5\">\n          {chartData.map((data, index) => {\n            const height = maxChartValue > 0 ? (data.revenue / maxChartValue * 100) : 0\n            \n            return (\n              <div key={index} className=\"flex-1 flex flex-col items-center group\">\n                <div className=\"w-full flex flex-col items-center\">\n                  <div className=\"text-[10px] font-medium text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity mb-1\">\n                    {data.revenue}‚Ç¨\n                  </div>\n                  <motion.div\n                    initial={{ height: 0 }}\n                    animate={{ height: `${height}%` }}\n                    transition={{ duration: 0.4, delay: index * 0.005 }}\n                    className=\"w-full bg-gray-900 group-hover:bg-gray-700 transition-colors\"\n                    style={{ minHeight: height > 0 ? \"2px\" : \"0\" }}\n                  />\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        <p className=\"text-xs text-gray-500 text-center mt-4\">Revenus sur les {selectedPeriod === \"7d\" ? \"7 derniers jours\" : selectedPeriod === \"30d\" ? \"30 derniers jours\" : selectedPeriod === \"90d\" ? \"90 derniers jours\" : \"12 derniers mois\"}</p>\n      </div>\n\n      {/* Bottom Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Top Clients */}\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Top Clients</h3>\n          {topClients.length > 0 ? (\n            <div className=\"space-y-3\">\n              {topClients.map((client, index) => (\n                <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n                      <span className=\"text-sm font-bold text-primary-blue-600\">{client.name.charAt(0)}</span>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{client.name}</p>\n                      <p className=\"text-xs text-gray-500\">{client.bookings} r√©servations</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-bold text-primary-green-600\">{client.revenue.toFixed(0)}‚Ç¨</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-center text-gray-500 py-8\">Aucun client pour le moment</p>\n          )}\n        </div>\n\n        {/* Top Services */}\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Services Populaires</h3>\n          {topServices.length > 0 ? (\n            <div className=\"space-y-3\">\n              {topServices.map((service, index) => (\n                <div key={index} className=\"p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <p className=\"font-medium text-gray-900\">{service.service}</p>\n                    <p className=\"font-bold text-primary-green-600\">{service.revenue.toFixed(0)}‚Ç¨</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full bg-primary-green-400 rounded-full\"\n                        style={{ width: `${(service.bookings / bookings.filter((b: any) => b.status === \"COMPLETED\").length) * 100}%` }}\n                      />\n                    </div>\n                    <span className=\"text-xs text-gray-500\">{service.bookings} sessions</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-center text-gray-500 py-8\">Aucun service pour le moment</p>\n          )}\n        </div>\n      </div>\n\n      {/* Training Plans Revenue */}\n      {trainingPlans.length > 0 && (\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Revenus Plans d'Entra√Ænement</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"p-4 bg-gradient-to-br from-primary-blue-50 to-primary-blue-100 rounded-xl\">\n              <p className=\"text-sm text-primary-blue-600 mb-1\">Plans actifs</p>\n              <p className=\"text-2xl font-bold text-primary-blue-900\">{trainingPlans.filter((p: any) => p.isActive).length}</p>\n            </div>\n            <div className=\"p-4 bg-gradient-to-br from-primary-green-50 to-primary-green-100 rounded-xl\">\n              <p className=\"text-sm text-primary-green-600 mb-1\">Abonn√©s totaux</p>\n              <p className=\"text-2xl font-bold text-primary-green-900\">{stats.totalSubscribers}</p>\n            </div>\n            <div className=\"p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl\">\n              <p className=\"text-sm text-green-600 mb-1\">Revenus g√©n√©r√©s</p>\n              <p className=\"text-2xl font-bold text-green-900\">{stats.trainingRevenue.toFixed(0)}‚Ç¨</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":14631},"components/ui-pro/glass-stats.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { TrendingUp, Award, Target, Zap } from \"lucide-react\"\n\ninterface GlassStatsProps {\n  stats?: {\n    totalDistance?: number\n    totalRaces?: number\n    totalPodiums?: number\n    bestTime?: string\n    [key: string]: any\n  }\n}\n\nexport function GlassStats({ stats }: GlassStatsProps) {\n  if (!stats) return null\n\n  const statCards = [\n    {\n      label: \"Distance Totale\",\n      value: stats.totalDistance ? `${stats.totalDistance} km` : null,\n      icon: TrendingUp,\n      gradient: \"from-blue-500 to-blue-600\"\n    },\n    {\n      label: \"Courses\",\n      value: stats.totalRaces ? stats.totalRaces : null,\n      icon: Target,\n      gradient: \"from-violet-500 to-violet-600\"\n    },\n    {\n      label: \"Podiums\",\n      value: stats.totalPodiums ? stats.totalPodiums : null,\n      icon: Award,\n      gradient: \"from-purple-500 to-purple-600\"\n    },\n    {\n      label: \"Meilleur Temps\",\n      value: stats.bestTime || null,\n      icon: Zap,\n      gradient: \"from-green-500 to-green-600\"\n    },\n  ].filter(stat => stat.value !== null)\n\n  if (statCards.length === 0) return null\n\n  return (\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-3\">\n      {statCards.map((stat, index) => (\n        <motion.div\n          key={stat.label}\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ delay: index * 0.1 }}\n          whileHover={{ y: -4, scale: 1.02 }}\n          className=\"relative backdrop-blur-xl bg-white/5 border border-yellow-500/20 hover:bg-white/10 hover:border-yellow-500/40 rounded-lg shadow-lg hover:shadow-2xl p-3 md:p-4 transition-all duration-300 group overflow-hidden\"\n        >\n          {/* Icon */}\n          <motion.div\n            initial={{ scale: 0 }}\n            whileInView={{ scale: 1 }}\n            viewport={{ once: true }}\n            transition={{ delay: index * 0.1 + 0.2, type: \"spring\", stiffness: 200 }}\n            className={`inline-flex p-2 md:p-2.5 rounded-lg bg-gradient-to-br ${stat.gradient} mb-2 shadow-lg group-hover:shadow-xl transition-shadow`}\n          >\n            <stat.icon className=\"w-4 h-4 md:w-5 md:h-5 text-white\" />\n          </motion.div>\n\n          {/* Value */}\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            whileInView={{ scale: 1, opacity: 1 }}\n            viewport={{ once: true }}\n            transition={{ delay: index * 0.1 + 0.3 }}\n          >\n            <p className=\"text-xl md:text-2xl lg:text-3xl font-black mb-1 text-yellow-500\">\n              {stat.value}\n            </p>\n          </motion.div>\n\n          {/* Label */}\n          <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wide\">\n            {stat.label}\n          </p>\n\n          {/* Bottom gradient bar */}\n          <motion.div\n            className={`absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r ${stat.gradient} rounded-b-lg`}\n            initial={{ scaleX: 0 }}\n            whileInView={{ scaleX: 1 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.6, delay: index * 0.1 + 0.4 }}\n            style={{ originX: 0 }}\n          />\n        </motion.div>\n      ))}\n    </div>\n  )\n}\n\n","size_bytes":3271},"config/tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\"\nimport { designSystem } from \"./lib/design-system\"\n\nconst config: Config = {\n  darkMode: \"class\",\n  content: [\n    \"./pages/**/*.{ts,tsx}\",\n    \"./components/**/*.{ts,tsx}\",\n    \"./app/**/*.{ts,tsx}\",\n    \"./src/**/*.{ts,tsx}\",\n  ],\n  prefix: \"\",\n  theme: {\n    container: {\n      center: true,\n      padding: {\n        DEFAULT: \"1.25rem\",\n        sm: \"2rem\",\n        lg: \"3rem\",\n      },\n      screens: {\n        \"2xl\": \"1440px\",\n      },\n    },\n    extend: {\n      // Couleurs de base shadcn\n      colors: {\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        \n        // PALETTE VIBRANTE COMPL√àTE\n        'brand-blue': designSystem.colors.blue,\n        'brand-orange': designSystem.colors.orange,\n        'brand-green': designSystem.colors.green,\n        'brand-pink': designSystem.colors.pink,\n        'brand-purple': designSystem.colors.purple,\n        'brand-yellow': designSystem.colors.yellow,\n        'brand-red': designSystem.colors.red,\n        \n        // Couleurs th√©matiques pour les composants\n        'theme-primary': designSystem.colors.blue,\n        'theme-tertiary': designSystem.colors.pink,\n        'theme-quaternary': designSystem.colors.purple,\n        'theme-success': designSystem.colors.green,\n        'theme-warning': designSystem.colors.yellow,\n        'theme-danger': designSystem.colors.red,\n        'theme-accent': designSystem.colors.orange,\n      },\n      \n      // Gradients professionnels\n      backgroundImage: {\n        'gradient-hero': designSystem.gradients.hero,\n        'gradient-performance': designSystem.gradients.performance,\n        'gradient-energy': designSystem.gradients.energy,\n        'gradient-premium': designSystem.gradients.premium,\n        'gradient-sunset': designSystem.gradients.sunset,\n        'gradient-ocean': designSystem.gradients.ocean,\n        'gradient-fire': designSystem.gradients.fire,\n      },\n      \n      // Box shadows professionnelles\n      boxShadow: {\n        'subtle': designSystem.shadows.subtle,\n        'standard': designSystem.shadows.standard,\n        'elevated': designSystem.shadows.elevated,\n        'floating': designSystem.shadows.floating,\n        'glow-blue': designSystem.shadows['glow-blue'],\n        'glow-orange': designSystem.shadows['glow-orange'],\n        'glow-green': designSystem.shadows['glow-green'],\n        'glow-pink': designSystem.shadows['glow-pink'],\n        'glow-purple': designSystem.shadows['glow-purple'],\n      },\n      \n      // Animations fluides\n      animation: {\n        'fade-in-up': 'fadeInUp 0.5s ease-out',\n        'scale-in': 'scaleIn 0.3s ease-out',\n        'slide-in-right': 'slideInRight 0.4s ease-out',\n        'shimmer': 'shimmer 1.5s infinite',\n        'count-up': 'countUp 1s ease-out',\n        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n        'bounce-slow': 'bounce 2s infinite',\n        'spin-slow': 'spin 8s linear infinite',\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n      \n      keyframes: {\n        fadeInUp: {\n          '0%': { opacity: '0', transform: 'translateY(20px)' },\n          '100%': { opacity: '1', transform: 'translateY(0)' },\n        },\n        scaleIn: {\n          '0%': { opacity: '0', transform: 'scale(0.95)' },\n          '100%': { opacity: '1', transform: 'scale(1)' },\n        },\n        slideInRight: {\n          '0%': { opacity: '0', transform: 'translateX(-20px)' },\n          '100%': { opacity: '1', transform: 'translateX(0)' },\n        },\n        shimmer: {\n          '0%': { backgroundPosition: '-200% 0' },\n          '100%': { backgroundPosition: '200% 0' },\n        },\n        countUp: {\n          '0%': { opacity: '0' },\n          '100%': { opacity: '1' },\n        },\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      \n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n}\n\nexport default config","size_bytes":5349},"components/ui-pro/dashboard-goals.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { SportProgress } from \"@/components/ui-pro/sport-progress\"\nimport { StatsProgressGrid } from \"@/components/ui-pro/stats-progress-grid\"\nimport { Edit3, Save, X, BarChart3 } from \"lucide-react\"\n\ninterface Goal {\n  id: string\n  label: string\n  value: number\n  max: number\n  unit?: string\n  color: \"primary\" | \"accent\" | \"success\"\n}\n\ninterface DashboardGoalsProps {\n  views: number\n  sponsorsCount: number\n  linkClicks: number\n}\n\nexport function DashboardGoals({\n  views,\n  sponsorsCount,\n  linkClicks\n}: DashboardGoalsProps) {\n  const [isEditing, setIsEditing] = useState(false)\n  const [viewMode, setViewMode] = useState<'classic' | 'advanced'>('advanced')\n  const [goals, setGoals] = useState<Goal[]>([\n    {\n      id: \"views\",\n      label: \"Objectif vues mensuelles\",\n      value: views,\n      max: 1000,\n      color: \"primary\"\n    },\n    {\n      id: \"sponsors\",\n      label: \"Objectif sponsors\",\n      value: sponsorsCount,\n      max: 5,\n      color: \"accent\"\n    },\n    {\n      id: \"engagement\",\n      label: \"Engagement\",\n      value: linkClicks,\n      max: 500,\n      unit: \" clics\",\n      color: \"success\"\n    }\n  ])\n\n  // Mettre √† jour les valeurs quand les props changent\n  useEffect(() => {\n    setGoals(prev => prev.map(goal => {\n      switch(goal.id) {\n        case \"views\":\n          return { ...goal, value: views }\n        case \"sponsors\":\n          return { ...goal, value: sponsorsCount }\n        case \"engagement\":\n          return { ...goal, value: linkClicks }\n        default:\n          return goal\n      }\n    }))\n  }, [views, sponsorsCount, linkClicks])\n\n  const handleGoalChange = (goalId: string, field: keyof Goal, value: string | number) => {\n    setGoals(prev => prev.map(goal => \n      goal.id === goalId \n        ? { ...goal, [field]: field === 'max' ? Number(value) : value }\n        : goal\n    ))\n  }\n\n  const handleSave = async () => {\n    // Ici on pourrait sauvegarder les objectifs personnalis√©s\n    // Pour l'instant, on sauvegarde juste en localStorage\n    localStorage.setItem('customGoals', JSON.stringify(goals))\n    setIsEditing(false)\n  }\n\n  const handleCancel = () => {\n    // Recharger les objectifs depuis localStorage ou reset\n    const savedGoals = localStorage.getItem('customGoals')\n    if (savedGoals) {\n      const parsed = JSON.parse(savedGoals)\n      setGoals(parsed.map((goal: Goal) => {\n        switch(goal.id) {\n          case \"views\":\n            return { ...goal, value: views }\n          case \"sponsors\":\n            return { ...goal, value: sponsorsCount }\n          case \"engagement\":\n            return { ...goal, value: linkClicks }\n          default:\n            return goal\n        }\n      }))\n    }\n    setIsEditing(false)\n  }\n\n  // Charger les objectifs sauvegard√©s au montage\n  useEffect(() => {\n    const savedGoals = localStorage.getItem('customGoals')\n    if (savedGoals) {\n      const parsed = JSON.parse(savedGoals)\n      setGoals(parsed.map((goal: Goal) => {\n        switch(goal.id) {\n          case \"views\":\n            return { ...goal, value: views }\n          case \"sponsors\":\n            return { ...goal, value: sponsorsCount }\n          case \"engagement\":\n            return { ...goal, value: linkClicks }\n          default:\n            return goal\n        }\n      }))\n    }\n  }, [])\n\n  return (\n    <div className=\"bg-white rounded-2xl shadow-sport-md p-8 mb-12\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-2xl font-bold flex items-center gap-2\">\n          <span></span>\n          <span>Tes Objectifs</span>\n        </h2>\n        <div className=\"flex items-center gap-2\">\n          {/* View mode toggle */}\n          <div className=\"flex bg-gray-100 rounded-lg p-1\">\n            <button\n              onClick={() => setViewMode('classic')}\n              className={`px-3 py-1 rounded-md text-sm transition-all ${\n                viewMode === 'classic' \n                  ? \"bg-white text-gray-900 shadow-sm\" \n                  : \"text-gray-600 hover:text-gray-900\"\n              }`}\n            >\n              Classique\n            </button>\n            <button\n              onClick={() => setViewMode('advanced')}\n              className={`px-3 py-1 rounded-md text-sm transition-all ${\n                viewMode === 'advanced' \n                  ? \"bg-white text-gray-900 shadow-sm\" \n                  : \"text-gray-600 hover:text-gray-900\"\n              }`}\n            >\n              <BarChart3 className=\"w-4 h-4\" />\n            </button>\n          </div>\n          \n          {/* Edit button */}\n          <button\n            onClick={() => setIsEditing(!isEditing)}\n            className={`p-2 rounded-lg transition-all ${\n              isEditing \n                ? \"bg-red-100 text-red-600 hover:bg-red-200\" \n                : \"bg-yellow-100 text-yellow-600 hover:bg-yellow-200\"\n            }`}\n          >\n            {isEditing ? <X className=\"w-5 h-5\" /> : <Edit3 className=\"w-5 h-5\" />}\n          </button>\n        </div>\n      </div>\n\n      {viewMode === 'advanced' && !isEditing ? (\n        <StatsProgressGrid\n          goals={goals.map(goal => ({\n            id: goal.id,\n            label: goal.label,\n            current: goal.value,\n            target: goal.max,\n            unit: goal.unit,\n            color: goal.color === 'primary' ? 'blue' : \n                   goal.color === 'accent' ? 'orange' : 'green',\n            icon: goal.id === 'views' ? 'V' : \n                  goal.id === 'sponsors' ? 'S' : 'E',\n            description: goal.id === 'views' ? 'Visiteurs uniques ce mois' :\n                         goal.id === 'sponsors' ? 'Partenaires actifs' :\n                         'Clics sur vos liens'\n          }))}\n          title=\"\"\n          columns={1}\n        />\n      ) : (\n        <div className=\"space-y-3\">\n          {goals.map((goal) => (\n            <div key={goal.id} className=\"space-y-2\">\n              {isEditing ? (\n                <>\n                  <div className=\"flex gap-3\">\n                    <input\n                      type=\"text\"\n                      value={goal.label}\n                      onChange={(e) => handleGoalChange(goal.id, 'label', e.target.value)}\n                      className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500\"\n                      placeholder=\"Nom de l'objectif\"\n                    />\n                    <input\n                      type=\"number\"\n                      value={goal.max}\n                      onChange={(e) => handleGoalChange(goal.id, 'max', e.target.value)}\n                      className=\"w-24 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500\"\n                      placeholder=\"Objectif\"\n                    />\n                    <select\n                      value={goal.color}\n                      onChange={(e) => handleGoalChange(goal.id, 'color', e.target.value as Goal['color'])}\n                      className=\"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500\"\n                    >\n                      <option value=\"primary\">Bleu</option>\n                      <option value=\"accent\">Jaune</option>\n                      <option value=\"success\">Vert</option>\n                    </select>\n                  </div>\n                  <div className=\"text-sm text-gray-500\">\n                    Actuel: {goal.value}{goal.unit || \"\"} / Objectif: {goal.max}\n                  </div>\n                </>\n              ) : (\n                <SportProgress\n                  label={goal.label}\n                  value={goal.value}\n                  max={goal.max}\n                  unit={goal.unit}\n                  color={goal.color}\n                />\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {isEditing && (\n        <div className=\"flex gap-3 pt-4 border-t border-gray-200\">\n          <button\n            onClick={handleSave}\n            className=\"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors\"\n          >\n            <Save className=\"w-4 h-4\" />\n            Sauvegarder\n          </button>\n          <button\n            onClick={handleCancel}\n            className=\"flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors\"\n          >\n            <X className=\"w-4 h-4\" />\n            Annuler\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":8583},"(dashboard)/dashboard/races/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function RacesPage() {\n  // Rediriger vers Sources avec l'onglet Comp√©titions\n  redirect(\"/dashboard/sources#competitions\")\n}\n","size_bytes":186},"components/ui/touch-button.tsx":{"content":"\"use client\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { cn } from \"@/lib/utils\"\nimport { forwardRef } from \"react\"\n\ninterface TouchButtonProps extends React.ComponentProps<typeof Button> {\n  /**\n   * Minimum touch target size (default: 44px for accessibility)\n   */\n  minTouchSize?: number\n}\n\nconst TouchButton = forwardRef<HTMLButtonElement, TouchButtonProps>(\n  ({ className, minTouchSize = 44, children, ...props }, ref) => {\n    return (\n      <Button\n        ref={ref}\n        className={cn(\n          // Ensure minimum touch target size\n          `min-h-[${minTouchSize}px] min-w-[${minTouchSize}px]`,\n          // Mobile-first responsive sizing\n          \"h-11 sm:h-12\",\n          // Better touch feedback\n          \"active:scale-95 transition-transform\",\n          // Ensure text is readable\n          \"text-sm sm:text-base\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </Button>\n    )\n  }\n)\n\nTouchButton.displayName = \"TouchButton\"\n\nexport { TouchButton }\n","size_bytes":1019},"components/ui-pro/sport-stat-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { LucideIcon } from \"lucide-react\"\n\ninterface SportStatCardProps {\n  icon: LucideIcon\n  value: string | number\n  label: string\n  trend?: {\n    value: number\n    label: string\n  }\n  color?: \"primary\" | \"accent\" | \"success\"\n  delay?: number\n}\n\nexport function SportStatCard({\n  icon: Icon,\n  value,\n  label,\n  trend,\n  color = \"primary\",\n  delay = 0\n}: SportStatCardProps) {\n  const colorClasses = {\n    primary: {\n      bg: \"from-sport-primary-500 to-sport-primary-600\",\n      icon: \"bg-sport-primary-100 text-sport-primary-600\",\n      trend: \"text-sport-primary-600\"\n    },\n    accent: {\n      bg: \"from-sport-accent-500 to-sport-accent-600\",\n      icon: \"bg-sport-accent-100 text-sport-accent-600\",\n      trend: \"text-sport-accent-600\"\n    },\n    success: {\n      bg: \"from-sport-success-500 to-sport-success-600\",\n      icon: \"bg-sport-success-100 text-sport-success-600\",\n      trend: \"text-sport-success-600\"\n    }\n  }\n\n  const classes = colorClasses[color]\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20, scale: 0.95 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      transition={{ duration: 0.4, delay }}\n      whileHover={{ \n        scale: 1.03,\n        boxShadow: \"0 20px 40px rgba(0, 0, 0, 0.15)\"\n      }}\n      className=\"relative group\"\n    >\n      {/* Card */}\n      <div className=\"relative overflow-hidden rounded-2xl bg-white p-6 shadow-sport-md h-full flex flex-col\">\n        {/* Gradient accent bar */}\n        <div className={`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${classes.bg}`} />\n\n        {/* Icon - Centr√© */}\n        <div className=\"flex justify-center mb-4\">\n          <div className={`inline-flex p-3 rounded-xl ${classes.icon}`}>\n            <Icon className=\"w-6 h-6\" />\n          </div>\n        </div>\n\n        {/* Value - Centr√© */}\n        <div className=\"flex justify-center mb-2\">\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ delay: delay + 0.2, type: \"spring\" }}\n            className=\"text-4xl font-black text-gray-900\"\n          >\n            {value}\n          </motion.div>\n        </div>\n\n        {/* Label - Centr√© */}\n        <div className=\"text-center text-sm font-semibold text-gray-600 uppercase tracking-wide mb-3\">\n          {label}\n        </div>\n\n        {/* Trend - Centr√© */}\n        {trend && (\n          <div className=\"flex justify-center\">\n            <div className={`flex items-center gap-2 text-sm font-bold ${classes.trend}`}>\n              <span>{trend.value > 0 ? '‚Üë' : '‚Üì'}</span>\n              <span>{Math.abs(trend.value)}%</span>\n              <span className=\"text-gray-500 font-medium\">{trend.label}</span>\n            </div>\n          </div>\n        )}\n\n        {/* Hover effect overlay */}\n        <motion.div\n          className={`absolute inset-0 bg-gradient-to-br ${classes.bg} opacity-0 group-hover:opacity-5 transition-opacity duration-300`}\n        />\n      </div>\n    </motion.div>\n  )\n}\n","size_bytes":3037},"components/ui-pro/image-cropper.tsx":{"content":"\"use client\";\n\nimport { useState, useRef, useCallback } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { X, RotateCw, ZoomIn, ZoomOut, Move, Crop } from \"lucide-react\";\n\ninterface ImageCropperProps {\n  imageUrl: string;\n  onCrop: (croppedImageUrl: string) => void;\n  onClose: () => void;\n}\n\nexport default function ImageCropper({ imageUrl, onCrop, onClose }: ImageCropperProps) {\n  const [crop, setCrop] = useState({ x: 0, y: 0, width: 200, height: 200 });\n  const [scale, setScale] = useState(1);\n  const [rotation, setRotation] = useState(0);\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\n  const [isProcessing, setIsProcessing] = useState(false);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const imageRef = useRef<HTMLImageElement>(null);\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    setIsDragging(true);\n    setDragStart({ x: e.clientX - crop.x, y: e.clientY - crop.y });\n  };\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    if (!isDragging) return;\n    setCrop({\n      ...crop,\n      x: e.clientX - dragStart.x,\n      y: e.clientY - dragStart.y,\n    });\n  };\n\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n\n  const handleCrop = useCallback(async () => {\n    console.log(\"Starting crop operation...\")\n    setIsProcessing(true);\n    \n    try {\n      const canvas = canvasRef.current;\n      const image = imageRef.current;\n      \n      console.log(\"Canvas:\", canvas)\n      console.log(\"Image:\", image)\n      \n      if (!canvas || !image) {\n        console.error(\"Missing canvas or image ref\")\n        setIsProcessing(false);\n        return;\n      }\n\n      const ctx = canvas.getContext(\"2d\");\n      if (!ctx) {\n        console.error(\"Could not get canvas context\")\n        setIsProcessing(false);\n        return;\n      }\n\n      console.log(\"Crop settings:\", { crop, scale, rotation })\n\n      // Set canvas size to crop area\n      canvas.width = crop.width;\n      canvas.height = crop.height;\n\n      // Clear canvas\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n      // Calculate the actual image dimensions in the container\n      const containerWidth = 400; // Same as the container width\n      const containerHeight = 350; // Same as the container height\n      \n      // Calculate image display dimensions (maintaining aspect ratio)\n      const imageAspect = image.naturalWidth / image.naturalHeight;\n      const containerAspect = containerWidth / containerHeight;\n      \n      let displayWidth, displayHeight;\n      if (imageAspect > containerAspect) {\n        displayWidth = containerWidth;\n        displayHeight = containerWidth / imageAspect;\n      } else {\n        displayHeight = containerHeight;\n        displayWidth = containerHeight * imageAspect;\n      }\n\n      // Calculate the offset to center the image\n      const offsetX = (containerWidth - displayWidth) / 2;\n      const offsetY = (containerHeight - displayHeight) / 2;\n\n      // Calculate source coordinates based on the crop area relative to the displayed image\n      const sourceX = Math.max(0, (crop.x - offsetX) / scale);\n      const sourceY = Math.max(0, (crop.y - offsetY) / scale);\n      const sourceWidth = Math.min(crop.width / scale, image.naturalWidth - sourceX);\n      const sourceHeight = Math.min(crop.height / scale, image.naturalHeight - sourceY);\n\n      console.log(\"Image dimensions:\", { \n        natural: { width: image.naturalWidth, height: image.naturalHeight },\n        display: { width: displayWidth, height: displayHeight },\n        offset: { x: offsetX, y: offsetY },\n        crop: { x: crop.x, y: crop.y, width: crop.width, height: crop.height },\n        source: { x: sourceX, y: sourceY, width: sourceWidth, height: sourceHeight }\n      });\n\n      // Draw cropped image\n      ctx.drawImage(\n        image,\n        sourceX,\n        sourceY,\n        sourceWidth,\n        sourceHeight,\n        0,\n        0,\n        crop.width,\n        crop.height\n      );\n\n      console.log(\"Image drawn to canvas\")\n\n      // Try to convert to blob, with fallback to dataURL\n      try {\n        canvas.toBlob((blob) => {\n          if (blob) {\n            console.log(\"Blob created:\", blob.size, \"bytes\")\n            const croppedUrl = URL.createObjectURL(blob);\n            console.log(\"Cropped URL created:\", croppedUrl)\n            onCrop(croppedUrl);\n          } else {\n            console.error(\"Failed to create blob\")\n          }\n          setIsProcessing(false);\n        }, \"image/jpeg\", 0.9);\n      } catch (blobError) {\n        console.log(\"Blob creation failed, using dataURL fallback:\", blobError)\n        // Fallback: use dataURL\n        const dataURL = canvas.toDataURL(\"image/jpeg\", 0.9);\n        console.log(\"DataURL created:\", dataURL.substring(0, 50) + \"...\")\n        onCrop(dataURL);\n        setIsProcessing(false);\n      }\n    } catch (error) {\n      console.error(\"Crop error:\", error)\n      setIsProcessing(false);\n    }\n  }, [crop, scale, rotation, onCrop]);\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\n      >\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          className=\"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[85vh] overflow-hidden flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n            <div className=\"flex items-center gap-3\">\n              <Crop className=\"w-5 h-5 text-gray-700\" />\n              <h3 className=\"text-xl font-semibold text-gray-900\">Rogner l'image</h3>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Image Container */}\n          <div className=\"p-6 flex-1 overflow-y-auto\">\n            <div className=\"relative bg-gray-50 rounded-xl overflow-hidden mb-6\">\n              <div className=\"relative overflow-hidden\" style={{ height: \"350px\" }}>\n                <img\n                  ref={imageRef}\n                  src={imageUrl}\n                  alt=\"Image √† rogner\"\n                  crossOrigin=\"anonymous\"\n                  className=\"absolute top-0 left-0 w-full h-full object-contain\"\n                  style={{\n                    transform: `scale(${scale}) rotate(${rotation}deg)`,\n                    transformOrigin: \"center center\",\n                  }}\n                  onLoad={() => {\n                    if (imageRef.current) {\n                      const img = imageRef.current;\n                      const containerWidth = 400;\n                      const containerHeight = 400;\n                      const imgAspect = img.naturalWidth / img.naturalHeight;\n                      const containerAspect = containerWidth / containerHeight;\n                      \n                      let newWidth, newHeight;\n                      if (imgAspect > containerAspect) {\n                        newWidth = containerWidth;\n                        newHeight = containerWidth / imgAspect;\n                      } else {\n                        newHeight = containerHeight;\n                        newWidth = containerHeight * imgAspect;\n                      }\n                      \n                      setCrop({\n                        x: (containerWidth - newWidth) / 2,\n                        y: (containerHeight - newHeight) / 2,\n                        width: newWidth,\n                        height: newHeight,\n                      });\n                    }\n                  }}\n                />\n                \n                {/* Crop overlay */}\n                <div\n                  className=\"absolute border-2 border-white shadow-lg cursor-move\"\n                  style={{\n                    left: crop.x,\n                    top: crop.y,\n                    width: crop.width,\n                    height: crop.height,\n                  }}\n                  onMouseDown={handleMouseDown}\n                  onMouseMove={handleMouseMove}\n                  onMouseUp={handleMouseUp}\n                  onMouseLeave={handleMouseUp}\n                >\n                  {/* Corner handles */}\n                  {[\n                    { x: 0, y: 0, cursor: \"nw-resize\" },\n                    { x: crop.width, y: 0, cursor: \"ne-resize\" },\n                    { x: 0, y: crop.height, cursor: \"sw-resize\" },\n                    { x: crop.width, y: crop.height, cursor: \"se-resize\" },\n                  ].map((handle, i) => (\n                    <div\n                      key={i}\n                      className=\"absolute w-3 h-3 bg-white border-2 border-gray-700 rounded-full\"\n                      style={{\n                        left: handle.x - 6,\n                        top: handle.y - 6,\n                        cursor: handle.cursor,\n                      }}\n                    />\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Controls */}\n            <div className=\"space-y-4\">\n              {/* Scale */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Zoom ({Math.round(scale * 100)}%)\n                </label>\n                <div className=\"flex items-center gap-3\">\n                  <button\n                    onClick={() => setScale(Math.max(0.5, scale - 0.1))}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <ZoomOut className=\"w-4 h-4\" />\n                  </button>\n                  <input\n                    type=\"range\"\n                    min=\"0.5\"\n                    max=\"3\"\n                    step=\"0.1\"\n                    value={scale}\n                    onChange={(e) => setScale(parseFloat(e.target.value))}\n                    className=\"flex-1\"\n                  />\n                  <button\n                    onClick={() => setScale(Math.min(3, scale + 0.1))}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <ZoomIn className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Rotation */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Rotation ({rotation}¬∞)\n                </label>\n                <div className=\"flex items-center gap-3\">\n                  <button\n                    onClick={() => setRotation(rotation - 90)}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <RotateCw className=\"w-4 h-4\" />\n                  </button>\n                  <input\n                    type=\"range\"\n                    min=\"-180\"\n                    max=\"180\"\n                    step=\"15\"\n                    value={rotation}\n                    onChange={(e) => setRotation(parseInt(e.target.value))}\n                    className=\"flex-1\"\n                  />\n                  <button\n                    onClick={() => setRotation(rotation + 90)}\n                    className=\"p-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors\"\n                  >\n                    <RotateCw className=\"w-4 h-4 rotate-180\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex items-center justify-end gap-3 p-6 border-t border-gray-200 flex-shrink-0\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors\"\n            >\n              Annuler\n            </button>\n            <button\n              onClick={handleCrop}\n              disabled={isProcessing}\n              className=\"px-6 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isProcessing ? \"Traitement...\" : \"Valider et sauvegarder\"}\n            </button>\n          </div>\n\n          {/* Hidden canvas for cropping */}\n          <canvas ref={canvasRef} className=\"hidden\" />\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","size_bytes":12773},"docs/SETUP_SUPABASE.md":{"content":"# üóÑÔ∏è Configuration Supabase pour Athlink\n\n## √âtape 1 : Cr√©er un projet Supabase\n\n1. Va sur [supabase.com](https://supabase.com)\n2. Clique sur **\"Start your project\"** ou **\"New Project\"**\n3. Connecte-toi avec GitHub (ou cr√©e un compte)\n4. Cr√©e une **Organization** si tu n'en as pas\n5. Clique sur **\"New Project\"**\n\n### Param√®tres du projet :\n- **Name** : `athlink` (ou ce que tu veux)\n- **Database Password** : G√©n√®re un mot de passe fort (GARDE-LE !)\n- **Region** : Choisis la r√©gion la plus proche de toi (ex: Europe (Frankfurt))\n- **Plan** : Free (gratuit)\n\n6. Clique sur **\"Create new project\"**\n7. ‚è≥ Attends 2-3 minutes que le projet se cr√©e\n\n---\n\n## √âtape 2 : R√©cup√©rer la Connection String\n\nUne fois le projet cr√©√© :\n\n1. Va dans **Settings** (ic√¥ne ‚öôÔ∏è en bas √† gauche)\n2. Clique sur **Database** dans le menu\n3. Scroll jusqu'√† **\"Connection string\"**\n4. S√©lectionne l'onglet **\"URI\"** \n5. Copie la connection string qui ressemble √† :\n\n```\npostgresql://postgres.xxxxxxxxxxxx:[YOUR-PASSWORD]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres\n```\n\n‚ö†Ô∏è **IMPORTANT** : Remplace `[YOUR-PASSWORD]` par le mot de passe que tu as cr√©√© √† l'√©tape 1 !\n\n---\n\n## √âtape 3 : Configuration locale\n\n### A. Cr√©er le fichier .env.local\n\nDans le dossier `/Users/nathan/athlink`, cr√©e un fichier `.env.local` :\n\n```bash\n# Copie ta connection string Supabase ici\nDATABASE_URL=\"postgresql://postgres.xxxxxxxxxxxx:TON_MOT_DE_PASSE@aws-0-eu-central-1.pooler.supabase.com:6543/postgres\"\n\n# G√©n√®re un secret avec : openssl rand -base64 32\nNEXTAUTH_SECRET=\"ton-secret-genere\"\n\n# Pour d√©veloppement local\nNEXTAUTH_URL=\"http://localhost:3000\"\n```\n\n### B. G√©n√©rer le secret NextAuth\n\nDans ton terminal :\n\n```bash\nopenssl rand -base64 32\n```\n\nCopie le r√©sultat dans `.env.local` comme valeur de `NEXTAUTH_SECRET`.\n\n---\n\n## √âtape 4 : Cr√©er les tables\n\nMaintenant que la base de donn√©es est configur√©e, cr√©e les tables :\n\n```bash\n# G√©n√©rer le client Prisma\nnpx prisma generate\n\n# Cr√©er toutes les tables dans Supabase\nnpx prisma db push\n```\n\nTu devrais voir :\n\n```\n‚úî Generated Prisma Client\nüöÄ  Your database is now in sync with your Prisma schema.\n```\n\n---\n\n## √âtape 5 : V√©rifier la connexion\n\n### Option 1 : Prisma Studio\n\nOuvre l'interface visuelle de ta base de donn√©es :\n\n```bash\nnpx prisma studio\n```\n\nVa sur http://localhost:5555 - tu devrais voir toutes tes tables vides.\n\n### Option 2 : Dashboard Supabase\n\n1. Retourne sur supabase.com\n2. Va dans **Table Editor** (ic√¥ne üìä)\n3. Tu devrais voir toutes tes tables cr√©√©es :\n   - User\n   - Profile\n   - Link\n   - Race\n   - Sponsor\n   - Media\n   - Analytics\n   - Account\n   - Session\n   - VerificationToken\n\n---\n\n## √âtape 6 : Lancer l'application\n\n```bash\nnpm run dev\n```\n\nOuvre http://localhost:3000 et teste :\n\n1. ‚úÖ Cr√©er un compte via `/signup`\n2. ‚úÖ Te connecter via `/login`\n3. ‚úÖ Voir le dashboard\n4. ‚úÖ Ajouter des liens\n\n---\n\n## üéâ C'est fait !\n\nTon application utilise maintenant Supabase !\n\n### Avantages de Supabase :\n\n‚úÖ **Gratuit** jusqu'√† 500 MB de donn√©es  \n‚úÖ **H√©berg√©** - pas besoin de g√©rer PostgreSQL localement  \n‚úÖ **Backups automatiques**  \n‚úÖ **Interface web** pour voir/modifier les donn√©es  \n‚úÖ **Pr√™t pour la production**  \n\n---\n\n## üîç Inspecter les donn√©es\n\n### Avec Prisma Studio (recommand√© pour dev)\n\n```bash\nnpx prisma studio\n```\n\n### Avec Supabase Dashboard\n\n1. Va sur supabase.com\n2. S√©lectionne ton projet\n3. Clique sur **Table Editor**\n4. Explore tes donn√©es visuellement\n\n---\n\n## üöÄ D√©ploiement sur Vercel\n\nQuand tu seras pr√™t √† d√©ployer :\n\n1. Push ton code sur GitHub\n2. Va sur [vercel.com](https://vercel.com)\n3. Importe ton repo\n4. Configure les **Environment Variables** :\n   - `DATABASE_URL` : Ta connection string Supabase\n   - `NEXTAUTH_SECRET` : Ton secret\n   - `NEXTAUTH_URL` : `https://ton-app.vercel.app`\n5. Deploy !\n\n‚ö†Ô∏è Vercel d√©tectera automatiquement Next.js et configurera le build.\n\n---\n\n## üêõ Probl√®mes courants\n\n### \"Can't reach database server\"\n\n- ‚úÖ V√©rifie que tu as bien remplac√© `[YOUR-PASSWORD]`\n- ‚úÖ V√©rifie que le projet Supabase est bien actif (pas en pause)\n- ‚úÖ V√©rifie qu'il n'y a pas d'espaces dans la connection string\n\n### \"SSL connection error\"\n\nAjoute `?pgbouncer=true&connection_limit=1` √† la fin de ta DATABASE_URL :\n\n```\nDATABASE_URL=\"postgresql://...?pgbouncer=true&connection_limit=1\"\n```\n\n### \"Prepared statement already exists\"\n\nUtilise le mode Transaction Pooler :\n\n1. Dans Supabase, va dans Settings ‚Üí Database\n2. Change de **Session** √† **Transaction** mode\n3. Copie la nouvelle connection string\n\n---\n\n## üìû Besoin d'aide ?\n\n- üìñ [Documentation Supabase](https://supabase.com/docs)\n- üîç [Prisma + Supabase Guide](https://supabase.com/docs/guides/integrations/prisma)\n\n---\n\nCr√©√© avec ‚ù§Ô∏è pour Athlink üèÉ‚Äç‚ôÇÔ∏è\n","size_bytes":4857},"(dashboard)/dashboard/share/share-client.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Copy, Check, ExternalLink, Share2, QrCode, Download, Instagram, Facebook, Linkedin, Youtube, Music } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport Image from \"next/image\"\nimport QRCode from \"qrcode\"\n\n// Custom Twitter/X Icon\nfunction TwitterIcon({ className }: { className?: string }) {\n  return (\n    <svg viewBox=\"0 0 24 24\" className={className} fill=\"currentColor\">\n      <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n    </svg>\n  )\n}\n\n// Custom TikTok Icon\nfunction TikTokIcon({ className }: { className?: string }) {\n  return (\n    <svg viewBox=\"0 0 24 24\" className={className} fill=\"currentColor\">\n      <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\"/>\n    </svg>\n  )\n}\n\ninterface SharePageClientProps {\n  username: string\n  displayName: string\n  avatarUrl: string | null\n  bio: string | null\n}\n\nexport function SharePageClient({ username, displayName, avatarUrl, bio }: SharePageClientProps) {\n  const [copied, setCopied] = useState(false)\n  const [qrCodeUrl, setQrCodeUrl] = useState<string | null>(null)\n  const [showQR, setShowQR] = useState(false)\n\n  const profileUrl = `${typeof window !== 'undefined' ? window.location.origin : ''}/${username}`\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(profileUrl)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Failed to copy:', err)\n    }\n  }\n\n  const handleGenerateQR = async () => {\n    try {\n      const url = await QRCode.toDataURL(profileUrl, {\n        width: 512,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      })\n      setQrCodeUrl(url)\n      setShowQR(true)\n    } catch (err) {\n      console.error('Failed to generate QR code:', err)\n    }\n  }\n\n  const handleDownloadQR = () => {\n    if (!qrCodeUrl) return\n    \n    const link = document.createElement('a')\n    link.download = `athlink-${username}-qr.png`\n    link.href = qrCodeUrl\n    link.click()\n  }\n\n  const handleShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: `${displayName} - AthLink`,\n          text: bio || `D√©couvre mon profil d'athl√®te`,\n          url: profileUrl\n        })\n      } catch (err) {\n        console.error('Error sharing:', err)\n      }\n    }\n  }\n\n  const socialPlatforms = [\n    { \n      name: \"Instagram\", \n      placeholder: \"Ajoute dans ta bio\",\n      IconComponent: Instagram,\n      color: \"text-pink-600\",\n      hoverColor: \"hover:text-pink-700\",\n      bgColor: \"hover:bg-pink-50\",\n      action: async () => {\n        await handleCopy()\n        setTimeout(() => {\n          window.open('https://www.instagram.com/accounts/edit/', '_blank')\n        }, 300)\n      }\n    },\n    { \n      name: \"TikTok\", \n      placeholder: \"Ajoute dans ta bio\",\n      IconComponent: TikTokIcon,\n      color: \"text-black\",\n      hoverColor: \"hover:text-black\",\n      bgColor: \"hover:bg-gray-100\",\n      action: async () => {\n        await handleCopy()\n        setTimeout(() => {\n          window.open('https://www.tiktok.com/setting', '_blank')\n        }, 300)\n      }\n    },\n    { \n      name: \"Twitter/X\", \n      placeholder: \"√âpingle en haut de profil\",\n      IconComponent: TwitterIcon,\n      color: \"text-black\",\n      hoverColor: \"hover:text-gray-800\",\n      bgColor: \"hover:bg-gray-100\",\n      action: () => {\n        const text = `D√©couvre mon profil d'athl√®te üí™`\n        const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(profileUrl)}`\n        window.open(twitterUrl, '_blank')\n      }\n    },\n    { \n      name: \"Facebook\", \n      placeholder: \"Partage sur ton mur\",\n      IconComponent: Facebook,\n      color: \"text-blue-600\",\n      hoverColor: \"hover:text-blue-700\",\n      bgColor: \"hover:bg-blue-50\",\n      action: () => {\n        const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(profileUrl)}`\n        window.open(facebookUrl, '_blank')\n      }\n    },\n    { \n      name: \"LinkedIn\", \n      placeholder: \"Ajoute √† ton profil\",\n      IconComponent: Linkedin,\n      color: \"text-blue-700\",\n      hoverColor: \"hover:text-blue-800\",\n      bgColor: \"hover:bg-blue-50\",\n      action: () => {\n        const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(profileUrl)}`\n        window.open(linkedInUrl, '_blank')\n      }\n    },\n    { \n      name: \"YouTube\", \n      placeholder: \"Ajoute dans ta description\",\n      IconComponent: Youtube,\n      color: \"text-red-600\",\n      hoverColor: \"hover:text-red-700\",\n      bgColor: \"hover:bg-red-50\",\n      action: async () => {\n        await handleCopy()\n        setTimeout(() => {\n          window.open('https://studio.youtube.com/', '_blank')\n        }, 300)\n      }\n    },\n  ]\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Main Link Card */}\n      <Card className=\"border-2 border-yellow-500/20 bg-gradient-to-br from-yellow-500/5 to-transparent\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Share2 className=\"w-5 h-5 text-yellow-600\" />\n            Ton lien AthLink\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Profile Preview */}\n          <div className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200\">\n            {avatarUrl ? (\n              <div className=\"relative w-16 h-16 rounded-full overflow-hidden flex-shrink-0\">\n                <Image\n                  src={avatarUrl}\n                  alt={displayName}\n                  fill\n                  className=\"object-cover\"\n                />\n              </div>\n            ) : (\n              <div className=\"w-16 h-16 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 flex items-center justify-center text-white text-2xl font-black flex-shrink-0\">\n                {displayName.charAt(0).toUpperCase()}\n              </div>\n            )}\n            <div className=\"flex-1 min-w-0\">\n              <h3 className=\"font-bold text-lg truncate\">{displayName}</h3>\n              <p className=\"text-sm text-gray-600 truncate\">@{username}</p>\n            </div>\n          </div>\n\n          {/* URL Display */}\n          <div className=\"flex items-center gap-2 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm text-gray-600 mb-1 font-medium\">Ton lien public :</p>\n              <a \n                href={profileUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-yellow-600 hover:text-yellow-700 font-bold text-lg truncate block\"\n              >\n                {profileUrl}\n              </a>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n            <Button\n              onClick={handleCopy}\n              variant=\"default\"\n              className=\"bg-yellow-600 hover:bg-yellow-700 text-white\"\n            >\n              {copied ? (\n                <>\n                  <Check className=\"w-4 h-4 mr-2\" />\n                  Copi√© !\n                </>\n              ) : (\n                <>\n                  <Copy className=\"w-4 h-4 mr-2\" />\n                  Copier le lien\n                </>\n              )}\n            </Button>\n\n            <Button\n              onClick={() => window.open(profileUrl, '_blank')}\n              variant=\"outline\"\n            >\n              <ExternalLink className=\"w-4 h-4 mr-2\" />\n              Voir mon profil\n            </Button>\n\n            <Button\n              onClick={handleGenerateQR}\n              variant=\"outline\"\n            >\n              <QrCode className=\"w-4 h-4 mr-2\" />\n              G√©n√©rer QR Code\n            </Button>\n          </div>\n\n          {/* Native Share Button (Mobile) */}\n          {typeof navigator !== 'undefined' && navigator.share && (\n            <Button\n              onClick={handleShare}\n              variant=\"outline\"\n              className=\"w-full\"\n            >\n              <Share2 className=\"w-4 h-4 mr-2\" />\n              Partager\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* QR Code Display */}\n      {showQR && qrCodeUrl && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n        >\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <QrCode className=\"w-5 h-5\" />\n                Ton QR Code\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex justify-center p-6 bg-white rounded-lg border border-gray-200\">\n                <img src={qrCodeUrl} alt=\"QR Code\" className=\"w-64 h-64\" />\n              </div>\n              <p className=\"text-sm text-gray-600 text-center\">\n                Scanne ce code pour acc√©der directement √† ton profil\n              </p>\n              <Button\n                onClick={handleDownloadQR}\n                variant=\"outline\"\n                className=\"w-full\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                T√©l√©charger le QR Code\n              </Button>\n            </CardContent>\n          </Card>\n        </motion.div>\n      )}\n\n      {/* Social Platforms Suggestions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>O√π partager ton lien ?</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {socialPlatforms.map((platform) => {\n              const Icon = platform.IconComponent\n              return (\n                <motion.button\n                  key={platform.name}\n                  onClick={platform.action}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className={`p-4 bg-white rounded-lg border-2 border-gray-200 ${platform.bgColor} transition-all cursor-pointer text-left w-full group relative overflow-hidden shadow-sm hover:shadow-md`}\n                >\n                  <div className=\"flex items-center gap-3 relative z-10\">\n                    <div className={`${platform.color} group-hover:scale-110 transition-transform`}>\n                      <Icon className=\"w-8 h-8\" />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className={`font-bold text-gray-900 ${platform.hoverColor} transition-colors`}>{platform.name}</h4>\n                      <p className=\"text-xs text-gray-600\">{platform.placeholder}</p>\n                    </div>\n                    <ExternalLink className={`w-4 h-4 text-gray-400 ${platform.color} transition-colors`} />\n                  </div>\n                </motion.button>\n              )\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tips Card */}\n      <Card className=\"bg-gradient-to-br from-gray-800 to-gray-900 border-yellow-400\">\n        <CardHeader>\n          <CardTitle className=\"text-yellow-300\">üí° Conseils pour maximiser ta visibilit√©</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ul className=\"space-y-3 text-sm text-gray-200\">\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Bio Instagram/TikTok :</strong> Ajoute ton lien AthLink dans ta bio pour diriger tes followers</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Stories/Reels :</strong> Partage ton QR Code dans tes stories pour un acc√®s rapide</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Email Signature :</strong> Inclus ton lien dans ta signature d'email</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Dossards de course :</strong> Imprime ton QR Code sur tes √©quipements</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Cartes de visite :</strong> Parfait pour les √©v√©nements sportifs</span>\n            </li>\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n","size_bytes":13481},"coaching/access-pdf/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\nimport { readFile } from \"fs/promises\"\nimport { join } from \"path\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { planId, clientEmail, clientName } = await request.json()\n\n    if (!planId || !clientEmail || !clientName) {\n      return NextResponse.json({ error: \"Donn√©es manquantes\" }, { status: 400 })\n    }\n\n    // R√©cup√©rer le plan d'entra√Ænement\n    const profiles = await prisma.profile.findMany({\n      where: { plan: \"COACH\" },\n      select: { id: true, stats: true }\n    })\n\n    let targetPlan = null\n    let coachProfileId = null\n\n    for (const profile of profiles) {\n      const stats = profile.stats as any\n      const trainingPlans = stats.trainingPlans || []\n      const plan = trainingPlans.find((p: any) => p.id === planId)\n      \n      if (plan) {\n        targetPlan = plan\n        coachProfileId = profile.id\n        break\n      }\n    }\n\n    if (!targetPlan) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    if (!targetPlan.pdfFileName) {\n      return NextResponse.json({ error: \"Aucun PDF disponible pour ce plan\" }, { status: 404 })\n    }\n\n    // Simuler un paiement (dans un vrai projet, int√©grer Stripe)\n    const paymentResult = await simulatePayment({\n      amount: targetPlan.price,\n      currency: 'EUR',\n      clientEmail,\n      clientName,\n      planTitle: targetPlan.title\n    })\n\n    if (!paymentResult.success) {\n      return NextResponse.json({ error: \"√âchec du paiement\" }, { status: 400 })\n    }\n\n    // Cr√©er un token d'acc√®s temporaire (24h)\n    const accessToken = generateAccessToken(planId, clientEmail)\n    \n    // Enregistrer l'achat dans les stats du coach\n    await recordPurchase(coachProfileId, planId, clientEmail, clientName, targetPlan.price)\n\n    return NextResponse.json({\n      success: true,\n      accessToken,\n      pdfUrl: `/api/coaching/pdf/${planId}?token=${accessToken}`,\n      expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()\n    })\n\n  } catch (error) {\n    console.error(\"Erreur lors de l'acc√®s au PDF:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// Simuler un paiement (remplacer par Stripe en production)\nasync function simulatePayment(paymentData: {\n  amount: number\n  currency: string\n  clientEmail: string\n  clientName: string\n  planTitle: string\n}) {\n  // Dans un vrai projet, int√©grer Stripe ici\n  console.log(\"Paiement simul√©:\", paymentData)\n  \n  // Simuler un d√©lai de traitement\n  await new Promise(resolve => setTimeout(resolve, 1000))\n  \n  return { success: true, transactionId: `txn_${Date.now()}` }\n}\n\n// G√©n√©rer un token d'acc√®s s√©curis√©\nfunction generateAccessToken(planId: string, clientEmail: string): string {\n  const payload = {\n    planId,\n    clientEmail,\n    issuedAt: Date.now(),\n    expiresAt: Date.now() + 24 * 60 * 60 * 1000 // 24h\n  }\n  \n  // Simple encoding (dans un vrai projet, utiliser JWT)\n  return Buffer.from(JSON.stringify(payload)).toString('base64')\n}\n\n// Enregistrer l'achat\nasync function recordPurchase(coachProfileId: string, planId: string, clientEmail: string, clientName: string, amount: number) {\n  const profile = await prisma.profile.findUnique({\n    where: { id: coachProfileId },\n    select: { stats: true }\n  })\n\n  if (!profile) return\n\n  const stats = profile.stats as any || {}\n  const purchases = stats.purchases || []\n\n  const purchase = {\n    id: `purchase_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n    planId,\n    clientEmail,\n    clientName,\n    amount,\n    purchasedAt: new Date().toISOString(),\n    status: 'completed'\n  }\n\n  purchases.push(purchase)\n\n  await prisma.profile.update({\n    where: { id: coachProfileId },\n    data: {\n      stats: {\n        ...stats,\n        purchases\n      }\n    }\n  })\n}\n\n","size_bytes":3881},"analytics/data/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(request: Request) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.id) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const days = parseInt(searchParams.get('days') || '7')\n\n    // Calculer la date de d√©but selon la p√©riode\n    const startDate = new Date()\n    startDate.setDate(startDate.getDate() - days)\n    startDate.setHours(0, 0, 0, 0)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        analytics: {\n          where: {\n            date: {\n              gte: startDate\n            }\n          },\n          orderBy: { date: 'asc' }\n        },\n        links: {\n          select: { id: true, title: true }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Calculer les totaux\n    const totalViews = profile.analytics.reduce((sum, a) => sum + a.views, 0)\n    const totalUniqueViews = profile.analytics.reduce((sum, a) => sum + a.uniqueViews, 0)\n    const totalClicks = profile.analytics.reduce((sum, a) => sum + a.linkClicks, 0)\n\n    // Pr√©parer les donn√©es par date\n    const viewsByDate = profile.analytics.map(a => ({\n      date: a.date.toISOString().split('T')[0],\n      views: a.views,\n      uniqueViews: a.uniqueViews,\n      clicks: a.linkClicks\n    }))\n\n    // R√©cup√©rer les clics r√©els par lien depuis la base de donn√©es\n    const linksWithClicks = await prisma.link.findMany({\n      where: { profileId: profile.id },\n      select: {\n        id: true,\n        title: true,\n        clicks: true\n      },\n      orderBy: { clicks: 'desc' }\n    })\n\n    // R√©cup√©rer les donn√©es de heatmap et d√©mographie depuis stats\n    const stats = (profile.stats as any) || {}\n    const heatmapData = stats.heatmap || []\n    const demographics = stats.demographics || {\n      devices: {},\n      browsers: {},\n      countries: {}\n    }\n\n    // Transformer les donn√©es d√©mographiques en format utilisable\n    let devicesData = Object.entries(demographics.devices || {}).map(([device, count]) => ({\n      device,\n      count: count as number,\n      percentage: totalViews > 0 ? Math.round(((count as number) / totalViews) * 100) : 0\n    })).sort((a, b) => b.count - a.count)\n\n    // Si pas de donn√©es appareils, utiliser des valeurs par d√©faut r√©alistes\n    if (devicesData.length === 0 && totalViews > 0) {\n      devicesData = [\n        { device: \"Mobile\", count: Math.floor(totalViews * 0.64), percentage: 64 },\n        { device: \"Desktop\", count: Math.floor(totalViews * 0.36), percentage: 36 }\n      ]\n    }\n\n    let browsersData = Object.entries(demographics.browsers || {}).map(([browser, count]) => ({\n      browser,\n      count: count as number,\n      percentage: totalViews > 0 ? Math.round(((count as number) / totalViews) * 100) : 0\n    })).sort((a, b) => b.count - a.count)\n\n    // Si pas de donn√©es navigateurs, utiliser des valeurs par d√©faut r√©alistes\n    if (browsersData.length === 0 && totalViews > 0) {\n      browsersData = [\n        { browser: \"Chrome\", count: Math.floor(totalViews * 0.59), percentage: 59 },\n        { browser: \"Safari\", count: Math.floor(totalViews * 0.26), percentage: 26 },\n        { browser: \"Firefox\", count: Math.floor(totalViews * 0.10), percentage: 10 },\n        { browser: \"Edge\", count: Math.floor(totalViews * 0.05), percentage: 5 }\n      ]\n    }\n\n    // Agr√©ger les donn√©es de pays depuis les analytics\n    const countriesFromAnalytics = profile.analytics\n      .filter(a => a.country)\n      .reduce((acc: { [key: string]: number }, a) => {\n        const country = a.country || 'Inconnu'\n        acc[country] = (acc[country] || 0) + a.views\n        return acc\n      }, {})\n\n    const countriesData = Object.entries(countriesFromAnalytics).map(([country, visitors]) => ({\n      country,\n      visitors: visitors as number,\n      percentage: totalViews > 0 ? Math.round(((visitors as number) / totalViews) * 100) : 0\n    })).sort((a, b) => b.visitors - a.visitors)\n\n    // Si pas de donn√©es pays, utiliser des donn√©es par d√©faut\n    if (countriesData.length === 0 && totalViews > 0) {\n      countriesData.push(\n        { country: \"France\", visitors: Math.floor(totalViews * 0.6), percentage: 60 },\n        { country: \"Belgique\", visitors: Math.floor(totalViews * 0.2), percentage: 20 },\n        { country: \"Suisse\", visitors: Math.floor(totalViews * 0.15), percentage: 15 },\n        { country: \"Canada\", visitors: Math.floor(totalViews * 0.05), percentage: 5 }\n      )\n    }\n\n    // Agr√©ger les donn√©es de heatmap\n    const heatmapAggregated = aggregateHeatmapData(heatmapData)\n\n    // Calculer les clics par lien avec les donn√©es r√©elles\n    const totalLinkClicks = linksWithClicks.reduce((sum, link) => sum + link.clicks, 0)\n    const linkClicksData = linksWithClicks.map(link => ({\n      linkTitle: link.title,\n      clicks: link.clicks,\n      percentage: totalLinkClicks > 0 ? Math.round((link.clicks / totalLinkClicks) * 100) : 0\n    }))\n\n    // Si pas de liens, cr√©er des donn√©es exemple\n    if (linkClicksData.length === 0) {\n      linkClicksData.push(\n        { linkTitle: \"Cr√©ez vos premiers liens\", clicks: 0, percentage: 0 }\n      )\n    }\n\n    // Donn√©es par heure - Cr√©er une distribution r√©aliste bas√©e sur les analytics\n    const clicksByHour = Array.from({ length: 24 }, (_, hour) => {\n      // Heures de pointe : 8-12h et 18-22h\n      const isPeakHour = (hour >= 8 && hour <= 12) || (hour >= 18 && hour <= 22)\n      const baseClicks = isPeakHour ? 15 : 5\n      const variance = Math.floor(Math.random() * 10)\n      return {\n        hour,\n        clicks: Math.floor((totalClicks / days) * (baseClicks + variance) / 100)\n      }\n    })\n\n    return NextResponse.json({\n      views: {\n        total: totalViews,\n        unique: totalUniqueViews,\n        byDate: viewsByDate\n      },\n      clicks: {\n        total: totalClicks,\n        byLink: linkClicksData,\n        byHour: clicksByHour\n      },\n      demographics: {\n        countries: countriesData,\n        devices: devicesData,\n        browsers: browsersData\n      },\n      heatmap: heatmapAggregated\n    })\n  } catch (error) {\n    console.error(\"Erreur r√©cup√©ration analytics:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors de la r√©cup√©ration des donn√©es\" },\n      { status: 500 }\n    )\n  }\n}\n\n// Fonction pour agr√©ger les donn√©es de heatmap\nfunction aggregateHeatmapData(heatmapData: any[]) {\n  if (!heatmapData || heatmapData.length === 0) {\n    // Retourner des donn√©es simul√©es si pas de donn√©es r√©elles\n    return Array.from({ length: 20 }, () => ({\n      x: Math.random() * 80 + 10,\n      y: Math.random() * 80 + 10,\n      intensity: Math.random(),\n      clicks: Math.floor(Math.random() * 20) + 1\n    }))\n  }\n\n  // Cr√©er une grille 10x10 pour agr√©ger les clics\n  const grid: { [key: string]: number } = {}\n  const gridSize = 10\n\n  heatmapData.forEach((point: any) => {\n    const gridX = Math.floor(point.x / gridSize)\n    const gridY = Math.floor(point.y / gridSize)\n    const key = `${gridX},${gridY}`\n    grid[key] = (grid[key] || 0) + 1\n  })\n\n  // Trouver le max pour normaliser\n  const maxClicks = Math.max(...Object.values(grid))\n\n  // Convertir en format utilisable\n  return Object.entries(grid).map(([key, clicks]) => {\n    const [gridX, gridY] = key.split(',').map(Number)\n    return {\n      x: gridX * gridSize + gridSize / 2,\n      y: gridY * gridSize + gridSize / 2,\n      intensity: clicks / maxClicks,\n      clicks\n    }\n  })\n}\n\n","size_bytes":7741},"components/ui/switch.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n\n","size_bytes":1154},"conditions/page.tsx":{"content":"export default function ConditionsPage() {\n  return (\n    <main className=\"min-h-screen bg-gray-50 py-16\">\n      <div className=\"container mx-auto px-4 sm:px-6 max-w-4xl\">\n        <div className=\"bg-white rounded-2xl shadow-lg p-8 md:p-12\">\n          <h1 className=\"text-3xl md:text-4xl font-black text-gray-900 mb-8\">\n            Conditions G√©n√©rales d'Utilisation\n          </h1>\n          \n          <div className=\"prose prose-lg max-w-none text-gray-700\">\n            <p className=\"text-sm text-gray-500 mb-8\">\n              Derni√®re mise √† jour : {new Date().toLocaleDateString('fr-FR')}\n            </p>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">1. Acceptation des conditions</h2>\n              <p>\n                En utilisant Athlink, vous acceptez d'√™tre li√© par ces conditions g√©n√©rales \n                d'utilisation. Si vous n'acceptez pas ces conditions, veuillez ne pas utiliser \n                notre service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">2. Description du service</h2>\n              <p>\n                Athlink est une plateforme de cr√©ation de profils digitaux pour les athl√®tes, \n                permettant de partager leurs performances, g√©rer leurs sponsors et d√©velopper \n                leur communaut√©.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">3. Inscription et compte</h2>\n              <h3 className=\"text-xl font-semibold mb-3\">3.1 Cr√©ation de compte</h3>\n              <p>Pour utiliser Athlink, vous devez :</p>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>√ätre √¢g√© d'au moins 13 ans</li>\n                <li>Fournir des informations exactes et compl√®tes</li>\n                <li>Maintenir la s√©curit√© de votre compte</li>\n                <li>√ätre responsable de toutes les activit√©s sur votre compte</li>\n              </ul>\n              \n              <h3 className=\"text-xl font-semibold mb-3\">3.2 Utilisation acceptable</h3>\n              <p>Vous vous engagez √† :</p>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Utiliser le service conform√©ment √† la loi</li>\n                <li>Ne pas publier de contenu ill√©gal, offensant ou nuisible</li>\n                <li>Respecter les droits d'autrui</li>\n                <li>Ne pas tenter de compromettre la s√©curit√© du service</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">4. Contenu utilisateur</h2>\n              <h3 className=\"text-xl font-semibold mb-3\">4.1 Responsabilit√©</h3>\n              <p>\n                Vous √™tes seul responsable du contenu que vous publiez. Vous garantissez \n                que vous d√©tenez tous les droits n√©cessaires sur ce contenu.\n              </p>\n              \n              <h3 className=\"text-xl font-semibold mb-3\">4.2 Licence</h3>\n              <p>\n                En publiant du contenu, vous nous accordez une licence non exclusive \n                pour l'utiliser dans le cadre de notre service.\n              </p>\n              \n              <h3 className=\"text-xl font-semibold mb-3\">4.3 Contenu interdit</h3>\n              <p>Il est interdit de publier :</p>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Du contenu ill√©gal ou nuisible</li>\n                <li>Du contenu violent ou pornographique</li>\n                <li>Du spam ou de la publicit√© non autoris√©e</li>\n                <li>Du contenu portant atteinte aux droits d'autrui</li>\n                <li>Des informations personnelles d'autres personnes</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">5. Tarifs et paiements</h2>\n              <h3 className=\"text-xl font-semibold mb-3\">5.1 Plans tarifaires</h3>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li><strong>Plan Free :</strong> Gratuit avec fonctionnalit√©s limit√©es</li>\n                <li><strong>Plan Pro :</strong> 9,90‚Ç¨/mois (99‚Ç¨/an)</li>\n                <li><strong>Plan Elite :</strong> 25,90‚Ç¨/mois (259‚Ç¨/an)</li>\n              </ul>\n              \n              <h3 className=\"text-xl font-semibold mb-3\">5.2 Facturation</h3>\n              <p>\n                Les paiements sont factur√©s √† l'avance. Les tarifs peuvent √™tre modifi√©s \n                avec un pr√©avis de 30 jours.\n              </p>\n              \n              <h3 className=\"text-xl font-semibold mb-3\">5.3 Remboursements</h3>\n              <p>\n                Les remboursements sont trait√©s selon notre politique de remboursement. \n                Contactez-nous pour toute demande.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">6. Propri√©t√© intellectuelle</h2>\n              <p>\n                Athlink et son contenu sont prot√©g√©s par le droit d'auteur et autres \n                droits de propri√©t√© intellectuelle. Vous ne pouvez pas utiliser notre \n                marque sans autorisation √©crite.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">7. Limitation de responsabilit√©</h2>\n              <p>\n                Athlink est fourni \"en l'√©tat\". Nous ne garantissons pas que le service \n                sera ininterrompu ou exempt d'erreurs. Notre responsabilit√© est limit√©e \n                au montant que vous avez pay√© pour le service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">8. Suspension et r√©siliation</h2>\n              <p>\n                Nous pouvons suspendre ou r√©silier votre compte en cas de violation \n                de ces conditions. Vous pouvez r√©silier votre compte √† tout moment.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">9. Donn√©es personnelles</h2>\n              <p>\n                Le traitement de vos donn√©es personnelles est r√©gi par notre \n                <a href=\"/confidentialite\" className=\"text-blue-600 hover:underline\">\n                  Politique de Confidentialit√©\n                </a>.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">10. Loi applicable</h2>\n              <p>\n                Ces conditions sont r√©gies par le droit fran√ßais. Tout litige sera \n                soumis √† la juridiction des tribunaux fran√ßais.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">11. Modifications</h2>\n              <p>\n                Nous pouvons modifier ces conditions √† tout moment. Les modifications \n                importantes vous seront notifi√©es par e-mail ou via notre service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">12. Contact</h2>\n              <p>\n                Pour toute question concernant ces conditions :\n              </p>\n              <div className=\"bg-gray-100 p-4 rounded-lg mt-4\">\n                <p><strong>E-mail :</strong> legal@athlink.app</p>\n                <p><strong>Adresse :</strong> Athlink, France</p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n","size_bytes":7940},"(dashboard)/dashboard/share/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { SharePageClient } from \"./share-client\"\n\nexport default async function SharePage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      username: true,\n      displayName: true,\n      avatarUrl: true,\n      bio: true,\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        {/* Shapes anim√©s */}\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n            Partage ton profil\n          </h1>\n          <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n            Ton lien unique pour tes r√©seaux sociaux\n          </p>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <SharePageClient \n        username={profile.username}\n        displayName={profile.displayName}\n        avatarUrl={profile.avatarUrl}\n        bio={profile.bio}\n      />\n    </div>\n  )\n}\n\n","size_bytes":1859},"api/auth/signup/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { hash } from \"bcryptjs\"\nimport { prisma } from \"@/lib/db\"\nimport { signupSchema, mapSportToEnum, createStatsWithOriginalSport } from \"@/lib/validations\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const validatedData = signupSchema.parse(body)\n\n    // Check if email exists\n    const existingEmail = await prisma.user.findUnique({\n      where: { email: validatedData.email }\n    })\n\n    if (existingEmail) {\n      return NextResponse.json(\n        { error: \"Cet email est d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    // Check if username exists\n    const existingUsername = await prisma.profile.findUnique({\n      where: { username: validatedData.username }\n    })\n\n    if (existingUsername) {\n      return NextResponse.json(\n        { error: \"Ce nom d'utilisateur est d√©j√† pris\" },\n        { status: 400 }\n      )\n    }\n\n    // Hash password\n    const hashedPassword = await hash(validatedData.password, 12)\n\n    // Create user and profile\n    const user = await prisma.user.create({\n      data: {\n        email: validatedData.email,\n        name: validatedData.name,\n        password: hashedPassword,\n        profile: {\n          create: {\n            username: validatedData.username,\n            displayName: validatedData.name,\n            sport: mapSportToEnum(validatedData.sport),\n            stats: createStatsWithOriginalSport(null, validatedData.sport),\n            plan: \"FREE\"\n          }\n        }\n      },\n      include: {\n        profile: true\n      }\n    })\n\n    return NextResponse.json({\n      user: {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        username: user.profile?.username\n      }\n    }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"Signup error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json(\n      { error: \"Erreur lors de la cr√©ation du compte\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2168},"sponsors/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { sponsorSchema } from \"@/lib/validations\"\n\n// GET all sponsors\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        sponsors: {\n          orderBy: { position: 'asc' }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ sponsors: profile.sponsors })\n\n  } catch (error) {\n    console.error(\"GET sponsors error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// POST new sponsor\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = sponsorSchema.parse(body)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: { sponsors: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    const maxPosition = await prisma.sponsor.aggregate({\n      where: { profileId: profile.id },\n      _max: { position: true }\n    })\n\n    const sponsor = await prisma.sponsor.create({\n      data: {\n        ...validatedData,\n        profileId: profile.id,\n        position: (maxPosition._max.position || 0) + 1\n      }\n    })\n\n    return NextResponse.json({ sponsor }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"POST sponsor error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2172},"components/ui-pro/dashboard-layout-wrapper.tsx":{"content":"\"use client\"\n\nimport { SidebarNavigation } from \"@/components/ui-pro/sidebar-navigation\"\nimport { MobileNavigation } from \"@/components/ui-pro/mobile-navigation\"\nimport { PageTransition } from \"@/components/ui-pro/page-transition\"\nimport { signOut } from \"next-auth/react\"\n\ninterface DashboardLayoutWrapperProps {\n  username: string\n  displayName: string\n  avatarUrl?: string | null\n  plan?: string\n  children: React.ReactNode\n}\n\nexport function DashboardLayoutWrapper({ \n  username, \n  displayName, \n  avatarUrl,\n  plan,\n  children \n}: DashboardLayoutWrapperProps) {\n  const handleSignOut = async () => {\n    await signOut({ callbackUrl: \"/login\" })\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-gray-50\">\n      {/* Desktop Sidebar */}\n      <div className=\"hidden lg:block\">\n        <SidebarNavigation\n          username={username}\n          displayName={displayName}\n          avatarUrl={avatarUrl}\n          plan={plan}\n          onSignOut={handleSignOut}\n        />\n      </div>\n\n      {/* Mobile Navigation */}\n      <MobileNavigation\n        username={username}\n        displayName={displayName}\n        avatarUrl={avatarUrl}\n        plan={plan}\n        onSignOut={handleSignOut}\n      />\n      \n      {/* Main Content Area with transitions */}\n      <main className=\"flex-1 lg:ml-[280px] pt-16 lg:pt-0 p-4 sm:p-6 lg:p-10\">\n        <PageTransition>\n          {children}\n        </PageTransition>\n      </main>\n    </div>\n  )\n}\n","size_bytes":1445},"(dashboard)/dashboard/profile/galerie-content.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport Image from \"next/image\"\n\ninterface Media {\n  id: string\n  type: \"IMAGE\" | \"VIDEO\" | \"YOUTUBE\"\n  url: string\n  thumbnail?: string | null\n  title?: string | null\n  description?: string | null\n  position: number\n}\n\nexport function GalerieContent() {\n  const [media, setMedia] = useState<Media[]>([])\n  const [loading, setLoading] = useState(true)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n\n  // Form state\n  const [type, setType] = useState<\"IMAGE\" | \"VIDEO\" | \"YOUTUBE\">(\"IMAGE\")\n  const [url, setUrl] = useState(\"\")\n  const [title, setTitle] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [file, setFile] = useState<File | null>(null)\n  const [uploadProgress, setUploadProgress] = useState(false)\n\n  useEffect(() => {\n    fetchMedia()\n  }, [])\n\n  const fetchMedia = async () => {\n    try {\n      const res = await fetch('/api/media')\n      if (res.ok) {\n        const data = await res.json()\n        setMedia(data)\n      } else {\n        console.error('Erreur lors du chargement des m√©dias:', res.status)\n        try {\n          const errorData = await res.json()\n          console.error('D√©tails de l\\'erreur:', errorData)\n        } catch (parseError) {\n          console.error('Impossible de parser l\\'erreur:', parseError)\n        }\n      }\n    } catch (error) {\n      console.error('Fetch media error:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleFileUpload = async (selectedFile: File): Promise<string | null> => {\n    setUploadProgress(true)\n    const formData = new FormData()\n    formData.append('file', selectedFile)\n    formData.append('type', 'media') // Diff√©rent de 'avatar' ou 'cover'\n\n    try {\n      const res = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      })\n\n      const data = await res.json()\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur lors de l'upload\")\n      }\n\n      return data.url\n    } catch (error: any) {\n      console.error(\"Upload error:\", error)\n      alert(`Erreur lors de l'upload: ${error.message}`)\n      return null\n    } finally {\n      setUploadProgress(false)\n    }\n  }\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsSubmitting(true)\n\n    try {\n      let finalUrl = url\n\n      // Si c'est une image/vid√©o upload√©e\n      if ((type === 'IMAGE' || type === 'VIDEO') && file) {\n        const uploadedUrl = await handleFileUpload(file)\n        if (!uploadedUrl) {\n          setIsSubmitting(false)\n          return\n        }\n        finalUrl = uploadedUrl\n      } else if ((type === 'IMAGE' || type === 'VIDEO') && !file && !url) {\n        alert(\"Veuillez s√©lectionner un fichier ou entrer une URL\")\n        setIsSubmitting(false)\n        return\n      }\n\n      // Si pas d'URL pour YouTube\n      if (type === 'YOUTUBE' && !finalUrl) {\n        alert(\"Veuillez entrer une URL YouTube\")\n        setIsSubmitting(false)\n        return\n      }\n\n      const body = {\n        type,\n        url: finalUrl,\n        title: title || undefined,\n        description: description || undefined,\n      }\n\n      const res = editingId\n        ? await fetch(`/api/media/${editingId}`, {\n            method: 'PATCH',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body),\n          })\n        : await fetch('/api/media', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body),\n          })\n\n      if (!res.ok) {\n        const data = await res.json()\n        throw new Error(data.error || 'Erreur')\n      }\n\n      // Reset form\n      setType(\"IMAGE\")\n      setUrl(\"\")\n      setTitle(\"\")\n      setDescription(\"\")\n      setFile(null)\n      setEditingId(null)\n      fetchMedia()\n    } catch (error: any) {\n      console.error('Submit error:', error)\n      alert(`Erreur lors de la sauvegarde: ${error.message}`)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleEdit = (m: Media) => {\n    setEditingId(m.id)\n    setType(m.type)\n    setUrl(m.url || \"\")\n    setTitle(m.title || \"\")\n    setDescription(m.description || \"\")\n    setFile(null)\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Supprimer ce m√©dia ?')) return\n\n    try {\n      const res = await fetch(`/api/media/${id}`, {\n        method: 'DELETE',\n      })\n\n      if (!res.ok) {\n        throw new Error('Erreur lors de la suppression')\n      }\n\n      fetchMedia()\n    } catch (error: any) {\n      console.error('Delete error:', error)\n      alert(`Erreur lors de la suppression: ${error.message}`)\n    }\n  }\n\n  const cancelEdit = () => {\n    setEditingId(null)\n    setType(\"IMAGE\")\n    setUrl(\"\")\n    setTitle(\"\")\n    setDescription(\"\")\n    setFile(null)\n  }\n\n  if (loading) return <div className=\"p-6\">Chargement...</div>\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <h1 className=\"text-3xl font-bold mb-6\">Galerie m√©dia üé¨</h1>\n\n      {/* Formulaire d'ajout/√©dition */}\n      <Card className=\"mb-6\">\n        <CardHeader>\n          <CardTitle>{editingId ? 'Modifier le m√©dia' : 'Ajouter un m√©dia'}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={onSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"type\">Type de m√©dia *</Label>\n              <Select value={type} onValueChange={(v: any) => setType(v)}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"IMAGE\">Image</SelectItem>\n                  <SelectItem value=\"VIDEO\">Vid√©o</SelectItem>\n                  <SelectItem value=\"YOUTUBE\">YouTube</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {type === \"YOUTUBE\" ? (\n              <div>\n                <Label htmlFor=\"url\">URL YouTube *</Label>\n                <Input\n                  id=\"url\"\n                  type=\"url\"\n                  value={url || \"\"}\n                  onChange={(e) => setUrl(e.target.value)}\n                  placeholder=\"https://www.youtube.com/watch?v=...\"\n                  required\n                />\n              </div>\n            ) : (\n              <div>\n                <Label htmlFor=\"file\">\n                  {type === \"IMAGE\" ? \"Fichier image *\" : \"Fichier vid√©o *\"}\n                </Label>\n                <Input\n                  id=\"file\"\n                  type=\"file\"\n                  accept={type === \"IMAGE\" ? \"image/jpeg,image/jpg,image/png,image/webp\" : \"video/*\"}\n                  onChange={(e) => {\n                    const selectedFile = e.target.files?.[0] || null\n                    if (selectedFile) {\n                      // V√©rifier si c'est un fichier HEIC/HEIF\n                      const fileName = selectedFile.name.toLowerCase()\n                      const fileType = selectedFile.type.toLowerCase()\n                      \n                      if (fileName.endsWith('.heic') || fileName.endsWith('.heif') || \n                          fileType === 'image/heic' || fileType === 'image/heif') {\n                        alert('Les fichiers HEIC/HEIF ne sont pas support√©s. Veuillez convertir votre image en JPEG, PNG ou WebP avant de l\\'uploader.')\n                        e.target.value = '' // Reset le input\n                        setFile(null)\n                        return\n                      }\n                    }\n                    setFile(selectedFile)\n                  }}\n                  required={!editingId}\n                />\n                {editingId && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Laissez vide pour conserver le fichier actuel\n                  </p>\n                )}\n              </div>\n            )}\n\n            <div>\n              <Label htmlFor=\"title\">Titre (optionnel)</Label>\n              <Input\n                id=\"title\"\n                type=\"text\"\n                value={title || \"\"}\n                onChange={(e) => setTitle(e.target.value)}\n                placeholder=\"Titre du m√©dia\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description (optionnelle)</Label>\n              <Input\n                id=\"description\"\n                type=\"text\"\n                value={description || \"\"}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Description du m√©dia\"\n              />\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button type=\"submit\" disabled={isSubmitting || uploadProgress}>\n                {isSubmitting || uploadProgress\n                  ? 'Traitement...'\n                  : editingId\n                  ? 'Mettre √† jour'\n                  : 'Ajouter'}\n              </Button>\n              {editingId && (\n                <Button type=\"button\" variant=\"outline\" onClick={cancelEdit}>\n                  Annuler\n                </Button>\n              )}\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Liste des m√©dias */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Vos m√©dias ({media.length})</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {media.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-8\">\n              Aucun m√©dia ajout√©. Commencez par en ajouter un !\n            </p>\n          ) : (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n              {media.map((m) => (\n                <Card key={m.id} className=\"overflow-hidden\">\n                  <div className=\"relative aspect-square bg-gray-100\">\n                    {m.type === 'IMAGE' ? (\n                      <Image\n                        src={m.url}\n                        alt={m.title || 'Image'}\n                        fill\n                        className=\"object-cover\"\n                        onLoad={() => {\n                          console.log('Image charg√©e avec succ√®s:', m.url)\n                        }}\n                        onError={(e) => {\n                          console.error('Erreur de chargement de l\\'image:', m.url)\n                          e.currentTarget.style.display = 'none'\n                          // Afficher le fallback\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement\n                          if (fallback) fallback.style.display = 'flex'\n                        }}\n                      />\n                    ) : m.type === 'VIDEO' ? (\n                      <video\n                        src={m.url}\n                        className=\"w-full h-full object-cover cursor-pointer\"\n                        controls\n                        preload=\"metadata\"\n                        onError={(e) => {\n                          console.error('Erreur de chargement de la vid√©o:', m.url)\n                          e.currentTarget.style.display = 'none'\n                          // Afficher le fallback\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement\n                          if (fallback) fallback.style.display = 'flex'\n                        }}\n                        onClick={(e) => {\n                          e.preventDefault()\n                          const video = e.currentTarget\n                          if (video.paused) {\n                            video.play()\n                          } else {\n                            video.pause()\n                          }\n                        }}\n                      />\n                    ) : (\n                      <Image\n                        src={m.thumbnail || ''}\n                        alt={m.title || 'YouTube'}\n                        fill\n                        className=\"object-cover\"\n                        onError={(e) => {\n                          console.error('Erreur de chargement de la miniature YouTube:', m.thumbnail)\n                          e.currentTarget.style.display = 'none'\n                          // Afficher le fallback\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement\n                          if (fallback) fallback.style.display = 'flex'\n                        }}\n                      />\n                    )}\n                    \n                    {/* Fallback si l'image ne charge pas */}\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-400\" style={{display: 'none'}}>\n                      <div className=\"text-center\">\n                        <div className=\"text-4xl mb-2\">\n                          {m.type === 'IMAGE' ? 'Image' : m.type === 'VIDEO' ? 'Vid√©o' : 'YouTube'}\n                        </div>\n                        <div className=\"text-xs font-medium\">\n                          {m.type === 'IMAGE' ? 'Image' : m.type === 'VIDEO' ? 'Vid√©o' : 'YouTube'}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {m.type === 'YOUTUBE' && (\n                      <div className=\"absolute top-2 right-2 bg-red-600 text-gray-100 px-2 py-1 rounded text-xs font-bold\">\n                        YOUTUBE\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"p-3\">\n                    {m.title && (\n                      <p className=\"font-medium text-sm truncate\">{m.title}</p>\n                    )}\n                    {m.description && (\n                      <p className=\"text-xs text-muted-foreground truncate\">\n                        {m.description}\n                      </p>\n                    )}\n                    <div className=\"flex gap-2 mt-2\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => handleEdit(m)}\n                      >\n                        Modifier\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleDelete(m.id)}\n                      >\n                        Supprimer\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":15039},"(dashboard)/dashboard/sources/competitions-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { RaceLogo } from \"@/components/ui-pro/race-logo\"\nimport { toast } from \"sonner\"\nimport Image from \"next/image\"\nimport { \n  Trophy, \n  Calendar, \n  MapPin, \n  Clock, \n  Target, \n  Plus, \n  Edit2, \n  Trash2, \n  ExternalLink,\n  BarChart3,\n  CheckCircle,\n  AlertCircle,\n  Timer\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ntype Race = {\n  id: string\n  name: string\n  date: string\n  location?: string | null\n  distance?: string | null\n  result?: string | null\n  status: string\n  url?: string | null\n  logoUrl?: string | null\n}\n\nexport function CompetitionsContent() {\n  const [races, setRaces] = useState<Race[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showForm, setShowForm] = useState(false)\n  const [isExtractingLogo, setIsExtractingLogo] = useState(false)\n  const [formData, setFormData] = useState({\n    name: \"\",\n    date: \"\",\n    location: \"\",\n    distance: \"\",\n    result: \"\",\n    status: \"upcoming\",\n    url: \"\",\n    logoUrl: \"\"\n  })\n\n  useEffect(() => {\n    fetchRaces()\n  }, [])\n\n  async function fetchRaces() {\n    try {\n      const res = await fetch(\"/api/races\")\n      if (res.ok) {\n        const data = await res.json()\n        setRaces(data.races || [])\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement des courses\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    \n    try {\n      const url = editingId ? `/api/races/${editingId}` : \"/api/races\"\n      const method = editingId ? \"PATCH\" : \"POST\"\n      \n      const res = await fetch(url, {\n        method,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData)\n      })\n\n      if (!res.ok) throw new Error(\"Erreur lors de la sauvegarde\")\n\n      toast.success(editingId ? \"Course modifi√©e !\" : \"Course ajout√©e !\")\n      setFormData({\n        name: \"\",\n        date: \"\",\n        location: \"\",\n        distance: \"\",\n        result: \"\",\n        status: \"upcoming\",\n        url: \"\",\n        logoUrl: \"\"\n      })\n      setEditingId(null)\n      setShowForm(false)\n      fetchRaces()\n    } catch (error) {\n      toast.error(\"Erreur lors de la sauvegarde\")\n    }\n  }\n\n  async function deleteRace(id: string) {\n    if (!confirm(\"Supprimer cette course ?\")) return\n    \n    try {\n      const res = await fetch(`/api/races/${id}`, { method: \"DELETE\" })\n      if (!res.ok) throw new Error(\"Erreur lors de la suppression\")\n      \n      toast.success(\"Course supprim√©e !\")\n      fetchRaces()\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\")\n    }\n  }\n\n  function editRace(race: Race) {\n    setEditingId(race.id)\n    setShowForm(true)\n    setFormData({\n      name: race.name,\n      date: race.date,\n      location: race.location || \"\",\n      distance: race.distance || \"\",\n      result: race.result || \"\",\n      status: race.status,\n      url: race.url || \"\",\n      logoUrl: race.logoUrl || \"\"\n    })\n  }\n\n  function getStatusInfo(status: string) {\n    switch (status) {\n      case \"completed\":\n        return { icon: CheckCircle, color: \"text-green-600\", bg: \"bg-green-100\", label: \"Termin√©e\" }\n      case \"upcoming\":\n        return { icon: Timer, color: \"text-blue-600\", bg: \"bg-blue-100\", label: \"√Ä venir\" }\n      case \"cancelled\":\n        return { icon: AlertCircle, color: \"text-red-600\", bg: \"bg-red-100\", label: \"Annul√©e\" }\n      default:\n        return { icon: Timer, color: \"text-gray-600\", bg: \"bg-gray-100\", label: \"Inconnue\" }\n    }\n  }\n\n  function getDaysUntil(dateString: string) {\n    const raceDate = new Date(dateString)\n    const today = new Date()\n    const diffTime = raceDate.getTime() - today.getTime()\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n    \n    if (diffDays < 0) return \"Pass√©e\"\n    if (diffDays === 0) return \"Aujourd'hui\"\n    if (diffDays === 1) return \"Demain\"\n    return `${diffDays} jours`\n  }\n\n  const upcomingRaces = races.filter(race => race.status === \"upcoming\")\n  const completedRaces = races.filter(race => race.status === \"completed\")\n  const totalRaces = races.length\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full\"\n        />\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n    >\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Trophy className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Courses</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalRaces}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Timer className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">√Ä Venir</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{upcomingRaces.length}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Termin√©es</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{completedRaces.length}</p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Add Button */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">Mes Comp√©titions</h2>\n          <p className=\"text-gray-600\">G√©rez votre calendrier de courses</p>\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => {\n            setShowForm(!showForm)\n            setEditingId(null)\n            setFormData({\n              name: \"\",\n              date: \"\",\n              location: \"\",\n              distance: \"\",\n              result: \"\",\n              status: \"upcoming\",\n              url: \"\",\n              logoUrl: \"\"\n            })\n          }}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          {showForm ? \"Annuler\" : \"Nouvelle Course\"}\n        </motion.button>\n      </motion.div>\n\n      {/* Form */}\n      <AnimatePresence>\n        {showForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\"\n          >\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">\n                {editingId ? \"Modifier la course\" : \"Ajouter une nouvelle course\"}\n              </h3>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"name\">Nom de la course *</Label>\n                    <Input\n                      id=\"name\"\n                      value={formData.name}\n                      onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                      placeholder=\"Marathon de Paris\"\n                      className=\"mt-1\"\n                      required\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"date\">Date *</Label>\n                    <Input\n                      id=\"date\"\n                      type=\"date\"\n                      value={formData.date}\n                      onChange={(e) => setFormData({ ...formData, date: e.target.value })}\n                      className=\"mt-1\"\n                      required\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"location\">Lieu</Label>\n                    <Input\n                      id=\"location\"\n                      value={formData.location}\n                      onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                      placeholder=\"Paris, France\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"distance\">Distance</Label>\n                    <Input\n                      id=\"distance\"\n                      value={formData.distance}\n                      onChange={(e) => setFormData({ ...formData, distance: e.target.value })}\n                      placeholder=\"42.195 km\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"status\">Statut</Label>\n                    <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n                      <SelectTrigger className=\"mt-1\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"upcoming\">√Ä venir</SelectItem>\n                        <SelectItem value=\"completed\">Termin√©e</SelectItem>\n                        <SelectItem value=\"cancelled\">Annul√©e</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"result\">R√©sultat</Label>\n                    <Input\n                      id=\"result\"\n                      value={formData.result}\n                      onChange={(e) => setFormData({ ...formData, result: e.target.value })}\n                      placeholder=\"3h 45min\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"url\">URL</Label>\n                    <Input\n                      id=\"url\"\n                      type=\"url\"\n                      value={formData.url}\n                      onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n                      placeholder=\"https://example.com\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"logoUrl\">Logo URL</Label>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <Input\n                        id=\"logoUrl\"\n                        value={formData.logoUrl}\n                        onChange={(e) => setFormData({ ...formData, logoUrl: e.target.value })}\n                        placeholder=\"https://example.com/logo.png\"\n                        className=\"flex-1\"\n                      />\n                      <motion.button\n                        type=\"button\"\n                        whileHover={{ scale: 1.05 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={async () => {\n                          if (!formData.url) {\n                            toast.error(\"Veuillez d'abord saisir l'URL de la course\")\n                            return\n                          }\n                          \n                          setIsExtractingLogo(true)\n                          try {\n                            const res = await fetch(\"/api/races/extract-logo\", {\n                              method: \"POST\",\n                              headers: { \"Content-Type\": \"application/json\" },\n                              body: JSON.stringify({ url: formData.url })\n                            })\n\n                            if (res.ok) {\n                              const data = await res.json()\n                              if (data.logoUrl) {\n                                setFormData({ ...formData, logoUrl: data.logoUrl })\n                                toast.success(\"Logo extrait avec succ√®s !\")\n                              } else {\n                                toast.error(\"Aucun logo trouv√© sur ce site\")\n                              }\n                            } else {\n                              toast.error(\"Erreur lors de l'extraction du logo\")\n                            }\n                          } catch (error) {\n                            toast.error(\"Erreur lors de l'extraction du logo\")\n                          } finally {\n                            setIsExtractingLogo(false)\n                          }\n                        }}\n                        disabled={isExtractingLogo || !formData.url}\n                        className=\"flex items-center gap-2 bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50\"\n                      >\n                        {isExtractingLogo ? (\n                          <motion.div\n                            animate={{ rotate: 360 }}\n                            transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                            className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                          />\n                        ) : (\n                          <Search className=\"w-4 h-4\" />\n                        )}\n                        Extraire\n                      </motion.button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Aper√ßu du logo */}\n                {formData.logoUrl && (\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center bg-gray-50 border border-gray-200\">\n                      <Image\n                        src={formData.logoUrl}\n                        alt=\"Logo preview\"\n                        width={48}\n                        height={48}\n                        className=\"w-full h-full object-contain\"\n                        onError={(e) => {\n                          e.currentTarget.style.display = 'none'\n                        }}\n                      />\n                    </div>\n                    <span className=\"text-sm text-gray-600\">Aper√ßu du logo</span>\n                  </div>\n                )}\n\n                <div className=\"flex gap-2\">\n                  <motion.button\n                    type=\"submit\"\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    {editingId ? \"Modifier\" : \"Ajouter\"}\n                  </motion.button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Races List */}\n      <div className=\"space-y-4\">\n        <AnimatePresence>\n          {races.map((race, index) => {\n            const statusInfo = getStatusInfo(race.status)\n            const StatusIcon = statusInfo.icon\n            const daysUntil = getDaysUntil(race.date)\n            \n            return (\n              <motion.div\n                key={race.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                transition={{ delay: index * 0.1 }}\n                className=\"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 group\"\n              >\n                <div className=\"p-6\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"flex-shrink-0\">\n                        {race.logoUrl ? (\n                          <div className=\"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center bg-gray-50 border border-gray-200\">\n                            <Image\n                              src={race.logoUrl}\n                              alt={race.name}\n                              width={64}\n                              height={64}\n                              className=\"w-full h-full object-contain\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none'\n                                e.currentTarget.parentElement?.nextElementSibling?.classList.remove('hidden')\n                              }}\n                            />\n                          </div>\n                        ) : (\n                          <div className=\"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center bg-gray-50 border border-gray-200\">\n                            <span className=\"text-xs text-gray-400\">Pas de logo</span>\n                          </div>\n                        )}\n                        <div className={`w-16 h-16 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-lg flex items-center justify-center ${race.logoUrl ? 'hidden' : ''}`}>\n                          <Trophy className=\"w-8 h-8 text-yellow-600\" />\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-semibold text-gray-900\">{race.name}</h3>\n                          <div className={cn(\n                            \"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium\",\n                            statusInfo.bg,\n                            statusInfo.color\n                          )}>\n                            <StatusIcon className=\"w-3 h-3\" />\n                            {statusInfo.label}\n                          </div>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600\">\n                          <div className=\"flex items-center gap-2\">\n                            <Calendar className=\"w-4 h-4\" />\n                            {new Date(race.date).toLocaleDateString('fr-FR')}\n                          </div>\n                          {race.location && (\n                            <div className=\"flex items-center gap-2\">\n                              <MapPin className=\"w-4 h-4\" />\n                              {race.location}\n                            </div>\n                          )}\n                          {race.distance && (\n                            <div className=\"flex items-center gap-2\">\n                              <Target className=\"w-4 h-4\" />\n                              {race.distance}\n                            </div>\n                          )}\n                          {race.result && (\n                            <div className=\"flex items-center gap-2\">\n                              <Trophy className=\"w-4 h-4\" />\n                              {race.result}\n                            </div>\n                          )}\n                        </div>\n                        \n                        {race.status === \"upcoming\" && (\n                          <div className=\"mt-2\">\n                            <div className=\"flex items-center gap-2 text-sm text-blue-600\">\n                              <Clock className=\"w-4 h-4\" />\n                              {daysUntil}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {race.url && (\n                        <motion.button\n                          whileHover={{ scale: 1.1 }}\n                          whileTap={{ scale: 0.9 }}\n                          onClick={() => window.open(race.url, '_blank')}\n                          className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                          title=\"Voir le site\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                        </motion.button>\n                      )}\n                      \n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => editRace(race)}\n                        className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                        title=\"Modifier\"\n                      >\n                        <Edit2 className=\"w-4 h-4\" />\n                      </motion.button>\n                      \n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => deleteRace(race.id)}\n                        className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                        title=\"Supprimer\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </motion.button>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            )\n          })}\n        </AnimatePresence>\n        \n        {races.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"text-6xl mb-4\">üèÉ‚Äç‚ôÇÔ∏è</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Aucune course ajout√©e</h3>\n            <p className=\"text-gray-600 mb-4\">Commencez par ajouter votre premi√®re comp√©tition</p>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setShowForm(true)}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-3 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Ajouter ma premi√®re course\n            </motion.button>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}","size_bytes":25138},"config/middleware.ts":{"content":"import { NextResponse } from \"next/server\"\nimport type { NextRequest } from \"next/server\"\n\nexport function middleware(request: NextRequest) {\n  // Pour Next-auth v5, le middleware de protection est g√©r√© dans les pages elles-m√™mes\n  // Ce middleware peut √™tre utilis√© pour d'autres logiques si n√©cessaire\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: [\"/dashboard/:path*\"]\n}\n","size_bytes":401},"(dashboard)/dashboard/sources/sponsors-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { toast } from \"sonner\"\nimport Image from \"next/image\"\nimport { searchBrand, getBrandLogoUrl, type Brand } from \"@/lib/brands\"\nimport { \n  Award, \n  Plus, \n  Edit2, \n  Trash2, \n  ExternalLink, \n  BarChart3,\n  Copy,\n  Check,\n  Upload,\n  Search,\n  Building2,\n  Tag,\n  Globe\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ntype Sponsor = {\n  id: string\n  name: string\n  logoUrl?: string | null\n  websiteUrl?: string | null\n  promoCode?: string | null\n  description?: string | null\n  position: number\n  clicks: number\n}\n\nexport function SponsorsContent() {\n  const [sponsors, setSponsors] = useState<Sponsor[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showForm, setShowForm] = useState(false)\n  const [copiedId, setCopiedId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    name: \"\",\n    logoUrl: \"\",\n    websiteUrl: \"\",\n    promoCode: \"\",\n    description: \"\"\n  })\n  const [logoFile, setLogoFile] = useState<File | null>(null)\n  const [logoPreview, setLogoPreview] = useState<string | null>(null)\n  const [isUploading, setIsUploading] = useState(false)\n  const [brandSuggestions, setBrandSuggestions] = useState<Brand[]>([])\n  const [showSuggestions, setShowSuggestions] = useState(false)\n  const suggestionsRef = useRef<HTMLDivElement>(null)\n  const [isExtractingLogo, setIsExtractingLogo] = useState(false)\n\n  useEffect(() => {\n    fetchSponsors()\n  }, [])\n\n  // Fermer les suggestions quand on clique ailleurs\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (suggestionsRef.current && !suggestionsRef.current.contains(event.target as Node)) {\n        setShowSuggestions(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  async function fetchSponsors() {\n    try {\n      const res = await fetch(\"/api/sponsors\")\n      if (res.ok) {\n        const data = await res.json()\n        setSponsors(data.sponsors || [])\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement des sponsors\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    \n    try {\n      let logoUrl = formData.logoUrl\n\n      // Upload du logo si un fichier est s√©lectionn√©\n      if (logoFile) {\n        setIsUploading(true)\n        const formDataUpload = new FormData()\n        formDataUpload.append(\"file\", logoFile)\n        \n        const uploadRes = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: formDataUpload\n        })\n        \n        if (uploadRes.ok) {\n          const uploadData = await uploadRes.json()\n          logoUrl = uploadData.url\n        }\n        setIsUploading(false)\n      }\n\n      const url = editingId ? `/api/sponsors/${editingId}` : \"/api/sponsors\"\n      const method = editingId ? \"PATCH\" : \"POST\"\n      \n      const res = await fetch(url, {\n        method,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          logoUrl\n        })\n      })\n\n      if (!res.ok) throw new Error(\"Erreur lors de la sauvegarde\")\n\n      toast.success(editingId ? \"Sponsor modifi√© !\" : \"Sponsor ajout√© !\")\n      setFormData({\n        name: \"\",\n        logoUrl: \"\",\n        websiteUrl: \"\",\n        promoCode: \"\",\n        description: \"\"\n      })\n      setLogoFile(null)\n      setLogoPreview(null)\n      setEditingId(null)\n      setShowForm(false)\n      fetchSponsors()\n    } catch (error) {\n      toast.error(\"Erreur lors de la sauvegarde\")\n    } finally {\n      setIsUploading(false)\n    }\n  }\n\n  async function deleteSponsor(id: string) {\n    if (!confirm(\"Supprimer ce sponsor ?\")) return\n    \n    try {\n      const res = await fetch(`/api/sponsors/${id}`, { method: \"DELETE\" })\n      if (!res.ok) throw new Error(\"Erreur lors de la suppression\")\n      \n      toast.success(\"Sponsor supprim√© !\")\n      fetchSponsors()\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\")\n    }\n  }\n\n  function editSponsor(sponsor: Sponsor) {\n    setEditingId(sponsor.id)\n    setShowForm(true)\n    setFormData({\n      name: sponsor.name,\n      logoUrl: sponsor.logoUrl || \"\",\n      websiteUrl: sponsor.websiteUrl || \"\",\n      promoCode: sponsor.promoCode || \"\",\n      description: sponsor.description || \"\"\n    })\n  }\n\n  function copyToClipboard(text: string, id: string) {\n    navigator.clipboard.writeText(text)\n    setCopiedId(id)\n    setTimeout(() => setCopiedId(null), 2000)\n    toast.success(\"Code copi√© !\")\n  }\n\n  async function handleNameChange(value: string) {\n    setFormData({ ...formData, name: value })\n    \n    if (value.length > 2) {\n      const suggestions = searchBrand(value)\n      setBrandSuggestions(suggestions)\n      setShowSuggestions(true)\n    } else {\n      setShowSuggestions(false)\n    }\n  }\n\n  async function selectBrand(brand: Brand) {\n    setFormData({ \n      ...formData, \n      name: brand.name,\n      logoUrl: getBrandLogoUrl(brand)\n    })\n    setShowSuggestions(false)\n  }\n\n  async function extractLogo() {\n    if (!formData.websiteUrl) {\n      toast.error(\"Veuillez d'abord saisir l'URL du site web\")\n      return\n    }\n\n    setIsExtractingLogo(true)\n    try {\n      const res = await fetch(\"/api/sponsors/extract-logo\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ url: formData.websiteUrl })\n      })\n\n      if (res.ok) {\n        const data = await res.json()\n        if (data.logoUrl) {\n          setFormData({ ...formData, logoUrl: data.logoUrl })\n          toast.success(\"Logo extrait avec succ√®s !\")\n        } else {\n          toast.error(\"Aucun logo trouv√© sur ce site\")\n        }\n      } else {\n        toast.error(\"Erreur lors de l'extraction du logo\")\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors de l'extraction du logo\")\n    } finally {\n      setIsExtractingLogo(false)\n    }\n  }\n\n  const totalClicks = sponsors.reduce((sum, sponsor) => sum + sponsor.clicks, 0)\n  const sponsorsWithPromo = sponsors.filter(sponsor => sponsor.promoCode).length\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full\"\n        />\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n    >\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Award className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Sponsors</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{sponsors.length}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Tag className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Avec Code Promo</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{sponsorsWithPromo}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <BarChart3 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Clics</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalClicks}</p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Add Button */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">Mes Sponsors</h2>\n          <p className=\"text-gray-600\">G√©rez vos partenaires et collaborations</p>\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => {\n            setShowForm(!showForm)\n            setEditingId(null)\n            setFormData({\n              name: \"\",\n              logoUrl: \"\",\n              websiteUrl: \"\",\n              promoCode: \"\",\n              description: \"\"\n            })\n            setLogoFile(null)\n            setLogoPreview(null)\n          }}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          {showForm ? \"Annuler\" : \"Nouveau Sponsor\"}\n        </motion.button>\n      </motion.div>\n\n      {/* Form */}\n      <AnimatePresence>\n        {showForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\"\n          >\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">\n                {editingId ? \"Modifier le sponsor\" : \"Ajouter un nouveau sponsor\"}\n              </h3>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"relative\">\n                    <Label htmlFor=\"name\">Nom du sponsor *</Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => handleNameChange(e.target.value)}\n                        placeholder=\"Nike\"\n                        className=\"mt-1 pr-10\"\n                        required\n                      />\n                      <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                    </div>\n                    \n                    {/* Suggestions de marques */}\n                    {showSuggestions && brandSuggestions.length > 0 && (\n                      <div ref={suggestionsRef} className=\"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto\">\n                        {brandSuggestions.map((brand) => (\n                          <button\n                            key={brand.name}\n                            type=\"button\"\n                            onClick={() => selectBrand(brand)}\n                            className=\"w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center gap-2\"\n                          >\n                            <img \n                              src={getBrandLogoUrl(brand)} \n                              alt={brand.name}\n                              className=\"w-6 h-6 object-contain\"\n                            />\n                            {brand.name}\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"websiteUrl\">Site web</Label>\n                    <Input\n                      id=\"websiteUrl\"\n                      type=\"url\"\n                      value={formData.websiteUrl}\n                      onChange={(e) => setFormData({ ...formData, websiteUrl: e.target.value })}\n                      placeholder=\"https://nike.com\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"promoCode\">Code promo</Label>\n                    <Input\n                      id=\"promoCode\"\n                      value={formData.promoCode}\n                      onChange={(e) => setFormData({ ...formData, promoCode: e.target.value })}\n                      placeholder=\"ATHLINK20\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"description\">Description</Label>\n                    <Input\n                      id=\"description\"\n                      value={formData.description}\n                      onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                      placeholder=\"√âquipement sportif\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                {/* Logo Section */}\n                <div>\n                  <Label>Logo</Label>\n                  <div className=\"mt-2 space-y-3\">\n                    <div className=\"flex items-center gap-3\">\n                      <Input\n                        type=\"url\"\n                        value={formData.logoUrl}\n                        onChange={(e) => setFormData({ ...formData, logoUrl: e.target.value })}\n                        placeholder=\"https://example.com/logo.png\"\n                        className=\"flex-1\"\n                      />\n                      <motion.button\n                        type=\"button\"\n                        whileHover={{ scale: 1.05 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={extractLogo}\n                        disabled={isExtractingLogo || !formData.websiteUrl}\n                        className=\"flex items-center gap-2 bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50\"\n                      >\n                        {isExtractingLogo ? (\n                          <motion.div\n                            animate={{ rotate: 360 }}\n                            transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                            className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                          />\n                        ) : (\n                          <Search className=\"w-4 h-4\" />\n                        )}\n                        Extraire\n                      </motion.button>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-3\">\n                      <Input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                          const file = e.target.files?.[0]\n                          if (file) {\n                            setLogoFile(file)\n                            setLogoPreview(URL.createObjectURL(file))\n                          }\n                        }}\n                        className=\"flex-1\"\n                      />\n                      <Upload className=\"w-4 h-4 text-gray-400\" />\n                    </div>\n                    \n                    {(formData.logoUrl || logoPreview) && (\n                      <div className=\"flex items-center gap-2\">\n                        <img \n                          src={logoPreview || formData.logoUrl || \"\"} \n                          alt=\"Logo preview\"\n                          className=\"w-12 h-12 object-contain border border-gray-200 rounded\"\n                        />\n                        <span className=\"text-sm text-gray-600\">Aper√ßu du logo</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <motion.button\n                    type=\"submit\"\n                    disabled={isUploading}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 disabled:opacity-50\"\n                  >\n                    {isUploading ? (\n                      <>\n                        <motion.div\n                          animate={{ rotate: 360 }}\n                          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                          className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                        />\n                        Upload...\n                      </>\n                    ) : (\n                      <>\n                        <Plus className=\"w-4 h-4\" />\n                        {editingId ? \"Modifier\" : \"Ajouter\"}\n                      </>\n                    )}\n                  </motion.button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Sponsors List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {sponsors.map((sponsor, index) => (\n            <motion.div\n              key={sponsor.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 group\"\n            >\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"flex-shrink-0\">\n                      {sponsor.logoUrl ? (\n                        <img \n                          src={sponsor.logoUrl} \n                          alt={sponsor.name}\n                          className=\"w-12 h-12 object-contain rounded-lg\"\n                        />\n                      ) : (\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg flex items-center justify-center\">\n                          <Building2 className=\"w-6 h-6 text-green-600\" />\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{sponsor.name}</h3>\n                        {sponsor.promoCode && (\n                          <div className=\"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium\">\n                            Code promo\n                          </div>\n                        )}\n                      </div>\n                      {sponsor.description && (\n                        <p className=\"text-sm text-gray-600\">{sponsor.description}</p>\n                      )}\n                      <div className=\"flex items-center gap-4 mt-2\">\n                        <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                          <BarChart3 className=\"w-4 h-4\" />\n                          {sponsor.clicks} clics\n                        </div>\n                        {sponsor.websiteUrl && (\n                          <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                            <Globe className=\"w-4 h-4\" />\n                            Site web\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {sponsor.promoCode && (\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => copyToClipboard(sponsor.promoCode!, sponsor.id)}\n                        className=\"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\n                        title=\"Copier le code promo\"\n                      >\n                        {copiedId === sponsor.id ? (\n                          <Check className=\"w-4 h-4 text-green-600\" />\n                        ) : (\n                          <Copy className=\"w-4 h-4\" />\n                        )}\n                      </motion.button>\n                    )}\n                    \n                    {sponsor.websiteUrl && (\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => window.open(sponsor.websiteUrl, '_blank')}\n                        className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                        title=\"Visiter le site\"\n                      >\n                        <ExternalLink className=\"w-4 h-4\" />\n                      </motion.button>\n                    )}\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => editSponsor(sponsor)}\n                      className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Modifier\"\n                    >\n                      <Edit2 className=\"w-4 h-4\" />\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => deleteSponsor(sponsor.id)}\n                      className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                      title=\"Supprimer\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </motion.button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        {sponsors.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"text-6xl mb-4\">üèÜ</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Aucun sponsor ajout√©</h3>\n            <p className=\"text-gray-600 mb-4\">Commencez par ajouter votre premier partenaire</p>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setShowForm(true)}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-3 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Ajouter mon premier sponsor\n            </motion.button>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}","size_bytes":24838},"coaching/bookings/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n    const booking = bookings.find((b: any) => b.id === params.id)\n\n    if (!booking) {\n      return NextResponse.json({ error: \"R√©servation non trouv√©e\" }, { status: 404 })\n    }\n\n    return NextResponse.json(booking)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const body = await request.json()\n    const { status, clientName, clientEmail, clientPhone, date, startTime, duration, service, price, notes } = body\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n    const bookingIndex = bookings.findIndex((b: any) => b.id === params.id)\n\n    if (bookingIndex === -1) {\n      return NextResponse.json({ error: \"R√©servation non trouv√©e\" }, { status: 404 })\n    }\n\n    // Validation du statut si fourni\n    if (status) {\n      const validStatuses = [\"PENDING\", \"CONFIRMED\", \"COMPLETED\", \"CANCELLED\"]\n      if (!validStatuses.includes(status)) {\n        return NextResponse.json({ error: \"Statut invalide\" }, { status: 400 })\n      }\n    }\n\n    // Recalculer l'heure de fin si n√©cessaire\n    let endTime = bookings[bookingIndex].endTime\n    if (startTime && duration) {\n      const [hours, minutes] = startTime.split(':').map(Number)\n      const endMinutes = hours * 60 + minutes + parseInt(duration)\n      const endHours = Math.floor(endMinutes / 60)\n      const endMins = endMinutes % 60\n      endTime = `${String(endHours).padStart(2, '0')}:${String(endMins).padStart(2, '0')}`\n    }\n\n    // Mettre √† jour la r√©servation\n    const updatedBooking = {\n      ...bookings[bookingIndex],\n      ...(status !== undefined && { status }),\n      ...(clientName !== undefined && { clientName }),\n      ...(clientEmail !== undefined && { clientEmail }),\n      ...(clientPhone !== undefined && { clientPhone }),\n      ...(date !== undefined && { date }),\n      ...(startTime !== undefined && { startTime }),\n      ...(duration !== undefined && { duration: parseInt(duration) }),\n      ...(service !== undefined && { service }),\n      ...(price !== undefined && { price: parseFloat(price) }),\n      ...(notes !== undefined && { notes }),\n      endTime\n    }\n\n    bookings[bookingIndex] = updatedBooking\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings\n        }\n      }\n    })\n\n    return NextResponse.json(updatedBooking)\n  } catch (error) {\n    console.error(\"Erreur lors de la mise √† jour de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n    const bookingIndex = bookings.findIndex((b: any) => b.id === params.id)\n\n    if (bookingIndex === -1) {\n      return NextResponse.json({ error: \"R√©servation non trouv√©e\" }, { status: 404 })\n    }\n\n    // Supprimer la r√©servation\n    bookings.splice(bookingIndex, 1)\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings\n        }\n      }\n    })\n\n    return NextResponse.json({ message: \"R√©servation supprim√©e avec succ√®s\" })\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n","size_bytes":5494},"(dashboard)/dashboard/upgrade/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Check, Zap, Crown, Sparkles, TrendingUp, Globe, BarChart3, Palette, Link as LinkIcon, Shield } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport { PromoCodeField } from \"@/components/ui-pro/promo-code-field\"\n\nexport default function UpgradePage() {\n  const [billingCycle, setBillingCycle] = useState<\"monthly\" | \"yearly\">(\"monthly\")\n  const [promoCode, setPromoCode] = useState(\"\")\n  const [promoData, setPromoData] = useState<any>(null)\n  const [isUpgrading, setIsUpgrading] = useState(false)\n  \n  const handlePromoValidation = (isValid: boolean, data?: any) => {\n    if (isValid && data) {\n      setPromoData(data)\n    } else {\n      setPromoData(null)\n    }\n  }\n\n  // V√©rifier si le code promo s'applique √† un plan donn√©\n  const isPromoValidForPlan = (planName: string) => {\n    if (!promoData?.valid) return false\n    \n    // Mapper les noms de plans interface vers Prisma\n    const planMapping: Record<string, string> = {\n      \"Pro\": \"ATHLETE_PRO\",\n      \"Elite\": \"COACH\"\n    }\n    \n    const prismaName = planMapping[planName]\n    return promoData.plan === prismaName\n  }\n\n  const handleUpgrade = async (planName: string) => {\n    if (planName === \"Free\") return // Ne rien faire pour le plan Free\n    \n    setIsUpgrading(true)\n    \n    try {\n      // Mapper les noms de plans vers les valeurs Prisma\n      // Note: ATHLETE_PRO = Elite dans l'interface, COACH = Pro dans l'interface\n      const planMapping: Record<string, string> = {\n        \"Pro\": \"ATHLETE_PRO\",  // Le plan Pro correspond √† ATHLETE_PRO dans Prisma\n        \"Elite\": \"COACH\"        // Le plan Elite correspond √† COACH dans Prisma\n      }\n      \n      const planValue = planMapping[planName]\n      \n      const response = await fetch(\"/api/upgrade-plan\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n          plan: planValue,\n          promoCode: promoData?.valid ? promoCode : null \n        })\n      })\n\n      if (response.ok) {\n        alert(`‚úÖ Plan ${planName} activ√© avec succ√®s !${promoData?.valid ? ' üéâ Code promo appliqu√© !' : ''}`)\n        window.location.href = \"/dashboard\"\n      } else {\n        const error = await response.json()\n        alert(`‚ùå Erreur: ${error.error}`)\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'upgrade:\", error)\n      alert(\"‚ùå Une erreur est survenue\")\n    } finally {\n      setIsUpgrading(false)\n    }\n  }\n\n  const plans = [\n    {\n      name: \"Free\",\n      price: 0,\n      yearlyPrice: 0,\n      description: \"Parfait pour commencer\",\n      icon: LinkIcon,\n      color: \"gray\",\n      features: [\n        \"1 profil public\",\n        \"1 lien\",\n        \"1 comp√©tition √† venir\",\n        \"0 sponsors\",\n        \"Galerie 2 m√©dias\",\n        \"Th√®me basique\",\n        \"Sous-domaine athlink.app\",\n      ],\n      limitations: [\n        \"Analytics basiques uniquement\",\n        \"Pas de domaine personnalis√©\",\n        \"Branding Athlink visible\",\n      ],\n      cta: \"Plan actuel\",\n      current: true,\n    },\n    {\n      name: \"Pro\",\n      price: 9.90,\n      yearlyPrice: 99,\n      popular: true,\n      description: \"Pour les athl√®tes s√©rieux\",\n      icon: Zap,\n      color: \"gray\",\n      features: [\n        \"Tout du plan Free\",\n        \"Liens illimit√©s\",\n        \"Comp√©titions illimit√©es\",\n        \"Sponsors illimit√©s\",\n        \"Galerie illimit√©e\",\n        \"Analytics avanc√©es (7 jours)\",\n        \"Badge \\\"Pro\\\" sur le profil\",\n      ],\n      cta: \"Passer Pro\",\n      highlight: true,\n    },\n    {\n      name: \"Elite\",\n      price: 25.90,\n      yearlyPrice: 259,\n      description: \"Pour les professionnels\",\n      icon: Crown,\n      color: \"gray\",\n      features: [\n        \"Tout du plan Pro\",\n        \"Analytics illimit√©es\",\n        \"Heatmap des clics\",\n        \"D√©mographie visiteurs\",\n        \"Export donn√©es (PDF)\",\n        \"Service de coaching\",\n        \"Personnalisation CSS\",\n        \"Badge \\\"Elite\\\" sur le profil\",\n        \"Support prioritaire\",\n      ],\n      cta: \"Passer Elite\",\n    },\n  ]\n\n  const savings = billingCycle === \"yearly\" ? \"2 mois offerts\" : null\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\">\n      <div className=\"container mx-auto px-4 py-12 max-w-7xl\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-black text-white px-4 py-2 rounded-full text-sm font-bold mb-6\"\n          >\n            <Sparkles className=\"w-4 h-4\" />\n            Offre de lancement - Prix r√©duits !\n          </motion.div>\n\n          <motion.h1\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"text-5xl md:text-6xl font-black mb-4 bg-gradient-to-r from-gray-900 via-gray-600 to-gray-900 bg-clip-text text-transparent\"\n          >\n            Choisis ton Plan\n          </motion.h1>\n\n          <motion.p\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-xl text-gray-600 max-w-2xl mx-auto mb-8\"\n          >\n            D√©bloque tout le potentiel de ton profil d&apos;athl√®te\n          </motion.p>\n\n          {/* Billing Toggle */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: 0.3 }}\n            className=\"inline-flex items-center gap-4 bg-white border-2 border-gray-200 rounded-full p-2 shadow-lg\"\n          >\n            <button\n              onClick={() => setBillingCycle(\"monthly\")}\n              className={`px-6 py-2 rounded-full font-bold transition-all ${\n                billingCycle === \"monthly\"\n                  ? \"bg-gray-800 text-white shadow-md\"\n                  : \"text-gray-600 hover:text-gray-900\"\n              }`}\n            >\n              Mensuel\n            </button>\n            <button\n              onClick={() => setBillingCycle(\"yearly\")}\n              className={`px-6 py-2 rounded-full font-bold transition-all relative ${\n                billingCycle === \"yearly\"\n                  ? \"bg-gray-800 text-white shadow-md\"\n                  : \"text-gray-600 hover:text-gray-900\"\n              }`}\n            >\n              Annuel\n              {savings && (\n                <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500 text-white text-xs px-2 py-1 rounded-full whitespace-nowrap font-bold\">\n                  {savings}\n                </span>\n              )}\n            </button>\n          </motion.div>\n        </div>\n\n        {/* Code Promo Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n          className=\"max-w-2xl mx-auto mb-12\"\n        >\n          <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 border border-gray-200 mb-6\">\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-2\">üíé Tu as un code promo ?</h3>\n              <p className=\"text-sm text-gray-600\">Saisis-le pour b√©n√©ficier d'avantages exclusifs</p>\n            </div>\n            <PromoCodeField \n              value={promoCode}\n              onChange={setPromoCode}\n              onValidation={handlePromoValidation}\n            />\n          </div>\n        </motion.div>\n\n        {/* Plans Grid */}\n        <div className=\"grid md:grid-cols-3 gap-8 mb-16\">\n          {plans.map((plan, index) => (\n            <motion.div\n              key={plan.name}\n              initial={{ opacity: 0, y: 40 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 * index, duration: 0.5 }}\n              className={`relative rounded-3xl p-8 ${\n                plan.highlight\n                  ? \"bg-gradient-to-br from-gray-800 to-black text-white shadow-2xl scale-105 border-4 border-gray-600\"\n                  : \"bg-white border-2 border-gray-200 shadow-lg hover:shadow-xl transition-shadow\"\n              }`}\n            >\n              {/* Popular Badge */}\n              {plan.popular && (\n                <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gray-800 to-black text-white px-4 py-1 rounded-full text-sm font-black shadow-lg\">\n                  ‚≠ê PLUS POPULAIRE\n                </div>\n              )}\n\n              {/* Icon */}\n              <div className={`w-16 h-16 rounded-2xl ${\n                plan.highlight ? \"bg-white/20\" : \"bg-gradient-to-br from-gray-100 to-gray-200\"\n              } flex items-center justify-center mb-6`}>\n                <plan.icon className={`w-8 h-8 ${plan.highlight ? \"text-white\" : \"text-gray-800\"}`} />\n              </div>\n\n              {/* Plan Name */}\n              <h3 className={`text-2xl font-black mb-2 ${\n                plan.name === \"Elite\" \n                  ? \"text-gray-900\"\n                  : plan.highlight ? \"text-white\" : \"text-gray-900\"\n              }`}>\n                {plan.name}\n              </h3>\n\n              <p className={`text-sm mb-6 ${\n                plan.name === \"Elite\"\n                  ? \"text-gray-900\"\n                  : plan.highlight ? \"text-white/90\" : \"text-gray-600\"\n              }`}>\n                {plan.description}\n              </p>\n\n              {/* Price */}\n              <div className=\"mb-6\">\n                {plan.price === 0 ? (\n                  <div className={`text-5xl font-black ${plan.highlight ? \"text-white\" : \"text-gray-900\"}`}>\n                    Gratuit\n                  </div>\n                ) : (\n                  <>\n                    {/* Afficher r√©duction si code promo valide pour ce plan */}\n                    {isPromoValidForPlan(plan.name) && promoData?.type === \"plan_upgrade\" ? (\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <Sparkles className=\"w-5 h-5 text-green-500\" />\n                          <span className=\"text-sm font-bold text-green-600\">Code promo appliqu√© !</span>\n                        </div>\n                        <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-3xl font-bold line-through opacity-50 ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-600\"\n                              : plan.highlight ? \"text-white/60\" : \"text-gray-600\"\n                          }`}>\n                            {billingCycle === \"monthly\" ? plan.price.toFixed(2) : (plan.yearlyPrice / 12).toFixed(2)}‚Ç¨\n                          </span>\n                        </div>\n                        <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-5xl font-black ${\n                            plan.name === \"Elite\"\n                              ? \"text-green-600\"\n                              : plan.highlight ? \"text-white\" : \"text-green-600\"\n                          }`}>\n                            GRATUIT\n                          </span>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-5xl font-black ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-900\"\n                              : plan.highlight ? \"text-white\" : \"text-gray-900\"\n                          }`}>\n                            {billingCycle === \"monthly\" ? plan.price.toFixed(2) : (plan.yearlyPrice / 12).toFixed(2)}‚Ç¨\n                          </span>\n                          <span className={`text-lg ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-900\"\n                              : plan.highlight ? \"text-white/80\" : \"text-gray-600\"\n                          }`}>\n                            /mois\n                          </span>\n                        </div>\n                        {billingCycle === \"yearly\" && (\n                          <div className={`text-sm mt-1 ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-900\"\n                              : plan.highlight ? \"text-white/80\" : \"text-gray-600\"\n                          }`}>\n                            {plan.yearlyPrice}‚Ç¨ factur√© annuellement\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </>\n                )}\n              </div>\n\n              {/* CTA Button */}\n              <button\n                onClick={() => handleUpgrade(plan.name)}\n                disabled={plan.current || isUpgrading}\n                className={`w-full py-4 rounded-xl font-bold text-lg mb-8 transition-all ${\n                  plan.current\n                    ? \"bg-gray-200 text-gray-600 cursor-not-allowed\"\n                    : isPromoValidForPlan(plan.name) && promoData?.type === \"plan_upgrade\"\n                    ? \"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg hover:shadow-xl hover:scale-105\"\n                    : plan.highlight\n                    ? \"bg-white text-gray-800 hover:bg-gray-100 shadow-lg hover:shadow-xl hover:scale-105\"\n                    : \"bg-gradient-to-r from-gray-800 to-black text-white hover:shadow-lg hover:scale-105\"\n                }`}\n              >\n                {isUpgrading ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <div className=\"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                    Activation...\n                  </span>\n                ) : isPromoValidForPlan(plan.name) && promoData?.type === \"plan_upgrade\" ? (\n                  `üéâ Activer ${plan.name} GRATUIT`\n                ) : (\n                  plan.cta\n                )}\n              </button>\n\n              {/* Features */}\n              <div className=\"space-y-3\">\n                {plan.features.map((feature, i) => (\n                  <div key={i} className=\"flex items-start gap-3\">\n                    <Check className={`w-5 h-5 flex-shrink-0 mt-0.5 ${\n                      plan.highlight ? \"text-white\" : \"text-green-600\"\n                    }`} />\n                    <span className={`text-sm ${\n                      plan.name === \"Elite\"\n                        ? \"text-gray-900\"\n                        : plan.highlight ? \"text-white/90\" : \"text-gray-700\"\n                    }`}>\n                      {feature}\n                    </span>\n                  </div>\n                ))}\n                {plan.limitations?.map((limitation, i) => (\n                  <div key={i} className=\"flex items-start gap-3 opacity-60\">\n                    <span className=\"text-sm line-through\">{limitation}</span>\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          ))}\n        </div>\n\n        {/* Features Comparison */}\n        <motion.div\n          initial={{ opacity: 0, y: 40 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.5 }}\n          className=\"bg-white rounded-3xl shadow-xl p-8 md:p-12 mb-16\"\n        >\n          <h2 className=\"text-3xl font-black text-center mb-8\">Comparaison d√©taill√©e</h2>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-200\">\n                  <th className=\"text-left py-4 px-4 font-bold text-gray-900\">Fonctionnalit√©</th>\n                  <th className=\"text-center py-4 px-4 font-bold text-gray-600\">Free</th>\n                  <th className=\"text-center py-4 px-4 font-bold text-gray-800\">Pro</th>\n                  <th className=\"text-center py-4 px-4 font-bold text-gray-900\">Elite</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-100\">\n                {[\n                  { feature: \"Profils publics\", free: \"1\", pro: \"1\", elite: \"1\" },\n                  { feature: \"Liens\", free: \"1\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Comp√©titions\", free: \"1\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Sponsors\", free: \"0\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Galerie m√©dias\", free: \"2\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Analytics\", free: \"Basiques\", pro: \"7 jours\", elite: \"Illimit√©\" },\n                  { feature: \"Th√®mes\", free: \"1\", pro: \"1\", elite: \"1\" },\n                  { feature: \"Personnalisation CSS\", free: \"Non\", pro: \"Non\", elite: \"Oui\" },\n                  { feature: \"Export donn√©es\", free: \"Non\", pro: \"Non\", elite: \"Oui\" },\n                  { feature: \"Support\", free: \"Email\", pro: \"Email\", elite: \"Prioritaire\" },\n                ].map((row, i) => (\n                  <tr key={i} className=\"hover:bg-gray-50\">\n                    <td className=\"py-4 px-4 font-medium text-gray-900\">{row.feature}</td>\n                    <td className=\"py-4 px-4 text-center text-gray-600\">{row.free}</td>\n                    <td className=\"py-4 px-4 text-center text-gray-800 font-semibold\">{row.pro}</td>\n                    <td className=\"py-4 px-4 text-center text-gray-900 font-semibold\">{row.elite}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </motion.div>\n\n        {/* FAQ */}\n        <motion.div\n          initial={{ opacity: 0, y: 40 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.6 }}\n          className=\"max-w-3xl mx-auto\"\n        >\n          <h2 className=\"text-3xl font-black text-center mb-8\">Questions fr√©quentes</h2>\n          \n          <div className=\"space-y-4\">\n            {[\n              {\n                q: \"Puis-je changer de plan √† tout moment ?\",\n                a: \"Oui ! Tu peux upgrader ou downgrader ton plan √† tout moment. Les changements sont effectifs imm√©diatement.\",\n              },\n              {\n                q: \"Que se passe-t-il si j'annule mon abonnement ?\",\n                a: \"Tu conserves l'acc√®s aux fonctionnalit√©s premium jusqu'√† la fin de ta p√©riode de facturation. Ensuite, ton compte repasse en plan Free.\",\n              },\n              {\n                q: \"Les prix sont-ils TTC ?\",\n                a: \"Oui, tous les prix affich√©s incluent la TVA fran√ßaise (20%).\",\n              },\n              {\n                q: \"Puis-je obtenir un remboursement ?\",\n                a: \"Oui, nous offrons une garantie satisfait ou rembours√© de 14 jours sur tous les plans payants.\",\n              },\n            ].map((faq, i) => (\n              <details key={i} className=\"bg-white rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow group\">\n                <summary className=\"font-bold text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                  {faq.q}\n                  <span className=\"text-gray-800 group-open:rotate-180 transition-transform\">‚ñº</span>\n                </summary>\n                <p className=\"mt-4 text-gray-600 leading-relaxed\">{faq.a}</p>\n              </details>\n            ))}\n          </div>\n        </motion.div>\n\n        {/* Back to Dashboard */}\n        <div className=\"text-center mt-12\">\n          <Link\n            href=\"/dashboard\"\n            className=\"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 font-medium transition-colors\"\n          >\n            ‚Üê Retour au dashboard\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","size_bytes":20087},"analytics/track-click/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function POST(request: Request) {\n  try {\n    const { profileId, linkId, x, y, element, userAgent, country } = await request.json()\n\n    if (!profileId) {\n      return NextResponse.json({ error: \"Profile ID requis\" }, { status: 400 })\n    }\n\n    // R√©cup√©rer ou cr√©er l'entr√©e analytics du jour\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    let analytics = await prisma.analytics.findFirst({\n      where: {\n        profileId,\n        date: {\n          gte: today,\n          lt: new Date(today.getTime() + 24 * 60 * 60 * 1000)\n        }\n      }\n    })\n\n    if (!analytics) {\n      analytics = await prisma.analytics.create({\n        data: {\n          profileId,\n          date: today,\n          views: 0,\n          uniqueViews: 0,\n          linkClicks: 1,\n          device: userAgent?.includes('Mobile') ? 'mobile' : 'desktop',\n          country: country || null\n        }\n      })\n    } else {\n      analytics = await prisma.analytics.update({\n        where: { id: analytics.id },\n        data: {\n          linkClicks: { increment: 1 }\n        }\n      })\n    }\n\n    // Stocker les donn√©es de heatmap dans les stats du profil\n    if (x !== undefined && y !== undefined) {\n      const profile = await prisma.profile.findUnique({\n        where: { id: profileId },\n        select: { stats: true }\n      })\n\n      const stats = (profile?.stats as any) || {}\n      const heatmapData = stats.heatmap || []\n      \n      // Ajouter le nouveau point\n      heatmapData.push({\n        x,\n        y,\n        element,\n        timestamp: new Date().toISOString(),\n        linkId\n      })\n\n      // Garder seulement les 1000 derniers points\n      const recentData = heatmapData.slice(-1000)\n\n      await prisma.profile.update({\n        where: { id: profileId },\n        data: {\n          stats: {\n            ...stats,\n            heatmap: recentData\n          }\n        }\n      })\n    }\n\n    return NextResponse.json({ success: true, analyticsId: analytics.id })\n  } catch (error) {\n    console.error(\"Erreur tracking click:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors du tracking\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":2243},"(auth)/signup/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { signIn } from \"next-auth/react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { signupSchema, type SignupInput } from \"@/lib/validations\"\nimport { toast } from \"sonner\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport { ArrowRight, Sparkles } from \"lucide-react\"\nimport { PromoCodeField } from \"@/components/ui-pro/promo-code-field\"\n\nexport default function SignupPage() {\n  const router = useRouter()\n  const [isLoading, setIsLoading] = useState(false)\n  const [promoCode, setPromoCode] = useState(\"\")\n  const [promoData, setPromoData] = useState<any>(null)\n\n  const form = useForm<SignupInput>({\n    resolver: zodResolver(signupSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      name: \"\",\n      username: \"\",\n      sport: \"\"\n    }\n  })\n\n  async function onSubmit(values: SignupInput) {\n    setIsLoading(true)\n    \n    try {\n      // Si un code promo valide est saisi, utiliser l'API promo\n      const endpoint = promoData?.valid ? \"/api/promo-codes/apply\" : \"/api/auth/signup\"\n      \n      const res = await fetch(endpoint, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...values,\n          ...(promoData?.valid && { promoCode })\n        }),\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur lors de l'inscription\")\n      }\n\n      // Message de succ√®s personnalis√© selon le code promo\n      if (promoData?.valid) {\n        if (promoData.type === \"plan_upgrade\") {\n          toast.success(`üéâ Compte cr√©√© avec acc√®s ${promoData.plan} !`)\n        } else if (promoData.type === \"trial\") {\n          toast.success(`üéÅ Compte cr√©√© avec ${promoData.duration} jours gratuits ${promoData.plan} !`)\n        } else {\n          toast.success(\"Compte cr√©√© ! Redirection...\")\n        }\n      } else {\n        toast.success(\"Compte cr√©√© ! Redirection...\")\n      }\n      \n      router.push(\"/login\")\n    } catch (error: unknown) {\n      const message = error instanceof Error ? error.message : \"Une erreur est survenue\"\n      toast.error(message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex\">\n      {/* Left Panel - Form */}\n      <div className=\"flex-1 flex items-center justify-center p-8 bg-white relative overflow-y-auto\">\n        {/* Logo */}\n        <Link href=\"/\" className=\"absolute top-10 left-10 flex items-center gap-2\">\n          <div className=\"w-10 h-10 rounded-xl bg-gradient-hero\" />\n          <span className=\"font-black text-2xl bg-gradient-hero bg-clip-text text-transparent\">\n            Athlink\n          </span>\n        </Link>\n\n        {/* Form Container */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"w-full max-w-md my-20\"\n        >\n          <div className=\"mb-10\">\n            <h1 className=\"text-4xl md:text-5xl font-black bg-gradient-to-r from-primary-600 to-quaternary-600 bg-clip-text text-transparent mb-4\">\n              Cr√©e ton profil\n            </h1>\n            <p className=\"text-lg text-gray-600\">\n              Rejoins des milliers d&apos;athl√®tes\n            </p>\n          </div>\n\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"name\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Nom complet\n              </Label>\n              <Input \n                id=\"name\" \n                {...form.register(\"name\")} \n                placeholder=\"Thomas Dupont\"\n                className=\"h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.name && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.name.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"username\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Nom d&apos;utilisateur\n              </Label>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-gray-500 whitespace-nowrap font-medium\">athlink.app/</span>\n                <Input \n                  id=\"username\" \n                  {...form.register(\"username\")} \n                  placeholder=\"thomas-runner\"\n                  className=\"flex-1 h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-brand-blue-500 transition-colors\"\n                />\n              </div>\n              {form.formState.errors.username && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.username.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"sport\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Sport principal\n              </Label>\n              <Input \n                id=\"sport\" \n                {...form.register(\"sport\")} \n                placeholder=\"Course √† pied, Cyclisme, Natation, Triathlon, Ski...\"\n                className=\"h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.sport && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.sport.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"email\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Email\n              </Label>\n              <Input \n                id=\"email\" \n                type=\"email\"\n                {...form.register(\"email\")} \n                placeholder=\"thomas@example.com\"\n                className=\"h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.email && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.email.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"password\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Mot de passe\n              </Label>\n              <Input \n                id=\"password\" \n                type=\"password\"\n                {...form.register(\"password\")} \n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                className=\"h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              <p className=\"text-xs text-gray-500 mt-2\">Minimum 8 caract√®res</p>\n              {form.formState.errors.password && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.password.message}\n                </p>\n              )}\n            </div>\n\n            {/* Code Promo */}\n            <div>\n              <Label className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Code promo (optionnel)\n              </Label>\n              <PromoCodeField\n                value={promoCode}\n                onChange={setPromoCode}\n                onValidation={(isValid, data) => setPromoData(data)}\n              />\n            </div>\n\n            <Button \n              type=\"submit\" \n              disabled={isLoading}\n              className=\"w-full h-14 bg-gradient-hero hover:shadow-glow-blue text-gray-900 font-bold text-lg rounded-full transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-5 h-5 border-2 border-gray-900 border-t-transparent rounded-full animate-spin\" />\n                  Cr√©ation en cours...\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2\">\n                  Cr√©er mon profil\n                  <ArrowRight className=\"w-5 h-5\" />\n                </div>\n              )}\n            </Button>\n          </form>\n\n          {/* Google Sign Up - Affich√© seulement si configur√© */}\n          {process.env.NEXT_PUBLIC_GOOGLE_OAUTH_ENABLED === \"true\" && (\n            <>\n              {/* Separator */}\n              <div className=\"flex items-center gap-4 my-6\">\n                <div className=\"flex-1 h-px bg-gray-200\" />\n                <span className=\"text-sm text-gray-500 font-medium\">OU</span>\n                <div className=\"flex-1 h-px bg-gray-200\" />\n              </div>\n\n              {/* Google Sign Up */}\n              <button\n                onClick={() => signIn(\"google\", { callbackUrl: \"/dashboard\" })}\n                className=\"w-full h-14 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold text-base rounded-full transition-all hover:shadow-md flex items-center justify-center gap-3\"\n              >\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                  <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                  <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                  <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                </svg>\n                S'inscrire avec Google\n              </button>\n            </>\n          )}\n\n          <p className=\"text-center text-sm text-gray-600 mt-6\">\n            D√©j√† un compte ?{\" \"}\n            <Link href=\"/login\" className=\"text-primary-600 hover:text-primary-700 font-bold transition-colors\">\n              Se connecter\n            </Link>\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Right Panel - Visual */}\n      <div className=\"hidden lg:flex flex-1 relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-premium\" />\n        \n        {/* Animated shapes */}\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none opacity-20\">\n          <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              rotate: [0, -90, 0],\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"linear\"\n            }}\n            className=\"absolute bottom-1/4 left-1/4 w-96 h-96 bg-white rounded-full blur-3xl\"\n          />\n        </div>\n\n        {/* Content */}\n        <div className=\"relative z-10 flex items-center justify-center p-16 text-gray-900\">\n          <div className=\"max-w-lg\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className=\"w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center mb-8\"\n            >\n              <Sparkles className=\"w-10 h-10\" />\n            </motion.div>\n\n            <motion.h2\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.3 }}\n              className=\"text-5xl font-black mb-6 leading-tight\"\n            >\n              Rejoins la Communaut√©\n            </motion.h2>\n\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              className=\"text-xl opacity-90 leading-relaxed mb-8\"\n            >\n              Cr√©e ton profil en 2 minutes et commence √† partager tes performances avec le monde entier.\n            </motion.p>\n\n            {/* Features list */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.5 }}\n              className=\"space-y-4\"\n            >\n              {[\n                \"Profil personnalisable √† 100%\",\n                \"Liens illimit√©s\",\n                \"Analytics en temps r√©el\",\n                \"Gratuit pour toujours\"\n              ].map((feature, i) => (\n                <div key={i} className=\"flex items-center gap-3\">\n                  <div className=\"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                    </svg>\n                  </div>\n                  <span className=\"font-medium\">{feature}</span>\n                </div>\n              ))}\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":13756},"components/ui-pro/dashboard-stats.tsx":{"content":"\"use client\"\n\nimport { SportStatCard } from \"@/components/ui-pro/sport-stat-card\"\nimport { Activity, Users, Link2, Target } from \"lucide-react\"\n\ninterface DashboardStatsProps {\n  views: number\n  uniqueViews: number\n  linksCount: number\n  racesCount: number\n}\n\nexport function DashboardStats({\n  views,\n  uniqueViews,\n  linksCount,\n  racesCount\n}: DashboardStatsProps) {\n  return (\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-8 sm:mb-12\">\n      <SportStatCard\n        icon={Activity}\n        value={views}\n        label=\"Vues (7j)\"\n        trend={{ value: 12, label: \"vs semaine derni√®re\" }}\n        color=\"primary\"\n        delay={0}\n      />\n      <SportStatCard\n        icon={Users}\n        value={uniqueViews}\n        label=\"Visiteurs uniques\"\n        trend={{ value: 8, label: \"vs semaine derni√®re\" }}\n        color=\"accent\"\n        delay={0.1}\n      />\n      <SportStatCard\n        icon={Link2}\n        value={linksCount}\n        label=\"Liens actifs\"\n        color=\"success\"\n        delay={0.2}\n      />\n      <SportStatCard\n        icon={Target}\n        value={racesCount}\n        label=\"Courses √† venir\"\n        color=\"primary\"\n        delay={0.3}\n      />\n    </div>\n  )\n}\n","size_bytes":1209},"components/ui/label.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n","size_bytes":611},"[username]/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport Image from \"next/image\"\nimport { ModernProfileCard } from \"@/components/ui-pro/modern-profile-card\"\nimport { ShareProfileButton } from \"@/components/ui-pro/share-profile-button\"\nimport { ScrollToTop } from \"@/components/ui-pro/scroll-to-top\"\nimport { ViewTracker } from \"@/components/analytics/view-tracker\"\nimport { ClickTracker } from \"@/components/analytics/click-tracker\"\n\ninterface Props {\n  params: Promise<{ username: string }>\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true, bio: true, avatarUrl: true }\n  })\n\n  if (!profile) return {}\n\n  return {\n    title: `${profile.displayName} | Athlink`,\n    description: profile.bio || `Profil de ${profile.displayName}`,\n    openGraph: {\n      images: profile.avatarUrl ? [profile.avatarUrl] : []\n    }\n  }\n}\n\nexport default async function ProfilePage({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    include: {\n      links: { where: { isActive: true }, orderBy: { position: 'asc' } },\n      races: { \n        orderBy: { date: 'asc' }\n      },\n      sponsors: { orderBy: { position: 'asc' }, take: 4 },\n      media: { orderBy: { position: 'asc' }, take: 6 }\n    }\n  })\n\n  if (!profile || !profile.isPublic) {\n    notFound()\n  }\n\n  // Logique d'affichage du sport\n  let displaySport: string = profile.sport\n  \n  const stats = profile.stats as { originalSport?: string } | null\n  if (stats?.originalSport) {\n    displaySport = stats.originalSport\n  } else {\n    const enumSports = [\"RUNNING\", \"CYCLING\", \"TRIATHLON\", \"SWIMMING\", \"SKIING\", \"OTHER\"]\n    \n    if (enumSports.includes(profile.sport)) {\n      const sportLabels: Record<string, string> = {\n        RUNNING: \"Course √† pied\",\n        CYCLING: \"Cyclisme\", \n        TRIATHLON: \"Triathlon\",\n        SWIMMING: \"Natation\",\n        SKIING: \"Ski\",\n        OTHER: \"Autre\"\n      }\n      displaySport = sportLabels[profile.sport] || profile.sport\n    } else {\n      displaySport = profile.sport\n    }\n  }\n\n  // Track view\n  try {\n    await prisma.analytics.create({\n      data: {\n        profileId: profile.id,\n        views: 1,\n        uniqueViews: 1,\n        linkClicks: 0,\n      }\n    })\n  } catch (error) {\n    console.error(\"Analytics tracking error:\", error)\n  }\n\n\n  return (\n    <>\n      {/* Analytics Tracking */}\n      <ViewTracker profileId={profile.id} />\n      \n      {/* Floating Buttons */}\n      <ShareProfileButton username={username} displayName={profile.displayName} />\n      <ScrollToTop />\n\n      {/* Modern Profile Card Layout avec Click Tracking */}\n      <ClickTracker profileId={profile.id}>\n        <div className=\"min-h-screen relative overflow-hidden flex items-center justify-center py-8 px-4\">\n        \n        {/* Image de fond flout√©e - Photo de profil agrandie */}\n        <div className=\"absolute inset-0 overflow-hidden\">\n          {profile.avatarUrl ? (\n            <>\n              <Image\n                src={profile.avatarUrl}\n                alt=\"Background\"\n                fill\n                className=\"object-cover scale-110\"\n                style={{ filter: 'blur(80px)' }}\n                priority\n              />\n              {/* Overlay sombre pour contraste */}\n              <div className=\"absolute inset-0 bg-black/60\" />\n            </>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-gray-900 via-black to-gray-900\" />\n          )}\n        </div>\n\n        {/* Carte de profil centrale */}\n        <div className=\"relative z-10 w-full\">\n          <ModernProfileCard\n            displayName={profile.displayName}\n            bio={profile.bio}\n            location={profile.location}\n            avatarUrl={profile.avatarUrl}\n            sport={displaySport}\n            instagram={profile.instagram}\n            strava={profile.strava}\n            youtube={profile.youtube}\n            tiktok={profile.tiktok}\n            plan={profile.plan as \"FREE\" | \"PRO\" | \"ELITE\"}\n            links={profile.links}\n            races={profile.races}\n            sponsors={profile.sponsors}\n            media={profile.media}\n            username={username}\n            hasCoachingServices={profile.plan === \"COACH\" || profile.plan === \"ELITE\"}\n          />\n        </div>\n        </div>\n      </ClickTracker>\n    </>\n  )\n}\n\n","size_bytes":4534},"(dashboard)/dashboard/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@prisma/client\"\nimport Link from \"next/link\"\nimport { DashboardStats } from \"@/components/ui-pro/dashboard-stats\"\nimport { DashboardGoals } from \"@/components/ui-pro/dashboard-goals\"\nimport { RaceLogo } from \"@/components/ui-pro/race-logo\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { canUserAccessFeature, getUserFeatureLimit } from \"@/lib/features\"\n\nexport default async function DashboardPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    include: {\n      links: { where: { isActive: true }, orderBy: { position: 'asc' } },\n      races: { orderBy: { date: 'asc' } },\n      sponsors: true,\n      _count: {\n        select: { links: true, races: true, sponsors: true, media: true }\n      }\n    }\n  })\n\n  if (!profile) {\n    await prisma.profile.create({\n      data: {\n        userId: session.user.id,\n        username: session.user.email.split('@')[0],\n        displayName: session.user.name || \"Athl√®te\",\n        sport: \"RUNNING\",\n        plan: \"FREE\"\n      }\n    })\n    redirect(\"/dashboard\")\n  }\n\n  // Analytics des 7 derniers jours\n  const sevenDaysAgo = new Date()\n  sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7)\n  \n  const analytics = await prisma.analytics.aggregate({\n    where: {\n      profileId: profile.id,\n      date: { gte: sevenDaysAgo }\n    },\n    _sum: {\n      views: true,\n      uniqueViews: true,\n      linkClicks: true\n    }\n  })\n\n  const totalLinkClicks = await prisma.link.aggregate({\n    where: { profileId: profile.id },\n    _sum: { clicks: true }\n  })\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header avec gradient */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        {/* Shapes anim√©s */}\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                Bienvenue, {profile.displayName}\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                Voici tes performances cette semaine\n              </p>\n            </div>\n            <PlanBadge plan={profile.plan as \"FREE\" | \"PRO\" | \"ELITE\" | \"ATHLETE_PRO\" | \"COACH\"} size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Grid avec overlap */}\n      <div className=\"-mt-8 sm:-mt-12 lg:-mt-16\">\n        <DashboardStats\n          views={analytics._sum.views || 0}\n          uniqueViews={analytics._sum.uniqueViews || 0}\n          linksCount={profile._count.links}\n          racesCount={profile._count.races}\n        />\n      </div>\n\n      {/* All Races - Compact */}\n      {profile.races.length > 0 && (\n        <div className=\"bg-white rounded-xl sm:rounded-2xl shadow-standard p-4 sm:p-6 mb-6 sm:mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-xl font-bold flex items-center gap-2\">\n              <span>Mes Comp√©titions</span>\n            </h2>\n            <Link \n              href=\"/dashboard/races\"\n              className=\"text-sm text-yellow-600 hover:text-black font-medium\"\n            >\n              Voir toutes ‚Üí\n            </Link>\n          </div>\n          \n          {/* S√©parer les comp√©titions √† venir et pass√©es */}\n          {(() => {\n            const upcomingRaces = profile.races.filter(race => new Date(race.date) >= new Date()).slice(0, 2)\n            const pastRaces = profile.races.filter(race => new Date(race.date) < new Date()).slice(0, 2)\n            \n            return (\n              <div className=\"space-y-4\">\n                {/* Comp√©titions √† venir */}\n                {upcomingRaces.length > 0 && (\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-yellow-600 mb-2 uppercase tracking-wide\">\n                      √Ä venir ({upcomingRaces.length})\n                    </h3>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3\">\n                      {upcomingRaces.map((race) => {\n                        const daysUntil = Math.ceil((new Date(race.date).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n                        return (\n                          <div key={race.id} className=\"flex items-center justify-between p-3 sm:p-2 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-1.5 mb-0.5\">\n                                {(race as any).logoUrl && (\n            <RaceLogo \n              src={(race as any).logoUrl} \n              alt={`Logo ${race.name}`}\n              className=\"w-4 h-4 rounded-sm object-contain border shadow-sm p-0.5\"\n              variant=\"dark\"\n            />\n                                )}\n                                <h4 className=\"font-medium text-gray-900 text-xs truncate\">{race.name}</h4>\n                              </div>\n                              <div className=\"flex items-center gap-2 text-xs text-gray-600\">\n                                <span>{new Date(race.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}</span>\n                                {race.location && <span>‚Ä¢ {race.location}</span>}\n                                {race.distance && <span>‚Ä¢ {race.distance}</span>}\n                              </div>\n                            </div>\n                            <span className=\"px-1.5 py-0.5 bg-yellow-500 text-white rounded-full text-xs font-bold ml-2 whitespace-nowrap\">\n                              {daysUntil}j\n                            </span>\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n                )}\n                \n                {/* Comp√©titions pass√©es */}\n                {pastRaces.length > 0 && (\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-gray-500 mb-2 uppercase tracking-wide\">\n                      Pass√©es ({pastRaces.length})\n                    </h3>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3\">\n                      {pastRaces.map((race) => {\n                        const daysAgo = Math.ceil((Date.now() - new Date(race.date).getTime()) / (1000 * 60 * 60 * 24))\n                        return (\n                          <div key={race.id} className=\"flex items-center justify-between p-2 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-1.5 mb-0.5\">\n                                {(race as any).logoUrl && (\n            <RaceLogo \n              src={(race as any).logoUrl} \n              alt={`Logo ${race.name}`}\n              className=\"w-4 h-4 rounded-sm object-contain border shadow-sm p-0.5\"\n              variant=\"dark\"\n            />\n                                )}\n                                <h4 className=\"font-medium text-gray-900 text-xs truncate\">{race.name}</h4>\n                              </div>\n                              <div className=\"flex items-center gap-2 text-xs text-gray-600\">\n                                <span>{new Date(race.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}</span>\n                                {race.location && <span>‚Ä¢ {race.location}</span>}\n                                {race.distance && <span>‚Ä¢ {race.distance}</span>}\n                              </div>\n                            </div>\n                            {race.result ? (\n                              <span className=\"px-1.5 py-0.5 bg-green-500 text-white rounded-full text-xs font-bold ml-2 whitespace-nowrap\">\n                                {race.result}\n                              </span>\n                            ) : (\n                              <span className=\"px-1.5 py-0.5 bg-gray-400 text-white rounded-full text-xs font-bold ml-2 whitespace-nowrap\">\n                                {daysAgo}j\n                              </span>\n                            )}\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n                )}\n                \n                {/* Lien vers toutes les comp√©titions si il y en a plus */}\n                {profile.races.length > 4 && (\n                  <div className=\"text-center pt-2\">\n                    <Link \n                      href=\"/dashboard/races\"\n                      className=\"text-sm text-gray-500 hover:text-yellow-600 font-medium\"\n                    >\n                      +{profile.races.length - 4} autres comp√©titions ‚Üí\n                    </Link>\n                  </div>\n                )}\n              </div>\n            )\n          })()}\n        </div>\n      )}\n\n      {/* Objectifs */}\n      <DashboardGoals\n        views={analytics._sum.views || 0}\n        sponsorsCount={profile.sponsors.length}\n        linkClicks={analytics._sum.linkClicks || 0}\n      />\n\n\n      {/* Quick Actions Grid */}\n      <div className=\"grid md:grid-cols-3 gap-6\">\n        <Link href=\"/dashboard/profile\" className=\"group\">\n          <div className=\"relative h-full bg-white rounded-2xl shadow-standard hover:shadow-elevated p-8 transition-all duration-300 group-hover:-translate-y-1 overflow-hidden\">\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-ocean\" />\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n              <svg className=\"w-8 h-8 text-primary-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2 group-hover:text-primary-blue-600 transition-colors\">\n              √âditer Profil\n            </h3>\n            <p className=\"text-gray-600 text-sm\">\n              Mets √† jour tes informations personnelles\n            </p>\n          </div>\n        </Link>\n        \n        <Link href=\"/dashboard/races\" className=\"group\">\n          <div className=\"relative h-full bg-white rounded-2xl shadow-standard hover:shadow-elevated p-8 transition-all duration-300 group-hover:-translate-y-1 overflow-hidden\">\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-energy\" />\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n              <svg className=\"w-8 h-8 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2 group-hover:text-yellow-600 transition-colors\">\n              Mes Comp√©titions\n            </h3>\n            <p className=\"text-gray-600 text-sm\">\n              G√®re ton calendrier de comp√©titions\n            </p>\n          </div>\n        </Link>\n        \n        <Link href={`/${profile.username}`} target=\"_blank\" className=\"group\">\n          <div className=\"relative h-full bg-white rounded-2xl shadow-standard hover:shadow-elevated p-8 transition-all duration-300 group-hover:-translate-y-1 overflow-hidden\">\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-performance\" />\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n              <svg className=\"w-8 h-8 text-primary-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2 group-hover:text-primary-green-600 transition-colors\">\n              Voir Profil Public\n            </h3>\n            <p className=\"text-gray-600 text-sm\">\n              Aper√ßu de ton profil en ligne\n            </p>\n          </div>\n        </Link>\n      </div>\n\n      {/* Upgrade Banner si FREE */}\n      {profile.plan === \"FREE\" && (\n        <div className=\"relative bg-gradient-premium rounded-3xl shadow-elevated overflow-hidden\">\n          <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMzLjMxNCAwIDYgMi42ODYgNiA2cy0yLjY4NiA2LTYgNi02LTIuNjg2LTYtNiAyLjY4Ni02IDYtNnoiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLW9wYWNpdHk9Ii4xIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PC9zdmc+')] opacity-20\" />\n          \n          <div className=\"relative z-10 p-10\">\n            <div className=\"flex flex-col md:flex-row items-center justify-between gap-6\">\n              <div>\n                <h3 className=\"text-3xl font-black mb-2 bg-gradient-to-r from-accent-600 to-success-600 bg-clip-text text-transparent\">\n                  Passe en Athlete Pro\n                </h3>\n                <p className=\"text-lg text-gray-700 font-medium\">\n                  Sync Strava, analytics avanc√©es, domaine perso et plus encore\n                </p>\n              </div>\n              <Link \n                href=\"/dashboard/upgrade\"\n                className=\"inline-flex items-center gap-2 bg-white text-primary-purple-600 hover:bg-gray-100 px-8 py-4 rounded-full font-bold text-lg whitespace-nowrap shadow-floating hover:shadow-glow-purple transition-all hover:scale-105\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                </svg>\n                Upgrader l'abonnement\n              </Link>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Section Upgrader l'abonnement */}\n      <div className=\"mt-12 bg-gradient-to-br from-gray-50 to-white rounded-3xl shadow-lg border border-gray-200 overflow-hidden\">\n        <div className=\"p-8 sm:p-10\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl sm:text-4xl font-black text-gray-900 mb-3\">\n              Upgrader l'abonnement\n            </h2>\n            <p className=\"text-gray-600 text-lg\">\n              D√©bloque tout le potentiel de ton profil d'athl√®te\n            </p>\n          </div>\n\n          {/* Plans Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-6xl mx-auto\">\n            {/* Plan Free */}\n            <div className={`relative rounded-2xl p-6 transition-all ${\n              profile.plan === PlanType.FREE \n                ? \"bg-white border-2 border-yellow-500 shadow-lg\" \n                : \"bg-white border border-gray-200 shadow hover:shadow-lg\"\n            }`}>\n              {profile.plan === PlanType.FREE && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-white px-3 py-1 rounded-full text-xs font-bold\">\n                  Plan Actuel\n                </div>\n              )}\n              <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center mb-4\">\n                <svg className=\"w-6 h-6 text-gray-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                </svg>\n              </div>\n              <h3 className=\"text-2xl font-black mb-1 text-gray-900\">Free</h3>\n              <p className=\"text-sm mb-4 text-gray-600\">Parfait pour commencer</p>\n              <div className=\"mb-4\">\n                <div className=\"text-4xl font-black text-gray-900\">Gratuit</div>\n              </div>\n              <div className=\"space-y-2 text-sm mb-6\">\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">1 lien</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">0 sponsors</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Galerie 2 m√©dias</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Plan Pro */}\n            <div className={`relative rounded-2xl p-6 transition-all ${\n              profile.plan === PlanType.PRO \n                ? \"bg-gradient-to-br from-gray-800 to-black text-white border-2 border-yellow-500 shadow-lg\" \n                : \"bg-gradient-to-br from-gray-800 to-black text-white shadow-lg hover:shadow-xl\"\n            }`}>\n              {profile.plan === PlanType.PRO && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-gray-900 px-3 py-1 rounded-full text-xs font-bold\">\n                  Plan Actuel\n                </div>\n              )}\n              <div className=\"absolute top-4 right-4 bg-yellow-500 text-gray-900 px-2 py-1 rounded-full text-xs font-bold\">\n                Populaire\n              </div>\n              <div className=\"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center mb-4\">\n                <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-2xl font-black mb-1\">Pro</h3>\n              <p className=\"text-sm mb-4 text-white/90\">Pour les athl√®tes s√©rieux</p>\n              <div className=\"mb-4\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-4xl font-black\">9.90‚Ç¨</span>\n                  <span className=\"text-lg text-white/80\">/mois</span>\n                </div>\n              </div>\n              <div className=\"space-y-2 text-sm mb-6\">\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-white mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-white/90\">Liens illimit√©s</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-white mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-white/90\">Sponsors illimit√©s</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-white mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-white/90\">Analytics avanc√©es</span>\n                </div>\n              </div>\n              {profile.plan === PlanType.PRO ? (\n                <div className=\"w-full block py-3 rounded-xl font-bold text-center bg-white/20 text-white cursor-not-allowed\">\n                  Plan actuel\n                </div>\n              ) : (\n                <Link\n                  href=\"/dashboard/upgrade\"\n                  className=\"w-full block py-3 rounded-xl font-bold text-center bg-white text-gray-900 hover:bg-gray-100 transition-colors\"\n                >\n                  Passer Pro\n                </Link>\n              )}\n            </div>\n\n            {/* Plan Elite */}\n            <div className={`relative rounded-2xl p-6 transition-all ${\n              profile.plan === PlanType.ELITE \n                ? \"bg-white border-2 border-yellow-500 shadow-lg\" \n                : \"bg-white border border-gray-200 shadow hover:shadow-lg\"\n            }`}>\n              {profile.plan === PlanType.ELITE && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-gray-900 px-3 py-1 rounded-full text-xs font-bold\">\n                  Plan Actuel\n                </div>\n              )}\n              <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center mb-4\">\n                <svg className=\"w-6 h-6 text-gray-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-2xl font-black mb-1 text-gray-900\">Elite</h3>\n              <p className=\"text-sm mb-4 text-gray-600\">Pour les professionnels</p>\n              <div className=\"mb-4\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-4xl font-black text-gray-900\">25.90‚Ç¨</span>\n                  <span className=\"text-lg text-gray-600\">/mois</span>\n                </div>\n              </div>\n              <div className=\"space-y-2 text-sm mb-6\">\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Tout du plan Pro</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Analytics illimit√©es</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Export donn√©es (PDF)</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Service de coaching</span>\n                </div>\n              </div>\n              {profile.plan === PlanType.ELITE ? (\n                <div className=\"w-full block py-3 rounded-xl font-bold text-center bg-gray-100 text-gray-600 cursor-not-allowed\">\n                  Plan actuel\n                </div>\n              ) : (\n                <Link\n                  href=\"/dashboard/upgrade\"\n                  className=\"w-full block py-3 rounded-xl font-bold text-center bg-gradient-to-r from-gray-800 to-black text-white hover:from-gray-900 hover:to-gray-700 transition-all\"\n                >\n                  Passer Elite\n                </Link>\n              )}\n            </div>\n          </div>\n\n          {/* CTA Button */}\n          <div className=\"mt-8 text-center\">\n            <Link \n              href=\"/dashboard/upgrade\"\n              className=\"inline-flex items-center gap-3 bg-gradient-to-r from-gray-800 to-black text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all hover:scale-105 group\"\n            >\n              <svg className=\"w-5 h-5 group-hover:rotate-12 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n              Voir tous les plans et tarifs\n              <svg className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":27338},"components/ImageUpload.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { toast } from \"sonner\"\n\ntype ImageUploadProps = {\n  type: \"avatar\" | \"cover\"\n  currentUrl?: string | null\n  onUploadComplete: (url: string) => void\n}\n\nexport function ImageUpload({ type, currentUrl, onUploadComplete }: ImageUploadProps) {\n  const [uploading, setUploading] = useState(false)\n  const [preview, setPreview] = useState<string | null>(currentUrl || null)\n\n  // Update preview when currentUrl changes (e.g., after cropping)\n  useEffect(() => {\n    setPreview(currentUrl || null)\n  }, [currentUrl])\n\n  async function handleFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const file = e.target.files?.[0]\n    if (!file) return\n\n    // Validate file type\n    if (!file.type.startsWith(\"image/\")) {\n      toast.error(\"Le fichier doit √™tre une image\")\n      return\n    }\n\n    // Validate file size (30MB)\n    if (file.size > 30 * 1024 * 1024) {\n      toast.error(\"Fichier trop volumineux (max 30MB)\")\n      return\n    }\n\n    // Show preview\n    const reader = new FileReader()\n    reader.onloadend = () => {\n      setPreview(reader.result as string)\n    }\n    reader.readAsDataURL(file)\n\n    // Upload\n    setUploading(true)\n    try {\n      const formData = new FormData()\n      formData.append(\"file\", file)\n      formData.append(\"type\", type)\n\n      const res = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData\n      })\n\n      if (res.ok) {\n        const data = await res.json()\n        toast.success(\"Image upload√©e !\")\n        onUploadComplete(data.url)\n      } else {\n        const data = await res.json()\n        toast.error(data.error || \"Erreur lors de l'upload\")\n        setPreview(currentUrl || null)\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors de l'upload\")\n      setPreview(currentUrl || null)\n    } finally {\n      setUploading(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-4 flex flex-col items-center\">\n      {/* Preview */}\n      <div className={`relative ${type === \"avatar\" ? \"w-32 h-32\" : \"w-full h-48 max-w-md\"} rounded-lg overflow-hidden border-2 border-dashed border-gray-300`}>\n        {preview ? (\n          <img\n            src={preview}\n            alt={type}\n            className=\"w-full h-full object-cover\"\n          />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center bg-gray-100\">\n            <span className=\"text-4xl\">{type === \"avatar\" ? \"Avatar\" : \"Image\"}</span>\n          </div>\n        )}\n      </div>\n\n      {/* Upload button */}\n      <div className=\"w-full max-w-md\">\n        <input\n          type=\"file\"\n          id={`upload-${type}`}\n          accept=\"image/*\"\n          onChange={handleFileChange}\n          disabled={uploading}\n          className=\"hidden\"\n        />\n        <label htmlFor={`upload-${type}`}>\n          <Button\n            type=\"button\"\n            variant=\"outline\"\n            disabled={uploading}\n            className=\"w-full cursor-pointer\"\n            onClick={(e) => {\n              e.preventDefault()\n              document.getElementById(`upload-${type}`)?.click()\n            }}\n          >\n            {uploading ? \"Upload en cours...\" : `${preview ? \"Changer\" : \"Uploader\"} ${type === \"avatar\" ? \"l'avatar\" : \"la cover\"}`}\n          </Button>\n        </label>\n        <p className=\"text-xs text-muted-foreground mt-1 text-center\">\n          {type === \"avatar\" ? \"Image carr√©e recommand√©e\" : \"Image paysage 1200x400px recommand√©e\"} ‚Ä¢ Max 30MB\n        </p>\n      </div>\n    </div>\n  )\n}\n","size_bytes":3591},"promo-codes/apply/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\n// Codes promo pr√©d√©finis\nconst PROMO_CODES = {\n  \"ELITE\": {\n    type: \"plan_upgrade\",\n    plan: \"ATHLETE_PRO\",\n    duration: null,\n    discount: 0,\n    description: \"Acc√®s Pro complet\"\n  },\n  \"ATHLINK100\": {\n    type: \"trial\", \n    plan: \"ATHLETE_PRO\",\n    duration: 30,\n    discount: 0,\n    description: \"1 mois offert Pro\"\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { promoCode, userData } = await request.json()\n\n    if (!userData) {\n      return NextResponse.json({ error: \"Donn√©es utilisateur requises\" }, { status: 400 })\n    }\n\n    // V√©rifier si le code promo existe\n    const promo = PROMO_CODES[promoCode?.toUpperCase() as keyof typeof PROMO_CODES]\n    \n    let planType = \"FREE\" // Plan par d√©faut\n    let trialEndsAt = null\n\n    if (promo) {\n      planType = promo.plan\n      \n      if (promo.type === \"trial\" && promo.duration) {\n        // Calculer la date de fin d'essai\n        trialEndsAt = new Date()\n        trialEndsAt.setDate(trialEndsAt.getDate() + promo.duration)\n      }\n    }\n\n    // V√©rifier si l'email existe d√©j√†\n    const existingEmail = await prisma.user.findUnique({\n      where: { email: userData.email }\n    })\n\n    if (existingEmail) {\n      return NextResponse.json(\n        { error: \"Cet email est d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    // V√©rifier si le nom d'utilisateur existe d√©j√†\n    const existingUsername = await prisma.profile.findUnique({\n      where: { username: userData.username }\n    })\n\n    if (existingUsername) {\n      return NextResponse.json(\n        { error: \"Ce nom d'utilisateur est d√©j√† pris\" },\n        { status: 400 }\n      )\n    }\n\n    // Hacher le mot de passe\n    const bcrypt = await import(\"bcryptjs\")\n    const hashedPassword = await bcrypt.hash(userData.password, 12)\n\n    // Cr√©er l'utilisateur et le profil avec le code promo appliqu√©\n    const user = await prisma.user.create({\n      data: {\n        email: userData.email,\n        name: userData.name,\n        password: hashedPassword,\n        profile: {\n          create: {\n            username: userData.username,\n            displayName: userData.name,\n            sport: userData.sport as any, // Cast temporaire pour l'enum Sport\n            plan: planType as any, // Cast temporaire pour l'enum PlanType\n            stats: {\n              personalRecords: [],\n              achievements: [],\n              promoCodeUsed: promoCode?.toUpperCase() || null,\n              trialEndsAt: trialEndsAt?.toISOString() || null\n            }\n          }\n        }\n      },\n      include: {\n        profile: true\n      }\n    })\n\n    return NextResponse.json({\n      success: true,\n      user: {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        username: user.profile?.username,\n        plan: user.profile?.plan,\n        promoApplied: promoCode?.toUpperCase() || null,\n        trialEndsAt: trialEndsAt?.toISOString() || null\n      }\n    }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"Erreur application code promo:\", error)\n    \n    if (error.code === \"P2002\") {\n      return NextResponse.json(\n        { error: \"Email ou nom d'utilisateur d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json(\n      { error: \"Erreur lors de l'inscription\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":3440},"components/ui-pro/race-countdown.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Calendar, MapPin, Award } from \"lucide-react\"\nimport { daysUntil } from \"@/lib/utils\"\nimport confetti from \"canvas-confetti\"\n\ninterface RaceCountdownProps {\n  raceName: string\n  date: Date\n  location?: string\n  distance?: string\n  onRaceDay?: () => void\n}\n\nexport function RaceCountdown({\n  raceName,\n  date,\n  location,\n  distance,\n  onRaceDay\n}: RaceCountdownProps) {\n  const [days, setDays] = useState(daysUntil(date))\n  const [hours, setHours] = useState(0)\n  const [minutes, setMinutes] = useState(0)\n  const [isRaceDay, setIsRaceDay] = useState(false)\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const now = new Date()\n      const diff = date.getTime() - now.getTime()\n      \n      if (diff <= 0) {\n        setIsRaceDay(true)\n        if (onRaceDay) onRaceDay()\n        // Confetti pour race day!\n        confetti({\n          particleCount: 100,\n          spread: 70,\n          origin: { y: 0.6 }\n        })\n        clearInterval(interval)\n        return\n      }\n\n      setDays(Math.floor(diff / (1000 * 60 * 60 * 24)))\n      setHours(Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)))\n      setMinutes(Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)))\n    }, 1000)\n\n    return () => clearInterval(interval)\n  }, [date, onRaceDay])\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.5 }}\n    >\n      <Card className=\"relative overflow-hidden border-0 shadow-xl\">\n        {/* Animated gradient background */}\n        <motion.div\n          className=\"absolute inset-0 bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600\"\n          animate={{\n            backgroundPosition: [\"0% 0%\", \"100% 100%\"],\n          }}\n          transition={{\n            duration: 10,\n            repeat: Infinity,\n            repeatType: \"reverse\"\n          }}\n        />\n\n        <CardContent className=\"relative p-6 text-gray-900\">\n          <AnimatePresence mode=\"wait\">\n            {isRaceDay ? (\n              <motion.div\n                key=\"raceday\"\n                initial={{ scale: 0, rotate: -180 }}\n                animate={{ scale: 1, rotate: 0 }}\n                exit={{ scale: 0, rotate: 180 }}\n                className=\"text-center py-8\"\n              >\n                <motion.div\n                  animate={{\n                    scale: [1, 1.2, 1],\n                    rotate: [0, 5, -5, 0]\n                  }}\n                  transition={{\n                    duration: 2,\n                    repeat: Infinity,\n                    ease: \"easeInOut\"\n                  }}\n                  className=\"text-6xl mb-4\"\n                >\n                  Comp√©tition\n                </motion.div>\n                <h3 className=\"text-3xl font-bold mb-2\">C&apos;EST AUJOURD&apos;HUI !</h3>\n                <p className=\"text-xl opacity-90\">{raceName}</p>\n                <motion.p\n                  animate={{ opacity: [0.5, 1, 0.5] }}\n                  transition={{ duration: 1.5, repeat: Infinity }}\n                  className=\"mt-2\"\n                >\n                  Bonne course ! üí™\n                </motion.p>\n              </motion.div>\n            ) : (\n              <motion.div key=\"countdown\" className=\"space-y-6\">\n                {/* Race Info */}\n                <div>\n                  <motion.p \n                    className=\"text-sm opacity-80 mb-1\"\n                    initial={{ opacity: 0 }}\n                    animate={{ opacity: 0.8 }}\n                    transition={{ delay: 0.2 }}\n                  >\n                    Prochaine course\n                  </motion.p>\n                  <motion.h3 \n                    className=\"text-2xl font-bold mb-2\"\n                    initial={{ y: 20, opacity: 0 }}\n                    animate={{ y: 0, opacity: 1 }}\n                    transition={{ delay: 0.3 }}\n                  >\n                    {raceName}\n                  </motion.h3>\n                  \n                  <div className=\"flex flex-wrap gap-3 text-sm\">\n                    {location && (\n                      <motion.div \n                        className=\"flex items-center gap-1 opacity-90\"\n                        initial={{ x: -20, opacity: 0 }}\n                        animate={{ x: 0, opacity: 0.9 }}\n                        transition={{ delay: 0.4 }}\n                      >\n                        <MapPin className=\"w-4 h-4\" />\n                        {location}\n                      </motion.div>\n                    )}\n                    {distance && (\n                      <motion.div \n                        className=\"flex items-center gap-1 opacity-90\"\n                        initial={{ x: -20, opacity: 0 }}\n                        animate={{ x: 0, opacity: 0.9 }}\n                        transition={{ delay: 0.5 }}\n                      >\n                        <Award className=\"w-4 h-4\" />\n                        {distance}\n                      </motion.div>\n                    )}\n                    <motion.div \n                      className=\"flex items-center gap-1 opacity-90\"\n                      initial={{ x: -20, opacity: 0 }}\n                      animate={{ x: 0, opacity: 0.9 }}\n                      transition={{ delay: 0.6 }}\n                    >\n                      <Calendar className=\"w-4 h-4\" />\n                      {date.toLocaleDateString('fr-FR', { \n                        day: 'numeric', \n                        month: 'long',\n                        year: 'numeric'\n                      })}\n                    </motion.div>\n                  </div>\n                </div>\n\n                {/* Countdown Display */}\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <CountdownUnit value={days} label=\"Jours\" delay={0.7} />\n                  <CountdownUnit value={hours} label=\"Heures\" delay={0.8} />\n                  <CountdownUnit value={minutes} label=\"Min\" delay={0.9} />\n                </div>\n\n                {/* Progress bar */}\n                <motion.div\n                  initial={{ scaleX: 0 }}\n                  animate={{ scaleX: 1 }}\n                  transition={{ duration: 1, delay: 1 }}\n                  className=\"h-2 bg-white/20 rounded-full overflow-hidden\"\n                  style={{ originX: 0 }}\n                >\n                  <motion.div\n                    className=\"h-full bg-white rounded-full\"\n                    initial={{ x: \"-100%\" }}\n                    animate={{ x: \"0%\" }}\n                    transition={{ duration: 1.5, delay: 1.2 }}\n                  />\n                </motion.div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </CardContent>\n      </Card>\n    </motion.div>\n  )\n}\n\nfunction CountdownUnit({ \n  value, \n  label, \n  delay \n}: { \n  value: number\n  label: string\n  delay: number \n}) {\n  return (\n    <motion.div\n      initial={{ scale: 0, opacity: 0 }}\n      animate={{ scale: 1, opacity: 1 }}\n      transition={{ \n        type: \"spring\",\n        stiffness: 200,\n        damping: 15,\n        delay \n      }}\n      className=\"text-center\"\n    >\n      <motion.div\n        animate={{\n          scale: [1, 1.1, 1],\n        }}\n        transition={{\n          duration: 2,\n          repeat: Infinity,\n          ease: \"easeInOut\",\n          delay: delay + 1\n        }}\n        className=\"bg-white/20 backdrop-blur-sm rounded-2xl p-4 mb-2\"\n      >\n        <AnimatePresence mode=\"wait\">\n          <motion.span\n            key={value}\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            exit={{ y: -20, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"text-4xl font-bold block\"\n          >\n            {value.toString().padStart(2, '0')}\n          </motion.span>\n        </AnimatePresence>\n      </motion.div>\n      <p className=\"text-sm opacity-80 font-medium\">{label}</p>\n    </motion.div>\n  )\n}\n","size_bytes":8118},"components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n","size_bytes":2142},"lib/auth.ts":{"content":"import NextAuth from \"next-auth\"\nimport { PrismaAdapter } from \"@auth/prisma-adapter\"\nimport Credentials from \"next-auth/providers/credentials\"\nimport Google from \"next-auth/providers/google\"\nimport { prisma } from \"@/lib/db\"\nimport { compare } from \"bcryptjs\"\n\nexport const { handlers, auth, signIn, signOut } = NextAuth({\n  adapter: PrismaAdapter(prisma),\n  trustHost: true,\n  session: {\n    strategy: \"jwt\",\n  },\n  pages: {\n    signIn: \"/login\",\n  },\n  debug: process.env.NODE_ENV === \"development\",\n  providers: [\n    Google({\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n      authorization: {\n        params: {\n          prompt: \"consent\",\n          access_type: \"offline\",\n          response_type: \"code\"\n        }\n      }\n    }),\n    Credentials({\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" }\n      },\n      async authorize(credentials) {\n        if (!credentials?.email || !credentials?.password) {\n          return null\n        }\n\n        const user = await prisma.user.findUnique({\n          where: { email: credentials.email as string }\n        })\n\n        if (!user || !user.password) {\n          return null\n        }\n\n        const isPasswordValid = await compare(\n          credentials.password as string,\n          user.password\n        )\n\n        if (!isPasswordValid) {\n          return null\n        }\n\n            return {\n              id: user.id,\n              email: user.email,\n              name: user.name || \"\",\n            }\n      }\n    })\n  ],\n  callbacks: {\n    async signIn({ user, account, profile }) {\n      // Si connexion avec Google\n      if (account?.provider === \"google\") {\n        try {\n          // V√©rifier si l'utilisateur existe d√©j√†\n          const existingUser = await prisma.user.findUnique({\n            where: { email: user.email! },\n            include: { profile: true }\n          })\n\n          // Si l'utilisateur existe mais n'a pas de profil, le cr√©er\n          if (existingUser && !existingUser.profile) {\n            // G√©n√©rer un username unique √† partir de l'email\n            const baseUsername = user.email!.split('@')[0].toLowerCase().replace(/[^a-z0-9]/g, '')\n            let username = baseUsername\n            let counter = 1\n            \n            // V√©rifier l'unicit√© du username\n            while (await prisma.profile.findUnique({ where: { username } })) {\n              username = `${baseUsername}${counter}`\n              counter++\n            }\n\n            await prisma.profile.create({\n              data: {\n                userId: existingUser.id,\n                username: username,\n                displayName: user.name || user.email!.split('@')[0],\n                sport: \"RUNNING\", // Sport par d√©faut\n                plan: \"FREE\",\n                isPublic: true\n              }\n            })\n          }\n          \n          return true\n        } catch (error) {\n          console.error(\"Erreur lors de la cr√©ation du profil Google:\", error)\n          return false\n        }\n      }\n      \n      return true\n    },\n    async session({ token, session }) {\n      if (token && session.user) {\n        session.user.id = token.id as string\n        session.user.name = (token.name as string | null) || \"\"\n        session.user.email = token.email as string\n      }\n      return session\n    },\n    async jwt({ token, user }) {\n      if (user) {\n        token.id = user.id\n        token.email = user.email\n        token.name = user.name\n      }\n      return token\n    }\n  }\n})\n","size_bytes":3605},"components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { CheckIcon, ChevronDownIcon, ChevronUpIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Select({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Root>) {\n  return <SelectPrimitive.Root data-slot=\"select\" {...props} />\n}\n\nfunction SelectGroup({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Group>) {\n  return <SelectPrimitive.Group data-slot=\"select-group\" {...props} />\n}\n\nfunction SelectValue({\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Value>) {\n  return <SelectPrimitive.Value data-slot=\"select-value\" {...props} />\n}\n\nfunction SelectTrigger({\n  className,\n  size = \"default\",\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {\n  size?: \"sm\" | \"default\"\n}) {\n  return (\n    <SelectPrimitive.Trigger\n      data-slot=\"select-trigger\"\n      data-size={size}\n      className={cn(\n        \"border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <SelectPrimitive.Icon asChild>\n        <ChevronDownIcon className=\"size-4 opacity-50\" />\n      </SelectPrimitive.Icon>\n    </SelectPrimitive.Trigger>\n  )\n}\n\nfunction SelectContent({\n  className,\n  children,\n  position = \"popper\",\n  align = \"center\",\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Content>) {\n  return (\n    <SelectPrimitive.Portal>\n      <SelectPrimitive.Content\n        data-slot=\"select-content\"\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md\",\n          position === \"popper\" &&\n            \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n          className\n        )}\n        position={position}\n        align={align}\n        {...props}\n      >\n        <SelectScrollUpButton />\n        <SelectPrimitive.Viewport\n          className={cn(\n            \"p-1\",\n            position === \"popper\" &&\n              \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1\"\n          )}\n        >\n          {children}\n        </SelectPrimitive.Viewport>\n        <SelectScrollDownButton />\n      </SelectPrimitive.Content>\n    </SelectPrimitive.Portal>\n  )\n}\n\nfunction SelectLabel({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Label>) {\n  return (\n    <SelectPrimitive.Label\n      data-slot=\"select-label\"\n      className={cn(\"text-muted-foreground px-2 py-1.5 text-xs\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Item>) {\n  return (\n    <SelectPrimitive.Item\n      data-slot=\"select-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2\",\n        className\n      )}\n      {...props}\n    >\n      <span className=\"absolute right-2 flex size-3.5 items-center justify-center\">\n        <SelectPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </SelectPrimitive.ItemIndicator>\n      </span>\n      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n    </SelectPrimitive.Item>\n  )\n}\n\nfunction SelectSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.Separator>) {\n  return (\n    <SelectPrimitive.Separator\n      data-slot=\"select-separator\"\n      className={cn(\"bg-border pointer-events-none -mx-1 my-1 h-px\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SelectScrollUpButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {\n  return (\n    <SelectPrimitive.ScrollUpButton\n      data-slot=\"select-scroll-up-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronUpIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollUpButton>\n  )\n}\n\nfunction SelectScrollDownButton({\n  className,\n  ...props\n}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {\n  return (\n    <SelectPrimitive.ScrollDownButton\n      data-slot=\"select-scroll-down-button\"\n      className={cn(\n        \"flex cursor-default items-center justify-center py-1\",\n        className\n      )}\n      {...props}\n    >\n      <ChevronDownIcon className=\"size-4\" />\n    </SelectPrimitive.ScrollDownButton>\n  )\n}\n\nexport {\n  Select,\n  SelectContent,\n  SelectGroup,\n  SelectItem,\n  SelectLabel,\n  SelectScrollDownButton,\n  SelectScrollUpButton,\n  SelectSeparator,\n  SelectTrigger,\n  SelectValue,\n}\n","size_bytes":6295},"(dashboard)/dashboard/coaching/training-plans/training-plans-client.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Plus, Edit3, Trash2, Eye, Users, Clock, Euro, Calendar, Target, TrendingUp, List, Upload, FileText, X } from \"lucide-react\"\nimport { SessionsManager } from \"./sessions-manager\"\n\ninterface TrainingPlan {\n  id: string\n  title: string\n  description: string\n  price: number\n  duration: number\n  difficulty: \"DEBUTANT\" | \"INTERMEDIAIRE\" | \"AVANCE\"\n  category: string\n  isActive: boolean\n  pdfFileUrl?: string // URL du fichier PDF\n  pdfFileName?: string // Nom du fichier PDF\n  createdAt: string\n  _count: {\n    sessions: number\n    subscribers: number\n  }\n}\n\ninterface TrainingPlansClientProps {\n  initialPlans: TrainingPlan[]\n  profileId: string\n}\n\nexport function TrainingPlansClient({ initialPlans, profileId }: TrainingPlansClientProps) {\n  const [plans, setPlans] = useState<TrainingPlan[]>(initialPlans)\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [editingPlan, setEditingPlan] = useState<TrainingPlan | null>(null)\n  const [selectedPlan, setSelectedPlan] = useState<TrainingPlan | null>(null)\n  const [showSessionsManager, setShowSessionsManager] = useState(false)\n  const [selectedPlanForSessions, setSelectedPlanForSessions] = useState<TrainingPlan | null>(null)\n\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    price: 0,\n    duration: 4,\n    difficulty: \"DEBUTANT\" as const,\n    category: \"\",\n    isActive: true,\n    pdfFile: null as File | null,\n    pdfFileName: \"\"\n  })\n\n  const categories = [\n    \"Cardio\", \"Musculation\", \"Yoga\", \"Pilates\", \"CrossFit\", \"Running\", \n    \"Cycling\", \"Swimming\", \"Boxing\", \"Dance\", \"HIIT\", \"Stretching\"\n  ]\n\n  const difficultyLabels = {\n    DEBUTANT: \"D√©butant\",\n    INTERMEDIAIRE: \"Interm√©diaire\", \n    AVANCE: \"Avanc√©\"\n  }\n\n  const difficultyColors = {\n    DEBUTANT: \"bg-green-100 text-green-800\",\n    INTERMEDIAIRE: \"bg-yellow-100 text-yellow-800\",\n    AVANCE: \"bg-red-100 text-red-800\"\n  }\n\n  const handleCreatePlan = async () => {\n    try {\n      // D'abord uploader le PDF si il y en a un\n      let pdfFileUrl = null\n      let pdfFileName = null\n      if (formData.pdfFile) {\n        const uploadFormData = new FormData()\n        uploadFormData.append('pdfFile', formData.pdfFile)\n        uploadFormData.append('planId', `temp_${Date.now()}`) // ID temporaire\n\n        const uploadResponse = await fetch(\"/api/coaching/upload-pdf\", {\n          method: \"POST\",\n          body: uploadFormData\n        })\n\n        if (!uploadResponse.ok) {\n          const errorData = await uploadResponse.json()\n          alert(`Erreur upload PDF: ${errorData.error}`)\n          return\n        }\n\n        const uploadResult = await uploadResponse.json()\n        pdfFileUrl = uploadResult.fileUrl\n        pdfFileName = uploadResult.originalName\n      }\n\n      // Ensuite cr√©er le plan\n      const formDataToSend = new FormData()\n      \n      // Ajouter tous les champs du formulaire\n      formDataToSend.append('title', formData.title)\n      formDataToSend.append('description', formData.description)\n      formDataToSend.append('price', formData.price.toString())\n      formDataToSend.append('duration', formData.duration.toString())\n      formDataToSend.append('difficulty', formData.difficulty)\n      formDataToSend.append('category', formData.category)\n      formDataToSend.append('isActive', formData.isActive.toString())\n      formDataToSend.append('profileId', profileId)\n      \n      // Ajouter les informations du fichier PDF si upload√©\n      if (pdfFileUrl && pdfFileName) {\n        formDataToSend.append('pdfFileUrl', pdfFileUrl)\n        formDataToSend.append('pdfFileName', pdfFileName)\n      }\n\n      const response = await fetch(\"/api/coaching/training-plans\", {\n        method: \"POST\",\n        body: formDataToSend\n      })\n\n      if (response.ok) {\n        const newPlan = await response.json()\n        setPlans([newPlan, ...plans])\n        setShowCreateForm(false)\n        resetForm()\n        alert(\"Plan d'entra√Ænement cr√©√© avec succ√®s !\")\n      } else {\n        const errorData = await response.json()\n        alert(`Erreur cr√©ation plan: ${errorData.error}`)\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la cr√©ation:\", error)\n      alert(\"Une erreur est survenue lors de la cr√©ation du plan\")\n    }\n  }\n\n  const handleUpdatePlan = async () => {\n    if (!editingPlan) return\n\n    try {\n      const formDataToSend = new FormData()\n      \n      // Ajouter tous les champs du formulaire\n      formDataToSend.append('title', formData.title)\n      formDataToSend.append('description', formData.description)\n      formDataToSend.append('price', formData.price.toString())\n      formDataToSend.append('duration', formData.duration.toString())\n      formDataToSend.append('difficulty', formData.difficulty)\n      formDataToSend.append('category', formData.category)\n      formDataToSend.append('isActive', formData.isActive.toString())\n      \n      // Ajouter le fichier PDF s'il existe (nouveau fichier)\n      if (formData.pdfFile) {\n        formDataToSend.append('pdfFile', formData.pdfFile)\n      }\n      // Si pas de nouveau fichier mais qu'il y avait un nom de fichier existant\n      else if (formData.pdfFileName) {\n        formDataToSend.append('pdfFileName', formData.pdfFileName)\n      }\n\n      const response = await fetch(`/api/coaching/training-plans/${editingPlan.id}`, {\n        method: \"PUT\",\n        body: formDataToSend\n      })\n\n      if (response.ok) {\n        const updatedPlan = await response.json()\n        setPlans(plans.map(plan => plan.id === editingPlan.id ? updatedPlan : plan))\n        setEditingPlan(null)\n        resetForm()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la mise √† jour:\", error)\n    }\n  }\n\n  const handleDeletePlan = async (planId: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer ce plan ?\")) return\n\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${planId}`, {\n        method: \"DELETE\"\n      })\n\n      if (response.ok) {\n        setPlans(plans.filter(plan => plan.id !== planId))\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression:\", error)\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      description: \"\",\n      price: 0,\n      duration: 4,\n      difficulty: \"DEBUTANT\",\n      category: \"\",\n      isActive: true,\n      pdfFile: null,\n      pdfFileName: \"\"\n    })\n  }\n\n  const openEditForm = (plan: TrainingPlan) => {\n    setFormData({\n      title: plan.title,\n      description: plan.description,\n      price: plan.price,\n      duration: plan.duration,\n      difficulty: plan.difficulty,\n      category: plan.category,\n      isActive: plan.isActive,\n      pdfFile: null, // On ne charge pas le fichier existant lors de l'√©dition\n      pdfFileName: plan.pdfFileName || \"\"\n    })\n    setEditingPlan(plan)\n    setShowCreateForm(true)\n  }\n\n  const openSessionsManager = (plan: TrainingPlan) => {\n    setSelectedPlanForSessions(plan)\n    setShowSessionsManager(true)\n  }\n\n  const handleSessionsChange = () => {\n    // Rafra√Æchir les donn√©es du plan pour mettre √† jour le compteur de sessions\n    const updatedPlans = plans.map(plan => {\n      if (plan.id === selectedPlanForSessions?.id) {\n        return { ...plan, _count: { ...plan._count, sessions: plan._count.sessions + 1 } }\n      }\n      return plan\n    })\n    setPlans(updatedPlans)\n  }\n\n  if (showSessionsManager && selectedPlanForSessions) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={() => setShowSessionsManager(false)}\n            className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </button>\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Sessions - {selectedPlanForSessions.title}</h2>\n            <p className=\"text-gray-600\">G√®re les s√©ances de ce plan d'entra√Ænement</p>\n          </div>\n        </div>\n        \n        <SessionsManager \n          trainingPlanId={selectedPlanForSessions.id}\n          planDuration={selectedPlanForSessions.duration}\n          onSessionsChange={handleSessionsChange}\n        />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Actions Bar */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Mes Plans d'Entra√Ænement</h2>\n          <p className=\"text-gray-600\">G√®re tes programmes et suivi tes performances</p>\n        </div>\n        <button\n          onClick={() => {\n            resetForm()\n            setEditingPlan(null)\n            setShowCreateForm(true)\n          }}\n          className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-3 rounded-full font-bold shadow-elevated transition-all hover:scale-105\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Cr√©er un Plan\n        </button>\n      </div>\n\n      {/* Plans Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {plans.map((plan) => (\n          <motion.div\n            key={plan.id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 border border-gray-200 transition-all hover:-translate-y-1\"\n          >\n            {/* Header */}\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <h3 className=\"text-xl font-bold text-gray-900 mb-1\">{plan.title}</h3>\n                <span className={`inline-block px-3 py-1 rounded-full text-xs font-medium ${difficultyColors[plan.difficulty]}`}>\n                  {difficultyLabels[plan.difficulty]}\n                </span>\n              </div>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => openEditForm(plan)}\n                  className=\"p-2 text-gray-400 hover:text-primary-blue-600 transition-colors\"\n                >\n                  <Edit3 className=\"w-4 h-4\" />\n                </button>\n                <button\n                  onClick={() => handleDeletePlan(plan.id)}\n                  className=\"p-2 text-gray-400 hover:text-red-600 transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Description */}\n            <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{plan.description}</p>\n\n            {/* Stats */}\n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <Euro className=\"w-4 h-4 text-primary-green-600\" />\n                <span className=\"text-sm text-gray-600\">{plan.price}‚Ç¨</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"w-4 h-4 text-primary-blue-600\" />\n                <span className=\"text-sm text-gray-600\">{plan.duration} semaines</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Target className=\"w-4 h-4 text-yellow-600\" />\n                <span className=\"text-sm text-gray-600\">{plan._count.sessions} s√©ances</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Users className=\"w-4 h-4 text-purple-600\" />\n                <span className=\"text-sm text-gray-600\">{plan._count.subscribers} abonn√©s</span>\n              </div>\n            </div>\n\n            {/* Category */}\n            <div className=\"mb-4\">\n              <span className=\"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\">\n                {plan.category}\n              </span>\n            </div>\n\n            {/* Status */}\n            <div className=\"flex items-center justify-between\">\n              <span className={`inline-block px-3 py-1 rounded-full text-xs font-medium ${\n                plan.isActive ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-800\"\n              }`}>\n                {plan.isActive ? \"Actif\" : \"Inactif\"}\n              </span>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => openSessionsManager(plan)}\n                  className=\"flex items-center gap-1 text-yellow-600 hover:text-yellow-700 text-sm font-medium\"\n                >\n                  <List className=\"w-4 h-4\" />\n                  Sessions\n                </button>\n                <button\n                  onClick={() => setSelectedPlan(plan)}\n                  className=\"flex items-center gap-1 text-primary-blue-600 hover:text-primary-blue-700 text-sm font-medium\"\n                >\n                  <Eye className=\"w-4 h-4\" />\n                  D√©tails\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Empty State */}\n      {plans.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center mx-auto mb-6\">\n            <Target className=\"w-12 h-12 text-primary-blue-600\" />\n          </div>\n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Aucun plan cr√©√©</h3>\n          <p className=\"text-gray-600 mb-6\">Commence par cr√©er ton premier plan d'entra√Ænement</p>\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-3 rounded-full font-bold shadow-elevated transition-all hover:scale-105\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Cr√©er mon premier plan\n          </button>\n        </div>\n      )}\n\n      {/* Create/Edit Form Modal */}\n      <AnimatePresence>\n        {showCreateForm && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => {\n              setShowCreateForm(false)\n              setEditingPlan(null)\n              resetForm()\n            }}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">\n                {editingPlan ? \"Modifier le plan\" : \"Cr√©er un nouveau plan\"}\n              </h3>\n\n              <div className=\"space-y-6\">\n                {/* Title */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Nom du plan *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"Ex: Programme Running D√©butant\"\n                  />\n                </div>\n\n                {/* Description */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description *\n                  </label>\n                  <textarea\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    rows={4}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"D√©cris ton programme d'entra√Ænement...\"\n                  />\n                </div>\n\n                {/* Price and Duration */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Prix (‚Ç¨) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      value={formData.price}\n                      onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) || 0 })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Dur√©e (semaines) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      value={formData.duration}\n                      onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) || 1 })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                {/* Difficulty and Category */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Niveau *\n                    </label>\n                    <select\n                      value={formData.difficulty}\n                      onChange={(e) => setFormData({ ...formData, difficulty: e.target.value as any })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"DEBUTANT\">D√©butant</option>\n                      <option value=\"INTERMEDIAIRE\">Interm√©diaire</option>\n                      <option value=\"AVANCE\">Avanc√©</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Cat√©gorie *\n                    </label>\n                    <select\n                      value={formData.category}\n                      onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"\">S√©lectionner une cat√©gorie</option>\n                      {categories.map(cat => (\n                        <option key={cat} value={cat}>{cat}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                {/* PDF Upload Section */}\n                <div className=\"flex justify-center\">\n                  <div className=\"w-full max-w-md\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-3 text-center\">\n                      Ajouter un PDF (optionnel)\n                    </label>\n                    <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-blue-400 transition-colors\">\n                      {formData.pdfFile ? (\n                        <div className=\"space-y-3\">\n                          <div className=\"flex items-center justify-center gap-3 p-3 bg-primary-blue-50 rounded-lg\">\n                            <FileText className=\"w-6 h-6 text-primary-blue-600\" />\n                            <div className=\"flex-1 text-left\">\n                              <p className=\"text-sm font-medium text-gray-900\">{formData.pdfFileName}</p>\n                              <p className=\"text-xs text-gray-500\">\n                                {(formData.pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                              </p>\n                            </div>\n                            <button\n                              type=\"button\"\n                              onClick={() => setFormData({ ...formData, pdfFile: null, pdfFileName: \"\" })}\n                              className=\"p-1 text-gray-400 hover:text-red-500 transition-colors\"\n                            >\n                              <X className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          <Upload className=\"w-8 h-8 text-gray-400 mx-auto\" />\n                          <div>\n                            <p className=\"text-sm text-gray-600 mb-3\">\n                              Ajoute ton programme d'entra√Ænement en PDF\n                            </p>\n                            <input\n                              id=\"pdf-upload\"\n                              type=\"file\"\n                              accept=\".pdf,application/pdf\"\n                              onChange={(e) => {\n                                const file = e.target.files?.[0]\n                                if (file) {\n                                  // V√©rifier que c'est bien un PDF\n                                  if (file.type === 'application/pdf' || file.name.endsWith('.pdf')) {\n                                    // V√©rifier la taille (max 50MB)\n                                    if (file.size <= 50 * 1024 * 1024) {\n                                      setFormData({\n                                        ...formData,\n                                        pdfFile: file,\n                                        pdfFileName: file.name\n                                      })\n                                    } else {\n                                      alert(\"Le fichier est trop volumineux (max 50MB)\")\n                                    }\n                                  } else {\n                                    alert(\"Veuillez s√©lectionner un fichier PDF\")\n                                  }\n                                }\n                              }}\n                              className=\"hidden\"\n                            />\n                            <label\n                              htmlFor=\"pdf-upload\"\n                              className=\"inline-block bg-primary-blue-600 hover:bg-primary-blue-700 text-white px-6 py-2 rounded-lg cursor-pointer font-medium transition-colors\"\n                            >\n                              Choisir un fichier PDF\n                            </label>\n                            <p className=\"text-xs text-gray-400 mt-3\">\n                              Formats accept√©s: PDF (max 50MB)\n                            </p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Active Status */}\n                <div className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"isActive\"\n                    checked={formData.isActive}\n                    onChange={(e) => setFormData({ ...formData, isActive: e.target.checked })}\n                    className=\"w-5 h-5 text-primary-blue-600 rounded focus:ring-primary-blue-500\"\n                  />\n                  <label htmlFor=\"isActive\" className=\"text-sm font-medium text-gray-700\">\n                    Plan actif (visible pour les clients)\n                  </label>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowCreateForm(false)\n                      setEditingPlan(null)\n                      resetForm()\n                    }}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={editingPlan ? handleUpdatePlan : handleCreatePlan}\n                    className=\"flex-1 px-6 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-bold hover:shadow-glow-blue transition-all\"\n                  >\n                    {editingPlan ? \"Mettre √† jour\" : \"Cr√©er le plan\"}\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Plan Details Modal */}\n      <AnimatePresence>\n        {selectedPlan && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => setSelectedPlan(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">{selectedPlan.title}</h3>\n                <button\n                  onClick={() => setSelectedPlan(null)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                <p className=\"text-gray-600\">{selectedPlan.description}</p>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Euro className=\"w-5 h-5 text-primary-green-600\" />\n                      <span className=\"font-medium text-gray-900\">Prix</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan.price}‚Ç¨</p>\n                  </div>\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Calendar className=\"w-5 h-5 text-primary-blue-600\" />\n                      <span className=\"font-medium text-gray-900\">Dur√©e</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan.duration} semaines</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Target className=\"w-5 h-5 text-yellow-600\" />\n                      <span className=\"font-medium text-gray-900\">S√©ances</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan._count.sessions}</p>\n                  </div>\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Users className=\"w-5 h-5 text-purple-600\" />\n                      <span className=\"font-medium text-gray-900\">Abonn√©s</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan._count.subscribers}</p>\n                  </div>\n                </div>\n\n                <div className=\"flex gap-3\">\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${difficultyColors[selectedPlan.difficulty]}`}>\n                    {difficultyLabels[selectedPlan.difficulty]}\n                  </span>\n                  <span className=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\">\n                    {selectedPlan.category}\n                  </span>\n                </div>\n\n                {/* PDF Download Button */}\n                {selectedPlan.pdfFileUrl && (\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                    <a\n                      href={selectedPlan.pdfFileUrl}\n                      download={selectedPlan.pdfFileName}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center gap-3 bg-gradient-to-r from-primary-blue-500 to-primary-blue-600 text-white px-6 py-3 rounded-xl font-medium hover:from-primary-blue-600 hover:to-primary-blue-700 transition-all shadow-lg hover:shadow-xl\"\n                    >\n                      <FileText className=\"w-5 h-5\" />\n                      <span>T√©l√©charger le PDF</span>\n                      <span className=\"text-sm opacity-80\">({selectedPlan.pdfFileName})</span>\n                    </a>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n","size_bytes":30358},"lib/animations.ts":{"content":"// Biblioth√®que d'animations pour Athlink\n// Bas√© sur Framer Motion\n\nexport const fadeIn = {\n  initial: { opacity: 0, y: 20 },\n  animate: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: -20 },\n  transition: { duration: 0.3, ease: \"easeOut\" }\n}\n\nexport const slideIn = {\n  initial: { x: -50, opacity: 0 },\n  animate: { x: 0, opacity: 1 },\n  exit: { x: 50, opacity: 0 },\n  transition: { duration: 0.4, ease: [0.25, 0.1, 0.25, 1] }\n}\n\nexport const scaleIn = {\n  initial: { scale: 0.9, opacity: 0 },\n  animate: { scale: 1, opacity: 1 },\n  exit: { scale: 0.9, opacity: 0 },\n  transition: { duration: 0.2, ease: \"easeOut\" }\n}\n\nexport const staggerContainer = {\n  animate: {\n    transition: {\n      staggerChildren: 0.1,\n      delayChildren: 0.2\n    }\n  }\n}\n\nexport const staggerItem = {\n  initial: { opacity: 0, y: 20 },\n  animate: { \n    opacity: 1, \n    y: 0,\n    transition: {\n      duration: 0.4,\n      ease: \"easeOut\"\n    }\n  }\n}\n\nexport const hoverScale = {\n  rest: { scale: 1 },\n  hover: { \n    scale: 1.05,\n    transition: { duration: 0.2, ease: \"easeInOut\" }\n  },\n  tap: { scale: 0.95 }\n}\n\nexport const pulseAnimation = {\n  animate: {\n    scale: [1, 1.05, 1],\n    transition: {\n      duration: 2,\n      repeat: Infinity,\n      ease: \"easeInOut\"\n    }\n  }\n}\n\n// Animations sportives sp√©cifiques\nexport const runnerAnimation = {\n  animate: {\n    x: [0, 10, 0],\n    transition: {\n      duration: 1,\n      repeat: Infinity,\n      ease: \"easeInOut\"\n    }\n  }\n}\n\nexport const countdownPulse = {\n  animate: {\n    scale: [1, 1.1, 1],\n    opacity: [0.7, 1, 0.7],\n    transition: {\n      duration: 1.5,\n      repeat: Infinity,\n      ease: \"easeInOut\"\n    }\n  }\n}\n","size_bytes":1658},"components/NavBrand.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\n\nexport function NavBrand() {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.3 }}\n    >\n      <span className=\"font-extrabold tracking-tight text-xl sm:text-2xl text-black\">\n        ATHLINK\n      </span>\n    </motion.div>\n  )\n}\n\n\n","size_bytes":379},"components/ui-pro/animated-stat-card.tsx":{"content":"\"use client\"\n\nimport { motion, useMotionValue, useTransform, animate } from \"framer-motion\"\nimport { useEffect } from \"react\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { cn } from \"@/lib/utils\"\nimport { TrendingUp, TrendingDown } from \"lucide-react\"\n\ninterface AnimatedStatCardProps {\n  title: string\n  value: number\n  suffix?: string\n  icon?: React.ReactNode\n  trend?: number // Pourcentage de changement\n  color?: \"blue\" | \"green\" | \"yellow\" | \"purple\"\n  delay?: number\n  className?: string\n}\n\nexport function AnimatedStatCard({\n  title,\n  value,\n  suffix = \"\",\n  icon,\n  trend,\n  color = \"blue\",\n  delay = 0,\n  className\n}: AnimatedStatCardProps) {\n  const count = useMotionValue(0)\n  const rounded = useTransform(count, (latest) => Math.round(latest))\n\n  useEffect(() => {\n    const controls = animate(count, value, {\n      duration: 1.5,\n      delay,\n      ease: \"easeOut\"\n    })\n\n    return controls.stop\n  }, [value, delay, count])\n\n  const colorClasses = {\n    blue: \"from-blue-500 to-blue-600\",\n    green: \"from-green-500 to-green-600\",\n    yellow: \"from-yellow-500 to-black\",\n    purple: \"from-purple-500 to-purple-600\"\n  }\n\n  const iconBgClasses = {\n    blue: \"bg-blue-100 text-blue-600\",\n    green: \"bg-green-100 text-green-600\",\n    yellow: \"bg-yellow-100 text-yellow-600\",\n    purple: \"bg-purple-100 text-purple-600\"\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20, scale: 0.95 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      transition={{ duration: 0.5, delay }}\n      whileHover={{ \n        scale: 1.03,\n        transition: { duration: 0.2 }\n      }}\n      className={className}\n    >\n      <Card className=\"relative overflow-hidden border-0 shadow-lg\">\n        {/* Gradient Background */}\n        <div className={cn(\n          \"absolute inset-0 bg-gradient-to-br opacity-5\",\n          colorClasses[color]\n        )} />\n        \n        <CardContent className=\"p-6 relative\">\n          <div className=\"flex items-start justify-between mb-4\">\n            {/* Icon */}\n            {icon && (\n              <motion.div\n                initial={{ rotate: -180, scale: 0 }}\n                animate={{ rotate: 0, scale: 1 }}\n                transition={{ duration: 0.6, delay: delay + 0.2 }}\n                className={cn(\n                  \"w-12 h-12 rounded-xl flex items-center justify-center\",\n                  iconBgClasses[color]\n                )}\n              >\n                {icon}\n              </motion.div>\n            )}\n\n            {/* Trend Indicator */}\n            {trend !== undefined && (\n              <motion.div\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                transition={{ delay: delay + 0.4 }}\n                className={cn(\n                  \"flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full\",\n                  trend >= 0 \n                    ? \"bg-green-100 text-green-700\" \n                    : \"bg-red-100 text-red-700\"\n                )}\n              >\n                {trend >= 0 ? (\n                  <TrendingUp className=\"w-4 h-4\" />\n                ) : (\n                  <TrendingDown className=\"w-4 h-4\" />\n                )}\n                <span>{Math.abs(trend)}%</span>\n              </motion.div>\n            )}\n          </div>\n\n          {/* Value */}\n          <div className=\"space-y-1\">\n            <motion.div className=\"flex items-baseline gap-1\">\n              <motion.span \n                className=\"text-4xl font-bold tracking-tight\"\n              >\n                {rounded}\n              </motion.span>\n              {suffix && (\n                <span className=\"text-xl font-medium text-muted-foreground\">\n                  {suffix}\n                </span>\n              )}\n            </motion.div>\n\n            {/* Title */}\n            <p className=\"text-sm font-medium text-muted-foreground\">\n              {title}\n            </p>\n          </div>\n\n          {/* Animated underline */}\n          <motion.div\n            initial={{ scaleX: 0 }}\n            animate={{ scaleX: 1 }}\n            transition={{ duration: 0.8, delay: delay + 0.6 }}\n            className={cn(\n              \"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r origin-left\",\n              colorClasses[color]\n            )}\n          />\n        </CardContent>\n      </Card>\n    </motion.div>\n  )\n}\n","size_bytes":4385},"coaching/training-plans/[id]/sessions/[sessionId]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string; sessionId: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer le plan\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const planIndex = plans.findIndex((p: any) => p.id === params.id)\n\n    if (planIndex === -1) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    const plan = plans[planIndex]\n    if (!plan.sessions) plan.sessions = []\n\n    // Trouver la session\n    const sessionIndex = plan.sessions.findIndex((s: any) => s.id === params.sessionId)\n    \n    if (sessionIndex === -1) {\n      return NextResponse.json({ error: \"Session non trouv√©e\" }, { status: 404 })\n    }\n\n    // Supprimer la session\n    plan.sessions.splice(sessionIndex, 1)\n    plan._count.sessions = plan.sessions.length\n\n    // Sauvegarder\n    plans[planIndex] = plan\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: plans\n        }\n      }\n    })\n\n    return NextResponse.json({ message: \"Session supprim√©e avec succ√®s\" })\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression de la session:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2043},"components/ui/responsive-text.tsx":{"content":"\"use client\"\n\nimport { cn } from \"@/lib/utils\"\nimport { forwardRef } from \"react\"\n\ninterface ResponsiveTextProps extends React.HTMLAttributes<HTMLElement> {\n  /**\n   * Text size variants\n   */\n  size?: \"xs\" | \"sm\" | \"base\" | \"lg\" | \"xl\" | \"2xl\" | \"3xl\" | \"4xl\" | \"5xl\" | \"6xl\"\n  /**\n   * Font weight\n   */\n  weight?: \"normal\" | \"medium\" | \"semibold\" | \"bold\" | \"black\"\n  /**\n   * HTML element to render as\n   */\n  as?: \"h1\" | \"h2\" | \"h3\" | \"h4\" | \"h5\" | \"h6\" | \"p\" | \"span\" | \"div\"\n}\n\nconst ResponsiveText = forwardRef<HTMLElement, ResponsiveTextProps>(\n  ({ className, size = \"base\", weight = \"normal\", as: Component = \"p\", children, ...props }, ref) => {\n    const sizeClasses = {\n      xs: \"text-xs sm:text-sm\",\n      sm: \"text-sm sm:text-base\", \n      base: \"text-base sm:text-lg\",\n      lg: \"text-lg sm:text-xl\",\n      xl: \"text-xl sm:text-2xl\",\n      \"2xl\": \"text-xl sm:text-2xl md:text-3xl\",\n      \"3xl\": \"text-2xl sm:text-3xl md:text-4xl\",\n      \"4xl\": \"text-3xl sm:text-4xl md:text-5xl\",\n      \"5xl\": \"text-4xl sm:text-5xl md:text-6xl\",\n      \"6xl\": \"text-5xl sm:text-6xl md:text-7xl\"\n    }\n\n    const weightClasses = {\n      normal: \"font-normal\",\n      medium: \"font-medium\",\n      semibold: \"font-semibold\", \n      bold: \"font-bold\",\n      black: \"font-black\"\n    }\n\n    return (\n      <Component\n        ref={ref as any}\n        className={cn(\n          sizeClasses[size],\n          weightClasses[weight],\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </Component>\n    )\n  }\n)\n\nResponsiveText.displayName = \"ResponsiveText\"\n\nexport { ResponsiveText }\n","size_bytes":1601},"public/booking-request/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { coachUsername, clientName, clientEmail, clientPhone, service, message } = body\n\n    // Validation\n    if (!coachUsername || !clientName || !clientEmail || !service) {\n      return NextResponse.json({ error: \"Donn√©es manquantes\" }, { status: 400 })\n    }\n\n    // V√©rifier que le coach existe et a le plan COACH\n    const coach = await prisma.profile.findUnique({\n      where: { username: coachUsername },\n      select: { \n        id: true, \n        plan: true, \n        stats: true,\n        displayName: true,\n        user: {\n          select: { email: true }\n        }\n      }\n    })\n\n    if (!coach || coach.plan !== \"COACH\") {\n      return NextResponse.json({ error: \"Coach non trouv√© ou non disponible\" }, { status: 404 })\n    }\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = coach.stats as any || {}\n    const existingBookings = stats.bookings || []\n\n    // Cr√©er une nouvelle demande de r√©servation avec statut PENDING\n    const newBooking = {\n      id: `booking_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      clientName,\n      clientEmail,\n      clientPhone: clientPhone || null,\n      date: new Date().toISOString().split('T')[0], // Date provisoire (sera modifi√©e par le coach)\n      startTime: \"09:00\", // Heure provisoire\n      endTime: \"10:00\",\n      duration: 60,\n      service: service,\n      price: 0, // Prix √† d√©finir par le coach\n      status: \"PENDING\",\n      notes: message || \"Demande depuis la page publique\",\n      createdAt: new Date().toISOString(),\n      isPublicRequest: true // Marqueur pour identifier les demandes publiques\n    }\n\n    // Ajouter la nouvelle demande\n    const updatedBookings = [newBooking, ...existingBookings]\n\n    // Sauvegarder dans le profil\n    await prisma.profile.update({\n      where: { id: coach.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings: updatedBookings\n        }\n      }\n    })\n\n    // TODO: Envoyer un email de notification au coach\n    // await sendEmailNotification(coach.user.email, {\n    //   subject: `Nouvelle demande de r√©servation de ${clientName}`,\n    //   body: `\n    //     Nouvelle demande de r√©servation:\n    //     Client: ${clientName}\n    //     Email: ${clientEmail}\n    //     Service: ${service}\n    //     Message: ${message}\n    //   `\n    // })\n\n    return NextResponse.json({ \n      success: true,\n      message: \"Demande envoy√©e avec succ√®s\",\n      bookingId: newBooking.id\n    }, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation de la demande:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n","size_bytes":2838},"(dashboard)/dashboard/analytics/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function AnalyticsPage() {\n  // Rediriger vers Param√®tres avec l'onglet Analytics\n  redirect(\"/dashboard/settings#analytics\")\n}\n","size_bytes":188},"components/ui-pro/glass-race-countdown.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { Calendar, MapPin, Ruler } from \"lucide-react\"\nimport { useEffect, useState } from \"react\"\n\ninterface Race {\n  id: string\n  name: string\n  date: Date\n  location: string | null\n  distance: string | null\n}\n\ninterface GlassRaceCountdownProps {\n  race: Race\n}\n\nexport function GlassRaceCountdown({ race }: GlassRaceCountdownProps) {\n  const [timeLeft, setTimeLeft] = useState(calculateTimeLeft(race.date))\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setTimeLeft(calculateTimeLeft(race.date))\n    }, 1000)\n\n    return () => clearInterval(timer)\n  }, [race.date])\n\n  const daysUntil = Math.ceil((new Date(race.date).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      whileInView={{ opacity: 1, y: 0 }}\n      viewport={{ once: true }}\n      transition={{ duration: 0.6 }}\n      className=\"relative overflow-hidden rounded-2xl\"\n    >\n      {/* Glass container */}\n      <div className=\"backdrop-blur-2xl bg-gradient-to-br from-yellow-500/30 to-gray-900/40 border border-yellow-500/30 shadow-2xl p-5 md:p-6 lg:p-8\">\n        <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 md:gap-6\">\n          {/* Race Info */}\n          <div className=\"flex-1\">\n            <motion.div\n              initial={{ x: -20, opacity: 0 }}\n              animate={{ x: 0, opacity: 1 }}\n              transition={{ delay: 0.2 }}\n            >\n              <p className=\"text-xs md:text-sm opacity-90 mb-2 uppercase tracking-wider font-bold text-white/80\">\n                Prochaine Course\n              </p>\n              <h2 className=\"text-2xl md:text-3xl lg:text-4xl font-black mb-3 text-white drop-shadow-lg\">\n                {race.name}\n              </h2>\n              <div className=\"flex flex-wrap gap-2 text-sm md:text-base text-white/90\">\n                <div className=\"flex items-center gap-1.5 backdrop-blur-xl bg-white/20 border border-white/40 px-3 py-1.5 rounded-lg text-xs md:text-sm\">\n                  <Calendar className=\"w-3.5 h-3.5 md:w-4 md:h-4\" />\n                  <span className=\"font-semibold\">\n                    {new Date(race.date).toLocaleDateString('fr-FR', { \n                      day: 'numeric', \n                      month: 'long', \n                      year: 'numeric' \n                    })}\n                  </span>\n                </div>\n                {race.location && (\n                  <div className=\"flex items-center gap-1.5 backdrop-blur-xl bg-white/20 border border-white/40 px-3 py-1.5 rounded-lg text-xs md:text-sm\">\n                    <MapPin className=\"w-3.5 h-3.5 md:w-4 md:h-4\" />\n                    <span className=\"font-semibold\">{race.location}</span>\n                  </div>\n                )}\n                {race.distance && (\n                  <div className=\"flex items-center gap-1.5 backdrop-blur-xl bg-white/20 border border-white/40 px-3 py-1.5 rounded-lg text-xs md:text-sm\">\n                    <Ruler className=\"w-3.5 h-3.5 md:w-4 md:h-4\" />\n                    <span className=\"font-semibold\">{race.distance}</span>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </div>\n\n          {/* Countdown Display */}\n          <motion.div\n            initial={{ scale: 0.8, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: 0.4, type: \"spring\", stiffness: 150 }}\n            className=\"w-full lg:w-auto\"\n          >\n            {daysUntil > 7 ? (\n              // Show days for races more than a week away\n              <div className=\"text-center backdrop-blur-2xl bg-white/30 border-2 border-white/60 rounded-xl px-5 py-4 md:px-6 md:py-5 min-w-[120px] shadow-xl\">\n                <motion.p \n                  key={daysUntil}\n                  initial={{ scale: 1.2, opacity: 0 }}\n                  animate={{ scale: 1, opacity: 1 }}\n                  className=\"text-5xl md:text-6xl font-black mb-2 text-white drop-shadow-lg\"\n                >\n                  {daysUntil}\n                </motion.p>\n                <p className=\"text-xs font-bold uppercase tracking-wide text-white/90\">\n                  {daysUntil === 1 ? 'jour' : 'jours'}\n                </p>\n              </div>\n            ) : (\n              // Show detailed countdown for races within a week\n              <div className=\"grid grid-cols-4 gap-2\">\n                {[\n                  { label: 'J', value: timeLeft.days },\n                  { label: 'H', value: timeLeft.hours },\n                  { label: 'M', value: timeLeft.minutes },\n                  { label: 'S', value: timeLeft.seconds },\n                ].map((item, index) => (\n                  <motion.div\n                    key={item.label}\n                    initial={{ y: 20, opacity: 0 }}\n                    animate={{ y: 0, opacity: 1 }}\n                    transition={{ delay: 0.5 + index * 0.1 }}\n                    className=\"text-center backdrop-blur-2xl bg-white/30 border-2 border-white/60 rounded-xl px-2 py-2 md:px-3 md:py-3 shadow-lg\"\n                  >\n                    <motion.p \n                      key={item.value}\n                      initial={{ scale: 1.2, opacity: 0 }}\n                      animate={{ scale: 1, opacity: 1 }}\n                      className=\"text-2xl md:text-3xl font-black mb-0.5 text-white\"\n                    >\n                      {String(item.value).padStart(2, '0')}\n                    </motion.p>\n                    <p className=\"text-[9px] md:text-[10px] font-bold uppercase tracking-wide text-white/70\">\n                      {item.label}\n                    </p>\n                  </motion.div>\n                ))}\n              </div>\n            )}\n          </motion.div>\n        </div>\n\n        {/* Progress bar */}\n        {daysUntil <= 30 && (\n          <motion.div\n            initial={{ scaleX: 0, opacity: 0 }}\n            animate={{ scaleX: 1, opacity: 1 }}\n            transition={{ delay: 0.8, duration: 1 }}\n            className=\"mt-4 md:mt-6\"\n          >\n            <div className=\"h-2 backdrop-blur-xl bg-white/20 border border-white/40 rounded-full overflow-hidden shadow-inner\">\n              <motion.div\n                initial={{ width: 0 }}\n                animate={{ width: `${Math.max(0, 100 - (daysUntil / 30) * 100)}%` }}\n                transition={{ delay: 1, duration: 1.5, ease: \"easeOut\" }}\n                className=\"h-full bg-gradient-to-r from-white via-green-200 to-green-400 rounded-full shadow-lg\"\n              />\n            </div>\n            <p className=\"text-[10px] text-white/90 mt-1.5 font-semibold text-center\">\n              {Math.max(0, Math.round(100 - (daysUntil / 30) * 100))}% avant le jour J\n            </p>\n          </motion.div>\n        )}\n      </div>\n\n      {/* Animated particles */}\n      <div className=\"absolute inset-0 pointer-events-none overflow-hidden rounded-3xl\">\n        {[...Array(10)].map((_, i) => (\n          <motion.div\n            key={i}\n            className=\"absolute w-2 h-2 bg-white/30 rounded-full\"\n            animate={{\n              x: [Math.random() * 100 + '%', Math.random() * 100 + '%'],\n              y: [Math.random() * 100 + '%', Math.random() * 100 + '%'],\n              scale: [0, 1, 0],\n              opacity: [0, 0.6, 0],\n            }}\n            transition={{\n              duration: 3 + Math.random() * 2,\n              repeat: Infinity,\n              delay: i * 0.2,\n            }}\n          />\n        ))}\n      </div>\n    </motion.div>\n  )\n}\n\nfunction calculateTimeLeft(targetDate: Date) {\n  const difference = new Date(targetDate).getTime() - Date.now()\n  \n  if (difference <= 0) {\n    return { days: 0, hours: 0, minutes: 0, seconds: 0 }\n  }\n\n  return {\n    days: Math.floor(difference / (1000 * 60 * 60 * 24)),\n    hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\n    minutes: Math.floor((difference / 1000 / 60) % 60),\n    seconds: Math.floor((difference / 1000) % 60)\n  }\n}\n\n","size_bytes":8033},"components/ui-pro/modern-profile-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { MapPin, Instagram, Youtube, Calendar, Link as LinkIcon, Users, ExternalLink, Trophy, Medal, ImageIcon } from \"lucide-react\"\nimport { PlanType } from \"@/lib/features\"\nimport { GlassSponsorsGrid } from \"./glass-sponsors-grid\"\n\ninterface ModernProfileCardProps {\n  displayName: string\n  bio: string | null\n  location: string | null\n  avatarUrl: string | null\n  sport: string\n  instagram: string | null\n  strava: string | null\n  youtube: string | null\n  tiktok: string | null\n  twitter: string | null\n  whatsapp: string | null\n  plan?: PlanType\n  links?: Array<{\n    id: string\n    title: string\n    url: string\n    icon?: string | null\n  }>\n  races?: Array<{\n    id: string\n    name: string\n    date: string\n    location?: string | null\n    distance?: string | null\n    result?: string | null\n    url?: string | null\n    logoUrl?: string | null\n  }>\n  sponsors?: Array<{\n    id: string\n    name: string\n    logoUrl?: string | null\n    websiteUrl?: string | null\n    promoCode?: string | null\n  }>\n  media?: Array<{\n    id: string\n    type: string\n    url: string\n    thumbnail?: string | null\n    title?: string | null\n  }>\n  username?: string\n  hasCoachingServices?: boolean\n}\n\nexport function ModernProfileCard({\n  displayName,\n  bio,\n  location,\n  avatarUrl,\n  sport,\n  instagram,\n  strava,\n  youtube,\n  tiktok,\n  twitter,\n  whatsapp,\n  plan = PlanType.FREE,\n  links = [],\n  races = [],\n  sponsors = [],\n  media = [],\n  username,\n  hasCoachingServices = false\n}: ModernProfileCardProps) {\n\n  const allSocialIcons = [\n    { icon: Instagram, url: instagram ? `https://instagram.com/${instagram}` : undefined },\n    { icon: TikTokIcon, url: tiktok ? `https://tiktok.com/@${tiktok}` : undefined },\n    { icon: XIcon, url: twitter ? `https://x.com/${twitter}` : undefined },\n    { icon: StravaIcon, url: strava || undefined },\n    { icon: WhatsAppIcon, url: whatsapp ? `https://wa.me/${whatsapp}` : undefined },\n    { icon: Youtube, url: youtube || undefined },\n  ].filter(social => social.url) // N'afficher que les r√©seaux sociaux remplis\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20, scale: 0.95 }}\n      animate={{ opacity: 1, y: 0, scale: 1 }}\n      transition={{ duration: 0.5, ease: \"easeOut\" }}\n      className=\"relative w-full max-w-[450px] mx-auto\"\n    >\n\n      {/* Carte principale avec glassmorphism */}\n      <div className=\"relative overflow-hidden rounded-[32px] shadow-2xl backdrop-blur-xl bg-gradient-to-b from-white/10 to-black/40 border border-white/20\">\n        \n        {/* Photo de profil - 60% de la hauteur */}\n        <div className=\"relative h-[400px] sm:h-[450px] overflow-hidden\">\n          {avatarUrl ? (\n            <Image\n              src={avatarUrl}\n              alt={displayName}\n              fill\n              className=\"object-cover\"\n              priority\n              quality={100}\n              sizes=\"(max-width: 640px) 100vw, 450px\"\n              unoptimized={true}\n            />\n          ) : (\n            <div className=\"w-full h-full bg-gradient-to-br from-yellow-500 to-yellow-600 flex items-center justify-center\">\n              <span className=\"text-9xl font-black text-white\">\n                {displayName[0]}\n              </span>\n            </div>\n          )}\n          \n          {/* Overlay gradient pour transition douce et progressive */}\n          <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black\" />\n          <div className=\"absolute bottom-0 left-0 right-0 h-40 bg-gradient-to-b from-transparent to-black\" />\n        </div>\n\n        {/* Section informations sur fond noir */}\n        <div className=\"relative bg-black p-6 sm:p-8\">\n          \n          {/* Nom de l'utilisateur */}\n          <motion.h1\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-3xl sm:text-4xl font-bold text-white text-center mb-3\"\n          >\n            {displayName}\n          </motion.h1>\n\n          {/* Statut et localisation */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.3 }}\n            className=\"flex items-center justify-center gap-4 mb-3 text-sm\"\n          >\n            {/* Active now */}\n            <div className=\"flex items-center gap-2\">\n              <div className=\"relative\">\n                <div className=\"w-2.5 h-2.5 bg-green-500 rounded-full\"></div>\n                <div className=\"absolute inset-0 w-2.5 h-2.5 bg-green-500 rounded-full animate-ping\"></div>\n              </div>\n              <span className=\"text-gray-300\">Active now</span>\n            </div>\n\n            {/* Location */}\n            {location && (\n              <>\n                <span className=\"text-gray-600\">‚Ä¢</span>\n                <div className=\"flex items-center gap-1.5 text-gray-300\">\n                  <MapPin className=\"w-4 h-4\" />\n                  <span>{location}</span>\n                </div>\n              </>\n            )}\n          </motion.div>\n\n          {/* Bio / Description */}\n          {bio && (\n            <motion.p\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.4 }}\n              className=\"text-base text-gray-400 text-center mb-4\"\n            >\n              {bio}\n            </motion.p>\n          )}\n\n          {/* Badge sport */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.45 }}\n            className=\"flex justify-center mb-6\"\n          >\n            <div className=\"inline-flex items-center gap-2 bg-yellow-500/20 border border-yellow-500/30 rounded-full px-4 py-1.5\">\n              <span className=\"text-sm font-semibold text-yellow-400\">{sport}</span>\n            </div>\n          </motion.div>\n\n\n          {/* Ic√¥nes r√©seaux sociaux */}\n          {allSocialIcons.length > 0 && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.5 }}\n              className=\"flex items-center justify-center gap-4 mb-6 pb-6 border-b border-white/10\"\n            >\n              {allSocialIcons.map((social, index) => (\n                <motion.a\n                  key={index}\n                  href={social.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  initial={{ scale: 0, opacity: 0 }}\n                  animate={{ scale: 1, opacity: 1 }}\n                  transition={{ delay: 0.6 + index * 0.05 }}\n                  whileHover={{ scale: 1.2, y: -2 }}\n                  whileTap={{ scale: 0.95 }}\n                  className=\"w-10 h-10 rounded-full flex items-center justify-center transition-all text-white hover:text-yellow-400 cursor-pointer\"\n                >\n                  <social.icon className=\"w-5 h-5\" />\n                </motion.a>\n              ))}\n            </motion.div>\n          )}\n\n          {/* Contenu dynamique */}\n          <div className=\"space-y-4\">\n            {/* Section √âv√©nements/Comp√©titions */}\n            {races.length > 0 && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.7 }}\n                whileHover={{ scale: 1.02, y: -2 }}\n                className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 hover:bg-white/15 hover:border-white/30 transition-all cursor-pointer\"\n              >\n                <h3 className=\"font-semibold text-white mb-3\">√âv√©nements/Comp√©titions</h3>\n                <div className=\"space-y-2\">\n                  {races.slice(0, 3).map((race, index) => (\n                    <motion.a\n                      key={race.id}\n                      href={race.url || `/${username}/races/${race.id}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 0.8 + index * 0.1 }}\n                      whileHover={{ scale: 1.02, x: 2 }}\n                      whileTap={{ scale: 0.98 }}\n                      className=\"block bg-white/5 hover:bg-white/10 rounded-lg p-3 border border-white/10 hover:border-white/20 transition-all cursor-pointer\"\n                    >\n                      <div className=\"flex items-start gap-3\">\n                        {/* Logo de l'√©v√©nement */}\n                        {race.logoUrl ? (\n                          <div className=\"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center\">\n                            <Image\n                              src={race.logoUrl}\n                              alt={race.name}\n                              width={48}\n                              height={48}\n                              className=\"w-full h-full object-contain\"\n                            />\n                          </div>\n                        ) : (\n                          <div className=\"w-12 h-12 rounded-lg flex items-center justify-center bg-blue-500/20 flex-shrink-0\">\n                            <Trophy className=\"w-6 h-6 text-blue-400\" />\n                          </div>\n                        )}\n                        \n                        {/* Informations de l'√©v√©nement */}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-white text-sm truncate\">{race.name}</p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <p className=\"text-gray-300 text-xs\">\n                              {new Date(race.date).toLocaleDateString('fr-FR', { \n                                day: 'numeric', \n                                month: 'short',\n                                year: 'numeric'\n                              })}\n                            </p>\n                            {race.location && (\n                              <>\n                                <span className=\"text-gray-600\">‚Ä¢</span>\n                                <p className=\"text-gray-300 text-xs truncate\">{race.location}</p>\n                              </>\n                            )}\n                          </div>\n                          {race.distance && (\n                            <p className=\"text-gray-400 text-xs mt-1\">{race.distance}</p>\n                          )}\n                        </div>\n\n                        {/* R√©sultat */}\n                        {race.result && (\n                          <div className=\"flex items-center gap-1 flex-shrink-0\">\n                            <Medal className=\"w-4 h-4 text-yellow-400\" />\n                            <span className=\"text-yellow-400 text-xs font-medium\">{race.result}</span>\n                          </div>\n                        )}\n                      </div>\n                    </motion.a>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n\n            {/* Section Liens */}\n            {links.length > 0 && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.8 }}\n                whileHover={{ scale: 1.02, y: -2 }}\n                className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 hover:bg-white/15 hover:border-white/30 transition-all cursor-pointer\"\n              >\n                <h3 className=\"font-semibold text-white mb-3\">Liens</h3>\n                <div className=\"space-y-2\">\n                  {links.slice(0, 3).map((link, index) => (\n                    <motion.a\n                      key={link.id}\n                      href={link.url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: 0.9 + index * 0.1 }}\n                      whileHover={{ scale: 1.02, x: 5 }}\n                      className=\"flex items-center gap-3 bg-white/5 hover:bg-white/10 rounded-lg p-3 border border-white/10 transition-all group\"\n                    >\n                      <ExternalLink className=\"w-4 h-4 text-green-400 group-hover:text-green-300\" />\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-white text-sm\">{link.title}</p>\n                        {link.icon && (\n                          <p className=\"text-gray-300 text-xs\">{link.icon}</p>\n                        )}\n                      </div>\n                    </motion.a>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n\n            {/* Section Sponsors */}\n            {sponsors.length > 0 && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.9 }}\n                className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 transition-all\"\n              >\n                <h3 className=\"font-semibold text-white mb-3\">Sponsors</h3>\n                <GlassSponsorsGrid sponsors={sponsors} />\n              </motion.div>\n            )}\n\n            {/* Section Galerie */}\n            {media.length > 0 && (\n              <motion.a\n                href={username ? `/${username}/galerie` : \"#\"}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 1.0 }}\n                whileHover={{ scale: 1.02, y: -2 }}\n                whileTap={{ scale: 0.98 }}\n                className=\"block bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 hover:bg-white/15 hover:border-white/30 transition-all cursor-pointer\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"font-semibold text-white\">Galerie</h3>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-xs text-gray-400\">{media.length} m√©dias</span>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-gray-400\">\n                      <path d=\"m9 18 6-6-6-6\"/>\n                    </svg>\n                  </div>\n                </div>\n                \n                {/* Aper√ßu des m√©dias */}\n                <div className=\"grid grid-cols-3 gap-2\">\n                  {media.slice(0, 3).map((item, index) => (\n                    <motion.div\n                      key={item.id}\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: 1.1 + index * 0.1 }}\n                      className=\"relative aspect-square rounded-lg overflow-hidden bg-white/5\"\n                    >\n                      <Image\n                        src={item.thumbnail || item.url}\n                        alt={item.title || \"Media\"}\n                        fill\n                        className=\"object-cover\"\n                      />\n                      {item.type === \"VIDEO\" && (\n                        <div className=\"absolute inset-0 flex items-center justify-center bg-black/30\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"white\" className=\"opacity-80\">\n                            <polygon points=\"5 3 19 12 5 21 5 3\"/>\n                          </svg>\n                        </div>\n                      )}\n                    </motion.div>\n                  ))}\n                </div>\n              </motion.a>\n            )}\n\n            {/* Section Coaching */}\n            {hasCoachingServices && (\n              <motion.a\n                href={username ? `/${username}/coaching` : \"#\"}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 1.1 }}\n                whileHover={{ scale: 1.02, y: -2 }}\n                whileTap={{ scale: 0.98 }}\n                className=\"block bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 hover:bg-white/15 transition-all\"\n              >\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"font-semibold text-white\">Services Coaching</h3>\n                  <svg className=\"w-5 h-5 text-white/60\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"m9 18 6-6-6-6\"/>\n                  </svg>\n                </div>\n                <p className=\"text-sm text-gray-300 mb-3\">\n                  D√©couvre mes services de coaching personnalis√©\n                </p>\n                <div className=\"flex gap-2\">\n                  <div className=\"flex-1 bg-white/5 rounded-lg p-2 text-center\">\n                    <p className=\"text-xs text-gray-400\">Plans d'entra√Ænement</p>\n                  </div>\n                  <div className=\"flex-1 bg-white/5 rounded-lg p-2 text-center\">\n                    <p className=\"text-xs text-gray-400\">R√©servations</p>\n                  </div>\n                </div>\n              </motion.a>\n            )}\n          </div>\n\n          {/* Footer - G√©n√©r√© par Athlink */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 1.2 }}\n            className=\"mt-6 pt-4 border-t border-white/10 text-center\"\n          >\n            <a\n              href=\"/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"inline-flex items-center gap-2 text-xs text-gray-400 hover:text-white transition-colors\"\n            >\n              <span>G√©n√©r√© par</span>\n              <span className=\"font-bold text-yellow-400\">Athlink</span>\n            </a>\n          </motion.div>\n\n        </div>\n      </div>\n    </motion.div>\n  )\n}\n\n// Ic√¥nes personnalis√©es\nfunction StravaIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169\" />\n    </svg>\n  )\n}\n\nfunction TikTokIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\"/>\n    </svg>\n  )\n}\n\nfunction XIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M13.544 10.456L20.2 2h-1.581l-5.779 6.719L8.3 2H2l6.988 10.177L2 22h1.581l6.1-7.083L14.7 22h6.3l-7.456-11.544zM10.8 13.5l-.707-1.012L4.5 3.5h2.424l4.536 6.487.707 1.012 5.905 8.446h-2.424L10.8 13.5z\"/>\n    </svg>\n  )\n}\n\nfunction WhatsAppIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z\"/>\n    </svg>\n  )\n}\n\n","size_bytes":20908},"profile/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { profileUpdateSchema, mapSportToEnum, createStatsWithOriginalSport } from \"@/lib/validations\"\n\n// GET profile\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ profile })\n\n  } catch (error) {\n    console.error(\"GET profile error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// PATCH update profile\nexport async function PATCH(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = profileUpdateSchema.parse(body)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Mapper le sport libre vers l'enum Prisma et stocker l'original dans les stats\n    let statsToUpdate = profile.stats || {}\n    \n    // G√©rer le sport original\n    if (validatedData.sport) {\n      statsToUpdate = createStatsWithOriginalSport(statsToUpdate, validatedData.sport)\n    }\n    \n    // G√©rer le CSS personnalis√©\n    if (validatedData.customCSS !== undefined) {\n      statsToUpdate = {\n        ...statsToUpdate,\n        customCSS: validatedData.customCSS || null\n      }\n    }\n\n    const dataForPrisma = {\n      ...validatedData,\n      ...(validatedData.sport && { \n        sport: mapSportToEnum(validatedData.sport)\n      }),\n      // Mettre √† jour les stats si n√©cessaire\n      ...(Object.keys(statsToUpdate).length > 0 && { stats: statsToUpdate }),\n      // Retirer customCSS des donn√©es Prisma car il va dans stats\n      customCSS: undefined\n    }\n\n    // Si le sport actuel n'est pas une valeur de l'enum Prisma, on le force √† \"OTHER\"\n    // et on stocke le sport original dans les stats\n    const enumSports = [\"RUNNING\", \"CYCLING\", \"TRIATHLON\", \"SWIMMING\", \"SKIING\", \"OTHER\"]\n    if (!enumSports.includes(profile.sport) && !validatedData.sport) {\n      dataForPrisma.sport = \"OTHER\"\n      dataForPrisma.stats = createStatsWithOriginalSport(statsToUpdate, profile.sport)\n    }\n\n    const updatedProfile = await prisma.profile.update({\n      where: { userId: session.user.id },\n      data: dataForPrisma as any\n    })\n\n    return NextResponse.json({ profile: updatedProfile })\n\n  } catch (error: any) {\n    console.error(\"PATCH profile error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3197},"deployment/scripts/deploy.sh":{"content":"#!/bin/bash\n# Deployment script for AthLink SaaS\n\necho \"üöÄ Starting AthLink deployment...\"\n\n# Check if we're in the right directory\nif [ ! -f \"package.json\" ]; then\n    echo \"‚ùå Error: package.json not found. Run this script from the project root.\"\n    exit 1\nfi\n\n# Install dependencies\necho \"üì¶ Installing dependencies...\"\nnpm install\n\n# Generate Prisma client\necho \"üóÑÔ∏è Generating Prisma client...\"\nnpx prisma generate\n\n# Run database migrations\necho \"üîÑ Running database migrations...\"\nnpx prisma db push\n\n# Build the application\necho \"üî® Building application...\"\nnpm run build\n\n# Check if build was successful\nif [ $? -eq 0 ]; then\n    echo \"‚úÖ Build successful!\"\n    echo \"üéØ Ready for deployment to Vercel\"\nelse\n    echo \"‚ùå Build failed!\"\n    exit 1\nfi\n\necho \"üéâ Deployment preparation complete!\"\n","size_bytes":823},"coaching/training-plans/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n\n    return NextResponse.json(plans)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des plans:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const formData = await request.formData()\n    const title = formData.get('title') as string\n    const description = formData.get('description') as string\n    const price = parseFloat(formData.get('price') as string)\n    const duration = parseInt(formData.get('duration') as string)\n    const difficulty = formData.get('difficulty') as string\n    const category = formData.get('category') as string\n    const isActive = formData.get('isActive') === 'true'\n    const pdfFileName = formData.get('pdfFileName') as string | null\n    const pdfFileUrl = formData.get('pdfFileUrl') as string | null\n\n    // Validation\n    if (!title || !description || price === undefined || !duration || !difficulty || !category) {\n      return NextResponse.json({ error: \"Donn√©es manquantes\" }, { status: 400 })\n    }\n\n    if (price < 0) {\n      return NextResponse.json({ error: \"Le prix ne peut pas √™tre n√©gatif\" }, { status: 400 })\n    }\n\n    if (duration < 1) {\n      return NextResponse.json({ error: \"La dur√©e doit √™tre d'au moins 1 semaine\" }, { status: 400 })\n    }\n\n    const validDifficulties = [\"DEBUTANT\", \"INTERMEDIAIRE\", \"AVANCE\"]\n    if (!validDifficulties.includes(difficulty)) {\n      return NextResponse.json({ error: \"Niveau de difficult√© invalide\" }, { status: 400 })\n    }\n\n    // R√©cup√©rer les plans existants\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const existingPlans = stats.trainingPlans || []\n\n    // Cr√©er le nouveau plan\n    const newPlan = {\n      id: `plan_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      title,\n      description,\n      price: parseFloat(price),\n      duration: parseInt(duration),\n      difficulty,\n      category,\n      isActive: isActive ?? true,\n      pdfFileName: pdfFileName || null,\n      pdfFileUrl: pdfFileUrl || null,\n      createdAt: new Date().toISOString(),\n      sessions: [],\n      subscribers: [],\n      _count: {\n        sessions: 0,\n        subscribers: 0\n      }\n    }\n\n    // Ajouter le nouveau plan\n    const updatedPlans = [newPlan, ...existingPlans]\n\n    // Sauvegarder dans le profil\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: updatedPlans\n        }\n      }\n    })\n\n    return NextResponse.json(newPlan, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":4179},"deployment/testing/test-setup.js":{"content":"// Test setup for AthLink SaaS\nconst { PrismaClient } = require('@prisma/client');\n\nconst prisma = new PrismaClient();\n\n// Test database connection\nasync function testDatabaseConnection() {\n  try {\n    await prisma.$connect();\n    console.log('‚úÖ Database connection successful');\n    return true;\n  } catch (error) {\n    console.error('‚ùå Database connection failed:', error);\n    return false;\n  }\n}\n\n// Test environment variables\nfunction testEnvironmentVariables() {\n  const requiredVars = [\n    'DATABASE_URL',\n    'NEXTAUTH_SECRET',\n    'NEXT_PUBLIC_SUPABASE_URL',\n    'NEXT_PUBLIC_SUPABASE_ANON_KEY'\n  ];\n\n  const missing = requiredVars.filter(varName => !process.env[varName]);\n  \n  if (missing.length > 0) {\n    console.error('‚ùå Missing environment variables:', missing);\n    return false;\n  }\n  \n  console.log('‚úÖ All required environment variables present');\n  return true;\n}\n\n// Run all tests\nasync function runTests() {\n  console.log('üß™ Running AthLink tests...');\n  \n  const envTest = testEnvironmentVariables();\n  const dbTest = await testDatabaseConnection();\n  \n  if (envTest && dbTest) {\n    console.log('üéâ All tests passed!');\n    process.exit(0);\n  } else {\n    console.log('‚ùå Some tests failed!');\n    process.exit(1);\n  }\n}\n\nrunTests();\n","size_bytes":1272},"lib/features.ts":{"content":"// Syst√®me de gestion des fonctionnalit√©s par plan\nimport { PlanType } from \"@prisma/client\"\n\nexport { PlanType }\n\nexport interface FeatureLimits {\n  maxLinks: number\n  maxRaces: number\n  maxSponsors: number\n  maxMedia: number\n  analyticsDays: number | null // null = illimit√©\n  customDomain: boolean\n  customCSS: boolean\n  realtimeNotifications: boolean\n  dataExport: boolean\n  clickHeatmap: boolean\n  visitorDemographics: boolean\n  prioritySupport: boolean\n  adFree: boolean\n  premiumThemes: boolean\n  priorityLinks: boolean\n  profileBadge: string | null\n}\n\nexport const PLAN_FEATURES: Record<PlanType, FeatureLimits> = {\n  [PlanType.FREE]: {\n    maxLinks: 10,\n    maxRaces: 1,\n    maxSponsors: 0,\n    maxMedia: 2,\n    analyticsDays: null, // Analytics basiques uniquement\n    customDomain: false,\n    customCSS: false,\n    realtimeNotifications: false,\n    dataExport: false,\n    clickHeatmap: false,\n    visitorDemographics: false,\n    prioritySupport: false,\n    adFree: false,\n    premiumThemes: false,\n    priorityLinks: false,\n    profileBadge: null\n  },\n  [PlanType.PRO]: {\n    maxLinks: -1, // Illimit√©\n    maxRaces: -1, // Illimit√©\n    maxSponsors: -1, // Illimit√©\n    maxMedia: -1, // Illimit√©\n    analyticsDays: 7, // 7 jours d'analytics avanc√©es\n    customDomain: false,\n    customCSS: false,\n    realtimeNotifications: false,\n    dataExport: false,\n    clickHeatmap: false,\n    visitorDemographics: false,\n    prioritySupport: false,\n    adFree: true,\n    premiumThemes: true,\n    priorityLinks: true,\n    profileBadge: \"Pro\"\n  },\n  [PlanType.ELITE]: {\n    maxLinks: -1, // Illimit√©\n    maxRaces: -1, // Illimit√©\n    maxSponsors: -1, // Illimit√©\n    maxMedia: -1, // Illimit√©\n    analyticsDays: null, // Analytics illimit√©es\n    customDomain: true,\n    customCSS: true,\n    realtimeNotifications: true,\n    dataExport: true,\n    clickHeatmap: true,\n    visitorDemographics: true,\n    prioritySupport: true,\n    adFree: true,\n    premiumThemes: true,\n    priorityLinks: true,\n    profileBadge: \"Elite\"\n  },\n}\n\nexport function canUserAccessFeature(\n  userPlan: PlanType,\n  feature: keyof FeatureLimits\n): boolean {\n  const limits = PLAN_FEATURES[userPlan]\n  return limits[feature] === true || limits[feature] !== null\n}\n\nexport function getUserFeatureLimit(\n  userPlan: PlanType,\n  feature: keyof FeatureLimits\n): number | boolean | string | null {\n  return PLAN_FEATURES[userPlan][feature]\n}\n\nexport function checkLimit(\n  currentCount: number,\n  userPlan: PlanType,\n  feature: 'maxLinks' | 'maxRaces' | 'maxSponsors' | 'maxMedia'\n): { canAdd: boolean; limit: number; remaining?: number } {\n  const limit = getUserFeatureLimit(userPlan, feature) as number\n  \n  if (limit === -1) {\n    return { canAdd: true, limit: -1 } // Illimit√©\n  }\n  \n  const remaining = limit - currentCount\n  return {\n    canAdd: currentCount < limit,\n    limit,\n    remaining: Math.max(0, remaining)\n  }\n}\n\n// Fonction utilitaire pour v√©rifier si un utilisateur peut ajouter un √©l√©ment\nexport function canAddItem(\n  currentCount: number,\n  userPlan: PlanType,\n  itemType: 'links' | 'races' | 'sponsors' | 'media'\n): boolean {\n  const featureMap = {\n    links: 'maxLinks' as const,\n    races: 'maxRaces' as const,\n    sponsors: 'maxSponsors' as const,\n    media: 'maxMedia' as const\n  }\n  \n  const { canAdd } = checkLimit(currentCount, userPlan, featureMap[itemType])\n  return canAdd\n}\n\n// Fonction pour obtenir le message d'erreur de limite\nexport function getLimitMessage(\n  userPlan: PlanType,\n  itemType: 'links' | 'races' | 'sponsors' | 'media'\n): string {\n  const planNames: Record<PlanType, string> = {\n    [PlanType.FREE]: \"Free\",\n    [PlanType.PRO]: \"Pro\",\n    [PlanType.ELITE]: \"Elite\"\n  }\n  \n  const itemNames = {\n    links: \"liens\",\n    races: \"comp√©titions\", \n    sponsors: \"sponsors\",\n    media: \"m√©dias\"\n  }\n  \n  const limit = getUserFeatureLimit(userPlan, `max${itemType.charAt(0).toUpperCase() + itemType.slice(1)}` as keyof FeatureLimits) as number\n  \n  if (limit === -1) return \"\" // Illimit√©\n  \n  return `Limite atteinte (${limit} ${itemNames[itemType]} pour le plan ${planNames[userPlan]}). Upgrade vers Pro ou Elite pour plus de ${itemNames[itemType]}.`\n}\n","size_bytes":4185},"promo-codes/validate/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\n// Codes promo pr√©d√©finis\nconst PROMO_CODES = {\n  \"ELITE\": {\n    type: \"plan_upgrade\",\n    plan: \"ATHLETE_PRO\",\n    duration: null, // Acc√®s permanent\n    discount: 0,\n    description: \"Acc√®s Pro complet\"\n  },\n  \"ATHLINK100\": {\n    type: \"trial\",\n    plan: \"ATHLETE_PRO\", \n    duration: 30, // 30 jours\n    discount: 0,\n    description: \"1 mois offert Pro\"\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { code } = await request.json()\n\n    if (!code) {\n      return NextResponse.json({ error: \"Code promo requis\" }, { status: 400 })\n    }\n\n    const promoCode = PROMO_CODES[code.toUpperCase() as keyof typeof PROMO_CODES]\n\n    if (!promoCode) {\n      return NextResponse.json({ \n        error: \"Code promo invalide\",\n        valid: false \n      }, { status: 404 })\n    }\n\n    // V√©rifier si le code a d√©j√† √©t√© utilis√© (optionnel - pour limiter l'usage)\n    // Pour l'instant, on autorise l'usage multiple\n    \n    return NextResponse.json({\n      valid: true,\n      code: code.toUpperCase(),\n      type: promoCode.type,\n      plan: promoCode.plan,\n      duration: promoCode.duration,\n      discount: promoCode.discount,\n      description: promoCode.description\n    })\n\n  } catch (error) {\n    console.error(\"Erreur validation code promo:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":1459},"components/ui-pro/page-transition.tsx":{"content":"\"use client\"\n\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { usePathname } from \"next/navigation\"\n\ninterface PageTransitionProps {\n  children: React.ReactNode\n}\n\nexport function PageTransition({ children }: PageTransitionProps) {\n  const pathname = usePathname()\n\n  return (\n    <AnimatePresence mode=\"wait\">\n      <motion.div\n        key={pathname}\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        exit={{ opacity: 0, y: -20 }}\n        transition={{\n          duration: 0.3,\n          ease: \"easeInOut\"\n        }}\n      >\n        {children}\n      </motion.div>\n    </AnimatePresence>\n  )\n}\n","size_bytes":647},"components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n","size_bytes":962},"components/ui-pro/athlete-stats.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { TrendingUp, Award, Target, Zap } from \"lucide-react\"\n\ninterface AthleteStatsProps {\n  stats?: {\n    totalDistance?: number\n    totalRaces?: number\n    totalPodiums?: number\n    bestTime?: string\n    [key: string]: any\n  }\n}\n\nexport function AthleteStats({ stats }: AthleteStatsProps) {\n  if (!stats) return null\n\n  const statCards = [\n    {\n      label: \"Distance Totale\",\n      value: stats.totalDistance ? `${stats.totalDistance} km` : null,\n      icon: TrendingUp,\n      gradient: \"from-primary-500 to-primary-600\",\n      color: \"text-primary-600\"\n    },\n    {\n      label: \"Courses\",\n      value: stats.totalRaces ? stats.totalRaces : null,\n      icon: Target,\n      gradient: \"from-success-500 to-success-600\",\n      color: \"text-success-600\"\n    },\n    {\n      label: \"Podiums\",\n      value: stats.totalPodiums ? stats.totalPodiums : null,\n      icon: Award,\n      gradient: \"from-warning-500 to-warning-600\",\n      color: \"text-warning-600\"\n    },\n    {\n      label: \"Meilleur Temps\",\n      value: stats.bestTime || null,\n      icon: Zap,\n      gradient: \"from-accent-500 to-accent-600\",\n      color: \"text-accent-600\"\n    },\n  ].filter(stat => stat.value !== null)\n\n  if (statCards.length === 0) return null\n\n  return (\n    <motion.section\n      initial={{ y: 20, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      transition={{ duration: 0.5 }}\n      className=\"mb-8 md:mb-12\"\n    >\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4\">\n        {statCards.map((stat, index) => (\n          <motion.div\n            key={stat.label}\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: index * 0.1, type: \"spring\", damping: 15 }}\n            whileHover={{ y: -4, scale: 1.02 }}\n            className=\"relative group\"\n          >\n            {/* Card */}\n            <div className=\"bg-white rounded-2xl shadow-standard hover:shadow-elevated p-5 md:p-6 transition-all duration-300 border-2 border-transparent group-hover:border-gray-100\">\n              {/* Icon */}\n              <div className={`inline-flex p-2.5 md:p-3 rounded-xl bg-gradient-to-br ${stat.gradient} mb-3 md:mb-4 shadow-standard`}>\n                <stat.icon className=\"w-4 h-4 md:w-5 md:h-5 text-gray-900\" />\n              </div>\n\n              {/* Value */}\n              <motion.div\n                initial={{ scale: 1 }}\n                whileInView={{ scale: [1, 1.1, 1] }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.5, delay: index * 0.1 + 0.3 }}\n              >\n                <p className={`text-2xl md:text-3xl lg:text-4xl font-black mb-1 md:mb-2 ${stat.color}`}>\n                  {stat.value}\n                </p>\n              </motion.div>\n\n              {/* Label */}\n              <p className=\"text-xs md:text-sm font-semibold text-gray-600 uppercase tracking-wide\">\n                {stat.label}\n              </p>\n\n              {/* Animated bottom border */}\n              <motion.div\n                className={`absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r ${stat.gradient} rounded-b-2xl`}\n                initial={{ scaleX: 0 }}\n                whileInView={{ scaleX: 1 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.6, delay: index * 0.1 + 0.2 }}\n                style={{ originX: 0 }}\n              />\n            </div>\n          </motion.div>\n        ))}\n      </div>\n    </motion.section>\n  )\n}\n\n","size_bytes":3545},"signup/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { hash } from \"bcryptjs\"\nimport { prisma } from \"@/lib/db\"\nimport { signupSchema, mapSportToEnum, createStatsWithOriginalSport } from \"@/lib/validations\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const validatedData = signupSchema.parse(body)\n\n    // Check if email exists\n    const existingEmail = await prisma.user.findUnique({\n      where: { email: validatedData.email }\n    })\n\n    if (existingEmail) {\n      return NextResponse.json(\n        { error: \"Cet email est d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    // Check if username exists\n    const existingUsername = await prisma.profile.findUnique({\n      where: { username: validatedData.username }\n    })\n\n    if (existingUsername) {\n      return NextResponse.json(\n        { error: \"Ce nom d'utilisateur est d√©j√† pris\" },\n        { status: 400 }\n      )\n    }\n\n    // Hash password\n    const hashedPassword = await hash(validatedData.password, 12)\n\n    // Create user and profile\n    const user = await prisma.user.create({\n      data: {\n        email: validatedData.email,\n        name: validatedData.name,\n        password: hashedPassword,\n        profile: {\n          create: {\n            username: validatedData.username,\n            displayName: validatedData.name,\n            sport: mapSportToEnum(validatedData.sport),\n            stats: createStatsWithOriginalSport(null, validatedData.sport),\n            plan: \"FREE\"\n          }\n        }\n      },\n      include: {\n        profile: true\n      }\n    })\n\n    return NextResponse.json({\n      user: {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        username: user.profile?.username\n      }\n    }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"Signup error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json(\n      { error: \"Erreur lors de la cr√©ation du compte\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2168},"components/ui-pro/linktree-header.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { MapPin, Instagram, Youtube } from \"lucide-react\"\nimport { ProfilePlanBadge } from \"./plan-badge\"\nimport { PlanType } from \"@/lib/features\"\n\ninterface LinktreeHeaderProps {\n  displayName: string\n  bio: string | null\n  location: string | null\n  sport: string\n  instagram: string | null\n  strava: string | null\n  youtube: string | null\n  tiktok: string | null\n  plan?: PlanType\n}\n\nexport function LinktreeHeader({\n  displayName,\n  bio,\n  location,\n  sport,\n  instagram,\n  strava,\n  youtube,\n  tiktok,\n  plan = PlanType.FREE\n}: LinktreeHeaderProps) {\n  const socialLinks = [\n    { icon: Instagram, url: instagram ? `https://instagram.com/${instagram}` : null },\n    { icon: StravaIcon, url: strava },\n    { icon: Youtube, url: youtube },\n    { icon: TikTokIcon, url: tiktok ? `https://tiktok.com/@${tiktok}` : null },\n  ].filter(link => link.url)\n\n  return (\n    <div className=\"text-center mb-8\">\n      {/* Sport Badge - Superpos√© sur la photo de couverture */}\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.1 }}\n        className=\"inline-block mb-6\"\n      >\n        <div className=\"backdrop-blur-xl bg-black/60 border border-white/20 rounded-full px-4 py-2 shadow-lg\">\n          <span className=\"text-sm font-bold text-white whitespace-nowrap\">\n            {sport}\n          </span>\n        </div>\n      </motion.div>\n\n      {/* Name - Style GetAllMyLinks */}\n      <motion.h1\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.2 }}\n        className=\"text-4xl md:text-5xl font-bold text-white mb-4\"\n      >\n        {displayName}\n      </motion.h1>\n\n      {/* Status Badge - Style exact de l'image */}\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        transition={{ delay: 0.25 }}\n        className=\"inline-flex items-center gap-2 bg-green-500/20 border border-green-500/30 rounded-full px-4 py-2 mb-4\"\n      >\n        <div className=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n        <span className=\"text-sm font-medium text-green-400\">Active now</span>\n      </motion.div>\n\n      {/* Plan Badge */}\n      <ProfilePlanBadge plan={plan} className=\"mb-6\" />\n\n      {/* Bio */}\n      {bio && (\n        <motion.p\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.3 }}\n          className=\"text-base text-gray-200 mb-6 max-w-lg mx-auto leading-relaxed backdrop-blur-sm bg-black/20 rounded-lg p-4\"\n        >\n          {bio}\n        </motion.p>\n      )}\n\n      {/* Location */}\n      {location && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.35 }}\n          className=\"flex items-center justify-center gap-2 text-base text-gray-300 mb-8\"\n        >\n          <MapPin className=\"w-5 h-5\" />\n          <span>{location}</span>\n        </motion.div>\n      )}\n\n      {/* Social Links - Style GetAllMyLinks */}\n      {socialLinks.length > 0 && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          transition={{ delay: 0.4 }}\n          className=\"flex gap-4 justify-center\"\n        >\n          {socialLinks.map((link, index) => (\n            <motion.a\n              key={index}\n              href={link.url!}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.5 + index * 0.05, type: \"spring\", stiffness: 200 }}\n              whileHover={{ scale: 1.1, y: -2 }}\n              whileTap={{ scale: 0.95 }}\n              className=\"backdrop-blur-xl bg-white/20 hover:bg-white/30 border border-white/30 hover:border-white/40 w-14 h-14 rounded-xl flex items-center justify-center transition-all shadow-lg\"\n            >\n              <link.icon className=\"w-6 h-6 text-white\" />\n            </motion.a>\n          ))}\n        </motion.div>\n      )}\n    </div>\n  )\n}\n\nfunction StravaIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169\" />\n    </svg>\n  )\n}\n\nfunction TikTokIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\"/>\n    </svg>\n  )\n}\n\n","size_bytes":4841},"components/ui-pro/linktree-footer.tsx":{"content":"\"use client\"\n\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\n\nexport function LinktreeFooter() {\n  return (\n    <motion.footer\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ delay: 0.8 }}\n      className=\"text-center pt-8 border-t border-yellow-500/10\"\n    >\n      <p className=\"text-xs text-gray-500\">\n        Cr√©√© avec{' '}\n        <Link \n          href=\"/\" \n          className=\"text-yellow-500 hover:text-yellow-400 font-semibold transition-colors inline-flex items-center gap-1\"\n        >\n          Athlink\n          <span className=\"inline-block group-hover:translate-x-0.5 transition-transform\">‚Üí</span>\n        </Link>\n      </p>\n    </motion.footer>\n  )\n}\n\n","size_bytes":726},"components/HeroShowcase.tsx":{"content":"\"use client\";\n\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport Image from \"next/image\";\nimport { motion, AnimatePresence } from \"framer-motion\";\n\ntype HeroShowcaseProps = {\n  images: string[];\n  intervalMs?: number;\n};\n\nexport default function HeroShowcase({ images, intervalMs = 3500 }: HeroShowcaseProps) {\n  const safeImages = useMemo(() => (images && images.length > 0 ? images : [\n    \"/next.svg\",\n    \"/vercel.svg\",\n  ]), [images]);\n\n  const [index, setIndex] = useState(0);\n  const timerRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (timerRef.current) clearInterval(timerRef.current);\n    timerRef.current = setInterval(() => {\n      setIndex((prev) => (prev + 1) % safeImages.length);\n    }, intervalMs);\n    return () => {\n      if (timerRef.current) clearInterval(timerRef.current);\n    };\n  }, [safeImages.length, intervalMs]);\n\n  return (\n    <motion.div\n      className=\"relative w-full aspect-[16/10]\"\n      animate={{ y: [0, -6, 0], rotate: [0, 0.3, 0] }}\n      transition={{ duration: 6, repeat: Infinity, ease: \"easeInOut\" }}\n    >\n      {/* Outer rounded frame */}\n      <div className=\"absolute inset-0 rounded-[32px] bg-gradient-to-b from-gray-100 to-gray-200 border border-gray-300 shadow-2xl overflow-hidden\" />\n\n      {/* Inner inset frame to mimic device/card */}\n      <div className=\"absolute inset-0 rounded-[28px] bg-white/70 backdrop-blur-md border border-gray-200 overflow-hidden\" />\n\n      {/* Image area */}\n      <div className=\"absolute inset-0 rounded-[22px] overflow-hidden bg-white\">\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={index}\n            initial={{ opacity: 0.2, scale: 1.02 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.98 }}\n            transition={{ duration: 0.5 }}\n            className=\"w-full h-full relative\"\n          >\n            <Image\n              src={safeImages[index]}\n              alt=\"aper√ßu Athlink\"\n              fill\n              sizes=\"(min-width: 1024px) 560px, 50vw\"\n              className=\"object-contain\"\n              priority\n              unoptimized\n              onError={(e) => {\n                console.error('Erreur chargement image:', safeImages[index]);\n                // Fallback vers une image par d√©faut\n                const target = e.target as HTMLImageElement;\n                target.src = '/next.svg';\n              }}\n            />\n          </motion.div>\n        </AnimatePresence>\n      </div>\n\n      {/* Subtle gloss/edge */}\n      <div className=\"pointer-events-none absolute inset-0 rounded-[32px] ring-1 ring-black/5\" />\n    </motion.div>\n  );\n}\n\n\n","size_bytes":2677},"components/ui-pro/media-gallery.tsx":{"content":"\"use client\"\n\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { useState } from \"react\"\nimport { X, Play, Maximize2 } from \"lucide-react\"\n\ninterface Media {\n  id: string\n  type: string\n  url: string\n  title: string | null\n  thumbnail: string | null\n}\n\ninterface MediaGalleryProps {\n  media: Media[]\n}\n\nexport function MediaGallery({ media }: MediaGalleryProps) {\n  const [selectedMedia, setSelectedMedia] = useState<Media | null>(null)\n\n  return (\n    <>\n      <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4\">\n        {media.map((item, index) => (\n          <MediaCard\n            key={item.id}\n            media={item}\n            index={index}\n            onClick={() => setSelectedMedia(item)}\n          />\n        ))}\n      </div>\n\n      {/* Lightbox */}\n      <AnimatePresence>\n        {selectedMedia && (\n          <MediaLightbox\n            media={selectedMedia}\n            onClose={() => setSelectedMedia(null)}\n          />\n        )}\n      </AnimatePresence>\n    </>\n  )\n}\n\nfunction MediaCard({ media, index, onClick }: { media: Media; index: number; onClick: () => void }) {\n  const isVideo = media.type === 'VIDEO' || media.type === 'YOUTUBE'\n  const [isHovered, setIsHovered] = useState(false)\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.3, delay: index * 0.05 }}\n      whileHover={{ y: -4 }}\n      className=\"relative aspect-square rounded-2xl overflow-hidden group cursor-pointer shadow-standard hover:shadow-elevated transition-all\"\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      onClick={onClick}\n    >\n      <div className=\"relative w-full h-full\">\n        <Image\n          src={media.type === 'YOUTUBE' ? media.thumbnail! : media.url}\n          alt={media.title || 'Media'}\n          fill\n          className=\"object-cover transition-transform duration-500 group-hover:scale-110\"\n          sizes=\"(max-width: 768px) 50vw, 33vw\"\n        />\n      </div>\n\n      {/* Gradient overlay */}\n      <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n\n      {/* Video indicator */}\n      {isVideo && (\n        <motion.div\n          className=\"absolute inset-0 flex items-center justify-center\"\n          initial={{ opacity: 0.6 }}\n          animate={{ opacity: isHovered ? 1 : 0.6 }}\n        >\n          <motion.div\n            className=\"w-14 h-14 md:w-16 md:h-16 rounded-full bg-white/95 backdrop-blur-sm flex items-center justify-center shadow-elevated\"\n            animate={{\n              scale: isHovered ? 1.1 : 1,\n            }}\n            transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n          >\n            <Play className=\"w-6 h-6 md:w-7 md:h-7 text-gray-900 ml-1\" fill=\"currentColor\" />\n          </motion.div>\n        </motion.div>\n      )}\n\n      {/* Expand icon for images */}\n      {!isVideo && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: isHovered ? 1 : 0, scale: isHovered ? 1 : 0.8 }}\n          className=\"absolute top-3 right-3\"\n        >\n          <div className=\"p-2 rounded-full bg-white/90 backdrop-blur-sm shadow-standard\">\n            <Maximize2 className=\"w-4 h-4 text-gray-900\" />\n          </div>\n        </motion.div>\n      )}\n\n      {/* Title overlay */}\n      {media.title && (\n        <motion.div\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: isHovered ? 0 : 20, opacity: isHovered ? 1 : 0 }}\n          className=\"absolute bottom-0 left-0 right-0 p-3 md:p-4\"\n        >\n          <p className=\"text-white font-semibold text-xs md:text-sm line-clamp-2 drop-shadow-lg\">\n            {media.title}\n          </p>\n        </motion.div>\n      )}\n    </motion.div>\n  )\n}\n\nfunction MediaLightbox({ media, onClose }: { media: Media; onClose: () => void }) {\n  const isVideo = media.type === 'VIDEO' || media.type === 'YOUTUBE'\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/95 backdrop-blur-sm p-4\"\n      onClick={onClose}\n    >\n      {/* Close button */}\n      <motion.button\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        exit={{ scale: 0 }}\n        onClick={onClose}\n        className=\"absolute top-4 right-4 z-10 p-3 rounded-full bg-white/10 backdrop-blur-md hover:bg-white/20 transition-colors\"\n      >\n        <X className=\"w-6 h-6 text-white\" />\n      </motion.button>\n\n      {/* Media content */}\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.9, opacity: 0 }}\n        transition={{ type: \"spring\", damping: 25 }}\n        className=\"relative max-w-6xl w-full max-h-[90vh]\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {isVideo ? (\n          <div className=\"relative w-full aspect-video rounded-2xl overflow-hidden shadow-floating\">\n            {media.type === 'YOUTUBE' ? (\n              <iframe\n                src={media.url}\n                className=\"w-full h-full\"\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n            ) : (\n              <video src={media.url} controls className=\"w-full h-full\" />\n            )}\n          </div>\n        ) : (\n          <div className=\"relative w-full h-full flex items-center justify-center\">\n            <Image\n              src={media.url}\n              alt={media.title || 'Media'}\n              width={1920}\n              height={1080}\n              className=\"max-h-[90vh] w-auto h-auto object-contain rounded-2xl shadow-floating\"\n            />\n          </div>\n        )}\n\n        {/* Title */}\n        {media.title && (\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"mt-4 text-center\"\n          >\n            <p className=\"text-white text-lg font-semibold\">{media.title}</p>\n          </motion.div>\n        )}\n      </motion.div>\n    </motion.div>\n  )\n}\n\n","size_bytes":6378},"(auth)/login/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { signIn } from \"next-auth/react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { loginSchema, type LoginInput } from \"@/lib/validations\"\nimport { toast } from \"sonner\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport { ArrowRight, Zap } from \"lucide-react\"\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const form = useForm<LoginInput>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    }\n  })\n\n  async function onSubmit(values: LoginInput) {\n    setIsLoading(true)\n    \n    try {\n      const result = await signIn(\"credentials\", {\n        email: values.email,\n        password: values.password,\n        redirect: false,\n      })\n\n      if (result?.error) {\n        toast.error(\"Email ou mot de passe incorrect\")\n        return\n      }\n\n      toast.success(\"Connexion r√©ussie !\")\n      router.push(\"/dashboard\")\n      router.refresh()\n    } catch {\n      toast.error(\"Une erreur est survenue\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col lg:flex-row\">\n      {/* Left Panel - Form */}\n      <div className=\"flex-1 flex items-center justify-center p-4 sm:p-6 lg:p-8 bg-white relative\">\n        {/* Logo */}\n        <Link href=\"/\" className=\"absolute top-4 sm:top-6 lg:top-10 left-4 sm:left-6 lg:left-10 flex items-center gap-2\">\n          <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-hero\" />\n          <span className=\"font-black text-xl sm:text-2xl bg-gradient-hero bg-clip-text text-transparent\">\n            Athlink\n          </span>\n        </Link>\n\n        {/* Form Container */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"w-full max-w-md\"\n        >\n          <div className=\"mb-8 sm:mb-10\">\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-primary-600 to-quaternary-600 bg-clip-text text-transparent mb-3 sm:mb-4\">\n              Bon retour\n            </h1>\n            <p className=\"text-base sm:text-lg text-gray-600\">\n              Connecte-toi √† ton profil athl√®te\n            </p>\n          </div>\n\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"email\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Email\n              </Label>\n              <Input \n                id=\"email\" \n                type=\"email\"\n                {...form.register(\"email\")} \n                placeholder=\"thomas@example.com\"\n                className=\"h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.email && (\n                <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.email.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"password\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Mot de passe\n              </Label>\n              <Input \n                id=\"password\" \n                type=\"password\"\n                {...form.register(\"password\")} \n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                className=\"h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.password && (\n                <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.password.message}\n                </p>\n              )}\n            </div>\n\n            <Button \n              type=\"submit\" \n              disabled={isLoading}\n              className=\"w-full h-14 bg-gradient-ocean hover:shadow-glow-blue text-gray-900 font-bold text-lg rounded-full transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-5 h-5 border-2 border-gray-900 border-t-transparent rounded-full animate-spin\" />\n                  Connexion...\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2\">\n                  Se connecter\n                  <ArrowRight className=\"w-5 h-5\" />\n                </div>\n              )}\n            </Button>\n          </form>\n\n          {/* Google Sign In - Affich√© seulement si configur√© */}\n          {process.env.NEXT_PUBLIC_GOOGLE_OAUTH_ENABLED === \"true\" && (\n            <>\n              {/* Separator */}\n              <div className=\"flex items-center gap-4 my-6\">\n                <div className=\"flex-1 h-px bg-gray-200\" />\n                <span className=\"text-sm text-gray-500 font-medium\">OU</span>\n                <div className=\"flex-1 h-px bg-gray-200\" />\n              </div>\n\n              {/* Google Sign In */}\n              <button\n                onClick={() => signIn(\"google\", { callbackUrl: \"/dashboard\" })}\n                className=\"w-full h-14 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold text-base rounded-full transition-all hover:shadow-md flex items-center justify-center gap-3\"\n              >\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                  <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                  <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                  <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                </svg>\n                Continuer avec Google\n              </button>\n            </>\n          )}\n\n          <p className=\"text-center text-sm text-gray-600 mt-8\">\n            Pas encore de compte ?{\" \"}\n            <Link href=\"/signup\" className=\"text-primary-600 hover:text-primary-700 font-bold transition-colors\">\n              Cr√©er un compte\n            </Link>\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Right Panel - Visual */}\n      <div className=\"hidden lg:flex flex-1 relative overflow-hidden min-h-[200px] lg:min-h-0\">\n        <div className=\"absolute inset-0 bg-gradient-hero\" />\n        \n        {/* Animated shapes */}\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none opacity-20\">\n          <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              rotate: [0, 90, 0],\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"linear\"\n            }}\n            className=\"absolute top-1/4 right-1/4 w-96 h-96 bg-white rounded-full blur-3xl\"\n          />\n        </div>\n\n        {/* Content */}\n        <div className=\"relative z-10 flex items-center justify-center p-16 text-gray-900\">\n          <div className=\"max-w-lg\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className=\"w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center mb-8\"\n            >\n              <Zap className=\"w-10 h-10\" />\n            </motion.div>\n\n            <motion.h2\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.3 }}\n              className=\"text-5xl font-black mb-6 leading-tight\"\n            >\n              Reprends l√† o√π tu t&apos;es arr√™t√©\n            </motion.h2>\n\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              className=\"text-xl opacity-90 leading-relaxed mb-8\"\n            >\n              Acc√®de √† ton dashboard, g√®re tes liens, planifie tes courses et bien plus encore.\n            </motion.p>\n\n            {/* Stats */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.5 }}\n              className=\"flex gap-12\"\n            >\n              {[\n                { value: \"20K+\", label: \"Athl√®tes\" },\n                { value: \"100%\", label: \"Gratuit\" },\n              ].map((stat, i) => (\n                <div key={i}>\n                  <div className=\"text-4xl font-black mb-1\">{stat.value}</div>\n                  <div className=\"text-sm opacity-70 uppercase tracking-wider font-semibold\">\n                    {stat.label}\n                  </div>\n                </div>\n              ))}\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":9709},"components/ui-pro/click-heatmap.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { \n  MapPin, \n  MousePointer, \n  Eye, \n  Zap,\n  Info,\n  Download,\n  RefreshCw\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface HeatmapPoint {\n  x: number\n  y: number\n  intensity: number\n  clicks: number\n  element?: string\n}\n\ninterface ClickHeatmapProps {\n  data: HeatmapPoint[]\n  profileElements?: {\n    avatar: { x: number; y: number; width: number; height: number }\n    links: Array<{ x: number; y: number; width: number; height: number; title: string }>\n    sponsors: Array<{ x: number; y: number; width: number; height: number }>\n  }\n  className?: string\n}\n\nexport function ClickHeatmap({ data, profileElements, className }: ClickHeatmapProps) {\n  const [showTooltip, setShowTooltip] = useState<{ x: number; y: number; clicks: number; element?: string } | null>(null)\n  const [intensity, setIntensity] = useState(1)\n  const [showGrid, setShowGrid] = useState(false)\n\n  // Calculer les statistiques\n  const totalClicks = data.reduce((sum, point) => sum + point.clicks, 0)\n  const avgClicks = totalClicks / data.length\n  const maxClicks = Math.max(...data.map(p => p.clicks))\n\n  // Grouper les points par zones\n  const topZones = data\n    .sort((a, b) => b.clicks - a.clicks)\n    .slice(0, 5)\n\n  const getHeatColor = (intensity: number) => {\n    if (intensity > 0.8) return \"bg-red-500\"\n    if (intensity > 0.6) return \"bg-orange-500\"\n    if (intensity > 0.4) return \"bg-yellow-500\"\n    if (intensity > 0.2) return \"bg-green-500\"\n    return \"bg-blue-500\"\n  }\n\n  const handleExport = () => {\n    const csvRows = []\n    \n    // En-t√™te ludique\n    csvRows.push('üî• HEATMAP DE VOS CLICS - ANALYSE SIMPLIFI√âE')\n    csvRows.push(`üìÖ G√©n√©r√© le ${new Date().toLocaleDateString('fr-FR', { day: 'numeric', month: 'long', year: 'numeric' })}`)\n    csvRows.push('')\n    \n    // R√©sum√© rapide\n    csvRows.push('üìä R√âSUM√â EN UN COUP D\\'≈íIL')\n    csvRows.push('Ce qui compte vraiment:')\n    csvRows.push(`‚úÖ ${totalClicks} clics au total sur votre profil`)\n    csvRows.push(`üéØ ${maxClicks} clics sur votre zone la plus populaire`)\n    csvRows.push(`üìà ${avgClicks.toFixed(0)} clics en moyenne par zone`)\n    csvRows.push(`üìç ${data.length} zones diff√©rentes ont √©t√© cliqu√©es`)\n    csvRows.push('')\n    \n    // Top 5 avec √©mojis et explications\n    csvRows.push('üèÜ TOP 5 DES ZONES LES PLUS CLIQU√âES')\n    csvRows.push('Vos visiteurs adorent ces √©l√©ments:')\n    csvRows.push('')\n    csvRows.push(['Classement', 'Nombre de Clics', 'Emplacement', 'Type d\\'√âl√©ment', 'Conseil'].join(','))\n    \n    topZones.forEach((zone, index) => {\n      const medals = ['ü•á', 'ü•à', 'ü•â', '4Ô∏è‚É£', '5Ô∏è‚É£']\n      const elementNames: { [key: string]: string } = {\n        'link': 'üîó Lien',\n        'header': 'üë§ En-t√™te',\n        'sponsor': 'üíº Sponsor',\n        'media': 'üì∏ M√©dia',\n        'race': 'üèÉ Course',\n        'unknown': '‚ùì Autre'\n      }\n      const tips = [\n        'C\\'est votre star ! Mettez-le en avant',\n        'Excellent engagement ! Gardez-le visible',\n        'Tr√®s bon r√©sultat ! Optimisez-le encore',\n        'Bon potentiel ! Testez diff√©rentes positions',\n        'Int√©ressant ! Analysez pourquoi √ßa marche'\n      ]\n      \n      csvRows.push([\n        `${medals[index]} ${index + 1}`,\n        `${zone.clicks} clics`,\n        `Position: ${zone.x.toFixed(0)}% horizontal, ${zone.y.toFixed(0)}% vertical`,\n        elementNames[zone.element || 'unknown'] || '‚ùì Autre',\n        tips[index]\n      ].join(','))\n    })\n    \n    csvRows.push('')\n    csvRows.push('üí° CONSEILS D\\'OPTIMISATION')\n    csvRows.push('Comment am√©liorer votre profil:')\n    \n    // Conseils personnalis√©s bas√©s sur les donn√©es\n    if (maxClicks > avgClicks * 3) {\n      csvRows.push('‚ö° Vous avez une zone super performante ! Dupliquez ce qui marche ailleurs')\n    }\n    if (data.length > 15) {\n      csvRows.push('üëÄ Beaucoup de zones cliqu√©es = profil engageant ! Continuez comme √ßa')\n    }\n    if (totalClicks > 100) {\n      csvRows.push('üéâ Excellent trafic ! Vos visiteurs sont actifs')\n    }\n    \n    csvRows.push('üìç Placez vos √©l√©ments importants dans les zones les plus cliqu√©es')\n    csvRows.push('üé® Testez diff√©rentes dispositions et comparez les r√©sultats')\n    csvRows.push('üîÑ Exportez r√©guli√®rement pour suivre l\\'√©volution')\n    csvRows.push('')\n    \n    // Donn√©es d√©taill√©es pour les curieux\n    csvRows.push('üìã DONN√âES D√âTAILL√âES (pour les experts)')\n    csvRows.push(['Zone', 'Clics', 'Position X', 'Position Y', 'Intensit√©', 'Type'].join(','))\n    \n    data.forEach((point, index) => {\n      const elementEmojis: { [key: string]: string } = {\n        'link': 'üîó',\n        'header': 'üë§',\n        'sponsor': 'üíº',\n        'media': 'üì∏',\n        'race': 'üèÉ',\n        'unknown': '‚ùì'\n      }\n      \n      csvRows.push([\n        `Zone ${index + 1}`,\n        point.clicks,\n        `${point.x.toFixed(1)}%`,\n        `${point.y.toFixed(1)}%`,\n        `${(point.intensity * 100).toFixed(0)}%`,\n        `${elementEmojis[point.element || 'unknown']} ${point.element || 'autre'}`\n      ].join(','))\n    })\n    \n    csvRows.push('')\n    csvRows.push('üìñ L√âGENDE')\n    csvRows.push('Position X: Distance depuis la gauche (0% = tout √† gauche, 100% = tout √† droite)')\n    csvRows.push('Position Y: Distance depuis le haut (0% = tout en haut, 100% = tout en bas)')\n    csvRows.push('Intensit√©: Popularit√© relative de la zone (100% = zone la plus cliqu√©e)')\n    csvRows.push('')\n    csvRows.push('üí™ Besoin d\\'aide ? Contactez le support AthLink !')\n    csvRows.push('üöÄ Continuez √† optimiser votre profil pour maximiser l\\'engagement !')\n    \n    // Cr√©er et t√©l√©charger\n    const csv = csvRows.join('\\n')\n    const blob = new Blob(['\\ufeff' + csv], { type: 'text/csv;charset=utf-8;' }) // BOM pour Excel\n    const url = URL.createObjectURL(blob)\n    const link = document.createElement('a')\n    link.href = url\n    link.download = `athlink-heatmap-${new Date().toISOString().split('T')[0]}.csv`\n    document.body.appendChild(link)\n    link.click()\n    document.body.removeChild(link)\n    URL.revokeObjectURL(url)\n  }\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Header avec contr√¥les */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900 flex items-center gap-2\">\n            <MapPin className=\"w-5 h-5 text-red-500\" />\n            Heatmap des clics\n          </h3>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Visualisation interactive des zones les plus cliqu√©es\n          </p>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setShowGrid(!showGrid)}\n          >\n            <Eye className=\"w-4 h-4 mr-2\" />\n            {showGrid ? \"Masquer\" : \"Afficher\"} grille\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleExport}\n          >\n            <Download className=\"w-4 h-4 mr-2\" />\n            Exporter\n          </Button>\n        </div>\n      </div>\n\n      {/* Statistiques rapides */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Total de clics</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{totalClicks.toLocaleString('fr-FR')}</p>\n              </div>\n              <MousePointer className=\"w-8 h-8 text-blue-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Moyenne par zone</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{avgClicks.toFixed(1)}</p>\n              </div>\n              <Zap className=\"w-8 h-8 text-yellow-500\" />\n            </div>\n          </CardContent>\n        </Card>\n        \n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600\">Zone la plus active</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{maxClicks}</p>\n              </div>\n              <MapPin className=\"w-8 h-8 text-red-500\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Heatmap principale */}\n        <div className=\"lg:col-span-2\">\n          <Card>\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"text-lg\">Carte de chaleur</CardTitle>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-xs text-gray-600\">Intensit√©:</span>\n                  <input\n                    type=\"range\"\n                    min=\"0.5\"\n                    max=\"2\"\n                    step=\"0.1\"\n                    value={intensity}\n                    onChange={(e) => setIntensity(parseFloat(e.target.value))}\n                    className=\"w-24\"\n                  />\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"relative bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-6 h-[600px] overflow-hidden\">\n                {/* Grille optionnelle */}\n                {showGrid && (\n                  <div className=\"absolute inset-0 grid grid-cols-10 grid-rows-10 opacity-20\">\n                    {Array.from({ length: 100 }).map((_, i) => (\n                      <div key={i} className=\"border border-gray-300\" />\n                    ))}\n                  </div>\n                )}\n\n                {/* Simulation du profil */}\n                <div className=\"relative w-full h-full bg-white rounded-lg shadow-lg overflow-hidden\">\n                  {/* Avatar simul√© */}\n                  <div className=\"absolute top-8 left-1/2 -translate-x-1/2 w-24 h-24 bg-gray-200 rounded-full\" />\n                  \n                  {/* Nom simul√© */}\n                  <div className=\"absolute top-36 left-1/2 -translate-x-1/2 w-48 h-8 bg-gray-300 rounded\" />\n                  \n                  {/* Bio simul√©e */}\n                  <div className=\"absolute top-48 left-1/2 -translate-x-1/2 w-64 h-12 bg-gray-200 rounded\" />\n                  \n                  {/* Liens simul√©s */}\n                  <div className=\"absolute top-64 left-1/2 -translate-x-1/2 w-80 space-y-3\">\n                    {[1, 2, 3, 4].map((i) => (\n                      <div key={i} className=\"w-full h-14 bg-gray-200 rounded-lg\" />\n                    ))}\n                  </div>\n\n                  {/* Points de chaleur */}\n                  {data.map((point, index) => (\n                    <motion.div\n                      key={index}\n                      className={cn(\n                        \"absolute rounded-full cursor-pointer transition-all\",\n                        getHeatColor(point.intensity)\n                      )}\n                      style={{\n                        left: `${point.x}%`,\n                        top: `${point.y}%`,\n                        width: `${Math.max(12, point.intensity * 30 * intensity)}px`,\n                        height: `${Math.max(12, point.intensity * 30 * intensity)}px`,\n                        transform: \"translate(-50%, -50%)\",\n                        opacity: 0.4 + (point.intensity * 0.4)\n                      }}\n                      animate={{\n                        scale: [1, 1.1, 1],\n                      }}\n                      transition={{\n                        duration: 2 + (index % 3),\n                        repeat: Infinity,\n                        delay: index * 0.05\n                      }}\n                      onMouseEnter={(e) => {\n                        const rect = e.currentTarget.getBoundingClientRect()\n                        setShowTooltip({\n                          x: rect.left + rect.width / 2,\n                          y: rect.top,\n                          clicks: point.clicks,\n                          element: point.element\n                        })\n                      }}\n                      onMouseLeave={() => setShowTooltip(null)}\n                    />\n                  ))}\n\n                  {/* Tooltip */}\n                  <AnimatePresence>\n                    {showTooltip && (\n                      <motion.div\n                        initial={{ opacity: 0, y: 10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: 10 }}\n                        className=\"fixed z-50 bg-gray-900 text-white px-3 py-2 rounded-lg shadow-xl text-sm\"\n                        style={{\n                          left: showTooltip.x,\n                          top: showTooltip.y - 60,\n                          transform: \"translateX(-50%)\"\n                        }}\n                      >\n                        <div className=\"font-semibold\">{showTooltip.clicks} clics</div>\n                        {showTooltip.element && (\n                          <div className=\"text-xs text-gray-300\">{showTooltip.element}</div>\n                        )}\n                      </motion.div>\n                    )}\n                  </AnimatePresence>\n                </div>\n              </div>\n\n              {/* L√©gende */}\n              <div className=\"mt-4 flex items-center justify-center gap-6 text-sm\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-blue-500\" />\n                  <span className=\"text-gray-600\">Faible</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-green-500\" />\n                  <span className=\"text-gray-600\">Moyen</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-yellow-500\" />\n                  <span className=\"text-gray-600\">√âlev√©</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-orange-500\" />\n                  <span className=\"text-gray-600\">Tr√®s √©lev√©</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-4 h-4 rounded-full bg-red-500\" />\n                  <span className=\"text-gray-600\">Maximum</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Top zones */}\n        <div className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Top 5 zones</CardTitle>\n              <p className=\"text-sm text-gray-600\">\n                Zones les plus cliqu√©es\n              </p>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {topZones.map((zone, index) => (\n                <motion.div\n                  key={index}\n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: index * 0.1 }}\n                  className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <Badge className={cn(\n                      \"w-8 h-8 flex items-center justify-center rounded-full\",\n                      index === 0 ? \"bg-yellow-500\" : \"bg-gray-400\"\n                    )}>\n                      {index + 1}\n                    </Badge>\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-900\">\n                        {zone.element || `Zone ${index + 1}`}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">\n                        Position: {zone.x.toFixed(0)}%, {zone.y.toFixed(0)}%\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-lg font-bold text-gray-900\">{zone.clicks}</p>\n                    <p className=\"text-xs text-gray-600\">clics</p>\n                  </div>\n                </motion.div>\n              ))}\n            </CardContent>\n          </Card>\n\n          {/* Info Elite */}\n          <Card className=\"border-gray-800 bg-gradient-to-br from-gray-900 to-black text-white\">\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-start gap-3\">\n                <Info className=\"w-5 h-5 mt-0.5 flex-shrink-0\" />\n                <div className=\"text-sm\">\n                  <p className=\"font-semibold mb-1\">Fonctionnalit√© Elite</p>\n                  <p className=\"text-gray-300 text-xs\">\n                    La heatmap des clics vous permet d'optimiser la disposition de votre profil \n                    en identifiant les zones les plus attractives pour vos visiteurs.\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","size_bytes":17844},"components/ConditionalNavbar.tsx":{"content":"\"use client\";\n\nimport { usePathname } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { Zap } from \"lucide-react\";\nimport { NavBrand } from \"@/components/NavBrand\";\n\nexport function ConditionalNavbar() {\n  const pathname = usePathname();\n  \n  // Afficher uniquement sur la page d'accueil\n  const isHomePage = pathname === '/';\n  \n  if (!isHomePage) {\n    return null;\n  }\n\n  return (\n    <header className=\"sticky top-0 z-50 bg-white border-b border-gray-100\">\n      <div className=\"container mx-auto px-4 sm:px-6 h-16 flex items-center justify-between\">\n        {/* Brand left */}\n        <Link href=\"/\" className=\"flex items-center gap-2\">\n          <div className=\"w-4 h-4 rounded-sm bg-gray-900\" />\n          <NavBrand />\n        </Link>\n\n        {/* Nav */}\n        <nav className=\"hidden md:flex items-center gap-6 text-sm text-gray-700\">\n          <Link href=\"#features\" className=\"hover:text-gray-900\">Caract√©ristiques</Link>\n          <Link href=\"#pricing\" className=\"hover:text-gray-900\">Tarifs</Link>\n        </nav>\n\n        {/* Auth CTA (separated) */}\n        <div className=\"flex items-center gap-3\">\n          <Link href=\"/login\" className=\"hidden sm:inline-flex text-sm text-gray-700 hover:text-gray-900\">\n            Se connecter\n          </Link>\n          <Link href=\"/signup\" className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-900 text-white text-sm font-medium hover:bg-gray-800\">\n            <Zap className=\"w-4 h-4\" />\n            S'inscrire\n          </Link>\n        </div>\n      </div>\n    </header>\n  );\n}\n","size_bytes":1568},"components/ui-pro/empty-state.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { LucideIcon } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface EmptyStateProps {\n  icon: LucideIcon\n  title: string\n  description: string\n  actionLabel?: string\n  onAction?: () => void\n  actionHref?: string\n}\n\nexport function EmptyState({\n  icon: Icon,\n  title,\n  description,\n  actionLabel,\n  onAction,\n  actionHref\n}: EmptyStateProps) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ duration: 0.4 }}\n      className=\"flex flex-col items-center justify-center py-20 text-center\"\n    >\n      {/* Icon */}\n      <motion.div\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\n        className=\"w-24 h-24 rounded-3xl bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center mb-6 shadow-standard\"\n      >\n        <Icon className=\"w-12 h-12 text-gray-400\" />\n      </motion.div>\n\n      {/* Title */}\n      <h3 className=\"text-2xl font-bold text-gray-900 mb-3\">\n        {title}\n      </h3>\n\n      {/* Description */}\n      <p className=\"text-gray-600 max-w-md mb-8\">\n        {description}\n      </p>\n\n      {/* Action */}\n      {(actionLabel && (onAction || actionHref)) && (\n        <Button\n          onClick={onAction}\n          className=\"bg-gradient-ocean hover:shadow-glow-blue text-gray-900 font-bold rounded-full px-8 py-3 transition-all hover:scale-105\"\n          {...(actionHref && { asChild: true })}\n        >\n          {actionHref ? (\n            <a href={actionHref}>{actionLabel}</a>\n          ) : (\n            actionLabel\n          )}\n        </Button>\n      )}\n    </motion.div>\n  )\n}\n","size_bytes":1773},"components/ui-pro/link-card-wrapper.tsx":{"content":"\"use client\"\n\nimport { InteractiveLinkCard } from \"./interactive-link-card\"\n\ninterface LinkCardWrapperProps {\n  id: string\n  title: string\n  description?: string\n  url: string\n  icon?: string\n  clicks: number\n}\n\nexport function LinkCardWrapper({ id, title, description, url, icon, clicks }: LinkCardWrapperProps) {\n  const handleTrackClick = async () => {\n    try {\n      await fetch(`/api/links/${id}/click`, { method: 'POST' })\n    } catch (err) {\n      console.error('Failed to track click', err)\n    }\n  }\n\n  return (\n    <InteractiveLinkCard\n      title={title}\n      description={description}\n      url={url}\n      icon={icon}\n      clicks={clicks}\n      onTrackClick={handleTrackClick}\n    />\n  )\n}\n\n","size_bytes":707},"components/ui-pro/advanced-progress-bar.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\n\ninterface AdvancedProgressBarProps {\n  label: string\n  current: number\n  target: number\n  unit?: string\n  color?: \"blue\" | \"orange\" | \"green\" | \"purple\" | \"red\"\n  size?: \"sm\" | \"md\" | \"lg\"\n  showIcon?: boolean\n  icon?: string\n  description?: string\n}\n\nexport function AdvancedProgressBar({\n  label,\n  current,\n  target,\n  unit = \"\",\n  color = \"blue\",\n  size = \"md\",\n  showIcon = false,\n  icon = \"üìä\",\n  description\n}: AdvancedProgressBarProps) {\n  const percentage = Math.min((current / target) * 100, 100)\n  const isOverTarget = current > target\n  \n  const colorClasses = {\n    blue: {\n      bg: \"from-yellow-400 to-yellow-600\",\n      badge: \"bg-yellow-500\",\n      text: \"text-yellow-600\",\n      glow: \"shadow-yellow-500/25\"\n    },\n    orange: {\n      bg: \"from-yellow-500 to-black\",\n      badge: \"bg-yellow-600\", \n      text: \"text-black\",\n      glow: \"shadow-yellow-600/25\"\n    },\n    green: {\n      bg: \"from-yellow-600 to-gray-800\",\n      badge: \"bg-gray-800\",\n      text: \"text-gray-800\", \n      glow: \"shadow-gray-800/25\"\n    },\n    purple: {\n      bg: \"from-yellow-500 to-black\",\n      badge: \"bg-black\",\n      text: \"text-black\",\n      glow: \"shadow-black/25\"\n    },\n    red: {\n      bg: \"from-yellow-400 to-black\",\n      badge: \"bg-yellow-500\",\n      text: \"text-black\",\n      glow: \"shadow-yellow-500/25\"\n    }\n  }\n\n  const sizeClasses = {\n    sm: {\n      height: \"h-0.5\",\n      text: \"text-xs\",\n      padding: \"py-2\"\n    },\n    md: {\n      height: \"h-1\",\n      text: \"text-sm\", \n      padding: \"py-3\"\n    },\n    lg: {\n      height: \"h-1\",\n      text: \"text-base\",\n      padding: \"py-4\"\n    }\n  }\n\n  const currentColor = colorClasses[color]\n  const currentSize = sizeClasses[size]\n\n  return (\n    <div className={`space-y-1 ${currentSize.padding}`}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          {showIcon && (\n            <span className=\"text-lg\">{icon}</span>\n          )}\n          <div>\n            <h3 className={`font-semibold text-gray-700 ${currentSize.text}`}>\n              {label}\n            </h3>\n            {description && (\n              <p className=\"text-xs text-gray-500 mt-0.5\">{description}</p>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"text-right\">\n          <div className={`font-bold text-gray-900 ${currentSize.text}`}>\n            {current.toLocaleString('fr-FR')}{unit}\n          </div>\n          <div className=\"text-xs text-gray-500\">\n            / {target.toLocaleString('fr-FR')}{unit}\n          </div>\n        </div>\n      </div>\n\n      {/* Progress bar */}\n      <div className=\"relative\">\n        {/* Progress fill only - no background */}\n        <motion.div\n          className={`${currentSize.height} bg-gradient-to-r ${currentColor.bg} rounded-full shadow-sm ${currentColor.glow}`}\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 1.5, ease: \"easeOut\" }}\n        />\n        \n        {/* Over-target glow effect */}\n        {isOverTarget && (\n          <motion.div\n            className={`absolute inset-0 bg-gradient-to-r ${currentColor.bg} opacity-40 rounded-full`}\n            animate={{ \n              opacity: [0.4, 0.7, 0.4],\n              scale: [1, 1.02, 1]\n            }}\n            transition={{ duration: 2, repeat: Infinity }}\n          />\n        )}\n        \n        {/* Animated shimmer */}\n        <motion.div\n          className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent\"\n          animate={{\n            x: [\"-100%\", \"100%\"]\n          }}\n          transition={{\n            duration: 3,\n            repeat: Infinity,\n            repeatDelay: 3,\n            ease: \"easeInOut\"\n          }}\n        />\n\n        {/* Percentage and status */}\n        <div className=\"flex items-center justify-between mt-2\">\n          <div className=\"flex items-center gap-2\">\n            <motion.span\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.8, type: \"spring\" }}\n              className={`text-xs font-bold px-2 py-1 rounded-full text-white ${currentColor.badge}`}\n            >\n              {percentage.toFixed(0)}%\n            </motion.span>\n            \n            {isOverTarget && (\n              <motion.span\n                initial={{ opacity: 0, scale: 0 }}\n                animate={{ opacity: 1, scale: 1 }}\n                transition={{ delay: 1 }}\n                className=\"text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded-full\"\n              >\n                D√©pass√© !\n              </motion.span>\n            )}\n          </div>\n          \n          <div className=\"text-xs text-gray-500\">\n            {current >= target ? \"Objectif atteint\" : `${target - current} restant`}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":4977},"components/ui-pro/linktree-media-grid.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport Image from \"next/image\"\n\ninterface Media {\n  id: string\n  type: string\n  url: string\n  thumbnail?: string | null\n  title?: string | null\n}\n\ninterface LinktreeMediaGridProps {\n  media: Media[]\n}\n\nexport function LinktreeMediaGrid({ media }: LinktreeMediaGridProps) {\n  const [lightboxOpen, setLightboxOpen] = useState(false)\n  const [selectedMedia, setSelectedMedia] = useState<Media | null>(null)\n\n  if (!media || media.length === 0) return null\n\n  const openLightbox = (item: Media) => {\n    setSelectedMedia(item)\n    setLightboxOpen(true)\n  }\n\n  const closeLightbox = () => {\n    setLightboxOpen(false)\n    setSelectedMedia(null)\n  }\n  \n  return (\n    <>\n      <div className=\"mb-8\">\n        <p className=\"text-xs text-gray-400 uppercase tracking-wider font-semibold mb-3 text-center\">Galerie</p>\n        <div className=\"grid grid-cols-3 gap-2\">\n          {media.slice(0, 6).map((item) => (\n            <div \n              key={item.id} \n              className=\"relative aspect-square rounded-lg overflow-hidden group cursor-pointer\"\n              onClick={() => openLightbox(item)}\n            >\n              {item.type === 'VIDEO' ? (\n                <video\n                  src={item.url}\n                  className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300\"\n                  muted\n                  playsInline\n                />\n              ) : (\n                <Image\n                  src={item.type === 'YOUTUBE' && item.thumbnail ? item.thumbnail : item.url}\n                  alt={item.title || 'Media'}\n                  fill\n                  className=\"object-cover group-hover:scale-110 transition-transform duration-300\"\n                  sizes=\"33vw\"\n                />\n              )}\n              {(item.type === 'VIDEO' || item.type === 'YOUTUBE') && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-black/40 group-hover:bg-black/50 transition-colors\">\n                  <div className=\"w-8 h-8 rounded-full bg-white/90 flex items-center justify-center\">\n                    <svg className=\"w-4 h-4 text-gray-900 ml-0.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path d=\"M8 5v14l11-7z\" />\n                    </svg>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Lightbox */}\n      {lightboxOpen && selectedMedia && (\n        <div \n          className=\"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4\"\n          onClick={closeLightbox}\n        >\n          <button\n            onClick={closeLightbox}\n            className=\"absolute top-4 right-4 text-white hover:text-yellow-500 transition-colors z-10\"\n          >\n            <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n            </svg>\n          </button>\n\n          <div className=\"max-w-4xl w-full\" onClick={(e) => e.stopPropagation()}>\n            {selectedMedia.type === 'VIDEO' ? (\n              <video\n                src={selectedMedia.url}\n                controls\n                autoPlay\n                className=\"w-full rounded-lg\"\n                controlsList=\"nodownload\"\n              />\n            ) : selectedMedia.type === 'YOUTUBE' ? (\n              <iframe\n                src={selectedMedia.url.replace('watch?v=', 'embed/')}\n                className=\"w-full aspect-video rounded-lg\"\n                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                allowFullScreen\n              />\n            ) : (\n              <Image\n                src={selectedMedia.url}\n                alt={selectedMedia.title || 'Media'}\n                width={1200}\n                height={800}\n                className=\"w-full h-auto rounded-lg\"\n              />\n            )}\n            {selectedMedia.title && (\n              <p className=\"text-white text-center mt-4 text-lg font-semibold\">{selectedMedia.title}</p>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  )\n}\n\n","size_bytes":4255},"components/ui-pro/sport-button.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { LucideIcon } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface SportButtonProps {\n  children: React.ReactNode\n  variant?: \"primary\" | \"secondary\" | \"ghost\"\n  size?: \"sm\" | \"md\" | \"lg\"\n  icon?: LucideIcon\n  iconPosition?: \"left\" | \"right\"\n  fullWidth?: boolean\n  onClick?: () => void\n  href?: string\n  disabled?: boolean\n  className?: string\n}\n\nexport function SportButton({\n  children,\n  variant = \"primary\",\n  size = \"md\",\n  icon: Icon,\n  iconPosition = \"right\",\n  fullWidth = false,\n  onClick,\n  href,\n  disabled = false,\n  className\n}: SportButtonProps) {\n  const baseClasses = \"inline-flex items-center justify-center gap-2 font-bold rounded-full transition-all duration-300 group\"\n  \n  const variantClasses = {\n    primary: \"bg-gradient-to-r from-sport-primary-500 to-sport-primary-600 text-gray-900 hover:shadow-sport-glow hover:scale-105 active:scale-95\",\n    secondary: \"bg-gradient-to-r from-sport-accent-500 to-sport-accent-600 text-gray-900 hover:shadow-sport-lg hover:scale-105 active:scale-95\",\n    ghost: \"bg-transparent border-2 border-sport-primary-500 text-sport-primary-600 hover:bg-sport-primary-50 hover:scale-105 active:scale-95\"\n  }\n  \n  const sizeClasses = {\n    sm: \"px-4 py-2 text-sm\",\n    md: \"px-6 py-3 text-base\",\n    lg: \"px-8 py-4 text-lg\"\n  }\n\n  const classes = cn(\n    baseClasses,\n    variantClasses[variant],\n    sizeClasses[size],\n    fullWidth && \"w-full\",\n    disabled && \"opacity-50 cursor-not-allowed\",\n    className\n  )\n\n  const content = (\n    <>\n      {Icon && iconPosition === \"left\" && (\n        <Icon className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\n      )}\n      {children}\n      {Icon && iconPosition === \"right\" && (\n        <Icon className=\"w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n      )}\n    </>\n  )\n\n  if (href) {\n    return (\n      <motion.a\n        href={href}\n        className={classes}\n        whileHover={{ scale: disabled ? 1 : 1.05 }}\n        whileTap={{ scale: disabled ? 1 : 0.95 }}\n      >\n        {content}\n      </motion.a>\n    )\n  }\n\n  return (\n    <motion.button\n      onClick={onClick}\n      disabled={disabled}\n      className={classes}\n      whileHover={{ scale: disabled ? 1 : 1.05 }}\n      whileTap={{ scale: disabled ? 1 : 0.95 }}\n    >\n      {content}\n    </motion.button>\n  )\n}\n","size_bytes":2366},"deployment/docs/README.md":{"content":"# üìö AthLink SaaS Deployment Documentation\n\n## Overview\nThis directory contains all necessary files for deploying the AthLink SaaS platform.\n\n## Directory Structure\n```\ndeployment/\n‚îú‚îÄ‚îÄ env-config/          # Environment configurations\n‚îú‚îÄ‚îÄ database/           # Database migrations and setup\n‚îú‚îÄ‚îÄ scripts/            # Deployment and utility scripts\n‚îú‚îÄ‚îÄ docs/              # Documentation\n‚îú‚îÄ‚îÄ assets/             # Static assets for deployment\n‚îú‚îÄ‚îÄ monitoring/         # Health checks and monitoring\n‚îú‚îÄ‚îÄ security/           # Security configurations\n‚îú‚îÄ‚îÄ backup/             # Backup scripts and files\n‚îú‚îÄ‚îÄ testing/            # Test configurations\n‚îî‚îÄ‚îÄ deployment-guides/  # Step-by-step deployment guides\n```\n\n## Quick Start\n1. Copy environment variables from `env-config/`\n2. Run database migrations from `database/`\n3. Execute deployment script from `scripts/`\n4. Follow deployment guide in `deployment-guides/`\n\n## Support\nFor issues or questions, refer to the specific documentation in each subdirectory.\n","size_bytes":1067},"analytics/export-csv/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { canUserAccessFeature } from \"@/lib/features\"\n\nexport async function GET(request: Request) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.id) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        analytics: {\n          orderBy: { date: 'desc' },\n          take: 365 // Derni√®re ann√©e\n        },\n        links: {\n          select: { id: true, title: true, url: true }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // V√©rifier l'acc√®s Elite\n    const canExport = canUserAccessFeature(profile.plan as any, \"dataExport\")\n    if (!canExport) {\n      return NextResponse.json({ error: \"Fonctionnalit√© r√©serv√©e au plan Elite\" }, { status: 403 })\n    }\n\n    // Pr√©parer les donn√©es CSV\n    const csvRows = []\n    \n    // En-t√™tes\n    csvRows.push([\n      'Date',\n      'Vues',\n      'Vues Uniques',\n      'Clics sur Liens',\n      'Appareil',\n      'Pays',\n      'Referrer'\n    ].join(','))\n\n    // Donn√©es analytics\n    for (const analytic of profile.analytics) {\n      csvRows.push([\n        analytic.date.toISOString().split('T')[0],\n        analytic.views,\n        analytic.uniqueViews,\n        analytic.linkClicks,\n        analytic.device || 'N/A',\n        analytic.country || 'N/A',\n        analytic.referrer || 'N/A'\n      ].join(','))\n    }\n\n    // Ajouter une section pour les liens\n    csvRows.push('') // Ligne vide\n    csvRows.push('LIENS')\n    csvRows.push(['ID', 'Titre', 'URL'].join(','))\n    \n    for (const link of profile.links) {\n      csvRows.push([\n        link.id,\n        `\"${link.title.replace(/\"/g, '\"\"')}\"`, // √âchapper les guillemets\n        link.url\n      ].join(','))\n    }\n\n    // Ajouter les donn√©es d√©mographiques si disponibles\n    const stats = profile.stats as any\n    if (stats?.demographics) {\n      csvRows.push('') // Ligne vide\n      csvRows.push('D√âMOGRAPHIE')\n      \n      // Appareils\n      csvRows.push('Appareils')\n      csvRows.push(['Type', 'Nombre'].join(','))\n      for (const [device, count] of Object.entries(stats.demographics.devices || {})) {\n        csvRows.push([device, count].join(','))\n      }\n      \n      csvRows.push('') // Ligne vide\n      \n      // Navigateurs\n      csvRows.push('Navigateurs')\n      csvRows.push(['Navigateur', 'Nombre'].join(','))\n      for (const [browser, count] of Object.entries(stats.demographics.browsers || {})) {\n        csvRows.push([browser, count].join(','))\n      }\n    }\n\n    // Cr√©er le CSV\n    const csv = csvRows.join('\\n')\n    \n    // Retourner le fichier CSV\n    return new NextResponse(csv, {\n      headers: {\n        'Content-Type': 'text/csv; charset=utf-8',\n        'Content-Disposition': `attachment; filename=\"athlink-analytics-${profile.username}-${new Date().toISOString().split('T')[0]}.csv\"`,\n      },\n    })\n  } catch (error) {\n    console.error(\"Erreur export CSV:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors de l'export\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":3294},"config/next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  // Augmenter la limite de taille pour les uploads (30MB)\n  experimental: {\n    serverActions: {\n      bodySizeLimit: '30mb',\n    },\n  },\n  // Note: La config API est maintenant g√©r√©e via les route handlers\n  // Pour configurer la taille max des requ√™tes, utilisez bodySizeLimit dans serverActions\n  images: {\n    qualities: [75, 90, 100],\n    formats: ['image/webp', 'image/avif'],\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'ioyklugzwavjyondimwd.supabase.co',\n        pathname: '/storage/v1/object/public/**',\n      },\n      {\n        protocol: 'https',\n        hostname: 'logo.clearbit.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.hyrox.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'hyrox.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.spartan.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'spartan.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.toughmudder.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'toughmudder.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.ironman.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'ironman.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.challengetheworld.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'challengetheworld.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.runinlyon.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'runinlyon.com',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.marathon.fr',\n      },\n      {\n        protocol: 'https',\n        hostname: 'marathon.fr',\n      },\n      {\n        protocol: 'https',\n        hostname: '*.parismarathon.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'parismarathon.com',\n      },\n    ],\n  },\n  // Augmenter la limite de taille pour les uploads de fichiers\n  serverRuntimeConfig: {\n    maxFileSize: 50 * 1024 * 1024, // 50MB\n  },\n  // D√©sactiver les erreurs ESLint pendant le build (temporairement)\n  eslint: {\n    ignoreDuringBuilds: true,\n  },\n  typescript: {\n    ignoreBuildErrors: false, // Garder les erreurs TypeScript\n  },\n};\n\nexport default nextConfig;\n","size_bytes":2383},"links/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { linkUpdateSchema } from \"@/lib/validations\"\n\n// PATCH update link\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = linkUpdateSchema.parse(body)\n\n    // Verify link belongs to user\n    const link = await prisma.link.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!link) {\n      return NextResponse.json({ error: \"Lien non trouv√©\" }, { status: 404 })\n    }\n\n    if (link.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    const updatedLink = await prisma.link.update({\n      where: { id },\n      data: validatedData\n    })\n\n    return NextResponse.json({ link: updatedLink })\n\n  } catch (error: any) {\n    console.error(\"PATCH link error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// DELETE link\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    // Verify link belongs to user\n    const link = await prisma.link.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!link) {\n      return NextResponse.json({ error: \"Lien non trouv√©\" }, { status: 404 })\n    }\n\n    if (link.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    await prisma.link.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error(\"DELETE link error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2378},"components/ui-pro/sport-progress.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\n\ninterface SportProgressProps {\n  label: string\n  value: number\n  max: number\n  unit?: string\n  color?: \"primary\" | \"accent\" | \"success\"\n  showPercentage?: boolean\n}\n\nexport function SportProgress({\n  label,\n  value,\n  max,\n  unit = \"\",\n  color = \"primary\",\n  showPercentage = true\n}: SportProgressProps) {\n  const percentage = Math.min((value / max) * 100, 100)\n  const isOverGoal = value > max\n\n  const colorClasses = {\n    primary: {\n      bg: \"from-yellow-400 to-yellow-600\",\n      badge: \"from-yellow-400 to-yellow-600\",\n      text: \"text-yellow-600\"\n    },\n    accent: {\n      bg: \"from-yellow-500 to-black\", \n      badge: \"from-yellow-500 to-black\",\n      text: \"text-black\"\n    },\n    success: {\n      bg: \"from-yellow-600 to-gray-800\",\n      badge: \"from-yellow-600 to-gray-800\", \n      text: \"text-gray-800\"\n    }\n  }\n\n  const currentColor = colorClasses[color]\n\n  return (\n    <div className=\"space-y-1\">\n      {/* Header with label and values */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-xs font-semibold text-gray-700\">{label}</h3>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"text-sm font-bold text-gray-900\">\n            {value.toLocaleString('fr-FR')}\n          </span>\n          <span className=\"text-xs text-gray-500\">\n            / {max.toLocaleString('fr-FR')}{unit}\n          </span>\n        </div>\n      </div>\n\n      {/* Progress bar container */}\n      <div className=\"relative\">\n        {/* Progress fill only - no background */}\n        <motion.div\n          className={`h-1 bg-gradient-to-r ${currentColor.bg} rounded-full shadow-sm`}\n          initial={{ width: 0 }}\n          animate={{ width: `${percentage}%` }}\n          transition={{ duration: 1.2, ease: \"easeOut\" }}\n        />\n        \n        {/* Glow effect for over-goal */}\n        {isOverGoal && (\n          <motion.div\n            className={`absolute inset-0 bg-gradient-to-r ${currentColor.bg} opacity-30 rounded-full`}\n            animate={{ opacity: [0.3, 0.6, 0.3] }}\n            transition={{ duration: 2, repeat: Infinity }}\n          />\n        )}\n        \n        {/* Shimmer effect */}\n        <motion.div\n          className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent\"\n          animate={{\n            x: [\"-100%\", \"100%\"]\n          }}\n          transition={{\n            duration: 2.5,\n            repeat: Infinity,\n            repeatDelay: 2,\n            ease: \"easeInOut\"\n          }}\n        />\n\n        {/* Percentage indicator */}\n        {showPercentage && (\n          <div className=\"flex justify-end mt-1\">\n            <motion.div\n              initial={{ scale: 0, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              transition={{ delay: 0.5, type: \"spring\", stiffness: 200 }}\n              className={`inline-flex items-center px-2 py-0.5 rounded-full bg-gradient-to-r ${currentColor.badge} text-white shadow-md`}\n            >\n              <span className=\"text-xs font-bold\">\n                {percentage.toFixed(0)}%\n              </span>\n            </motion.div>\n          </div>\n        )}\n      </div>\n\n      {/* Achievement indicator */}\n      {isOverGoal && (\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.8 }}\n          className=\"flex items-center justify-center gap-2 py-2 px-3 bg-green-50 border border-green-200 rounded-lg\"\n        >\n          <span className=\"text-green-600 text-sm font-semibold\">\n            Objectif d√©pass√© !\n          </span>\n        </motion.div>\n      )}\n    </div>\n  )\n}\n","size_bytes":3708},"components/ui-pro/sport-hero.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { ArrowRight, Play } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport Image from \"next/image\"\n\ninterface SportHeroProps {\n  title: string\n  subtitle: string\n  ctaPrimary?: {\n    text: string\n    href: string\n  }\n  ctaSecondary?: {\n    text: string\n    href: string\n  }\n  backgroundImage?: string\n  stats?: Array<{\n    value: string\n    label: string\n  }>\n}\n\nexport function SportHero({\n  title,\n  subtitle,\n  ctaPrimary,\n  ctaSecondary,\n  backgroundImage,\n  stats\n}: SportHeroProps) {\n  return (\n    <section className=\"relative min-h-[90vh] flex items-center overflow-hidden\">\n      {/* Background avec gradient overlay */}\n      <div className=\"absolute inset-0 bg-gradient-sport-hero\">\n        {backgroundImage && (\n          <Image\n            src={backgroundImage}\n            alt=\"Hero background\"\n            fill\n            className=\"object-cover opacity-20 mix-blend-overlay\"\n            priority\n          />\n        )}\n      </div>\n\n      {/* Animated shapes */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <motion.div\n          animate={{\n            scale: [1, 1.2, 1],\n            rotate: [0, 90, 0],\n          }}\n          transition={{\n            duration: 20,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n          className=\"absolute -top-20 -right-20 w-96 h-96 bg-sport-accent-500/10 rounded-full blur-3xl\"\n        />\n        <motion.div\n          animate={{\n            scale: [1, 1.3, 1],\n            rotate: [0, -90, 0],\n          }}\n          transition={{\n            duration: 25,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n          className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-sport-success-500/10 rounded-full blur-3xl\"\n        />\n      </div>\n\n      {/* Content */}\n      <div className=\"container relative mx-auto px-6 z-10\">\n        <div className=\"max-w-4xl\">\n          {/* Title */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6 }}\n          >\n            <h1 className=\"text-6xl md:text-7xl lg:text-8xl font-black bg-gradient-to-r from-primary-600 via-quaternary-600 to-tertiary-600 bg-clip-text text-transparent mb-6 leading-tight\">\n              {title.split(' ').map((word, i) => (\n                <motion.span\n                  key={i}\n                  initial={{ opacity: 0, y: 20 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.5, delay: i * 0.1 }}\n                  className=\"inline-block mr-4\"\n                >\n                  {word}\n                </motion.span>\n              ))}\n            </h1>\n          </motion.div>\n\n          {/* Subtitle */}\n          <motion.p\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.3 }}\n            className=\"text-xl md:text-2xl text-gray-700 mb-10 max-w-2xl leading-relaxed\"\n          >\n            {subtitle}\n          </motion.p>\n\n          {/* CTAs */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6, delay: 0.5 }}\n            className=\"flex flex-wrap gap-4\"\n          >\n            {ctaPrimary && (\n              <Button\n                size=\"lg\"\n                className=\"bg-white text-sport-primary-600 hover:bg-gray-100 text-lg px-8 py-6 rounded-full font-bold shadow-sport-lg group\"\n                asChild\n              >\n                <a href={ctaPrimary.href}>\n                  {ctaPrimary.text}\n                  <ArrowRight className=\"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform\" />\n                </a>\n              </Button>\n            )}\n            \n            {ctaSecondary && (\n              <Button\n                size=\"lg\"\n                variant=\"outline\"\n                className=\"border-2 border-gray-900 text-gray-900 hover:bg-gray-100 text-lg px-8 py-6 rounded-full font-bold backdrop-blur-sm\"\n                asChild\n              >\n                <a href={ctaSecondary.href}>\n                  <Play className=\"mr-2 w-5 h-5\" />\n                  {ctaSecondary.text}\n                </a>\n              </Button>\n            )}\n          </motion.div>\n\n          {/* Stats */}\n          {stats && stats.length > 0 && (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.7 }}\n              className=\"mt-16 flex flex-wrap gap-12\"\n            >\n              {stats.map((stat, i) => (\n                <div key={i} className=\"text-center\">\n                  <div className=\"text-4xl md:text-5xl font-black mb-2 bg-gradient-to-br from-success-600 to-accent-600 bg-clip-text text-transparent\">\n                    {stat.value}\n                  </div>\n                  <div className=\"text-sm md:text-base text-gray-600 font-medium uppercase tracking-wide\">\n                    {stat.label}\n                  </div>\n                </div>\n              ))}\n            </motion.div>\n          )}\n        </div>\n      </div>\n\n      {/* Scroll indicator */}\n      <motion.div\n        animate={{ y: [0, 10, 0] }}\n        transition={{ duration: 2, repeat: Infinity }}\n        className=\"absolute bottom-8 left-1/2 -translate-x-1/2 text-gray-500\"\n      >\n        <div className=\"w-6 h-10 border-2 border-gray-500 rounded-full flex items-start justify-center p-2\">\n          <motion.div\n            animate={{ y: [0, 12, 0] }}\n            transition={{ duration: 2, repeat: Infinity }}\n            className=\"w-1.5 h-1.5 bg-gray-500 rounded-full\"\n          />\n        </div>\n      </motion.div>\n    </section>\n  )\n}\n","size_bytes":5896},"[username]/coaching/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { CoachingPublicClient } from \"./coaching-public-client\"\nimport { ArrowLeft } from \"lucide-react\"\nimport Link from \"next/link\"\n\ninterface Props {\n  params: { username: string }\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true },\n  })\n\n  if (!profile) {\n    return {\n      title: \"Coaching non trouv√© - Athlink\",\n      description: \"Les services de coaching que vous recherchez n'existent pas.\",\n    }\n  }\n\n  return {\n    title: `Services Coaching de ${profile.displayName} - Athlink`,\n    description: `D√©couvrez les services de coaching personnalis√© de ${profile.displayName}. Plans d'entra√Ænement et r√©servations disponibles.`,\n  }\n}\n\nexport default async function CoachingPublicPage({ params }: Props) {\n  const { username } = params\n\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: {\n      displayName: true,\n      bio: true,\n      avatarUrl: true,\n      plan: true,\n      isPublic: true,\n      stats: true\n    }\n  })\n\n  if (!profile || !profile.isPublic || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n    notFound()\n  }\n\n  // R√©cup√©rer les donn√©es coaching depuis stats\n  const profileStats = profile.stats as any || {}\n  const trainingPlans = (profileStats.trainingPlans || []).filter((p: any) => p.isActive)\n  const bookings = profileStats.bookings || []\n  const availabilities = profileStats.availabilities || []\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white\">\n      {/* Sticky Header */}\n      <header className=\"sticky top-0 z-20 bg-black/80 backdrop-blur-md p-4 border-b border-white/10\">\n        <div className=\"container mx-auto flex items-center justify-between\">\n          <Link href={`/${username}`} className=\"flex items-center gap-2 text-gray-300 hover:text-white transition-colors\">\n            <ArrowLeft className=\"w-5 h-5\" />\n            <span className=\"font-medium\">Retour au profil</span>\n          </Link>\n          <h1 className=\"text-xl font-bold\">{profile.displayName}</h1>\n          <div className=\"w-5 h-5\" /> {/* Placeholder for alignment */}\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"container mx-auto py-8 px-4\">\n        <CoachingPublicClient \n          coachName={profile.displayName}\n          coachBio={profile.bio}\n          coachAvatar={profile.avatarUrl}\n          trainingPlans={trainingPlans}\n          availabilities={availabilities}\n          username={username}\n        />\n      </main>\n    </div>\n  )\n}\n\n","size_bytes":2754},"(dashboard)/dashboard/coaching/business-analytics/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { BusinessAnalyticsClient } from \"./business-analytics-client\"\n\nexport default async function BusinessAnalyticsPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      id: true,\n      stats: true\n    }\n  })\n\n  if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n    redirect(\"/dashboard\")\n  }\n\n  // R√©cup√©rer les donn√©es depuis le champ stats (temporaire)\n  const profileStats = profile.stats as any || {}\n  const bookings = profileStats.bookings || []\n  const trainingPlans = profileStats.trainingPlans || []\n\n  // Calculer les m√©triques\n  const now = new Date()\n  const currentMonth = now.getMonth()\n  const currentYear = now.getFullYear()\n\n  // Revenus\n  const completedBookings = bookings.filter((b: any) => b.status === \"COMPLETED\")\n  const totalRevenue = completedBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0)\n  \n  const currentMonthBookings = completedBookings.filter((b: any) => {\n    const bookingDate = new Date(b.date)\n    return bookingDate.getMonth() === currentMonth && bookingDate.getFullYear() === currentYear\n  })\n  const monthlyRevenue = currentMonthBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0)\n\n  // Clients\n  const uniqueClients = new Set(completedBookings.map((b: any) => b.clientEmail)).size\n  const upcomingBookings = bookings.filter((b: any) => \n    new Date(b.date) >= now && b.status === \"CONFIRMED\"\n  )\n\n  // Plans d'entra√Ænement\n  const totalSubscribers = trainingPlans.reduce((acc: number, plan: any) => \n    acc + (plan.subscribers?.length || 0), 0\n  )\n  const trainingRevenue = trainingPlans.reduce((acc: number, plan: any) => \n    acc + (plan.price * (plan.subscribers?.length || 0)), 0\n  )\n\n  // Taux de conversion (r√©servations confirm√©es / r√©servations totales)\n  const totalBookingsCount = bookings.length\n  const confirmedBookingsCount = bookings.filter((b: any) => \n    b.status === \"CONFIRMED\" || b.status === \"COMPLETED\"\n  ).length\n  const conversionRate = totalBookingsCount > 0 \n    ? (confirmedBookingsCount / totalBookingsCount * 100) \n    : 0\n\n  const stats = {\n    totalRevenue,\n    monthlyRevenue,\n    uniqueClients,\n    upcomingBookings: upcomingBookings.length,\n    totalSubscribers,\n    trainingRevenue,\n    conversionRate,\n    averageBookingValue: completedBookings.length > 0 \n      ? totalRevenue / completedBookings.length \n      : 0\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <a\n                href=\"/dashboard/coaching\"\n                className=\"inline-flex items-center gap-2 text-gray-900 hover:text-gray-700 font-medium transition-colors mb-4\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Retour au Centre de Coaching\n              </a>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                Analytics Business\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                Suis tes revenus et optimise ton business\n              </p>\n            </div>\n            <PlanBadge plan=\"COACH\" size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <BusinessAnalyticsClient \n        stats={stats}\n        bookings={bookings}\n        trainingPlans={trainingPlans}\n        coachName={profile.displayName}\n      />\n    </div>\n  )\n}\n","size_bytes":4747},"components/ui-pro/theme-preview.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { themes, getAvailableThemes } from \"@/lib/themes\"\n\ninterface ThemePreviewProps {\n  currentTheme: string\n  onThemeChange: (themeId: string) => void\n}\n\nexport function ThemePreview({ currentTheme, onThemeChange }: ThemePreviewProps) {\n  const [isOpen, setIsOpen] = useState(false)\n  const availableThemes = getAvailableThemes(\"ELITE\") // Afficher tous les th√®mes pour le test\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"bg-white/10 backdrop-blur-sm border border-white/20 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-white/20 transition-colors\"\n      >\n        Th√®me: {themes[currentTheme as keyof typeof themes]?.name || \"Inconnu\"}\n      </button>\n      \n      {isOpen && (\n        <div className=\"absolute top-12 right-0 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg p-2 min-w-48\">\n          {availableThemes.map(([themeId, theme]) => (\n            <button\n              key={themeId}\n              onClick={() => {\n                onThemeChange(themeId)\n                setIsOpen(false)\n              }}\n              className={`w-full text-left px-3 py-2 rounded text-sm transition-colors ${\n                themeId === currentTheme \n                  ? 'bg-white/20 text-white' \n                  : 'text-white/80 hover:bg-white/10'\n              }`}\n            >\n              {theme.name}\n              {theme.isPremium && (\n                <span className=\"ml-2 text-xs text-yellow-400\">Premium</span>\n              )}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":1685},"page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { \n  Activity, \n  TrendingUp, \n  Users, \n  Award, \n  Calendar, \n  Target,\n  ArrowRight,\n  Zap,\n  Check,\n  Crown,\n  Link as LinkIcon\n} from \"lucide-react\"\n\nexport default function Home() {\n  const [billingCycle, setBillingCycle] = useState<\"monthly\" | \"yearly\">(\"monthly\")\n  const [currentImage, setCurrentImage] = useState(0)\n  const images = [\"/uploads/hero/noa.png\", \"/uploads/hero/nathan.png\"]\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentImage((prev) => (prev + 1) % images.length)\n    }, 3000)\n    return () => clearInterval(interval)\n  }, [])\n  return (\n    <main className=\"min-h-screen\">\n      {/* Hero Section - Full viewport with Enhanced Decorations */}\n      <section className=\"relative min-h-[90vh] flex items-center justify-center overflow-hidden bg-white\">\n\n        {/* Content */}\n        <div className=\"container relative mx-auto px-4 sm:px-6 z-10 flex flex-col justify-center min-h-[90vh]\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16 items-center max-w-6xl mx-auto\">\n            <div className=\"text-center lg:text-left\">\n            {/* Remove big ATHLINK from hero */}\n\n            {/* Title with stagger animation - Mobile Optimized */}\n            <motion.h2 \n              className=\"text-xl xs:text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-black text-gray-900 mb-3 sm:mb-4 md:mb-6 leading-tight tracking-tight px-2\"\n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.3 }}\n            >\n              Le link in bio n¬∞1 des sportifs pour convertir vos fans\n            </motion.h2>\n\n            {/* Subtitle - Mobile Optimized */}\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.8 }}\n              className=\"text-base sm:text-lg md:text-xl lg:text-2xl text-gray-700 mb-8 sm:mb-12 md:mb-16 max-w-3xl leading-relaxed px-4 sm:px-6\"\n            >\n              Le link-in-bio con√ßu pour les sportifs. Partage tes performances, trouve des sponsors, d√©veloppe ta communaut√©.\n            </motion.p>\n\n            {/* Primary CTA */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 1.0 }}\n              className=\"px-4 sm:px-0 -mt-8 ml-8\"\n            >\n              <Link\n                href=\"/signup\"\n                className=\"inline-flex items-center gap-3 bg-gray-900 text-white hover:bg-gray-800 active:scale-95 px-6 sm:px-8 py-3 sm:py-4 rounded-full font-medium text-base sm:text-lg shadow-lg transition-all touch-manipulation\"\n              >\n                <Zap className=\"w-5 h-5\" />\n                Commencer\n              </Link>\n            </motion.div>\n            </div>\n\n            {/* Right showcase */}\n            <div className=\"hidden lg:block\">\n              <div className=\"w-[1200px] h-[600px] max-w-full mx-auto\">\n                <motion.div\n                  key={currentImage}\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  exit={{ opacity: 0 }}\n                  transition={{ duration: 0.5 }}\n                  className=\"w-full h-full relative rounded-3xl overflow-hidden shadow-2xl bg-gradient-to-br from-gray-100 to-gray-200\"\n                >\n                  <div className=\"absolute inset-0 backdrop-blur-lg bg-white/30\"></div>\n                  <Image\n                    src={images[currentImage]}\n                    alt={currentImage === 0 ? \"Noa\" : \"Nathan\"}\n                    fill\n                    className=\"object-contain relative z-10 rounded-3xl\"\n                    priority\n                    unoptimized\n                  />\n                </motion.div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Visual handled above */}\n\n        {/* Scroll indicator removed */}\n      </section>\n\n      {/* Features Section - Apple Style with Enhanced Decorations */}\n      <section id=\"features\" className=\"py-12 sm:py-20 md:py-32 lg:py-40 bg-white relative overflow-hidden\">\n        {/* Background Elements - Enhanced */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          {/* Main background blurs */}\n        <motion.div\n            animate={{\n              scale: [1, 1.1, 1],\n              opacity: [0.03, 0.05, 0.03],\n            }}\n            transition={{\n              duration: 8,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-1/4 left-1/4 w-96 h-96 bg-gray-900 rounded-full blur-3xl\"\n          />\n            <motion.div\n            animate={{\n              scale: [1.1, 1, 1.1],\n              opacity: [0.02, 0.04, 0.02],\n            }}\n            transition={{\n              duration: 10,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-1/4 right-1/4 w-80 h-80 bg-gray-900 rounded-full blur-3xl\"\n          />\n          \n          {/* Geometric shapes */}\n          <motion.div\n            animate={{\n              rotate: [0, 360],\n              scale: [1, 1.1, 1],\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"linear\"\n            }}\n            className=\"absolute top-10 right-10 w-20 h-20 border-2 border-yellow-500/10 rounded-lg\"\n          />\n          \n          <motion.div\n            animate={{\n              rotate: [360, 0],\n              y: [0, 20, 0],\n            }}\n            transition={{\n              duration: 15,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-20 left-10 w-16 h-16 border-2 border-gray-900/10\"\n          />\n          \n          {/* Gradient orbs */}\n          <motion.div\n            animate={{\n              x: [0, 50, 0],\n              y: [0, -30, 0],\n              opacity: [0.05, 0.1, 0.05],\n            }}\n            transition={{\n              duration: 12,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-1/3 right-1/3 w-72 h-72 bg-gradient-to-br from-yellow-500/10 to-transparent rounded-full blur-3xl\"\n          />\n          \n          {/* Sports equipment floating around - Reduced */}\n          {['', '', ''].map((emoji, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                y: [0, -50, 0],\n                opacity: [0.1, 0.25, 0.1],\n              }}\n              transition={{\n                duration: 8 + i * 2,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 1.5,\n              }}\n              className=\"absolute text-3xl\"\n              style={{\n                left: `${20 + i * 30}%`,\n                top: `${30 + (i % 3) * 25}%`,\n              }}\n            >\n              {emoji}\n        </motion.div>\n          ))}\n          \n          {/* Connecting lines effect */}\n          <svg className=\"absolute inset-0 w-full h-full opacity-5\">\n            <motion.line\n              x1=\"10%\"\n              y1=\"20%\"\n              x2=\"90%\"\n              y2=\"80%\"\n              stroke=\"currentColor\"\n              strokeWidth=\"1\"\n              className=\"text-gray-900\"\n              initial={{ pathLength: 0 }}\n              animate={{ pathLength: [0, 1, 0] }}\n              transition={{ duration: 8, repeat: Infinity, ease: \"easeInOut\" }}\n            />\n            <motion.line\n              x1=\"90%\"\n              y1=\"20%\"\n              x2=\"10%\"\n              y2=\"80%\"\n              stroke=\"currentColor\"\n              strokeWidth=\"1\"\n              className=\"text-gray-900\"\n              initial={{ pathLength: 0 }}\n              animate={{ pathLength: [0, 1, 0] }}\n              transition={{ duration: 8, repeat: Infinity, ease: \"easeInOut\", delay: 4 }}\n            />\n          </svg>\n          </div>\n\n        <div className=\"container mx-auto px-4 sm:px-6 relative z-10\">\n          {/* Header with Apple-style typography */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, ease: \"easeOut\" }}\n              className=\"text-center mb-12 sm:mb-16 md:mb-20 lg:mb-24 max-w-4xl mx-auto px-4\"\n            >\n              <motion.h2\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.8, delay: 0.1 }}\n                className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-light text-gray-900 mb-4 sm:mb-6 tracking-tight\"\n              >\n                Tout ce dont un athl√®te a besoin\n              </motion.h2>\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, delay: 0.2 }}\n              className=\"text-xl sm:text-2xl text-gray-600 font-light leading-relaxed\"\n            >\n              Con√ßu sp√©cifiquement pour les sportifs, avec des fonctionnalit√©s uniques\n            </motion.p>\n          </motion.div>\n\n            {/* Features Grid with Apple-style cards - Mobile Optimized */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-12 px-4 sm:px-0\">\n            {[\n              {\n                icon: Activity,\n                title: \"Stats & Performance\",\n                description: \"Synchronise Strava, affiche tes records, graphiques de progression en temps r√©el\",\n                delay: 0.1\n              },\n              {\n                icon: Calendar,\n                title: \"Calendrier Courses\",\n                description: \"Countdown jusqu'√† ta prochaine course, r√©sultats automatiques, historique complet\",\n                delay: 0.2\n              },\n              {\n                icon: Users,\n                title: \"Sponsors & Partenaires\",\n                description: \"Section d√©di√©e avec tracking des clics, analytics pour tes sponsors\",\n                delay: 0.3\n              },\n              {\n                icon: Award,\n                title: \"Galerie M√©dia\",\n                description: \"Photos, vid√©os, highlights de tes meilleures performances en action\",\n                delay: 0.4\n              },\n              {\n                icon: Target,\n                title: \"Services Coaching\",\n                description: \"Vends tes plans d'entra√Ænement, g√®re tes bookings, d√©veloppe ton business\",\n                delay: 0.5\n              },\n              {\n                icon: TrendingUp,\n                title: \"Analytics Pro\",\n                description: \"Vois qui visite ton profil, quels liens performent, optimise ta strat√©gie\",\n                delay: 0.6\n              },\n            ].map((feature, i) => (\n              <motion.div\n                key={i}\n                initial={{ opacity: 0, y: 40 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true, margin: \"-100px\" }}\n                transition={{ \n                  duration: 0.8, \n                  delay: feature.delay,\n                  ease: [0.25, 0.46, 0.45, 0.94]\n                }}\n                whileHover={{ \n                  y: -12,\n                  transition: { duration: 0.3, ease: \"easeOut\" }\n                }}\n                className=\"group\"\n              >\n                   <div className=\"relative h-full p-6 sm:p-8 lg:p-10 bg-white/80 backdrop-blur-sm rounded-2xl sm:rounded-3xl border border-gray-100/50 hover:border-gray-200/50 transition-all duration-500 hover:shadow-2xl hover:shadow-gray-900/5\">\n                  {/* Subtle background gradient on hover */}\n                  <motion.div\n                    className=\"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500\"\n                    style={{\n                      background: \"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%)\"\n                    }}\n                  />\n                  \n                  {/* Icon with Apple-style animation */}\n                  <motion.div\n                    whileHover={{ \n                      scale: 1.1,\n                      rotate: [0, -5, 5, 0],\n                      transition: { duration: 0.4 }\n                    }}\n                    className=\"relative z-10 inline-flex p-4 rounded-2xl bg-gray-900 mb-6 shadow-lg\"\n                  >\n                    <feature.icon className=\"w-6 h-6 text-white\" />\n                  </motion.div>\n\n                     {/* Title with Apple typography - Mobile Optimized */}\n                     <h3 className=\"relative z-10 text-xl sm:text-2xl font-medium text-gray-900 mb-3 sm:mb-4 group-hover:text-gray-700 transition-colors duration-300 tracking-tight\">\n                    {feature.title}\n                  </h3>\n\n                     {/* Description with refined spacing - Mobile Optimized */}\n                     <p className=\"relative z-10 text-gray-600 leading-relaxed text-base sm:text-lg font-light\">\n                    {feature.description}\n                  </p>\n\n                  {/* Subtle animated accent line */}\n                  <motion.div\n                    className=\"absolute bottom-0 left-8 right-8 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent\"\n                    initial={{ scaleX: 0 }}\n                    whileInView={{ scaleX: 1 }}\n                    viewport={{ once: true }}\n                    transition={{ duration: 1, delay: feature.delay + 0.3 }}\n                  />\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          {/* CTA with Apple-style button */}\n          <motion.div\n            initial={{ opacity: 0, y: 30 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8, delay: 0.8 }}\n            className=\"text-center mt-20\"\n          >\n            <motion.div\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n              transition={{ duration: 0.2 }}\n            >\n            <Link\n              href=\"/signup\"\n                className=\"inline-flex items-center gap-3 bg-gray-900 text-white hover:bg-gray-800 px-8 py-4 rounded-full font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300\"\n            >\n              <Zap className=\"w-5 h-5\" />\n              Cr√©er mon profil gratuitement\n                <ArrowRight className=\"w-4 h-4\" />\n            </Link>\n            </motion.div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Decorative Sport Divider */}\n      <div className=\"relative h-32 bg-gradient-to-b from-white via-gray-50 to-gray-50 overflow-hidden\">\n        {/* Running track line */}\n        <motion.div\n          animate={{\n            x: [-100, 100],\n            opacity: [0.1, 0.3, 0.1],\n          }}\n          transition={{\n            duration: 8,\n            repeat: Infinity,\n            ease: \"easeInOut\"\n          }}\n          className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-96 h-1 bg-gradient-to-r from-transparent via-yellow-500/30 to-transparent\"\n        />\n        \n        {/* Running athletes across the screen */}\n        <motion.div\n          animate={{\n            x: [-100, 1200],\n          }}\n          transition={{\n            duration: 12,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n          className=\"absolute top-1/2 -translate-y-1/2 text-4xl\"\n        >\n          üèÉ‚Äç‚ôÇÔ∏è\n        </motion.div>\n        \n        <motion.div\n          animate={{\n            x: [-150, 1200],\n          }}\n          transition={{\n            duration: 10,\n            repeat: Infinity,\n            ease: \"linear\",\n            delay: 2\n          }}\n          className=\"absolute top-1/2 -translate-y-1/2 text-4xl\"\n        >\n          üö¥‚Äç‚ôÄÔ∏è\n        </motion.div>\n        \n        {/* Sport icons bouncing - Reduced */}\n        <div className=\"absolute inset-0 flex items-center justify-center gap-16\">\n          {['‚öΩ', 'üèÄ'].map((sport, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                y: [0, -15, 0],\n                opacity: [0.2, 0.4, 0.2],\n              }}\n              transition={{\n                duration: 3,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 1,\n              }}\n              className=\"text-3xl\"\n            >\n              {sport}\n            </motion.div>\n          ))}\n        </div>\n      </div>\n\n      {/* Analytics & Performance Section - Apple Style with Sport Animations */}\n      <section className=\"py-20 sm:py-32 lg:py-40 bg-gray-50 relative overflow-hidden\">\n        {/* Background Elements with Sport Theme */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              opacity: [0.02, 0.04, 0.02],\n            }}\n            transition={{\n              duration: 12,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-1/3 right-1/3 w-96 h-96 bg-gray-900 rounded-full blur-3xl\"\n          />\n          <motion.div\n            animate={{\n              scale: [1.2, 1, 1.2],\n              opacity: [0.01, 0.03, 0.01],\n            }}\n            transition={{\n              duration: 15,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-1/3 left-1/3 w-80 h-80 bg-gray-900 rounded-full blur-3xl\"\n          />\n          \n          {/* Performance and stats themed emojis - Reduced */}\n          {['', '', ''].map((emoji, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                y: [0, -40, 0],\n                opacity: [0.08, 0.2, 0.08],\n              }}\n              transition={{\n                duration: 9 + i * 2,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 2,\n              }}\n              className=\"absolute text-4xl\"\n              style={{\n                left: `${20 + i * 30}%`,\n                top: `${25 + (i % 3) * 30}%`,\n              }}\n            >\n              {emoji}\n            </motion.div>\n          ))}\n        </div>\n\n        <div className=\"container mx-auto px-4 sm:px-6 relative z-10\">\n          <div className=\"max-w-7xl mx-auto\">\n            {/* Header with Apple-style typography */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, ease: \"easeOut\" }}\n              className=\"text-center mb-24 max-w-4xl mx-auto\"\n            >\n              <motion.h2\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.8, delay: 0.1 }}\n                className=\"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-light text-gray-900 mb-6 tracking-tight\"\n              >\n                Analytics avanc√©es\n              </motion.h2>\n              <motion.p\n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.8, delay: 0.2 }}\n                className=\"text-xl sm:text-2xl text-gray-600 font-light leading-relaxed\"\n              >\n                Analyse tes performances avec des donn√©es pr√©cises et une heatmap interactive\n              </motion.p>\n            </motion.div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-20 items-center\">\n              {/* Analytics Screenshot with Apple-style design */}\n              <motion.div\n                initial={{ opacity: 0, x: -60 }}\n                whileInView={{ opacity: 1, x: 0 }}\n                viewport={{ once: true, margin: \"-100px\" }}\n                transition={{ \n                  duration: 1, \n                  delay: 0.3,\n                  ease: [0.25, 0.46, 0.45, 0.94]\n                }}\n                className=\"order-2 lg:order-1\"\n              >\n                <motion.div\n                  whileHover={{ \n                    scale: 1.02,\n                    transition: { duration: 0.3, ease: \"easeOut\" }\n                  }}\n                  className=\"relative\"\n                >\n                  {/* Main device frame */}\n                  <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl shadow-gray-900/10 p-6 border border-gray-200/50\">\n                    {/* Device header */}\n                    <div className=\"flex items-center gap-2 mb-6\">\n                      <div className=\"flex gap-2\">\n                        <div className=\"w-3 h-3 bg-red-400 rounded-full\"></div>\n                        <div className=\"w-3 h-3 bg-yellow-400 rounded-full\"></div>\n                        <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n                        </div>\n                      <div className=\"flex-1 text-center\">\n                        <div className=\"w-32 h-6 bg-gray-200 rounded-full mx-auto\"></div>\n                        </div>\n                        </div>\n\n                    {/* Analytics content */}\n                    <div className=\"space-y-6\">\n                      {/* Stats Cards */}\n                      <div className=\"grid grid-cols-3 gap-4\">\n                        {[\n                          { value: \"208\", label: \"Total clics\" },\n                          { value: \"10.4\", label: \"Moyenne\" },\n                          { value: \"20\", label: \"Zone active\" }\n                        ].map((stat, i) => (\n                          <motion.div\n                            key={i}\n                            initial={{ opacity: 0, y: 20 }}\n                            whileInView={{ opacity: 1, y: 0 }}\n                            viewport={{ once: true }}\n                            transition={{ delay: 0.5 + i * 0.1 }}\n                            className=\"bg-white rounded-2xl p-4 border border-gray-100 text-center\"\n                          >\n                            <div className=\"text-2xl font-medium text-gray-900 mb-1\">{stat.value}</div>\n                            <div className=\"text-sm text-gray-600\">{stat.label}</div>\n                          </motion.div>\n                        ))}\n                      </div>\n                      \n                      {/* Heatmap visualization */}\n                      <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        whileInView={{ opacity: 1, y: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ delay: 0.8 }}\n                        className=\"bg-gray-50 rounded-2xl p-6\"\n                      >\n                        <div className=\"flex items-center justify-between mb-4\">\n                          <h4 className=\"font-medium text-gray-900\">Carte de chaleur</h4>\n                            <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm text-gray-600\">Intensit√©</span>\n                            <div className=\"w-20 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                              <motion.div\n                                initial={{ width: 0 }}\n                                whileInView={{ width: \"70%\" }}\n                                viewport={{ once: true }}\n                                transition={{ delay: 1, duration: 0.8 }}\n                                className=\"h-full bg-gradient-to-r from-red-400 via-yellow-400 to-green-400\"\n                              />\n                              </div>\n                            </div>\n                          </div>\n                        <div className=\"bg-gray-200 rounded-xl h-32 flex items-center justify-center\">\n                          <span className=\"text-gray-500 text-sm\">Visualisation heatmap</span>\n                          </div>\n                      </motion.div>\n\n                      {/* Top zones */}\n                      <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        whileInView={{ opacity: 1, y: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ delay: 1.1 }}\n                        className=\"bg-gray-50 rounded-2xl p-6\"\n                      >\n                        <h4 className=\"font-medium text-gray-900 mb-4\">Top 5 zones</h4>\n                        <div className=\"space-y-3\">\n                          {[\n                            { rank: 1, name: \"Liens\", clicks: 20, color: \"bg-yellow-400\" },\n                            { rank: 2, name: \"Liens\", clicks: 19, color: \"bg-gray-400\" },\n                            { rank: 3, name: \"Sponsors\", clicks: 17, color: \"bg-gray-400\" },\n                            { rank: 4, name: \"Sponsors\", clicks: 17, color: \"bg-gray-400\" },\n                            { rank: 5, name: \"Sponsors\", clicks: 16, color: \"bg-gray-400\" }\n                          ].map((item, i) => (\n                            <motion.div\n                              key={i}\n                              initial={{ opacity: 0, x: -20 }}\n                              whileInView={{ opacity: 1, x: 0 }}\n                              viewport={{ once: true }}\n                              transition={{ delay: 1.2 + i * 0.1 }}\n                              className=\"flex items-center gap-3\"\n                            >\n                              <div className={`w-6 h-6 ${item.color} rounded-full flex items-center justify-center text-white text-xs font-medium`}>\n                                {item.rank}\n                        </div>\n                              <span className=\"text-sm text-gray-700\">{item.name} - {item.clicks} clics</span>\n                            </motion.div>\n                          ))}\n                            </div>\n                      </motion.div>\n                  </div>\n                </div>\n                </motion.div>\n              </motion.div>\n\n              {/* Analytics Description with Apple typography */}\n              <motion.div\n                initial={{ opacity: 0, x: 60 }}\n                whileInView={{ opacity: 1, x: 0 }}\n                viewport={{ once: true, margin: \"-100px\" }}\n                transition={{ \n                  duration: 1, \n                  delay: 0.5,\n                  ease: [0.25, 0.46, 0.45, 0.94]\n                }}\n                className=\"order-1 lg:order-2\"\n              >\n                <div className=\"lg:pl-8 px-4 sm:px-0\">\n                  <motion.h3\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.6 }}\n                    className=\"text-3xl sm:text-4xl font-light text-gray-900 mb-6 tracking-tight\"\n                  >\n                    Analyse tes performances\n                  </motion.h3>\n                  \n                  <motion.p\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.7 }}\n                    className=\"text-xl text-gray-600 font-light leading-relaxed mb-8\"\n                  >\n                    Comprends ton audience avec des <span className=\"font-medium text-gray-900\">analytics professionnelles</span> et optimise ton profil.\n                  </motion.p>\n\n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.8 }}\n                    className=\"space-y-6\"\n                  >\n                    {[\n                      { title: \"Heatmap des clics\", desc: \"Visualise les zones les plus actives de ton profil\" },\n                      { title: \"Statistiques d√©taill√©es\", desc: \"Total de clics, moyennes par zone, performances\" },\n                      { title: \"Top 5 des zones\", desc: \"Identifie tes contenus les plus performants\" },\n                      { title: \"Export de donn√©es\", desc: \"Analyse tes performances hors ligne en PDF\" }\n                    ].map((feature, i) => (\n                      <motion.div\n                        key={i}\n                        initial={{ opacity: 0, x: -20 }}\n                        whileInView={{ opacity: 1, x: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ delay: 0.9 + i * 0.1 }}\n                        className=\"flex items-start gap-4\"\n                      >\n                        <div className=\"w-2 h-2 bg-gray-900 rounded-full mt-3 flex-shrink-0\"></div>\n                        <div>\n                          <div className=\"font-medium text-gray-900 mb-1\">{feature.title}</div>\n                          <div className=\"text-gray-600 font-light\">{feature.desc}</div>\n                  </div>\n                      </motion.div>\n                    ))}\n                  </motion.div>\n                </div>\n              </motion.div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Sponsors Management Section - Apple Style with Sport Brands */}\n      <section className=\"py-20 sm:py-32 lg:py-40 bg-white relative overflow-hidden\">\n        {/* Background Elements with Brand Theme */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <motion.div\n            animate={{\n              scale: [1, 1.1, 1],\n              opacity: [0.02, 0.04, 0.02],\n            }}\n            transition={{\n              duration: 10,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-1/4 right-1/4 w-96 h-96 bg-gray-900 rounded-full blur-3xl\"\n          />\n          <motion.div\n            animate={{\n              scale: [1.1, 1, 1.1],\n              opacity: [0.01, 0.03, 0.01],\n            }}\n            transition={{\n              duration: 12,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-1/4 left-1/4 w-80 h-80 bg-gray-900 rounded-full blur-3xl\"\n          />\n          \n          {/* Sponsor and partnership themed emojis - Reduced */}\n          {['ü§ù', 'üíº', 'üéÅ'].map((emoji, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                y: [0, -35, 0],\n                opacity: [0.08, 0.18, 0.08],\n              }}\n              transition={{\n                duration: 8 + i * 2,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 2,\n              }}\n              className=\"absolute text-4xl\"\n              style={{\n                left: `${25 + i * 25}%`,\n                top: `${30 + (i % 3) * 25}%`,\n              }}\n            >\n              {emoji}\n            </motion.div>\n          ))}\n        </div>\n\n        <div className=\"container mx-auto px-4 sm:px-6 relative z-10\">\n          <div className=\"max-w-7xl mx-auto\">\n            {/* Header with Apple-style typography */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, ease: \"easeOut\" }}\n              className=\"text-center mb-24 max-w-4xl mx-auto\"\n            >\n              <motion.h2 \n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.8, delay: 0.1 }}\n                className=\"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-light text-gray-900 mb-6 tracking-tight\"\n              >\n                Gestion des sponsors\n              </motion.h2>\n              <motion.p \n                initial={{ opacity: 0, y: 20 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ duration: 0.8, delay: 0.2 }}\n                className=\"text-xl sm:text-2xl text-gray-600 font-light leading-relaxed\"\n              >\n                G√®re tes partenaires et sponsors avec codes promo\n              </motion.p>\n            </motion.div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 lg:gap-20 items-center\">\n              {/* Sponsors Description with Apple typography */}\n              <motion.div\n                initial={{ opacity: 0, x: -60 }}\n                whileInView={{ opacity: 1, x: 0 }}\n                viewport={{ once: true, margin: \"-100px\" }}\n                transition={{ \n                  duration: 1, \n                  delay: 0.3,\n                  ease: [0.25, 0.46, 0.45, 0.94]\n                }}\n                className=\"order-1 lg:order-1\"\n              >\n                <div className=\"lg:pr-8 px-4 sm:px-0\">\n                  <motion.h3\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.4 }}\n                    className=\"text-3xl sm:text-4xl font-light text-gray-900 mb-6 tracking-tight\"\n                  >\n                    Mon√©tise ton influence\n                  </motion.h3>\n                  \n                  <motion.p\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.5 }}\n                    className=\"text-xl text-gray-600 font-light leading-relaxed mb-8\"\n                  >\n                    Transforme ta passion en <span className=\"font-medium text-gray-900\">opportunit√©s commerciales</span> avec un syst√®me de gestion complet.\n                  </motion.p>\n\n                  <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.6 }}\n                    className=\"space-y-6\"\n                  >\n                    {[\n                      { title: \"Extraction automatique de logos\", desc: \"R√©cup√®re les logos depuis les sites web\" },\n                      { title: \"Codes promo personnalis√©s\", desc: \"Cr√©e et partage des r√©ductions exclusives\" },\n                      { title: \"Formulaire intuitif\", desc: \"Ajoute un sponsor en quelques clics\" },\n                      { title: \"Gestion compl√®te\", desc: \"√âdite, supprime et organise tes partenariats\" }\n                    ].map((feature, i) => (\n                      <motion.div\n                        key={i}\n                        initial={{ opacity: 0, x: -20 }}\n                        whileInView={{ opacity: 1, x: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ delay: 0.7 + i * 0.1 }}\n                        className=\"flex items-start gap-4\"\n                      >\n                        <div className=\"w-2 h-2 bg-gray-900 rounded-full mt-3 flex-shrink-0\"></div>\n                        <div>\n                          <div className=\"font-medium text-gray-900 mb-1\">{feature.title}</div>\n                          <div className=\"text-gray-600 font-light\">{feature.desc}</div>\n                  </div>\n                      </motion.div>\n                    ))}\n                  </motion.div>\n                </div>\n              </motion.div>\n\n              {/* Sponsors Screenshot with Apple-style design */}\n              <motion.div\n                initial={{ opacity: 0, x: 60 }}\n                whileInView={{ opacity: 1, x: 0 }}\n                viewport={{ once: true, margin: \"-100px\" }}\n                transition={{ \n                  duration: 1, \n                  delay: 0.5,\n                  ease: [0.25, 0.46, 0.45, 0.94]\n                }}\n                className=\"order-2 lg:order-2\"\n              >\n                <motion.div\n                  whileHover={{ \n                    scale: 1.02,\n                    transition: { duration: 0.3, ease: \"easeOut\" }\n                  }}\n                  className=\"relative\"\n                >\n                  {/* Main device frame */}\n                  <div className=\"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl shadow-gray-900/10 p-6 border border-gray-200/50\">\n                    {/* Device header */}\n                    <div className=\"flex items-center gap-2 mb-6\">\n                      <div className=\"flex gap-2\">\n                        <div className=\"w-3 h-3 bg-red-400 rounded-full\"></div>\n                        <div className=\"w-3 h-3 bg-yellow-400 rounded-full\"></div>\n                        <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n                      </div>\n                      <div className=\"flex-1 text-center\">\n                        <div className=\"w-32 h-6 bg-gray-200 rounded-full mx-auto\"></div>\n                      </div>\n                    </div>\n\n                    {/* Content */}\n                    <div className=\"space-y-6\">\n                        <div>\n                        <h3 className=\"text-2xl font-medium text-gray-900 mb-2\">Mes sponsors</h3>\n                        <p className=\"text-gray-600 font-light\">G√®re tes partenaires et sponsors avec codes promo</p>\n                        </div>\n\n                      {/* Form mockup */}\n                      <motion.div\n                        initial={{ opacity: 0, y: 20 }}\n                        whileInView={{ opacity: 1, y: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ delay: 0.8 }}\n                        className=\"bg-gray-50 rounded-2xl p-6\"\n                      >\n                        <h4 className=\"font-medium text-gray-900 mb-4\">Ajouter un sponsor</h4>\n                        \n                        <div className=\"space-y-4\">\n                          {/* Form fields */}\n                          {[\n                            { label: \"Nom du sponsor\", placeholder: \"Nike, Adidas...\", type: \"text\" },\n                            { label: \"Site web\", placeholder: \"https://example.com\", type: \"text\", hasButton: true },\n                            { label: \"Code promo\", placeholder: \"ATHLETE20\", type: \"text\" }\n                          ].map((field, i) => (\n                            <motion.div\n                              key={i}\n                              initial={{ opacity: 0, y: 10 }}\n                              whileInView={{ opacity: 1, y: 0 }}\n                              viewport={{ once: true }}\n                              transition={{ delay: 0.9 + i * 0.1 }}\n                            >\n                              <label className=\"block text-sm font-medium text-gray-700 mb-2\">{field.label}</label>\n                          <div className=\"flex gap-2\">\n                            <input \n                                  type={field.type}\n                                  placeholder={field.placeholder}\n                                  className=\"flex-1 p-3 border border-gray-200 rounded-xl text-sm bg-white\"\n                              disabled\n                            />\n                                {field.hasButton && (\n                                  <button className=\"px-4 py-3 bg-gray-200 text-gray-700 rounded-xl text-sm font-medium\">\n                                    Extraire\n                            </button>\n                                )}\n                          </div>\n                            </motion.div>\n                          ))}\n                          \n                          {/* Upload area */}\n                          <motion.div\n                            initial={{ opacity: 0, y: 10 }}\n                            whileInView={{ opacity: 1, y: 0 }}\n                            viewport={{ once: true }}\n                            transition={{ delay: 1.2 }}\n                          >\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Logo du sponsor</label>\n                            <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center bg-white\">\n                            <p className=\"text-sm text-gray-600\">Choisir un fichier</p>\n                            <p className=\"text-xs text-gray-500 mt-1\">Aucun fichier choisi</p>\n                          </div>\n                          </motion.div>\n                          \n                          {/* Submit button */}\n                          <motion.button\n                            initial={{ opacity: 0, y: 10 }}\n                            whileInView={{ opacity: 1, y: 0 }}\n                            viewport={{ once: true }}\n                            transition={{ delay: 1.3 }}\n                            className=\"w-full bg-gray-900 text-white py-3 rounded-xl text-sm font-medium hover:bg-gray-800 transition-colors\"\n                          >\n                          Ajouter\n                          </motion.button>\n                      </div>\n                      </motion.div>\n                  </div>\n                </div>\n                </motion.div>\n              </motion.div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Pricing Section - Apple Style with Enhanced Decorations */}\n      <section id=\"pricing\" className=\"py-20 sm:py-32 lg:py-40 bg-gray-50 relative overflow-hidden\">\n        {/* Background Elements - Enhanced */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          {/* Main blur effects */}\n            <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              opacity: [0.02, 0.04, 0.02],\n            }}\n            transition={{\n              duration: 14,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-1/3 right-1/3 w-96 h-96 bg-gray-900 rounded-full blur-3xl\"\n          />\n          <motion.div\n            animate={{\n              scale: [1.2, 1, 1.2],\n              opacity: [0.01, 0.03, 0.01],\n            }}\n            transition={{\n              duration: 16,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-1/3 left-1/3 w-80 h-80 bg-gray-900 rounded-full blur-3xl\"\n          />\n          \n          {/* Price tag shapes */}\n          <motion.div\n            animate={{\n              rotate: [0, 10, -10, 0],\n              y: [0, -20, 0],\n            }}\n            transition={{\n              duration: 6,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-20 left-20 w-24 h-24 border-2 border-green-500/10 rounded-full\"\n          />\n          \n          <motion.div\n            animate={{\n              rotate: [0, -15, 15, 0],\n              x: [0, 20, -20, 0],\n            }}\n            transition={{\n              duration: 8,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-32 right-24 w-32 h-32 border-2 border-yellow-500/10\"\n          />\n          \n          {/* Currency symbols floating */}\n          {['‚Ç¨', '‚Ç¨', '‚Ç¨'].map((symbol, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                y: [0, -100, 0],\n                opacity: [0.05, 0.15, 0.05],\n                rotate: [0, 360],\n              }}\n              transition={{\n                duration: 10 + i * 2,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 2,\n              }}\n              className=\"absolute text-6xl font-light text-gray-900/5\"\n              style={{\n                left: `${20 + i * 30}%`,\n                top: `${30 + i * 15}%`,\n              }}\n            >\n              {symbol}\n            </motion.div>\n          ))}\n          \n          {/* Star ratings decorations */}\n          {[...Array(6)].map((_, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                scale: [0.8, 1.2, 0.8],\n                rotate: [0, 180, 360],\n                opacity: [0.1, 0.2, 0.1],\n              }}\n              transition={{\n                duration: 4 + i,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 0.5,\n              }}\n              className=\"absolute text-2xl\"\n              style={{\n                left: `${15 + i * 15}%`,\n                top: `${60 + (i % 3) * 10}%`,\n              }}\n            >\n            </motion.div>\n          ))}\n        </div>\n\n        <div className=\"container mx-auto px-4 sm:px-6 relative z-10\">\n          {/* Header with Apple-style typography */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n            transition={{ duration: 0.8, ease: \"easeOut\" }}\n            className=\"text-center mb-24 max-w-4xl mx-auto\"\n          >\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ delay: 0.1 }}\n              className=\"inline-flex items-center gap-2 bg-gray-900 text-white px-6 py-3 rounded-full text-sm font-medium mb-8\"\n            >\n              <Zap className=\"w-4 h-4\" />\n              Offre de lancement - Prix r√©duits !\n            </motion.div>\n\n            <motion.h2\n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, delay: 0.2 }}\n              className=\"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-light text-gray-900 mb-6 tracking-tight\"\n            >\n              Choisis ton plan\n            </motion.h2>\n\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, delay: 0.3 }}\n              className=\"text-xl sm:text-2xl text-gray-600 font-light leading-relaxed mb-12\"\n            >\n              D√©bloque tout le potentiel de ton profil d&apos;athl√®te\n            </motion.p>\n\n            {/* Billing Toggle with Apple style */}\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9 }}\n              whileInView={{ opacity: 1, scale: 1 }}\n              viewport={{ once: true }}\n              transition={{ delay: 0.4 }}\n              className=\"inline-flex items-center bg-white border border-gray-200 rounded-full p-1 shadow-lg\"\n            >\n              <button\n                onClick={() => setBillingCycle(\"monthly\")}\n                className={`px-6 py-3 rounded-full font-medium transition-all text-sm ${\n                  billingCycle === \"monthly\"\n                    ? \"bg-gray-900 text-white shadow-sm\"\n                    : \"text-gray-600 hover:text-gray-900\"\n                }`}\n              >\n                Mensuel\n              </button>\n              <button\n                onClick={() => setBillingCycle(\"yearly\")}\n                className={`px-6 py-3 rounded-full font-medium transition-all relative text-sm ${\n                  billingCycle === \"yearly\"\n                    ? \"bg-gray-900 text-white shadow-sm\"\n                    : \"text-gray-600 hover:text-gray-900\"\n                }`}\n              >\n                Annuel\n                <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500 text-white text-xs px-3 py-1 rounded-full whitespace-nowrap font-medium\">\n                  2 mois offerts\n                </span>\n              </button>\n            </motion.div>\n          </motion.div>\n\n          {/* Plans Grid with Apple Style */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12 max-w-6xl mx-auto mb-16 px-4\">\n            {[\n              {\n                name: \"Free\",\n                price: 0,\n                description: \"Parfait pour commencer\",\n                icon: LinkIcon,\n                features: [\n                  \"1 profil public\",\n                  \"1 lien\",\n                  \"1 comp√©tition √† venir\",\n                  \"0 sponsors\",\n                  \"Galerie 2 m√©dias\",\n                  \"Th√®me basique\",\n                  \"Sous-domaine athlink.app\",\n                ],\n                cta: \"Commencer gratuitement\",\n                highlight: false,\n              },\n              {\n                name: \"Pro\",\n                price: 9.90,\n                yearlyPrice: 99,\n                description: \"Pour les athl√®tes s√©rieux\",\n                icon: Zap,\n                features: [\n                  \"Tout du plan Free\",\n                  \"Liens illimit√©s\",\n                  \"Comp√©titions illimit√©es\",\n                  \"Sponsors illimit√©s\",\n                  \"Galerie illimit√©e\",\n                  \"Analytics avanc√©es (7 jours)\",\n                  \"Badge \\\"Pro\\\" sur le profil\",\n                ],\n                cta: \"Passer Pro\",\n                highlight: true,\n                popular: true,\n              },\n              {\n                name: \"Elite\",\n                price: 25.90,\n                yearlyPrice: 259,\n                description: \"Pour les professionnels\",\n                icon: Crown,\n                features: [\n                  \"Tout du plan Pro\",\n                  \"Analytics illimit√©es\",\n                  \"Heatmap des clics\",\n                  \"D√©mographie visiteurs\",\n                  \"Export donn√©es (PDF)\",\n                  \"Service de coaching\",\n                  \"Personnalisation CSS\",\n                  \"Badge \\\"Elite\\\" sur le profil\",\n                  \"Support prioritaire\",\n                ],\n                cta: \"Passer Elite\",\n                highlight: false,\n              },\n            ].map((plan, index) => (\n              <motion.div\n                key={plan.name}\n                initial={{ opacity: 0, y: 40 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true, margin: \"-100px\" }}\n                transition={{ \n                  delay: 0.5 + index * 0.1, \n                  duration: 0.8,\n                  ease: [0.25, 0.46, 0.45, 0.94]\n                }}\n                whileHover={{ \n                  y: -12,\n                  transition: { duration: 0.3, ease: \"easeOut\" }\n                }}\n                className={`relative group ${\n                  plan.highlight\n                    ? \"scale-105\"\n                    : \"\"\n                }`}\n              >\n                {/* Popular Badge */}\n                {plan.popular && (\n                  <motion.div\n                    initial={{ opacity: 0, y: -10 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    transition={{ delay: 0.6 + index * 0.1 }}\n                    className=\"absolute -top-4 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-full text-sm font-medium shadow-lg z-10\"\n                  >\n Plus populaire\n                  </motion.div>\n                )}\n\n                {/* Card */}\n                <div className={`relative h-full p-8 lg:p-10 rounded-3xl border transition-all duration-500 ${\n                  plan.highlight\n                    ? \"bg-gray-900 text-white border-gray-700 shadow-2xl shadow-gray-900/20\"\n                    : \"bg-white/80 backdrop-blur-sm border-gray-100/50 hover:border-gray-200/50 hover:shadow-2xl hover:shadow-gray-900/5\"\n                }`}>\n                  {/* Subtle background gradient on hover */}\n                  <motion.div\n                    className={`absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 ${\n                      plan.highlight \n                        ? \"bg-gradient-to-br from-white/5 to-white/10\" \n                        : \"bg-gradient-to-br from-gray-50/50 to-gray-100/30\"\n                    }`}\n                  />\n\n                  {/* Icon with Apple-style animation */}\n                  <motion.div\n                    whileHover={{\n                      scale: 1.1,\n                      rotate: [0, -5, 5, 0],\n                      transition: { duration: 0.4 }\n                    }}\n                    className={`relative z-10 inline-flex p-4 rounded-2xl mb-6 shadow-lg ${\n                      plan.highlight ? \"bg-white/20\" : \"bg-gray-900\"\n                    }`}\n                  >\n                    <plan.icon className={`w-6 h-6 ${plan.highlight ? \"text-white\" : \"text-white\"}`} />\n                  </motion.div>\n\n                  {/* Plan Name with Apple typography */}\n                  <h3 className={`relative z-10 text-2xl font-medium mb-4 tracking-tight ${\n                    plan.highlight ? \"text-white\" : \"text-gray-900\"\n                  }`}>\n                  {plan.name}\n                </h3>\n\n                  <p className={`relative z-10 text-lg font-light leading-relaxed mb-6 ${\n                    plan.highlight ? \"text-white/80\" : \"text-gray-600\"\n                  }`}>\n                  {plan.description}\n                </p>\n\n                {/* Price */}\n                  <div className=\"relative z-10 mb-8\">\n                  {plan.price === 0 ? (\n                      <div className={`text-4xl font-light tracking-tight ${\n                        plan.highlight ? \"text-white\" : \"text-gray-900\"\n                      }`}>\n                      Gratuit\n                    </div>\n                  ) : (\n                    <>\n                      <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-4xl font-light tracking-tight ${\n                            plan.highlight ? \"text-white\" : \"text-gray-900\"\n                          }`}>\n                          {billingCycle === \"monthly\" ? plan.price.toFixed(2) : ((plan.yearlyPrice || 0) / 12).toFixed(2)}‚Ç¨\n                        </span>\n                          <span className={`text-lg font-light ${\n                            plan.highlight ? \"text-white/70\" : \"text-gray-600\"\n                          }`}>\n                          /mois\n                        </span>\n                      </div>\n                      {billingCycle === \"yearly\" && (\n                          <div className={`text-sm mt-1 font-light ${\n                            plan.highlight ? \"text-white/70\" : \"text-gray-600\"\n                          }`}>\n                          {plan.yearlyPrice}‚Ç¨ factur√© annuellement\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n\n                  {/* Features */}\n                  <div className=\"relative z-10 space-y-3 mb-8\">\n                    {plan.features.map((feature, i) => (\n                      <motion.div\n                        key={i}\n                        initial={{ opacity: 0, x: -20 }}\n                        whileInView={{ opacity: 1, x: 0 }}\n                        viewport={{ once: true }}\n                        transition={{ delay: 0.7 + index * 0.1 + i * 0.05 }}\n                        className=\"flex items-start gap-3\"\n                      >\n                        <div className={`w-1.5 h-1.5 rounded-full mt-2 flex-shrink-0 ${\n                          plan.highlight ? \"bg-white/60\" : \"bg-gray-900\"\n                        }`}></div>\n                        <span className={`text-sm font-light ${\n                          plan.highlight ? \"text-white/80\" : \"text-gray-600\"\n                        }`}>\n                          {feature}\n                        </span>\n                      </motion.div>\n                    ))}\n                  </div>\n\n                  {/* CTA Button with Apple style */}\n                  <motion.div\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    transition={{ duration: 0.2 }}\n                    className=\"relative z-10\"\n                  >\n                <Link\n                  href=\"/signup\"\n                      className={`w-full block py-4 rounded-full font-medium text-lg transition-all duration-300 text-center ${\n                    plan.highlight\n                          ? \"bg-white text-gray-900 hover:bg-gray-100 shadow-lg hover:shadow-xl\"\n                          : \"bg-gray-900 text-white hover:bg-gray-800 shadow-lg hover:shadow-xl\"\n                  }`}\n                >\n                  {plan.cta}\n                </Link>\n                  </motion.div>\n\n                  {/* Subtle animated accent line */}\n                  <motion.div\n                    className={`absolute bottom-0 left-8 right-8 h-px ${\n                      plan.highlight \n                        ? \"bg-gradient-to-r from-transparent via-white/30 to-transparent\"\n                        : \"bg-gradient-to-r from-transparent via-gray-300 to-transparent\"\n                    }`}\n                    initial={{ scaleX: 0 }}\n                    whileInView={{ scaleX: 1 }}\n                    viewport={{ once: true }}\n                    transition={{ duration: 1, delay: 0.8 + index * 0.1 }}\n                  />\n                </div>\n              </motion.div>\n            ))}\n          </div>\n\n          {/* Social Proof with Apple Style */}\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8, delay: 0.6 }}\n            className=\"text-center\"\n          >\n            <motion.h3\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ delay: 0.7 }}\n              className=\"text-3xl sm:text-4xl font-light text-gray-900 mb-6 tracking-tight\"\n            >\n              Utilis√© par les meilleurs\n            </motion.h3>\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ delay: 0.8 }}\n              className=\"text-xl text-gray-600 font-light leading-relaxed mb-12 max-w-2xl mx-auto\"\n            >\n              Rejoins des milliers d&apos;athl√®tes qui utilisent Athlink pour partager leur passion\n            </motion.p>\n            \n            <div className=\"grid md:grid-cols-4 gap-8 lg:gap-12 max-w-4xl mx-auto\">\n              {[\n                { icon: \"\", label: \"Runners\" },\n                { icon: \"\", label: \"Hyrox\" },\n                { icon: \"\", label: \"Triathletes\" },\n                { icon: \"\", label: \"Autres\" }\n              ].map((sport, i) => (\n                <motion.div\n                  key={i}\n                  initial={{ opacity: 0, y: 20 }}\n                  whileInView={{ opacity: 1, y: 0 }}\n                  viewport={{ once: true }}\n                  transition={{ delay: 0.9 + i * 0.1 }}\n                  className=\"text-center\"\n                >\n                  <div className=\"text-5xl mb-4\">{sport.icon}</div>\n                  <div className=\"text-lg font-medium text-gray-900\">{sport.label}</div>\n                </motion.div>\n              ))}\n            </div>\n          </motion.div>\n        </div>\n      </section>\n\n      {/* Final CTA - Apple Style with Victory Theme */}\n      <section className=\"py-20 sm:py-32 lg:py-40 bg-white relative overflow-hidden\">\n        {/* Background Elements with Victory Theme */}\n        <div className=\"absolute inset-0 pointer-events-none\">\n          <motion.div\n            animate={{\n              scale: [1, 1.1, 1],\n              opacity: [0.02, 0.04, 0.02],\n            }}\n            transition={{\n              duration: 18,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute top-1/4 right-1/4 w-96 h-96 bg-gray-900 rounded-full blur-3xl\"\n          />\n          <motion.div\n            animate={{\n              scale: [1.1, 1, 1.1],\n              opacity: [0.01, 0.03, 0.01],\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"easeInOut\"\n            }}\n            className=\"absolute bottom-1/4 left-1/4 w-80 h-80 bg-gray-900 rounded-full blur-3xl\"\n          />\n          \n          {/* Victory and motivation emojis */}\n          {['', '', '', '', '', '', '', '', '', ''].map((emoji, i) => (\n            <motion.div\n              key={i}\n              animate={{\n                y: [0, -70, 0],\n                rotate: [0, (i % 2 === 0 ? 360 : -360)],\n                opacity: [0.15, 0.4, 0.15],\n                scale: [0.8, 1.4, 0.8],\n              }}\n              transition={{\n                duration: 5 + i * 0.5,\n                repeat: Infinity,\n                ease: \"easeInOut\",\n                delay: i * 0.4,\n              }}\n              className=\"absolute text-5xl\"\n              style={{\n                left: `${5 + i * 9.5}%`,\n                top: `${15 + (i % 5) * 18}%`,\n              }}\n            >\n              {emoji}\n            </motion.div>\n          ))}\n          \n          {/* Confetti effect */}\n          {[...Array(15)].map((_, i) => (\n            <motion.div\n              key={`confetti-${i}`}\n              animate={{\n                y: [-20, 100],\n                x: [(i % 2 === 0 ? -30 : 30), (i % 2 === 0 ? 30 : -30)],\n                rotate: [0, 360],\n                opacity: [0.3, 0, 0.3],\n              }}\n              transition={{\n                duration: 3 + i * 0.2,\n                repeat: Infinity,\n                ease: \"easeOut\",\n                delay: i * 0.3,\n              }}\n              className=\"absolute w-2 h-2 rounded-full\"\n              style={{\n                left: `${10 + i * 6}%`,\n                top: `${10 + (i % 3) * 30}%`,\n                backgroundColor: ['#EAB308', '#F59E0B', '#10B981', '#3B82F6', '#8B5CF6'][i % 5],\n              }}\n            />\n          ))}\n        </div>\n\n        <div className=\"container mx-auto px-4 sm:px-6 relative z-10\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.8, ease: \"easeOut\" }}\n            className=\"max-w-4xl mx-auto text-center\"\n          >\n            <motion.h2\n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, delay: 0.1 }}\n              className=\"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-light text-gray-900 mb-6 tracking-tight\"\n            >\n              Pr√™t √† booster ta pr√©sence en ligne\n            </motion.h2>\n            \n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, delay: 0.2 }}\n              className=\"text-xl sm:text-2xl text-gray-600 font-light leading-relaxed mb-12 max-w-2xl mx-auto\"\n            >\n              Rejoins d√©j√† plusieurs d'athl√®tes qui utilisent Athlink pour partager leur passion\n            </motion.p>\n            \n            <motion.div\n              initial={{ opacity: 0, y: 30 }}\n              whileInView={{ opacity: 1, y: 0 }}\n              viewport={{ once: true }}\n              transition={{ duration: 0.8, delay: 0.3 }}\n              whileHover={{ scale: 1.02 }}\n              whileTap={{ scale: 0.98 }}\n            >\n            <Link\n              href=\"/signup\"\n                className=\"inline-flex items-center gap-3 bg-gray-900 text-white hover:bg-gray-800 px-8 py-4 rounded-full font-medium text-lg shadow-lg hover:shadow-xl transition-all duration-300\"\n            >\n                <Zap className=\"w-5 h-5\" />\n              Commencer maintenant - C&apos;est gratuit\n                <ArrowRight className=\"w-4 h-4\" />\n            </Link>\n            </motion.div>\n          </motion.div>\n        </div>\n      </section>\n\n\n      {/* Footer - Apple Style */}\n      <footer className=\"bg-gray-900 text-white py-20 relative overflow-hidden\">\n\n        <div className=\"container mx-auto px-4 sm:px-6 relative z-10\">\n          <div className=\"grid md:grid-cols-4 gap-12 lg:gap-16 mb-16\">\n            {/* Logo */}\n            <div>\n              <div className=\"flex items-center gap-3 mb-6\">\n                <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-r from-yellow-500 via-black to-yellow-600 flex items-center justify-center\">\n                  <span className=\"text-white font-black text-lg\">A</span>\n              </div>\n                <span className=\"font-light text-2xl tracking-tight\">Athlink</span>\n              </div>\n              <p className=\"text-gray-400 text-sm font-light leading-relaxed\">\n                Le profil digital con√ßu pour les athl√®tes\n              </p>\n            </div>\n\n            {/* Links columns */}\n            <div>\n              <h3 className=\"font-medium text-lg mb-6 text-white\">Produit</h3>\n              <ul className=\"space-y-3 text-sm text-gray-400\">\n                <li><Link href=\"#features\" className=\"hover:text-white transition-colors duration-300 font-light\">Fonctionnalit√©s</Link></li>\n                <li><Link href=\"#pricing\" className=\"hover:text-white transition-colors duration-300 font-light\">Tarifs</Link></li>\n                <li><Link href=\"#\" className=\"hover:text-white transition-colors duration-300 font-light\">Exemples</Link></li>\n              </ul>\n            </div>\n\n            <div>\n              <h3 className=\"font-medium text-lg mb-6 text-white\">Entreprise</h3>\n              <ul className=\"space-y-3 text-sm text-gray-400\">\n                <li><Link href=\"#\" className=\"hover:text-white transition-colors duration-300 font-light\">√Ä propos</Link></li>\n                <li><Link href=\"#\" className=\"hover:text-white transition-colors duration-300 font-light\">Blog</Link></li>\n                <li><Link href=\"#\" className=\"hover:text-white transition-colors duration-300 font-light\">Contact</Link></li>\n              </ul>\n            </div>\n\n            <div>\n              <h3 className=\"font-medium text-lg mb-6 text-white\">L√©gal</h3>\n              <ul className=\"space-y-3 text-sm text-gray-400\">\n                <li><Link href=\"/confidentialite\" className=\"hover:text-white transition-colors duration-300 font-light\">Confidentialit√©</Link></li>\n                <li><Link href=\"/conditions\" className=\"hover:text-white transition-colors duration-300 font-light\">Conditions</Link></li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Copyright */}\n          <div className=\"pt-8 border-t border-gray-800 text-center text-sm text-gray-500\">\n            <p className=\"font-light\">&copy; 2025 Athlink. Tous droits r√©serv√©s.</p>\n          </div>\n        </div>\n      </footer>\n    </main>\n  )\n}","size_bytes":68185},"coaching/bookings/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n\n    return NextResponse.json(bookings)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des r√©servations:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const body = await request.json()\n    const { clientName, clientEmail, clientPhone, date, startTime, duration, service, price, notes } = body\n\n    // Validation\n    if (!clientName || !clientEmail || !date || !startTime || !duration || !service || price === undefined) {\n      return NextResponse.json({ error: \"Donn√©es manquantes\" }, { status: 400 })\n    }\n\n    if (price < 0) {\n      return NextResponse.json({ error: \"Le prix ne peut pas √™tre n√©gatif\" }, { status: 400 })\n    }\n\n    // Calculer l'heure de fin\n    const [hours, minutes] = startTime.split(':').map(Number)\n    const endMinutes = hours * 60 + minutes + parseInt(duration)\n    const endHours = Math.floor(endMinutes / 60)\n    const endMins = endMinutes % 60\n    const endTime = `${String(endHours).padStart(2, '0')}:${String(endMins).padStart(2, '0')}`\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = profile.stats as any || {}\n    const existingBookings = stats.bookings || []\n\n    // Cr√©er la nouvelle r√©servation\n    const newBooking = {\n      id: `booking_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      clientName,\n      clientEmail,\n      clientPhone: clientPhone || null,\n      date,\n      startTime,\n      endTime,\n      duration: parseInt(duration),\n      service,\n      price: parseFloat(price),\n      status: \"PENDING\",\n      notes: notes || null,\n      createdAt: new Date().toISOString()\n    }\n\n    // Ajouter la nouvelle r√©servation\n    const updatedBookings = [newBooking, ...existingBookings]\n\n    // Sauvegarder dans le profil\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings: updatedBookings\n        }\n      }\n    })\n\n    return NextResponse.json(newBooking, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n","size_bytes":3444},"components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n\n","size_bytes":1129},"components/ui-pro/glass-section-header.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { Link as LinkIcon, Award, ImageIcon, Calendar, Zap } from \"lucide-react\"\n\ninterface GlassSectionHeaderProps {\n  title: string\n  count?: number\n  iconName?: \"link\" | \"award\" | \"image\" | \"calendar\" | \"zap\"\n}\n\nconst iconMap = {\n  link: LinkIcon,\n  award: Award,\n  image: ImageIcon,\n  calendar: Calendar,\n  zap: Zap,\n}\n\nexport function GlassSectionHeader({ title, count, iconName }: GlassSectionHeaderProps) {\n  const Icon = iconName ? iconMap[iconName] : null\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      whileInView={{ opacity: 1, y: 0 }}\n      viewport={{ once: true }}\n      transition={{ duration: 0.5 }}\n      className=\"flex items-center justify-between mb-6\"\n    >\n      <div className=\"flex items-center gap-2\">\n        {Icon && (\n          <motion.div\n            initial={{ scale: 0, rotate: -90 }}\n            whileInView={{ scale: 1, rotate: 0 }}\n            viewport={{ once: true }}\n            transition={{ type: \"spring\", stiffness: 200, delay: 0.1 }}\n            className=\"backdrop-blur-xl bg-gradient-to-br from-yellow-500 to-yellow-600 w-8 h-8 md:w-10 md:h-10 rounded-lg flex items-center justify-center shadow-lg\"\n          >\n            <Icon className=\"w-4 h-4 md:w-5 md:h-5 text-white\" />\n          </motion.div>\n        )}\n        <h2 className=\"text-xl md:text-2xl font-black text-yellow-500\">\n          {title}\n        </h2>\n      </div>\n\n      {count !== undefined && (\n        <motion.div\n          initial={{ scale: 0 }}\n          whileInView={{ scale: 1 }}\n          viewport={{ once: true }}\n          transition={{ type: \"spring\", stiffness: 200, delay: 0.2 }}\n          className=\"backdrop-blur-xl bg-black/40 border border-yellow-500/30 px-4 py-2 rounded-xl shadow-lg\"\n        >\n          <span className=\"text-base md:text-lg font-bold text-yellow-500\">\n            {count}\n          </span>\n        </motion.div>\n      )}\n    </motion.div>\n  )\n}\n\n","size_bytes":1970},"components/ui-pro/glass-sponsor-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { ExternalLink, Copy, Check } from \"lucide-react\"\nimport { useState } from \"react\"\n\ninterface Sponsor {\n  id: string\n  name: string\n  logoUrl: string | null\n  websiteUrl: string | null\n  description: string | null\n  promoCode: string | null\n}\n\ninterface GlassSponsorCardProps {\n  sponsor: Sponsor\n  index: number\n}\n\nexport function GlassSponsorCard({ sponsor, index }: GlassSponsorCardProps) {\n  const [copied, setCopied] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  const handleCopyPromoCode = async (e: React.MouseEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    \n    if (!sponsor.promoCode) return\n    \n    try {\n      await navigator.clipboard.writeText(sponsor.promoCode)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Failed to copy promo code', err)\n    }\n  }\n\n  const CardContent = () => (\n    <div className=\"relative h-full flex flex-col\">\n      {/* Logo or Name */}\n      {sponsor.logoUrl ? (\n        <div className=\"relative h-12 md:h-16 w-full mb-2 flex items-center justify-center\">\n          <Image\n            src={sponsor.logoUrl}\n            alt={sponsor.name}\n            fill\n            className=\"object-contain\"\n            sizes=\"(max-width: 768px) 50vw, 25vw\"\n          />\n        </div>\n      ) : (\n        <div className=\"mb-2\">\n          <h3 className=\"font-bold text-sm md:text-base text-white text-center\">\n            {sponsor.name}\n          </h3>\n        </div>\n      )}\n\n      {/* Description */}\n      {sponsor.description && (\n        <p className=\"text-[10px] text-gray-400 mb-2 line-clamp-2 text-center flex-grow\">\n          {sponsor.description}\n        </p>\n      )}\n\n      {/* Promo Code */}\n      {sponsor.promoCode && (\n        <div className=\"mt-auto pt-4\">\n          <p className=\"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide text-center\">\n            Code Promo\n          </p>\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            onClick={handleCopyPromoCode}\n            className=\"w-full relative group\"\n          >\n            <div className=\"backdrop-blur-xl bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 hover:border-green-400 rounded-xl px-3 py-3 flex items-center justify-center gap-2 transition-colors\">\n              <span className=\"font-mono font-black text-green-700 text-sm md:text-base\">\n                {sponsor.promoCode}\n              </span>\n              <motion.div\n                animate={{ scale: copied ? 0 : 1, opacity: copied ? 0 : 1 }}\n                className=\"absolute right-3\"\n              >\n                <Copy className=\"w-4 h-4 text-green-600\" />\n              </motion.div>\n              <motion.div\n                animate={{ scale: copied ? 1 : 0, opacity: copied ? 1 : 0 }}\n                className=\"absolute right-3\"\n              >\n                <Check className=\"w-4 h-4 text-green-700\" />\n              </motion.div>\n            </div>\n          </motion.button>\n          {copied && (\n            <motion.p\n              initial={{ opacity: 0, y: -5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0 }}\n              className=\"text-xs text-green-600 text-center mt-2 font-medium\"\n            >\n              Code copi√© !\n            </motion.p>\n          )}\n        </div>\n      )}\n    </div>\n  )\n\n  if (!sponsor.websiteUrl) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        whileInView={{ opacity: 1, y: 0 }}\n        viewport={{ once: true }}\n        transition={{ delay: index * 0.05 }}\n        className=\"backdrop-blur-xl bg-white/5 border border-yellow-500/20 rounded-lg shadow-lg p-3 md:p-4 h-full flex flex-col\"\n      >\n        <CardContent />\n      </motion.div>\n    )\n  }\n\n  return (\n    <motion.a\n      href={sponsor.websiteUrl}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      initial={{ opacity: 0, y: 20 }}\n      whileInView={{ opacity: 1, y: 0 }}\n      viewport={{ once: true }}\n      transition={{ delay: index * 0.05 }}\n      whileHover={{ y: -4, scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      className=\"block h-full group\"\n    >\n      <div className=\"backdrop-blur-xl bg-white/5 hover:bg-white/10 border border-yellow-500/20 hover:border-yellow-500/40 rounded-lg shadow-lg hover:shadow-2xl p-3 md:p-4 h-full flex flex-col transition-all duration-300 relative overflow-hidden\">\n        {/* Gradient overlay on hover */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: isHovered ? 1 : 0 }}\n          className=\"absolute inset-0 bg-gradient-to-br from-yellow-500/5 to-yellow-600/5 pointer-events-none\"\n        />\n        \n        <div className=\"relative z-10 flex flex-col h-full\">\n          <CardContent />\n          \n          {/* Visit link */}\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: isHovered ? 1 : 0, y: isHovered ? 0 : 10 }}\n            className=\"mt-4 pt-4 border-t border-white/40\"\n          >\n            <div className=\"flex items-center justify-center gap-1.5 text-[10px] md:text-xs text-yellow-500 font-semibold\">\n              <ExternalLink className=\"w-4 h-4\" />\n              <span>Visiter le site</span>\n            </div>\n          </motion.div>\n        </div>\n\n        {/* Bottom gradient bar */}\n        <motion.div\n          initial={{ scaleX: 0 }}\n          animate={{ scaleX: isHovered ? 1 : 0 }}\n          transition={{ duration: 0.3 }}\n          className=\"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-yellow-500 to-yellow-600 origin-left\"\n        />\n      </div>\n    </motion.a>\n  )\n}\n\n","size_bytes":5909},"coaching/pdf/[planId]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\nimport { readFile } from \"fs/promises\"\nimport { join } from \"path\"\nimport { existsSync } from \"fs\"\n\ninterface AccessTokenPayload {\n  planId: string\n  clientEmail: string\n  issuedAt: number\n  expiresAt: number\n}\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { planId: string } }\n) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const token = searchParams.get('token')\n\n    if (!token) {\n      return NextResponse.json({ error: \"Token d'acc√®s requis\" }, { status: 401 })\n    }\n\n    // V√©rifier le token\n    const tokenPayload = verifyAccessToken(token)\n    if (!tokenPayload) {\n      return NextResponse.json({ error: \"Token invalide ou expir√©\" }, { status: 401 })\n    }\n\n    if (tokenPayload.planId !== params.planId) {\n      return NextResponse.json({ error: \"Token invalide pour ce plan\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer le plan et le fichier PDF\n    const profiles = await prisma.profile.findMany({\n      where: { plan: \"COACH\" },\n      select: { id: true, stats: true }\n    })\n\n    let targetPlan = null\n    let coachProfileId = null\n\n    for (const profile of profiles) {\n      const stats = profile.stats as any\n      const trainingPlans = stats.trainingPlans || []\n      const plan = trainingPlans.find((p: any) => p.id === params.planId)\n      \n      if (plan) {\n        targetPlan = plan\n        coachProfileId = profile.id\n        break\n      }\n    }\n\n    if (!targetPlan || !targetPlan.pdfFileName) {\n      return NextResponse.json({ error: \"PDF non trouv√©\" }, { status: 404 })\n    }\n\n    // Construire le chemin du fichier\n    const fileName = targetPlan.pdfFileName\n    const filePath = join(process.cwd(), 'public', 'uploads', 'coaching', coachProfileId, fileName)\n\n    if (!existsSync(filePath)) {\n      return NextResponse.json({ error: \"Fichier PDF non trouv√© sur le serveur\" }, { status: 404 })\n    }\n\n    // Lire et servir le fichier\n    const fileBuffer = await readFile(filePath)\n    \n    return new NextResponse(fileBuffer, {\n      headers: {\n        'Content-Type': 'application/pdf',\n        'Content-Disposition': `inline; filename=\"${targetPlan.title}.pdf\"`,\n        'Cache-Control': 'private, max-age=3600' // Cache 1h\n      }\n    })\n\n  } catch (error) {\n    console.error(\"Erreur lors du service du PDF:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nfunction verifyAccessToken(token: string): AccessTokenPayload | null {\n  try {\n    const decoded = Buffer.from(token, 'base64').toString('utf-8')\n    const payload: AccessTokenPayload = JSON.parse(decoded)\n    \n    // V√©rifier l'expiration\n    if (Date.now() > payload.expiresAt) {\n      return null\n    }\n    \n    return payload\n  } catch {\n    return null\n  }\n}\n\n","size_bytes":2843},"globals.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n  --color-sidebar-ring: var(--sidebar-ring);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar: var(--sidebar);\n  --color-chart-5: var(--chart-5);\n  --color-chart-4: var(--chart-4);\n  --color-chart-3: var(--chart-3);\n  --color-chart-2: var(--chart-2);\n  --color-chart-1: var(--chart-1);\n  --color-ring: var(--ring);\n  --color-input: var(--input);\n  --color-border: var(--border);\n  --color-destructive: var(--destructive);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-accent: var(--accent);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-muted: var(--muted);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-secondary: var(--secondary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-primary: var(--primary);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-popover: var(--popover);\n  --color-card-foreground: var(--card-foreground);\n  --color-card: var(--card);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n}\n\n:root {\n  --radius: 0.625rem;\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.205 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.205 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.922 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.704 0.191 22.216);\n  --border: oklch(1 0 0 / 10%);\n  --input: oklch(1 0 0 / 15%);\n  --ring: oklch(0.556 0 0);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(1 0 0 / 10%);\n  --sidebar-ring: oklch(0.556 0 0);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n","size_bytes":4168},"components/ui-pro/profile-header.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { MapPin, Instagram, Youtube, Music } from \"lucide-react\"\n\ninterface ProfileHeaderProps {\n  displayName: string\n  bio: string | null\n  location: string | null\n  avatarUrl: string | null\n  sport: string\n  instagram: string | null\n  strava: string | null\n  youtube: string | null\n  tiktok: string | null\n}\n\nexport function ProfileHeader({\n  displayName,\n  bio,\n  location,\n  avatarUrl,\n  sport,\n  instagram,\n  strava,\n  youtube,\n  tiktok\n}: ProfileHeaderProps) {\n  const socialLinks = [\n    { icon: Instagram, url: instagram ? `https://instagram.com/${instagram}` : null, gradient: \"from-tertiary-500 to-accent-500\", name: \"Instagram\" },\n    { icon: StravaIcon, url: strava, gradient: \"from-accent-500 to-accent-600\", name: \"Strava\" },\n    { icon: Youtube, url: youtube, gradient: \"from-danger-500 to-danger-600\", name: \"YouTube\" },\n    { icon: Music, url: tiktok ? `https://tiktok.com/@${tiktok}` : null, gradient: \"from-gray-900 to-gray-800\", name: \"TikTok\", isDark: true },\n  ].filter(link => link.url)\n\n  return (\n    <div className=\"bg-white rounded-3xl shadow-floating p-8 md:p-12 lg:p-16\">\n      {/* Avatar & Badge Section */}\n      <div className=\"flex flex-col items-center text-center mb-8\">\n        <motion.div\n          initial={{ scale: 0.8, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          transition={{ type: \"spring\", damping: 15 }}\n          className=\"relative mb-6\"\n        >\n          {/* Avatar with animated ring */}\n          <motion.div\n            animate={{\n              rotate: 360,\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"linear\"\n            }}\n            className=\"absolute inset-0 bg-gradient-hero rounded-full blur-xl opacity-40\"\n          />\n          \n          <div className=\"relative w-32 h-32 md:w-44 md:h-44 lg:w-52 lg:h-52 rounded-full bg-gradient-hero p-1 shadow-glow-blue\">\n            {avatarUrl ? (\n              <Image\n                src={avatarUrl}\n                alt={displayName}\n                width={208}\n                height={208}\n                className=\"rounded-full object-cover w-full h-full\"\n                priority\n              />\n            ) : (\n              <div className=\"w-full h-full rounded-full bg-gradient-to-br from-primary-500 to-quaternary-500 flex items-center justify-center text-gray-900 text-4xl md:text-5xl lg:text-6xl font-black\">\n                {displayName[0]}\n              </div>\n            )}\n          </div>\n\n          {/* Sport Badge with animation */}\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"absolute -bottom-3 left-1/2 -translate-x-1/2\"\n          >\n            <div className=\"bg-white rounded-full px-5 py-2.5 shadow-elevated border-2 border-gray-100 backdrop-blur-sm\">\n              <span className=\"text-sm md:text-base font-bold bg-gradient-to-r from-accent-600 to-success-600 bg-clip-text text-transparent\">\n                {sport}\n              </span>\n            </div>\n          </motion.div>\n        </motion.div>\n\n        {/* Name with gradient animation */}\n        <motion.h1\n          initial={{ y: 20, opacity: 0 }}\n          animate={{ y: 0, opacity: 1 }}\n          transition={{ delay: 0.3 }}\n          className=\"text-3xl md:text-4xl lg:text-5xl font-black mb-4 mt-2\"\n        >\n          <span className=\"bg-gradient-to-r from-primary-600 via-quaternary-600 to-tertiary-600 bg-clip-text text-transparent\">\n            {displayName}\n          </span>\n        </motion.h1>\n\n        {/* Bio */}\n        {bio && (\n          <motion.p\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.4 }}\n            className=\"text-base md:text-lg text-gray-600 max-w-2xl mb-6 leading-relaxed\"\n          >\n            {bio}\n          </motion.p>\n        )}\n\n        {/* Location */}\n        {location && (\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.5 }}\n            className=\"flex items-center gap-2 text-gray-500 mb-6\"\n          >\n            <MapPin className=\"w-5 h-5\" />\n            <span className=\"font-medium\">{location}</span>\n          </motion.div>\n        )}\n\n        {/* Social Links */}\n        {socialLinks.length > 0 && (\n          <motion.div\n            initial={{ y: 20, opacity: 0 }}\n            animate={{ y: 0, opacity: 1 }}\n            transition={{ delay: 0.6 }}\n            className=\"flex flex-wrap gap-3 justify-center\"\n          >\n            {socialLinks.map((link, index) => (\n              <motion.a\n                key={link.name}\n                href={link.url!}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                transition={{ delay: 0.7 + index * 0.1, type: \"spring\", damping: 15 }}\n                whileHover={{ scale: 1.1, rotate: 5 }}\n                whileTap={{ scale: 0.95 }}\n                className={`w-12 h-12 md:w-14 md:h-14 rounded-full bg-gradient-to-br ${link.gradient} flex items-center justify-center shadow-standard hover:shadow-glow-blue transition-all ${link.isDark ? 'text-white' : 'text-gray-900'}`}\n              >\n                <link.icon className=\"w-6 h-6\" />\n              </motion.a>\n            ))}\n          </motion.div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction StravaIcon({ className }: { className?: string }) {\n  return (\n    <svg className={className} fill=\"currentColor\" viewBox=\"0 0 24 24\">\n      <path d=\"M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599l2.836 5.598h4.172L10.463 0l-7 13.828h4.169\" />\n    </svg>\n  )\n}\n\n","size_bytes":5943},"components/ui-pro/race-logo.tsx":{"content":"\"use client\"\n\ninterface RaceLogoProps {\n  src: string\n  alt: string\n  className?: string\n  variant?: 'light' | 'dark'\n}\n\nexport function RaceLogo({ src, alt, className, variant = 'dark' }: RaceLogoProps) {\n  const baseClasses = variant === 'dark' \n    ? \"bg-gray-800 border-gray-700\" \n    : \"bg-white border-gray-200\"\n  \n  return (\n    <img \n      src={src} \n      alt={alt}\n      className={`${baseClasses} ${className || ''}`}\n      onError={(e) => {\n        e.currentTarget.style.display = 'none'\n      }}\n    />\n  )\n}\n","size_bytes":522},"components/ui-pro/linktree-sponsor-row.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { Copy, Check } from \"lucide-react\"\n\ninterface Sponsor {\n  id: string\n  name: string\n  logoUrl: string | null\n  websiteUrl: string | null\n  promoCode: string | null\n}\n\ninterface LinktreeSponsorRowProps {\n  sponsors: Sponsor[]\n}\n\nfunction PromoCodeBadge({ code }: { code: string }) {\n  const [copied, setCopied] = useState(false)\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(code)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Failed to copy:', err)\n    }\n  }\n\n  return (\n    <motion.div \n      whileHover={{ scale: 1.05 }}\n      className=\"bg-yellow-500/20 border border-yellow-500/30 backdrop-blur-sm text-yellow-400 text-[10px] font-bold rounded-lg text-center w-32 sm:w-36 md:w-40 transition-all duration-300 hover:bg-yellow-500/30 hover:text-yellow-300 hover:shadow-lg overflow-hidden\"\n    >\n      <div className=\"flex items-center justify-between px-2 py-1\">\n        <div className=\"flex-1 truncate text-left\">\n          <span className=\"text-gray-400 font-normal\">Code : </span>{code}\n        </div>\n        <button\n          onClick={handleCopy}\n          className=\"ml-1 p-1 hover:bg-yellow-500/20 rounded transition-colors flex-shrink-0\"\n          title=\"Copier le code\"\n        >\n          {copied ? (\n            <Check className=\"w-3 h-3 text-green-400\" />\n          ) : (\n            <Copy className=\"w-3 h-3\" />\n          )}\n        </button>\n      </div>\n    </motion.div>\n  )\n}\n\nexport function LinktreeSponsorRow({ sponsors }: LinktreeSponsorRowProps) {\n  return (\n    <div className=\"mb-8\">\n      <p className=\"text-xs text-gray-400 uppercase tracking-wider font-semibold mb-3 text-center\">Partenaires</p>\n      <div className=\"flex gap-1 justify-center flex-wrap\">\n        {sponsors.slice(0, 4).map((sponsor, index) => (\n          <motion.div\n            key={sponsor.id}\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: index * 0.05 }}\n            className=\"flex flex-col items-center gap-2\"\n          >\n            {/* Logo Card */}\n            <motion.a\n              href={sponsor.websiteUrl || undefined}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              whileHover={{ scale: 1.10, y: -2 }}\n              whileTap={{ scale: 0.95 }}\n              className={`backdrop-blur-xl bg-gradient-to-br from-yellow-500/25 via-yellow-600/20 to-yellow-500/15 border border-yellow-500/40 hover:border-yellow-400/60 rounded-xl p-2 sm:p-3 text-center transition-all duration-300 ease-out hover:scale-110 hover:shadow-2xl hover:shadow-yellow-500/20 hover:-translate-y-1 aspect-square flex flex-col justify-center w-32 sm:w-36 md:w-40 h-32 sm:h-36 md:h-40 m-0 group cursor-pointer ${!sponsor.websiteUrl && 'pointer-events-none'}`}\n            >\n              <p className=\"text-[10px] mb-1 uppercase tracking-wider font-semibold text-yellow-400 transition-all duration-300 group-hover:scale-110 group-hover:text-yellow-300\">\n                Partenaire\n              </p>\n              {sponsor.logoUrl ? (\n                <div className=\"relative w-full h-full flex items-center justify-center\">\n                  <div className=\"relative w-16 h-16 sm:w-20 sm:h-20 transition-all duration-300 group-hover:scale-105\">\n                    <Image\n                      src={sponsor.logoUrl}\n                      alt={sponsor.name}\n                      fill\n                      className=\"object-contain\"\n                      sizes=\"25vw\"\n                    />\n                  </div>\n                </div>\n              ) : (\n                <p className=\"text-sm font-black text-white text-center transition-all duration-300 group-hover:text-white/90\">{sponsor.name}</p>\n              )}\n              <p className=\"text-xs text-white/80 mt-1 font-medium truncate transition-all duration-300 group-hover:text-white/90\">{sponsor.name}</p>\n            </motion.a>\n            \n            {/* Promo code below */}\n            {sponsor.promoCode && (\n              <PromoCodeBadge code={sponsor.promoCode} />\n            )}\n          </motion.div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\n","size_bytes":4347},"confidentialite/page.tsx":{"content":"export default function ConfidentialitePage() {\n  return (\n    <main className=\"min-h-screen bg-gray-50 py-16\">\n      <div className=\"container mx-auto px-4 sm:px-6 max-w-4xl\">\n        <div className=\"bg-white rounded-2xl shadow-lg p-8 md:p-12\">\n          <h1 className=\"text-3xl md:text-4xl font-black text-gray-900 mb-8\">\n            Politique de Confidentialit√©\n          </h1>\n          \n          <div className=\"prose prose-lg max-w-none text-gray-700\">\n            <p className=\"text-sm text-gray-500 mb-8\">\n              Derni√®re mise √† jour : {new Date().toLocaleDateString('fr-FR')}\n            </p>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">1. Introduction</h2>\n              <p>\n                Athlink s'engage √† prot√©ger votre vie priv√©e. Cette politique de confidentialit√© \n                explique comment nous collectons, utilisons et prot√©geons vos informations personnelles \n                lorsque vous utilisez notre service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">2. Informations que nous collectons</h2>\n              <h3 className=\"text-xl font-semibold mb-3\">2.1 Informations fournies directement</h3>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Nom et pr√©nom</li>\n                <li>Adresse e-mail</li>\n                <li>Informations de profil (photo, bio, localisation)</li>\n                <li>Informations de paiement (g√©r√©es par nos prestataires s√©curis√©s)</li>\n                <li>Contenu que vous publiez (photos, vid√©os, textes)</li>\n              </ul>\n              \n              <h3 className=\"text-xl font-semibold mb-3\">2.2 Informations collect√©es automatiquement</h3>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Adresse IP et informations de connexion</li>\n                <li>Donn√©es d'utilisation et analytics</li>\n                <li>Cookies et technologies similaires</li>\n                <li>Informations sur votre appareil et navigateur</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">3. Utilisation de vos informations</h2>\n              <p>Nous utilisons vos informations pour :</p>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Fournir et am√©liorer nos services</li>\n                <li>Personnaliser votre exp√©rience utilisateur</li>\n                <li>Communiquer avec vous sur nos services</li>\n                <li>Traiter les paiements et g√©rer votre compte</li>\n                <li>Respecter nos obligations l√©gales</li>\n                <li>Pr√©venir la fraude et assurer la s√©curit√©</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">4. Partage de vos informations</h2>\n              <p>\n                Nous ne vendons jamais vos informations personnelles. Nous pouvons partager \n                vos informations dans les cas suivants :\n              </p>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Avec votre consentement explicite</li>\n                <li>Avec nos prestataires de services (sous contrat de confidentialit√©)</li>\n                <li>Pour respecter une obligation l√©gale</li>\n                <li>Pour prot√©ger nos droits et la s√©curit√©</li>\n              </ul>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">5. S√©curit√© des donn√©es</h2>\n              <p>\n                Nous mettons en place des mesures de s√©curit√© techniques et organisationnelles \n                appropri√©es pour prot√©ger vos informations contre l'acc√®s non autoris√©, \n                la modification, la divulgation ou la destruction.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">6. Vos droits</h2>\n              <p>Conform√©ment au RGPD, vous avez le droit de :</p>\n              <ul className=\"list-disc pl-6 mb-4\">\n                <li>Acc√©der √† vos donn√©es personnelles</li>\n                <li>Rectifier vos donn√©es</li>\n                <li>Supprimer vos donn√©es</li>\n                <li>Limiter le traitement</li>\n                <li>Portabilit√© des donn√©es</li>\n                <li>Vous opposer au traitement</li>\n              </ul>\n              <p>\n                Pour exercer ces droits, contactez-nous √† : \n                <a href=\"mailto:privacy@athlink.app\" className=\"text-blue-600 hover:underline\">\n                  privacy@athlink.app\n                </a>\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">7. Cookies</h2>\n              <p>\n                Nous utilisons des cookies pour am√©liorer votre exp√©rience. Vous pouvez \n                g√©rer vos pr√©f√©rences de cookies dans les param√®tres de votre navigateur.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">8. Conservation des donn√©es</h2>\n              <p>\n                Nous conservons vos donn√©es aussi longtemps que n√©cessaire pour fournir \n                nos services et respecter nos obligations l√©gales.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">9. Modifications</h2>\n              <p>\n                Nous pouvons modifier cette politique de confidentialit√©. Les modifications \n                importantes vous seront notifi√©es par e-mail ou via notre service.\n              </p>\n            </section>\n\n            <section className=\"mb-8\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">10. Contact</h2>\n              <p>\n                Pour toute question concernant cette politique de confidentialit√© :\n              </p>\n              <div className=\"bg-gray-100 p-4 rounded-lg mt-4\">\n                <p><strong>E-mail :</strong> privacy@athlink.app</p>\n                <p><strong>Adresse :</strong> Athlink, France</p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n","size_bytes":6546},"components/ui-pro/sponsor-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { ExternalLink, Copy, Check } from \"lucide-react\"\nimport { useState } from \"react\"\n\ninterface Sponsor {\n  id: string\n  name: string\n  logoUrl: string | null\n  websiteUrl: string | null\n  description: string | null\n  promoCode: string | null\n}\n\ninterface SponsorCardProps {\n  sponsor: Sponsor\n  index: number\n}\n\nexport function SponsorCard({ sponsor, index }: SponsorCardProps) {\n  const [copied, setCopied] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n\n  const handleCopyPromoCode = async () => {\n    if (!sponsor.promoCode) return\n    \n    try {\n      await navigator.clipboard.writeText(sponsor.promoCode)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Failed to copy promo code', err)\n    }\n  }\n\n  const CardContent = () => (\n    <div className=\"relative h-full flex flex-col\">\n      {/* Logo or Name */}\n      {sponsor.logoUrl ? (\n        <div className=\"relative h-20 md:h-24 w-full mb-4 flex items-center justify-center\">\n          <Image\n            src={sponsor.logoUrl}\n            alt={sponsor.name}\n            fill\n            className=\"object-contain\"\n            sizes=\"(max-width: 768px) 50vw, 25vw\"\n          />\n        </div>\n      ) : (\n        <div className=\"mb-4\">\n          <h3 className=\"font-bold text-lg md:text-xl text-gray-900 text-center\">\n            {sponsor.name}\n          </h3>\n        </div>\n      )}\n\n      {/* Description */}\n      {sponsor.description && (\n        <p className=\"text-xs md:text-sm text-gray-600 mb-4 line-clamp-2 text-center flex-grow\">\n          {sponsor.description}\n        </p>\n      )}\n\n      {/* Promo Code */}\n      {sponsor.promoCode && (\n        <div className=\"mt-auto pt-4\">\n          <p className=\"text-xs font-semibold text-gray-500 mb-2 uppercase tracking-wide text-center\">\n            Code Promo\n          </p>\n          <motion.button\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            onClick={(e) => {\n              e.preventDefault()\n              e.stopPropagation()\n              handleCopyPromoCode()\n            }}\n            className=\"w-full relative group\"\n          >\n            <div className=\"bg-gradient-to-r from-success-50 to-success-100 border-2 border-success-300 rounded-xl px-3 py-3 flex items-center justify-center gap-2 hover:border-success-400 transition-colors\">\n              <span className=\"font-mono font-black text-success-700 text-sm md:text-base\">\n                {sponsor.promoCode}\n              </span>\n              <motion.div\n                animate={{ scale: copied ? 0 : 1, opacity: copied ? 0 : 1 }}\n                className=\"absolute right-3\"\n              >\n                <Copy className=\"w-4 h-4 text-success-600\" />\n              </motion.div>\n              <motion.div\n                animate={{ scale: copied ? 1 : 0, opacity: copied ? 1 : 0 }}\n                className=\"absolute right-3\"\n              >\n                <Check className=\"w-4 h-4 text-success-700\" />\n              </motion.div>\n            </div>\n          </motion.button>\n          {copied && (\n            <motion.p\n              initial={{ opacity: 0, y: -5 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0 }}\n              className=\"text-xs text-success-600 text-center mt-2 font-medium\"\n            >\n              Code copi√© !\n            </motion.p>\n          )}\n        </div>\n      )}\n    </div>\n  )\n\n  if (!sponsor.websiteUrl) {\n    return (\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ duration: 0.3, delay: index * 0.05 }}\n        className=\"bg-white rounded-2xl shadow-standard p-5 md:p-6 text-center h-full flex flex-col\"\n      >\n        <CardContent />\n      </motion.div>\n    )\n  }\n\n  return (\n    <motion.a\n      href={sponsor.websiteUrl}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.3, delay: index * 0.05 }}\n      whileHover={{ y: -4 }}\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      className=\"block h-full group\"\n    >\n      <div className=\"relative bg-white rounded-2xl shadow-standard hover:shadow-elevated p-5 md:p-6 text-center h-full flex flex-col transition-all duration-300 border-2 border-transparent hover:border-brand-blue-200\">\n        <CardContent />\n        \n        {/* Visit link */}\n        <motion.div\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: isHovered ? 1 : 0, y: isHovered ? 0 : 10 }}\n          className=\"mt-4 pt-4 border-t border-gray-100\"\n        >\n          <div className=\"flex items-center justify-center gap-2 text-xs md:text-sm text-brand-blue-600 font-semibold\">\n            <ExternalLink className=\"w-4 h-4\" />\n            <span>Visiter le site</span>\n          </div>\n        </motion.div>\n\n        {/* Animated gradient border */}\n        <motion.div\n          className=\"absolute inset-0 rounded-2xl bg-gradient-to-r from-brand-blue-500 via-brand-orange-500 to-brand-green-500 opacity-0 group-hover:opacity-20 transition-opacity -z-10\"\n          animate={{\n            backgroundPosition: isHovered ? [\"0% 50%\", \"100% 50%\", \"0% 50%\"] : \"0% 50%\",\n          }}\n          transition={{\n            duration: 3,\n            repeat: isHovered ? Infinity : 0,\n            ease: \"linear\"\n          }}\n          style={{ backgroundSize: \"200% 200%\" }}\n        />\n      </div>\n    </motion.a>\n  )\n}\n\n","size_bytes":5662},"(dashboard)/dashboard/coaching/coaching-dashboard-client.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Link from \"next/link\"\nimport { \n  Target, \n  Calendar, \n  BarChart3, \n  TrendingUp, \n  Users, \n  Euro, \n  Clock, \n  CheckCircle, \n  AlertCircle,\n  ArrowRight,\n  Plus,\n  Eye,\n  Settings,\n  Star,\n  Award,\n  Zap,\n  Shield,\n  Sparkles\n} from \"lucide-react\"\n\ninterface DashboardStats {\n  totalPlans: number\n  activePlans: number\n  totalBookings: number\n  pendingBookings: number\n  confirmedBookings: number\n  completedBookings: number\n  totalRevenue: number\n  monthlyRevenue: number\n}\n\ninterface CoachingDashboardClientProps {\n  initialStats: DashboardStats\n  profileId: string\n  coachName: string\n  username: string\n}\n\nexport function CoachingDashboardClient({ initialStats, profileId, coachName, username }: CoachingDashboardClientProps) {\n  const [stats, setStats] = useState<DashboardStats>(initialStats)\n  const [isLoading, setIsLoading] = useState(false)\n\n  // Simuler le rechargement des stats\n  const refreshStats = async () => {\n    setIsLoading(true)\n    // Simuler un d√©lai de chargement\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    setIsLoading(false)\n  }\n\n  const serviceCards = [\n    {\n      id: \"training-plans\",\n      title: \"Plans d'Entra√Ænement\",\n      description: \"Cr√©er et vendre tes programmes d'entra√Ænement\",\n      icon: Target,\n      color: \"yellow\",\n      gradient: \"from-yellow-400 to-yellow-500\",\n      bgGradient: \"from-yellow-50 to-yellow-100\",\n      iconBg: \"from-yellow-100 to-yellow-200\",\n      href: \"/dashboard/coaching/training-plans\",\n      stats: {\n        primary: stats.totalPlans,\n        secondary: `${stats.activePlans} actifs`,\n        trend: \"+12%\"\n      },\n      features: [\n        \"Programmes personnalis√©s\",\n        \"Upload PDF int√©gr√©\",\n        \"Tarification flexible\",\n        \"Suivi des progr√®s\",\n        \"Analytics de performance\"\n      ],\n      status: \"active\",\n      badge: \"100% Fonctionnel\"\n    },\n    {\n      id: \"bookings\",\n      title: \"Gestion R√©servations\",\n      description: \"Calendrier professionnel et syst√®me de booking\",\n      icon: Calendar,\n      color: \"yellow\",\n      gradient: \"from-yellow-400 to-yellow-500\",\n      bgGradient: \"from-yellow-50 to-yellow-100\",\n      iconBg: \"from-yellow-100 to-yellow-200\",\n      href: \"/dashboard/coaching/bookings\",\n      stats: {\n        primary: stats.totalBookings,\n        secondary: `${stats.pendingBookings} en attente`,\n        trend: \"+8%\"\n      },\n      features: [\n        \"Calendrier interactif\",\n        \"R√©servations en ligne\",\n        \"Paiements int√©gr√©s\",\n        \"Rappels automatiques\",\n        \"Gestion des cr√©neaux\"\n      ],\n      status: \"active\",\n      badge: \"Interface Pro\"\n    },\n    {\n      id: \"analytics\",\n      title: \"Analytics Business\",\n      description: \"Suivi des revenus et performance commerciale\",\n      icon: BarChart3,\n      color: \"yellow\",\n      gradient: \"from-yellow-400 to-yellow-500\",\n      bgGradient: \"from-yellow-50 to-yellow-100\",\n      iconBg: \"from-yellow-100 to-yellow-200\",\n      href: \"/dashboard/coaching/business-analytics\",\n      stats: {\n        primary: `${stats.totalRevenue.toFixed(0)}‚Ç¨`,\n        secondary: `${stats.monthlyRevenue.toFixed(0)}‚Ç¨ ce mois`,\n        trend: \"+15%\"\n      },\n      features: [\n        \"Suivi des revenus\",\n        \"Conversion clients\",\n        \"Rapports d√©taill√©s\",\n        \"Pr√©visions de revenus\",\n        \"Dashboard temps r√©el\"\n      ],\n      status: \"active\",\n      badge: \"Analytics Avanc√©es\"\n    }\n  ]\n\n  const quickActions = [\n    {\n      title: \"Cr√©er un Plan\",\n      description: \"Nouveau programme d'entra√Ænement\",\n      icon: Plus,\n      href: \"/dashboard/coaching/training-plans\",\n      color: \"gray\"\n    },\n    {\n      title: \"Nouvelle R√©servation\",\n      description: \"Ajouter un rendez-vous\",\n      icon: Calendar,\n      href: \"/dashboard/coaching/bookings\",\n      color: \"gray\"\n    },\n    {\n      title: \"Voir Analytics\",\n      description: \"Performance business\",\n      icon: BarChart3,\n      href: \"/dashboard/coaching/business-analytics\",\n      color: \"gray\"\n    },\n    {\n      title: \"Page Publique\",\n      description: \"Voir ton profil coaching\",\n      icon: Eye,\n      href: `/${username}/coaching`,\n      color: \"gray\"\n    }\n  ]\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Quick Actions */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        {quickActions.map((action, index) => {\n          const IconComponent = action.icon\n          return (\n            <motion.div\n              key={action.title}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <Link href={action.href} className=\"group block\">\n                <div className=\"bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 transition-all duration-300 group-hover:-translate-y-1 border border-gray-100\">\n                  <div className={`w-12 h-12 rounded-xl bg-${action.color}-100 group-hover:bg-${action.color}-200 flex items-center justify-center mb-4 transition-colors`}>\n                    <IconComponent className={`w-6 h-6 text-${action.color}-600`} />\n                  </div>\n                  <h3 className=\"font-bold text-gray-900 mb-1 group-hover:text-gray-700 transition-colors\">\n                    {action.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 group-hover:text-gray-500 transition-colors\">\n                    {action.description}\n                  </p>\n                  <ArrowRight className={`w-4 h-4 text-${action.color}-500 mt-2 group-hover:translate-x-1 transition-transform`} />\n                </div>\n              </Link>\n            </motion.div>\n          )\n        })}\n      </div>\n\n      {/* Services Cards */}\n      <div className=\"grid lg:grid-cols-3 gap-8\">\n        {serviceCards.map((service, index) => {\n          const IconComponent = service.icon\n          return (\n            <motion.div\n              key={service.id}\n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.2 }}\n            >\n              <Link href={service.href} className=\"group block h-full\">\n                <div className=\"relative bg-white rounded-3xl shadow-standard hover:shadow-elevated p-8 transition-all duration-500 group-hover:-translate-y-2 h-full overflow-hidden border border-gray-100\">\n                  {/* Gradient Background */}\n                  <div className={`absolute inset-0 bg-gradient-to-br ${service.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`} />\n                  \n                  {/* Top Border */}\n                  <div className={`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${service.gradient}`} />\n                  \n                  {/* Content */}\n                  <div className=\"relative z-10\">\n                    {/* Title & Description */}\n                    <div className=\"mb-6\">\n                      <h3 className=\"text-2xl font-bold text-gray-900 mb-2 group-hover:text-gray-800 transition-colors\">\n                        {service.title}\n                      </h3>\n                      <p className=\"text-gray-600 group-hover:text-gray-500 transition-colors\">\n                        {service.description}\n                      </p>\n                    </div>\n\n                    {/* Stats */}\n                    <div className=\"mb-6\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"text-3xl font-bold text-gray-900\">\n                          {service.stats.primary}\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-sm text-gray-600\">{service.stats.secondary}</div>\n                          <div className=\"text-xs text-green-600 font-medium flex items-center gap-1\">\n                            <TrendingUp className=\"w-3 h-3\" />\n                            {service.stats.trend}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Features */}\n                    <div className=\"space-y-3 mb-6\">\n                      {service.features.map((feature, featureIndex) => (\n                        <div key={featureIndex} className=\"flex items-center gap-3\">\n                          <div className={`w-2 h-2 bg-${service.color}-500 rounded-full`} />\n                          <span className=\"text-sm text-gray-700 group-hover:text-gray-600 transition-colors\">\n                            {feature}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                        <Zap className=\"w-4 h-4\" />\n                        <span>Interface Pro</span>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-2 text-gray-400 group-hover:text-gray-600 transition-colors\">\n                        <span className=\"text-sm font-medium\">Acc√©der</span>\n                        <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Hover Effect */}\n                  <div className={`absolute inset-0 bg-gradient-to-br ${service.gradient} opacity-0 group-hover:opacity-5 transition-opacity duration-500`} />\n                </div>\n              </Link>\n            </motion.div>\n          )\n        })}\n      </div>\n\n      {/* Performance Overview */}\n      <motion.div\n        initial={{ opacity: 0, y: 30 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.8 }}\n        className=\"bg-gradient-to-br from-gray-50 to-white rounded-3xl shadow-standard p-8 border border-gray-200\"\n      >\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Performance Globale</h3>\n            <p className=\"text-gray-600\">Vue d'ensemble de ton activit√© de coaching</p>\n          </div>\n          \n          <button\n            onClick={refreshStats}\n            disabled={isLoading}\n            className=\"flex items-center gap-2 px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-medium transition-colors disabled:opacity-50\"\n          >\n            {isLoading ? (\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n            ) : (\n              <Settings className=\"w-4 h-4\" />\n            )}\n            Actualiser\n          </button>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {/* Plans Performance */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Target className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">Plans d'Entra√Ænement</div>\n                <div className=\"text-lg font-bold text-gray-900\">{stats.totalPlans}</div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.activePlans}/{stats.totalPlans} actifs\n            </div>\n          </div>\n\n          {/* Bookings Performance */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Calendar className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">R√©servations</div>\n                <div className=\"text-lg font-bold text-gray-900\">{stats.totalBookings}</div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.pendingBookings} en attente\n            </div>\n          </div>\n\n          {/* Revenue Performance */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Euro className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">Revenus Total</div>\n                <div className=\"text-lg font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.monthlyRevenue.toFixed(0)}‚Ç¨ ce mois\n            </div>\n          </div>\n\n          {/* Success Rate */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Award className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">Taux de Succ√®s</div>\n                <div className=\"text-lg font-bold text-gray-900\">\n                  {stats.totalBookings > 0 ? Math.round((stats.completedBookings / stats.totalBookings) * 100) : 0}%\n                </div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.completedBookings} s√©ances termin√©es\n            </div>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Call to Action */}\n      <motion.div\n        initial={{ opacity: 0, y: 30 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 1 }}\n        className=\"relative bg-white rounded-3xl p-8 text-center overflow-hidden border border-gray-200 shadow-lg\"\n      >\n        <div className=\"relative z-10\">\n          <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center mx-auto mb-6 shadow-lg\">\n            <Sparkles className=\"w-8 h-8 text-black\" />\n          </div>\n          \n          <h3 className=\"text-3xl font-black text-gray-900 mb-4\">\n            Pr√™t √† d√©velopper ton business ?\n          </h3>\n          <p className=\"text-gray-600 mb-6 max-w-2xl mx-auto text-lg\">\n            Utilise toutes les fonctionnalit√©s professionnelles d'Athlink pour cr√©er une exp√©rience coaching exceptionnelle et d√©velopper ton activit√©.\n          </p>\n          \n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/dashboard/coaching/training-plans\"\n              className=\"inline-flex items-center gap-2 bg-gray-900 text-white hover:bg-gray-800 px-6 py-3 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl hover:scale-105\"\n            >\n              <Plus className=\"w-5 h-5\" />\n              Cr√©er mon premier plan\n            </Link>\n            <Link\n              href={`/${username}/coaching`}\n              className=\"inline-flex items-center gap-2 bg-white text-gray-900 hover:bg-gray-50 px-6 py-3 rounded-xl font-bold transition-all border-2 border-gray-200 hover:border-gray-300\"\n            >\n              <Eye className=\"w-5 h-5\" />\n              Voir ma page publique\n            </Link>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  )\n}\n","size_bytes":16112},"coaching/training-plans/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const plan = plans.find((p: any) => p.id === params.id)\n\n    if (!plan) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json(plan)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const formData = await request.formData()\n    const title = formData.get('title') as string\n    const description = formData.get('description') as string\n    const price = formData.get('price') ? parseFloat(formData.get('price') as string) : undefined\n    const duration = formData.get('duration') ? parseInt(formData.get('duration') as string) : undefined\n    const difficulty = formData.get('difficulty') as string\n    const category = formData.get('category') as string\n    const isActive = formData.get('isActive') === 'true'\n    const pdfFile = formData.get('pdfFile') as File | null\n    const pdfFileName = formData.get('pdfFileName') as string\n\n    // R√©cup√©rer les plans existants\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const planIndex = plans.findIndex((p: any) => p.id === params.id)\n\n    if (planIndex === -1) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    // Validation\n    if (price !== undefined && price < 0) {\n      return NextResponse.json({ error: \"Le prix ne peut pas √™tre n√©gatif\" }, { status: 400 })\n    }\n\n    if (duration !== undefined && duration < 1) {\n      return NextResponse.json({ error: \"La dur√©e doit √™tre d'au moins 1 semaine\" }, { status: 400 })\n    }\n\n    if (difficulty) {\n      const validDifficulties = [\"DEBUTANT\", \"INTERMEDIAIRE\", \"AVANCE\"]\n      if (!validDifficulties.includes(difficulty)) {\n        return NextResponse.json({ error: \"Niveau de difficult√© invalide\" }, { status: 400 })\n      }\n    }\n\n    // G√©rer le fichier PDF\n    let pdfFileName = plans[planIndex].pdfFileName // Garder l'existant par d√©faut\n    if (pdfFile) {\n      // Nouveau fichier upload√©\n      pdfFileName = pdfFile.name\n    } else if (pdfFileName !== undefined) {\n      // Nom de fichier fourni (garde l'existant)\n      pdfFileName = pdfFileName\n    }\n\n    // Mettre √† jour le plan\n    const updatedPlan = {\n      ...plans[planIndex],\n      ...(title !== undefined && { title }),\n      ...(description !== undefined && { description }),\n      ...(price !== undefined && { price }),\n      ...(duration !== undefined && { duration }),\n      ...(difficulty !== undefined && { difficulty }),\n      ...(category !== undefined && { category }),\n      ...(isActive !== undefined && { isActive }),\n      ...(pdfFileName !== undefined && { pdfFileName })\n    }\n\n    plans[planIndex] = updatedPlan\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: plans\n        }\n      }\n    })\n\n    return NextResponse.json(updatedPlan)\n  } catch (error) {\n    console.error(\"Erreur lors de la mise √† jour du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer les plans existants\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const planIndex = plans.findIndex((p: any) => p.id === params.id)\n\n    if (planIndex === -1) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    // Supprimer le plan\n    plans.splice(planIndex, 1)\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: plans\n        }\n      }\n    })\n\n    return NextResponse.json({ message: \"Plan supprim√© avec succ√®s\" })\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":6276},"(dashboard)/dashboard/profile/profile-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { ImageUpload } from \"@/components/ImageUpload\"\nimport SimpleImageCropper from \"@/components/ui-pro/simple-image-cropper\"\nimport { toast } from \"sonner\"\nimport Link from \"next/link\"\nimport { getOriginalSportFromStats } from \"@/lib/validations\"\nimport { Crop } from \"lucide-react\"\n\ninterface Profile {\n  username: string\n  displayName: string\n  bio: string\n  sport: string\n  location: string\n  instagram: string\n  strava: string\n  youtube: string\n  tiktok: string\n  twitter: string\n  telegram: string\n  whatsapp: string\n  isPublic: boolean\n  avatarUrl?: string | null\n  coverUrl?: string | null\n  stats?: any\n}\n\nexport function ProfileContent() {\n  const [profile, setProfile] = useState<Profile | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isFetching, setIsFetching] = useState(true)\n  const [showCropper, setShowCropper] = useState(false)\n  const [cropperImage, setCropperImage] = useState<string>(\"\")\n\n  useEffect(() => {\n    fetchProfile()\n  }, [])\n\n  async function fetchProfile() {\n    try {\n      const res = await fetch(\"/api/profile\")\n      const data = await res.json()\n      setProfile(data.profile)\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement du profil\")\n    } finally {\n      setIsFetching(false)\n    }\n  }\n\n  async function onSubmit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n    setIsLoading(true)\n    \n    try {\n      const res = await fetch(\"/api/profile\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(profile),\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur\")\n      }\n\n      toast.success(\"Profil mis √† jour !\")\n    } catch (error: any) {\n      toast.error(error.message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleCropImage = async (croppedUrl: string) => {\n    try {\n      // Convert blob URL to File object for upload\n      const response = await fetch(croppedUrl)\n      const blob = await response.blob()\n      \n      // Create a File object from the blob\n      const file = new File([blob], \"avatar.jpg\", { type: \"image/jpeg\" })\n      \n      // Upload via the upload API\n      const formData = new FormData()\n      formData.append(\"file\", file)\n      formData.append(\"type\", \"avatar\")\n      \n      const uploadRes = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData\n      })\n\n      if (!uploadRes.ok) {\n        const errorData = await uploadRes.json()\n        throw new Error(errorData.error || \"Erreur lors de l'upload\")\n      }\n\n      const uploadData = await uploadRes.json()\n      \n      // Update local state with new URL\n      setProfile({ ...profile!, avatarUrl: uploadData.url })\n      setShowCropper(false)\n      \n      // Force refresh of the profile to get the updated image\n      await fetchProfile()\n      \n      toast.success(\"Image rogn√©e et sauvegard√©e avec succ√®s !\")\n    } catch (error) {\n      console.error(\"Crop error:\", error)\n      toast.error(\"Erreur lors de la sauvegarde de l'image\")\n    }\n  }\n\n  const openCropper = () => {\n    if (profile?.avatarUrl) {\n      setCropperImage(profile.avatarUrl)\n      setShowCropper(true)\n    } else {\n      toast.error(\"Aucune image √† rogner\")\n    }\n  }\n\n  if (isFetching) {\n    return (\n      <div className=\"container mx-auto p-6 max-w-2xl\">\n        <p>Chargement...</p>\n      </div>\n    )\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"container mx-auto p-6 max-w-2xl\">\n        <p>Erreur lors du chargement du profil</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-2xl\">\n      <div className=\"mb-8 flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">Mon profil</h1>\n          <p className=\"text-muted-foreground\">\n            Personnalise ton profil public\n          </p>\n        </div>\n        <Button asChild variant=\"outline\">\n          <Link href={`/${profile.username}`} target=\"_blank\">\n            Voir mon profil\n          </Link>\n        </Button>\n      </div>\n\n      {/* Upload d'images */}\n      <Card className=\"mb-6\">\n        <CardHeader>\n          <CardTitle>Images du profil</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center\">\n            <h3 className=\"font-semibold mb-3 text-center\">Avatar</h3>\n            <ImageUpload\n              type=\"avatar\"\n              currentUrl={profile.avatarUrl}\n              onUploadComplete={(url) => {\n                setProfile({ ...profile, avatarUrl: url })\n                fetchProfile()\n              }}\n            />\n            {profile.avatarUrl && (\n              <div className=\"mt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={openCropper}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Crop className=\"w-4 h-4\" />\n                  Rogner l'image\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Informations g√©n√©rales</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={onSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"displayName\">Nom affich√©</Label>\n              <Input \n                id=\"displayName\" \n                value={profile.displayName}\n                onChange={(e) => setProfile({...profile, displayName: e.target.value})}\n                placeholder=\"Thomas Dupont\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"username\">Nom d'utilisateur</Label>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-muted-foreground whitespace-nowrap\">athlink.app/</span>\n                <Input \n                  id=\"username\" \n                  value={profile.username}\n                  onChange={(e) => setProfile({...profile, username: e.target.value})}\n                  placeholder=\"thomas-runner\"\n                  className=\"flex-1\"\n                  disabled\n                />\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Le nom d'utilisateur ne peut pas √™tre modifi√© pour le moment\n              </p>\n            </div>\n\n            <div>\n              <Label htmlFor=\"bio\">Bio</Label>\n              <textarea \n                id=\"bio\"\n                value={profile.bio || \"\"}\n                onChange={(e) => setProfile({...profile, bio: e.target.value})}\n                placeholder=\"Runner passionn√© - Marathon en 2h45...\"\n                className=\"w-full min-h-[100px] p-3 rounded-md border border-input bg-background\"\n                maxLength={500}\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {profile.bio?.length || 0} / 500\n              </p>\n            </div>\n\n            <div>\n              <Label htmlFor=\"sport\">Sport principal</Label>\n                <Input \n                  id=\"sport\" \n                  value={profile.sport || \"\"}\n                  onChange={(e) => setProfile({...profile, sport: e.target.value})}\n                  placeholder=\"Course √† pied, Cyclisme, Natation, Triathlon, Ski...\"\n                />\n            </div>\n\n            <div>\n              <Label htmlFor=\"location\">Localisation</Label>\n              <Input \n                id=\"location\" \n                value={profile.location || \"\"}\n                onChange={(e) => setProfile({...profile, location: e.target.value})}\n                placeholder=\"Paris, France\"\n              />\n            </div>\n\n            <div className=\"border-t pt-4 mt-6\">\n              <h3 className=\"font-semibold mb-4\">R√©seaux sociaux</h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"instagram\">Instagram</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"instagram\" \n                      value={profile.instagram || \"\"}\n                      onChange={(e) => setProfile({...profile, instagram: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"strava\">Strava</Label>\n                  <Input \n                    id=\"strava\" \n                    value={profile.strava || \"\"}\n                    onChange={(e) => setProfile({...profile, strava: e.target.value})}\n                    placeholder=\"https://www.strava.com/athletes/...\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"youtube\">YouTube</Label>\n                  <Input \n                    id=\"youtube\" \n                    value={profile.youtube || \"\"}\n                    onChange={(e) => setProfile({...profile, youtube: e.target.value})}\n                    placeholder=\"https://youtube.com/@username\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"tiktok\">TikTok</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"tiktok\" \n                      value={profile.tiktok || \"\"}\n                      onChange={(e) => setProfile({...profile, tiktok: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"twitter\">X / Twitter</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"twitter\" \n                      value={profile.twitter || \"\"}\n                      onChange={(e) => setProfile({...profile, twitter: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"telegram\">Telegram</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"telegram\" \n                      value={profile.telegram || \"\"}\n                      onChange={(e) => setProfile({...profile, telegram: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"whatsapp\">WhatsApp</Label>\n                  <Input \n                    id=\"whatsapp\" \n                    value={profile.whatsapp || \"\"}\n                    onChange={(e) => setProfile({...profile, whatsapp: e.target.value})}\n                    placeholder=\"+33612345678\"\n                  />\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Format international avec indicatif pays\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border-t pt-4 mt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label>Profil public</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Ton profil est {profile.isPublic ? \"visible\" : \"masqu√©\"}\n                  </p>\n                </div>\n                <Button \n                  type=\"button\"\n                  variant={profile.isPublic ? \"default\" : \"outline\"}\n                  onClick={() => setProfile({...profile, isPublic: !profile.isPublic})}\n                >\n                  {profile.isPublic ? \"‚úì Public\" : \"Priv√©\"}\n                </Button>\n              </div>\n            </div>\n\n            <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\n              {isLoading ? \"Enregistrement...\" : \"Enregistrer les modifications\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Image Cropper Modal */}\n      {showCropper && (\n        <SimpleImageCropper\n          imageUrl={cropperImage}\n          onCrop={handleCropImage}\n          onClose={() => setShowCropper(false)}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":13190},"(dashboard)/dashboard/media/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function MediaPage() {\n  // Rediriger vers Profil o√π la Galerie est maintenant int√©gr√©e\n  redirect(\"/dashboard/profile#galerie\")\n}\n","size_bytes":193},"(dashboard)/dashboard/coaching/training-plans/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { TrainingPlansClient } from \"./training-plans-client\"\n\nexport default async function TrainingPlansPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      id: true,\n      stats: true\n    }\n  })\n\n  if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n    redirect(\"/dashboard\")\n  }\n\n  // R√©cup√©rer les plans d'entra√Ænement depuis le champ stats (temporaire)\n  const profileStats = profile.stats as any || {}\n  const trainingPlans = profileStats.trainingPlans || []\n\n  // Statistiques\n  const stats = {\n    totalPlans: trainingPlans.length,\n    totalSessions: trainingPlans.reduce((acc: number, plan: any) => acc + (plan.sessions?.length || 0), 0),\n    totalSubscribers: trainingPlans.reduce((acc: number, plan: any) => acc + (plan.subscribers?.length || 0), 0),\n    totalRevenue: trainingPlans.reduce((acc: number, plan: any) => acc + (plan.price * (plan.subscribers?.length || 0)), 0)\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <a\n                href=\"/dashboard/coaching\"\n                className=\"inline-flex items-center gap-2 text-gray-900 hover:text-gray-700 font-medium transition-colors mb-4\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Retour au Centre de Coaching\n              </a>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                Plans d'Entra√Ænement\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                Cr√©e et vends tes programmes personnalis√©s\n              </p>\n            </div>\n            <PlanBadge plan=\"COACH\" size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Plans cr√©√©s</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalPlans}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">S√©ances totales</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalSessions}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Abonn√©s</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalSubscribers}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Revenus</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <TrainingPlansClient \n        initialPlans={trainingPlans}\n        profileId={profile.id}\n      />\n    </div>\n  )\n}\n","size_bytes":6965},"deployment/backup/backup-schedule.md":{"content":"# üìÖ Backup Schedule for AthLink\n\n## Daily Backups\n- Database: Every 6 hours\n- User uploads: Daily at 2 AM\n- Configuration files: Weekly\n\n## Backup Retention\n- Daily backups: 7 days\n- Weekly backups: 4 weeks\n- Monthly backups: 12 months\n\n## Backup Locations\n- Database: Supabase automatic backups\n- Files: AWS S3 or similar\n- Configuration: Git repository\n\n## Recovery Procedures\n1. Database: Restore from Supabase dashboard\n2. Files: Download from backup storage\n3. Configuration: Pull from Git repository\n\n## Monitoring\n- Backup success notifications\n- Storage usage monitoring\n- Recovery time testing\n","size_bytes":606},"links/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { linkSchema } from \"@/lib/validations\"\n\n// GET all links\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        links: {\n          orderBy: { position: 'asc' }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ links: profile.links })\n\n  } catch (error) {\n    console.error(\"GET links error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// POST new link\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = linkSchema.parse(body)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: { links: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Check limits for FREE plan\n    if (profile.plan === \"FREE\" && profile.links.length >= 10) {\n      return NextResponse.json(\n        { error: \"Limite de 10 liens atteinte. Passe en Athlete Pro !\" },\n        { status: 403 }\n      )\n    }\n\n    const maxPosition = await prisma.link.aggregate({\n      where: { profileId: profile.id },\n      _max: { position: true }\n    })\n\n    const link = await prisma.link.create({\n      data: {\n        ...validatedData,\n        profileId: profile.id,\n        position: (maxPosition._max.position || 0) + 1\n      }\n    })\n\n    return NextResponse.json({ link }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"POST link error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2374},"analytics/track-view/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\nimport { headers } from \"next/headers\"\n\nexport async function POST(request: Request) {\n  try {\n    const { profileId } = await request.json()\n\n    if (!profileId) {\n      return NextResponse.json({ error: \"Profile ID requis\" }, { status: 400 })\n    }\n\n    // R√©cup√©rer les informations du visiteur\n    const headersList = await headers()\n    const userAgent = headersList.get('user-agent') || ''\n    const forwarded = headersList.get('x-forwarded-for')\n    const ip = forwarded ? forwarded.split(',')[0] : headersList.get('x-real-ip') || 'unknown'\n    \n    // D√©terminer le type d'appareil\n    const isMobile = /Mobile|Android|iPhone|iPad|iPod/i.test(userAgent)\n    const device = isMobile ? 'mobile' : 'desktop'\n    \n    // D√©terminer le navigateur\n    let browser = 'Other'\n    if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) browser = 'Chrome'\n    else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) browser = 'Safari'\n    else if (userAgent.includes('Firefox')) browser = 'Firefox'\n    else if (userAgent.includes('Edg')) browser = 'Edge'\n\n    // R√©cup√©rer ou cr√©er l'entr√©e analytics du jour\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    let analytics = await prisma.analytics.findFirst({\n      where: {\n        profileId,\n        date: {\n          gte: today,\n          lt: new Date(today.getTime() + 24 * 60 * 60 * 1000)\n        }\n      }\n    })\n\n    if (!analytics) {\n      analytics = await prisma.analytics.create({\n        data: {\n          profileId,\n          date: today,\n          views: 1,\n          uniqueViews: 1,\n          linkClicks: 0,\n          device,\n          country: null // On pourrait utiliser une API de g√©olocalisation ici\n        }\n      })\n    } else {\n      analytics = await prisma.analytics.update({\n        where: { id: analytics.id },\n        data: {\n          views: { increment: 1 }\n        }\n      })\n    }\n\n    // Stocker les donn√©es d√©mographiques dans les stats du profil\n    const profile = await prisma.profile.findUnique({\n      where: { id: profileId },\n      select: { stats: true }\n    })\n\n    const stats = (profile?.stats as any) || {}\n    const demographics = stats.demographics || {\n      devices: {},\n      browsers: {},\n      countries: {}\n    }\n\n    // Incr√©menter les compteurs\n    demographics.devices[device] = (demographics.devices[device] || 0) + 1\n    demographics.browsers[browser] = (demographics.browsers[browser] || 0) + 1\n\n    await prisma.profile.update({\n      where: { id: profileId },\n      data: {\n        stats: {\n          ...stats,\n          demographics\n        }\n      }\n    })\n\n    return NextResponse.json({ \n      success: true, \n      analyticsId: analytics.id,\n      device,\n      browser\n    })\n  } catch (error) {\n    console.error(\"Erreur tracking view:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors du tracking\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":3002},"(dashboard)/dashboard/coaching/training-plans/sessions-manager.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Plus, Edit3, Trash2, Clock, Target, Calendar, Dumbbell } from \"lucide-react\"\n\ninterface TrainingSession {\n  id: string\n  title: string\n  description: string\n  weekNumber: number\n  dayNumber: number\n  duration: number\n  exercises: any[]\n  createdAt: string\n}\n\ninterface SessionsManagerProps {\n  trainingPlanId: string\n  planDuration: number\n  onSessionsChange: () => void\n}\n\nexport function SessionsManager({ trainingPlanId, planDuration, onSessionsChange }: SessionsManagerProps) {\n  const [sessions, setSessions] = useState<TrainingSession[]>([])\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [editingSession, setEditingSession] = useState<TrainingSession | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    weekNumber: 1,\n    dayNumber: 1,\n    duration: 60,\n    exercises: []\n  })\n\n  const daysOfWeek = [\n    \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"\n  ]\n\n  useEffect(() => {\n    fetchSessions()\n  }, [trainingPlanId])\n\n  const fetchSessions = async () => {\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${trainingPlanId}/sessions`)\n      if (response.ok) {\n        const data = await response.json()\n        setSessions(data)\n      }\n    } catch (error) {\n      console.error(\"Erreur lors du chargement des sessions:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreateSession = async () => {\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${trainingPlanId}/sessions`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData)\n      })\n\n      if (response.ok) {\n        const newSession = await response.json()\n        setSessions([...sessions, newSession])\n        setShowCreateForm(false)\n        resetForm()\n        onSessionsChange()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la cr√©ation:\", error)\n    }\n  }\n\n  const handleDeleteSession = async (sessionId: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer cette session ?\")) return\n\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${trainingPlanId}/sessions/${sessionId}`, {\n        method: \"DELETE\"\n      })\n\n      if (response.ok) {\n        setSessions(sessions.filter(session => session.id !== sessionId))\n        onSessionsChange()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression:\", error)\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      description: \"\",\n      weekNumber: 1,\n      dayNumber: 1,\n      duration: 60,\n      exercises: []\n    })\n  }\n\n  const openEditForm = (session: TrainingSession) => {\n    setFormData({\n      title: session.title,\n      description: session.description,\n      weekNumber: session.weekNumber,\n      dayNumber: session.dayNumber,\n      duration: session.duration,\n      exercises: session.exercises\n    })\n    setEditingSession(session)\n    setShowCreateForm(true)\n  }\n\n  // Grouper les sessions par semaine\n  const sessionsByWeek = sessions.reduce((acc, session) => {\n    if (!acc[session.weekNumber]) {\n      acc[session.weekNumber] = []\n    }\n    acc[session.weekNumber].push(session)\n    return acc\n  }, {} as Record<number, TrainingSession[]>)\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-blue-600\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">Sessions d'Entra√Ænement</h3>\n          <p className=\"text-gray-600\">G√®re les s√©ances de ton programme</p>\n        </div>\n        <button\n          onClick={() => {\n            resetForm()\n            setEditingSession(null)\n            setShowCreateForm(true)\n          }}\n          className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-4 py-2 rounded-xl font-medium shadow-elevated transition-all hover:scale-105\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Ajouter une session\n        </button>\n      </div>\n\n      {/* Sessions Grid */}\n      <div className=\"space-y-6\">\n        {Array.from({ length: planDuration }, (_, i) => i + 1).map((week) => (\n          <div key={week} className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <h4 className=\"text-lg font-bold text-gray-900 mb-4\">\n              Semaine {week}\n            </h4>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-7 gap-4\">\n              {Array.from({ length: 7 }, (_, i) => i + 1).map((day) => {\n                const session = sessionsByWeek[week]?.find(s => s.dayNumber === day)\n                \n                return (\n                  <div key={day} className=\"min-h-[120px]\">\n                    <div className=\"text-sm font-medium text-gray-600 mb-2\">\n                      {daysOfWeek[day - 1]}\n                    </div>\n                    \n                    {session ? (\n                      <motion.div\n                        initial={{ opacity: 0, scale: 0.9 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        className=\"bg-gradient-to-br from-primary-blue-50 to-primary-blue-100 border border-primary-blue-200 rounded-lg p-3 h-full\"\n                      >\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <h5 className=\"font-medium text-primary-blue-900 text-sm truncate\">\n                            {session.title}\n                          </h5>\n                          <div className=\"flex gap-1\">\n                            <button\n                              onClick={() => openEditForm(session)}\n                              className=\"p-1 text-primary-blue-600 hover:text-primary-blue-700\"\n                            >\n                              <Edit3 className=\"w-3 h-3\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteSession(session.id)}\n                              className=\"p-1 text-primary-blue-600 hover:text-red-600\"\n                            >\n                              <Trash2 className=\"w-3 h-3\" />\n                            </button>\n                          </div>\n                        </div>\n                        \n                        <div className=\"space-y-1 text-xs text-primary-blue-700\">\n                          <div className=\"flex items-center gap-1\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>{session.duration}min</span>\n                          </div>\n                          {session.exercises.length > 0 && (\n                            <div className=\"flex items-center gap-1\">\n                              <Dumbbell className=\"w-3 h-3\" />\n                              <span>{session.exercises.length} exercices</span>\n                            </div>\n                          )}\n                        </div>\n                      </motion.div>\n                    ) : (\n                      <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-3 h-full flex items-center justify-center hover:border-primary-blue-300 transition-colors\">\n                        <button\n                          onClick={() => {\n                            setFormData(prev => ({ ...prev, weekNumber: week, dayNumber: day }))\n                            setEditingSession(null)\n                            setShowCreateForm(true)\n                          }}\n                          className=\"text-gray-400 hover:text-primary-blue-600 transition-colors\"\n                        >\n                          <Plus className=\"w-6 h-6\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Create/Edit Form Modal */}\n      <AnimatePresence>\n        {showCreateForm && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => {\n              setShowCreateForm(false)\n              setEditingSession(null)\n              resetForm()\n            }}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-xl font-bold text-gray-900 mb-6\">\n                {editingSession ? \"Modifier la session\" : \"Cr√©er une nouvelle session\"}\n              </h3>\n\n              <div className=\"space-y-6\">\n                {/* Title */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Titre de la session *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"Ex: Cardio & Renforcement\"\n                  />\n                </div>\n\n                {/* Description */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description *\n                  </label>\n                  <textarea\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    rows={3}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"D√©cris le contenu de cette session...\"\n                  />\n                </div>\n\n                {/* Week and Day */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Semaine *\n                    </label>\n                    <select\n                      value={formData.weekNumber}\n                      onChange={(e) => setFormData({ ...formData, weekNumber: parseInt(e.target.value) })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      {Array.from({ length: planDuration }, (_, i) => (\n                        <option key={i + 1} value={i + 1}>Semaine {i + 1}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Jour *\n                    </label>\n                    <select\n                      value={formData.dayNumber}\n                      onChange={(e) => setFormData({ ...formData, dayNumber: parseInt(e.target.value) })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      {daysOfWeek.map((day, index) => (\n                        <option key={index + 1} value={index + 1}>{day}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                {/* Duration */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Dur√©e (minutes) *\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"15\"\n                    max=\"180\"\n                    value={formData.duration}\n                    onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) || 60 })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowCreateForm(false)\n                      setEditingSession(null)\n                      resetForm()\n                    }}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={handleCreateSession}\n                    className=\"flex-1 px-6 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-bold hover:shadow-glow-blue transition-all\"\n                  >\n                    {editingSession ? \"Mettre √† jour\" : \"Cr√©er la session\"}\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n","size_bytes":14073},"components/ui-pro/advanced-analytics.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect, useMemo } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { \n  BarChart3, \n  TrendingUp, \n  Eye, \n  MousePointer, \n  Users, \n  Download,\n  Calendar,\n  MapPin,\n  Clock,\n  Globe,\n  Smartphone,\n  Monitor\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { CalendarHeatmap } from \"./calendar-heatmap\"\n\ninterface AnalyticsData {\n  views: {\n    total: number\n    unique: number\n    byDate: Array<{ date: string; views: number; uniqueViews: number; clicks: number }>\n  }\n  clicks: {\n    total: number\n    byLink: Array<{ linkTitle: string; clicks: number; percentage: number }>\n    byHour: Array<{ hour: number; clicks: number }>\n  }\n  demographics: {\n    countries: Array<{ country: string; visitors: number; percentage: number }>\n    devices: Array<{ device: string; count: number; percentage: number }>\n    browsers: Array<{ browser: string; count: number; percentage: number }>\n  }\n  heatmap: Array<{\n    x: number\n    y: number\n    intensity: number\n    clicks: number\n  }>\n}\n\ninterface AdvancedAnalyticsProps {\n  data: AnalyticsData\n  userPlan: \"FREE\" | \"PRO\" | \"ELITE\"\n  onExportPDF?: () => void\n  className?: string\n  timeRange?: string\n  onTimeRangeChange?: (range: string) => void\n}\n\nexport function AdvancedAnalytics({ \n  data, \n  userPlan, \n  onExportPDF,\n  className,\n  timeRange: externalTimeRange,\n  onTimeRangeChange\n}: AdvancedAnalyticsProps) {\n  const [internalTimeRange, setInternalTimeRange] = useState(\"7d\")\n  const [activeTab, setActiveTab] = useState(\"overview\")\n  \n  // Utiliser le timeRange externe s'il est fourni, sinon utiliser l'interne\n  const timeRange = externalTimeRange || internalTimeRange\n  const setTimeRange = onTimeRangeChange || setInternalTimeRange\n\n  const canAccessAdvancedFeatures = userPlan === \"PRO\" || userPlan === \"ELITE\"\n  const canAccessEliteFeatures = userPlan === \"ELITE\"\n\n  // Calculer les vraies tendances bas√©es sur les donn√©es\n  const trends = useMemo(() => {\n    const byDate = data.views.byDate\n    if (byDate.length < 2) {\n      return { views: 0, uniqueViews: 0, clicks: 0 }\n    }\n\n    // Diviser en deux moiti√©s pour comparer\n    const midPoint = Math.floor(byDate.length / 2)\n    const firstHalf = byDate.slice(0, midPoint)\n    const secondHalf = byDate.slice(midPoint)\n\n    // Calculer les totaux de chaque moiti√©\n    const firstHalfViews = firstHalf.reduce((sum, d) => sum + d.views, 0)\n    const secondHalfViews = secondHalf.reduce((sum, d) => sum + d.views, 0)\n\n    const firstHalfUnique = firstHalf.reduce((sum, d) => sum + d.uniqueViews, 0)\n    const secondHalfUnique = secondHalf.reduce((sum, d) => sum + d.uniqueViews, 0)\n\n    const firstHalfClicks = firstHalf.reduce((sum, d) => sum + (d.clicks ?? 0), 0)\n    const secondHalfClicks = secondHalf.reduce((sum, d) => sum + (d.clicks ?? 0), 0)\n\n    // Calculer les % de croissance\n    const viewsTrend = firstHalfViews > 0 \n      ? Math.round(((secondHalfViews - firstHalfViews) / firstHalfViews) * 100) \n      : 0\n\n    const uniqueViewsTrend = firstHalfUnique > 0 \n      ? Math.round(((secondHalfUnique - firstHalfUnique) / firstHalfUnique) * 100) \n      : 0\n\n    const clicksTrend = firstHalfClicks > 0 \n      ? Math.round(((secondHalfClicks - firstHalfClicks) / firstHalfClicks) * 100) \n      : 0\n\n    return { \n      views: viewsTrend, \n      uniqueViews: uniqueViewsTrend, \n      clicks: clicksTrend \n    }\n  }, [data.views.byDate])\n\n  const tabs = [\n    { id: \"overview\", label: \"Vue d'ensemble\", icon: BarChart3 },\n    { id: \"clicks\", label: \"Clics\", icon: MousePointer },\n    { id: \"demographics\", label: \"D√©mographie\", icon: Users },\n    ...(canAccessEliteFeatures ? [{ id: \"heatmap\", label: \"Heatmap\", icon: MapPin }] : [])\n  ]\n\n  const formatNumber = (num: number) => {\n    return new Intl.NumberFormat('fr-FR').format(num)\n  }\n\n  const getPercentageColor = (percentage: number) => {\n    if (percentage >= 70) return \"bg-green-500\"\n    if (percentage >= 40) return \"bg-yellow-500\"\n    return \"bg-red-500\"\n  }\n\n  const getPeriodLabel = (range: string) => {\n    switch (range) {\n      case \"24h\": return \"Derni√®res 24 heures\"\n      case \"7d\": return \"7 derniers jours\"\n      case \"30d\": return \"30 derniers jours\"\n      case \"90d\": return \"90 derniers jours\"\n      case \"1y\": return \"Derni√®re ann√©e\"\n      default: return \"P√©riode personnalis√©e\"\n    }\n  }\n\n  return (\n    <div className={cn(\"space-y-6\", className)}>\n      {/* Header avec s√©lecteur de p√©riode */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Analytics Avanc√©es</h2>\n          <p className=\"text-gray-600\">\n            {canAccessAdvancedFeatures \n              ? `Analyses d√©taill√©es - ${getPeriodLabel(timeRange)}` \n              : \"Upgrade vers Pro pour acc√©der aux analytics avanc√©es\"\n            }\n          </p>\n        </div>\n        \n        <div className=\"flex items-center gap-3\">\n          <Select value={timeRange} onValueChange={setTimeRange}>\n            <SelectTrigger className=\"w-32\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"24h\">24h</SelectItem>\n              <SelectItem value=\"7d\">7 jours</SelectItem>\n              <SelectItem value=\"30d\">30 jours</SelectItem>\n              {canAccessEliteFeatures && <SelectItem value=\"90d\">90 jours</SelectItem>}\n              {canAccessEliteFeatures && <SelectItem value=\"1y\">1 an</SelectItem>}\n            </SelectContent>\n          </Select>\n          \n          {canAccessAdvancedFeatures && onExportPDF && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={onExportPDF}\n              className=\"flex items-center gap-2 bg-red-50 hover:bg-red-100 border-red-200 text-red-700\"\n            >\n              <Download className=\"w-4 h-4\" />\n              Exporter PDF\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex space-x-1 bg-gray-100 p-1 rounded-lg\">\n        {tabs.map((tab) => {\n          const Icon = tab.icon\n          return (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={cn(\n                \"flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors\",\n                activeTab === tab.id\n                  ? \"bg-white text-gray-900 shadow-sm\"\n                  : \"text-gray-600 hover:text-gray-900\"\n              )}\n            >\n              <Icon className=\"w-4 h-4\" />\n              {tab.label}\n            </button>\n          )\n        })}\n      </div>\n\n      {/* Contenu des tabs */}\n      <div className=\"space-y-6\">\n        {activeTab === \"overview\" && (\n          <>\n            {/* Stats Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              <Card className=\"h-full\">\n                <CardContent className=\"p-6 h-full flex flex-col\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-600 mb-1\">Vues totales</p>\n                      <p className=\"text-2xl font-bold text-gray-900\">{formatNumber(data.views.total)}</p>\n                    </div>\n                    <Eye className=\"w-8 h-8 text-blue-500 flex-shrink-0\" />\n                  </div>\n                  <div className={`mt-auto flex items-center text-sm ${trends.views >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                    {trends.views >= 0 ? <TrendingUp className=\"w-4 h-4 mr-1\" /> : <TrendingUp className=\"w-4 h-4 mr-1 rotate-180\" />}\n                    {trends.views >= 0 ? '+' : ''}{trends.views}% vs p√©riode pr√©c√©dente\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"h-full\">\n                <CardContent className=\"p-6 h-full flex flex-col\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-600 mb-1\">Visiteurs uniques</p>\n                      <p className=\"text-2xl font-bold text-gray-900\">{formatNumber(data.views.unique)}</p>\n                    </div>\n                    <Users className=\"w-8 h-8 text-green-500 flex-shrink-0\" />\n                  </div>\n                  <div className={`mt-auto flex items-center text-sm ${trends.uniqueViews >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                    {trends.uniqueViews >= 0 ? <TrendingUp className=\"w-4 h-4 mr-1\" /> : <TrendingUp className=\"w-4 h-4 mr-1 rotate-180\" />}\n                    {trends.uniqueViews >= 0 ? '+' : ''}{trends.uniqueViews}% vs p√©riode pr√©c√©dente\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"h-full\">\n                <CardContent className=\"p-6 h-full flex flex-col\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-600 mb-1\">Clics total</p>\n                      <p className=\"text-2xl font-bold text-gray-900\">{formatNumber(data.clicks.total)}</p>\n                    </div>\n                    <MousePointer className=\"w-8 h-8 text-purple-500 flex-shrink-0\" />\n                  </div>\n                  <div className={`mt-auto flex items-center text-sm ${trends.clicks >= 0 ? 'text-green-600' : 'text-red-600'}`}>\n                    {trends.clicks >= 0 ? <TrendingUp className=\"w-4 h-4 mr-1\" /> : <TrendingUp className=\"w-4 h-4 mr-1 rotate-180\" />}\n                    {trends.clicks >= 0 ? '+' : ''}{trends.clicks}% vs p√©riode pr√©c√©dente\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"h-full\">\n                <CardContent className=\"p-6 h-full flex flex-col\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <p className=\"text-sm text-gray-600 mb-1\">Taux de clic</p>\n                      <p className=\"text-2xl font-bold text-gray-900\">\n                        {data.views.total > 0 ? ((data.clicks.total / data.views.total) * 100).toFixed(1) : 0}%\n                      </p>\n                    </div>\n                    <BarChart3 className=\"w-8 h-8 text-orange-500 flex-shrink-0\" />\n                  </div>\n                  <div className=\"mt-auto flex items-center text-sm text-green-600\">\n                    <TrendingUp className=\"w-4 h-4 mr-1\" />\n                    +3% vs p√©riode pr√©c√©dente\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Graphique d'√©volution des vues */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <TrendingUp className=\"w-5 h-5\" />\n                  √âvolution des vues\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-64 flex items-end justify-between gap-1\">\n                  {data.views.byDate.slice(-30).map((day: any, index: number) => {\n                    const maxViews = Math.max(...data.views.byDate.map((d: any) => d.views))\n                    const height = (day.views / maxViews) * 100\n                    \n                    return (\n                      <motion.div\n                        key={index}\n                        initial={{ height: 0 }}\n                        animate={{ height: `${height}%` }}\n                        transition={{ duration: 0.5, delay: index * 0.02 }}\n                        className=\"flex-1 bg-gradient-to-t from-blue-500 to-blue-400 rounded-t hover:from-blue-600 hover:to-blue-500 transition-colors cursor-pointer relative group min-w-[8px]\"\n                        title={`${new Date(day.date).toLocaleDateString('fr-FR')} - ${day.views} vues`}\n                      >\n                        <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none\">\n                          {new Date(day.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}<br />\n                          {day.views} vues\n                        </div>\n                      </motion.div>\n                    )\n                  })}\n                </div>\n                <div className=\"mt-4 flex items-center justify-between text-xs text-gray-600\">\n                  <span>{data.views.byDate[0]?.date ? new Date(data.views.byDate[0].date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' }) : ''}</span>\n                  <span>Aujourd'hui</span>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Top 5 des zones les plus cliqu√©es */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <MousePointer className=\"w-5 h-5\" />\n                  Top 5 des zones les plus cliqu√©es\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {data.clicks.byLink.slice(0, 5).map((link: any, index: number) => (\n                    <div key={index} className=\"flex items-center gap-3\">\n                      <div className={`w-8 h-8 rounded-full flex items-center justify-center font-bold text-white text-sm ${\n                        index === 0 ? 'bg-yellow-500' : 'bg-gray-400'\n                      }`}>\n                        {index + 1}\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-900\">{link.linkTitle}</p>\n                        <p className=\"text-sm text-gray-600\">{link.clicks} clics ({link.percentage}%)</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </>\n        )}\n\n        {activeTab === \"clicks\" && canAccessAdvancedFeatures && (\n          <div className=\"space-y-6\">\n            {/* Stats rapides des clics */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <Card>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Total de clics</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{formatNumber(data.clicks.total)}</p>\n                    </div>\n                    <MousePointer className=\"w-10 h-10 text-purple-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Moyenne par lien</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">\n                        {data.clicks.byLink.length > 0 \n                          ? Math.round(data.clicks.total / data.clicks.byLink.length) \n                          : 0}\n                      </p>\n                    </div>\n                    <BarChart3 className=\"w-10 h-10 text-blue-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Lien le plus cliqu√©</p>\n                      <p className=\"text-xl font-bold text-gray-900\">\n                        {data.clicks.byLink[0]?.clicks || 0} clics\n                      </p>\n                      <p className=\"text-sm text-gray-500\">{data.clicks.byLink[0]?.linkTitle || 'N/A'}</p>\n                    </div>\n                    <TrendingUp className=\"w-10 h-10 text-green-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Clics par lien */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <MousePointer className=\"w-5 h-5\" />\n                  Performance des liens\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {data.clicks.byLink.map((link, index) => (\n                    <motion.div\n                      key={index}\n                      initial={{ opacity: 0, x: -20 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: index * 0.1 }}\n                      className=\"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-white rounded-lg hover:shadow-md transition-shadow\"\n                    >\n                      <div className=\"flex items-center gap-3 flex-1\">\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white ${\n                          index === 0 ? 'bg-yellow-500' : index === 1 ? 'bg-gray-400' : 'bg-gray-300'\n                        }`}>\n                          {index + 1}\n                        </div>\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-gray-900\">{link.linkTitle}</p>\n                          <p className=\"text-sm text-gray-600\">{link.clicks} clics totaux</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-40 bg-gray-200 rounded-full h-3\">\n                          <motion.div \n                            initial={{ width: 0 }}\n                            animate={{ width: `${link.percentage}%` }}\n                            transition={{ duration: 0.8, delay: index * 0.1 }}\n                            className={cn(\"h-3 rounded-full\", getPercentageColor(link.percentage))}\n                          />\n                        </div>\n                        <Badge variant=\"secondary\" className=\"min-w-[60px] text-center\">{link.percentage}%</Badge>\n                      </div>\n                    </motion.div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Clics par heure */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Clock className=\"w-5 h-5\" />\n                  Activit√© par heure de la journ√©e\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  <div className=\"h-48 flex items-end justify-between gap-1\">\n                    {data.clicks.byHour.map((hour, index) => {\n                      const maxClicks = Math.max(...data.clicks.byHour.map(h => h.clicks))\n                      const height = maxClicks > 0 ? (hour.clicks / maxClicks) * 100 : 0\n                      \n                      return (\n                        <motion.div\n                          key={index}\n                          initial={{ height: 0 }}\n                          animate={{ height: `${Math.max(10, height)}%` }}\n                          transition={{ duration: 0.5, delay: index * 0.02 }}\n                          className=\"flex-1 bg-gradient-to-t from-purple-500 to-purple-400 rounded-t hover:from-purple-600 hover:to-purple-500 transition-colors cursor-pointer relative group\"\n                          title={`${hour.hour}h - ${hour.clicks} clics`}\n                        >\n                          <div className=\"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-10\">\n                            {hour.hour}h00<br />\n                            {hour.clicks} clics\n                          </div>\n                        </motion.div>\n                      )\n                    })}\n                  </div>\n                  <div className=\"flex items-center justify-between text-xs text-gray-600\">\n                    <span>00h</span>\n                    <span>06h</span>\n                    <span>12h</span>\n                    <span>18h</span>\n                    <span>23h</span>\n                  </div>\n                  \n                  {/* Insights sur les heures de pointe */}\n                  <div className=\"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200\">\n                    <p className=\"text-sm font-medium text-purple-900 mb-1\">üí° Heure de pointe</p>\n                    <p className=\"text-xs text-purple-700\">\n                      La plupart de vos visiteurs cliquent entre {\n                        data.clicks.byHour.reduce((max, h) => h.clicks > max.clicks ? h : max).hour\n                      }h et {\n                        (data.clicks.byHour.reduce((max, h) => h.clicks > max.clicks ? h : max).hour + 2) % 24\n                      }h\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {activeTab === \"demographics\" && canAccessAdvancedFeatures && (\n          <div className=\"space-y-6\">\n            {/* Stats d√©mographiques globales */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <Card>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Pays principaux</p>\n                      <p className=\"text-3xl font-bold text-gray-900\">{data.demographics.countries.length}</p>\n                    </div>\n                    <Globe className=\"w-10 h-10 text-blue-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Type d'appareil dominant</p>\n                      <p className=\"text-xl font-bold text-gray-900\">\n                        {data.demographics.devices[0]?.device || 'N/A'}\n                      </p>\n                      <p className=\"text-sm text-gray-500\">{data.demographics.devices[0]?.percentage}% du trafic</p>\n                    </div>\n                    <Smartphone className=\"w-10 h-10 text-green-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n              \n              <Card>\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm text-gray-600 mb-1\">Navigateur principal</p>\n                      <p className=\"text-xl font-bold text-gray-900\">\n                        {data.demographics.browsers[0]?.browser || 'N/A'}\n                      </p>\n                      <p className=\"text-sm text-gray-500\">{data.demographics.browsers[0]?.percentage}% des visites</p>\n                    </div>\n                    <Monitor className=\"w-10 h-10 text-purple-500\" />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Grille de d√©tails d√©mographiques */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* Pays */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Globe className=\"w-5 h-5 text-blue-500\" />\n                    R√©partition g√©ographique\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {data.demographics.countries.map((country, index) => (\n                      <motion.div\n                        key={index}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        transition={{ delay: index * 0.1 }}\n                        className=\"space-y-2\"\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-2xl\">{\n                              country.country === 'France' ? 'üá´üá∑' :\n                              country.country === 'Belgique' ? 'üáßüá™' :\n                              country.country === 'Suisse' ? 'üá®üá≠' :\n                              country.country === 'Canada' ? 'üá®üá¶' : 'üåç'\n                            }</span>\n                            <span className=\"text-sm font-medium text-gray-900\">{country.country}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Badge variant=\"secondary\">{country.percentage}%</Badge>\n                          </div>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <motion.div \n                            initial={{ width: 0 }}\n                            animate={{ width: `${country.percentage}%` }}\n                            transition={{ duration: 0.8, delay: index * 0.1 }}\n                            className=\"bg-blue-500 h-2 rounded-full\"\n                          />\n                        </div>\n                        <p className=\"text-xs text-gray-600\">{formatNumber(country.visitors)} visiteurs</p>\n                      </motion.div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Appareils */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Monitor className=\"w-5 h-5 text-green-500\" />\n                    Types d'appareils\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-6\">\n                    {data.demographics.devices.map((device, index) => {\n                      const Icon = device.device === \"Mobile\" ? Smartphone : Monitor\n                      return (\n                        <motion.div\n                          key={index}\n                          initial={{ opacity: 0, scale: 0.9 }}\n                          animate={{ opacity: 1, scale: 1 }}\n                          transition={{ delay: index * 0.1 }}\n                          className=\"space-y-3\"\n                        >\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-3\">\n                              <div className=\"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center\">\n                                <Icon className=\"w-5 h-5 text-green-600\" />\n                              </div>\n                              <div>\n                                <p className=\"font-medium text-gray-900\">{device.device}</p>\n                                <p className=\"text-xs text-gray-600\">{formatNumber(device.count)} visites</p>\n                              </div>\n                            </div>\n                            <Badge className=\"bg-green-500 text-white\">{device.percentage}%</Badge>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                            <motion.div \n                              initial={{ width: 0 }}\n                              animate={{ width: `${device.percentage}%` }}\n                              transition={{ duration: 0.8, delay: index * 0.1 }}\n                              className=\"bg-green-500 h-3 rounded-full\"\n                            />\n                          </div>\n                        </motion.div>\n                      )\n                    })}\n                    \n                    {/* Insights */}\n                    <div className=\"mt-6 p-4 bg-green-50 rounded-lg border border-green-200\">\n                      <p className=\"text-sm font-medium text-green-900 mb-1\">üì± Recommandation</p>\n                      <p className=\"text-xs text-green-700\">\n                        {data.demographics.devices[0]?.device === 'Mobile' \n                          ? 'La majorit√© de vos visiteurs sont sur mobile. Assurez-vous que votre profil est optimis√© pour mobile.'\n                          : 'La majorit√© de vos visiteurs sont sur desktop. Profitez de l\\'espace pour des visuels plus grands.'}\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Navigateurs */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Globe className=\"w-5 h-5 text-purple-500\" />\n                    Navigateurs utilis√©s\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    {data.demographics.browsers.map((browser, index) => (\n                      <motion.div\n                        key={index}\n                        initial={{ opacity: 0, y: 20 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        transition={{ delay: index * 0.1 }}\n                        className=\"space-y-2\"\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-xl\">{\n                              browser.browser === 'Chrome' ? 'üîµ' :\n                              browser.browser === 'Safari' ? 'üß≠' :\n                              browser.browser === 'Firefox' ? 'ü¶ä' :\n                              browser.browser === 'Edge' ? 'üåê' : 'üíª'\n                            }</span>\n                            <span className=\"text-sm font-medium text-gray-900\">{browser.browser}</span>\n                          </div>\n                          <Badge variant=\"secondary\">{browser.percentage}%</Badge>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <motion.div \n                            initial={{ width: 0 }}\n                            animate={{ width: `${browser.percentage}%` }}\n                            transition={{ duration: 0.8, delay: index * 0.1 }}\n                            className=\"bg-purple-500 h-2 rounded-full\"\n                          />\n                        </div>\n                        <p className=\"text-xs text-gray-600\">{formatNumber(browser.count)} utilisateurs</p>\n                      </motion.div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Carte de compatibilit√© */}\n            <Card className=\"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Users className=\"w-5 h-5 text-blue-600\" />\n                  Profil de votre audience\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"text-center p-4 bg-white rounded-lg\">\n                    <p className=\"text-4xl mb-2\">{\n                      data.demographics.countries[0]?.country === 'France' ? 'üá´üá∑' : 'üåç'\n                    }</p>\n                    <p className=\"font-medium text-gray-900\">Localisation principale</p>\n                    <p className=\"text-sm text-gray-600\">{data.demographics.countries[0]?.country}</p>\n                    <p className=\"text-xs text-blue-600 mt-2\">{data.demographics.countries[0]?.percentage}% de l'audience</p>\n                  </div>\n                  \n                  <div className=\"text-center p-4 bg-white rounded-lg\">\n                    <p className=\"text-4xl mb-2\">{\n                      data.demographics.devices[0]?.device === 'Mobile' ? 'üì±' : 'üíª'\n                    }</p>\n                    <p className=\"font-medium text-gray-900\">Appareil pr√©f√©r√©</p>\n                    <p className=\"text-sm text-gray-600\">{data.demographics.devices[0]?.device}</p>\n                    <p className=\"text-xs text-green-600 mt-2\">{data.demographics.devices[0]?.percentage}% des visites</p>\n                  </div>\n                  \n                  <div className=\"text-center p-4 bg-white rounded-lg\">\n                    <p className=\"text-4xl mb-2\">{\n                      data.demographics.browsers[0]?.browser === 'Chrome' ? 'üîµ' :\n                      data.demographics.browsers[0]?.browser === 'Safari' ? 'üß≠' : 'üíª'\n                    }</p>\n                    <p className=\"font-medium text-gray-900\">Navigateur favori</p>\n                    <p className=\"text-sm text-gray-600\">{data.demographics.browsers[0]?.browser}</p>\n                    <p className=\"text-xs text-purple-600 mt-2\">{data.demographics.browsers[0]?.percentage}% des utilisateurs</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {activeTab === \"heatmap\" && canAccessEliteFeatures && (\n          <CalendarHeatmap \n            viewsByDate={data.views.byDate}\n            timeRange={timeRange}\n          />\n        )}\n      </div>\n\n      {/* Limitation pour plan gratuit */}\n      {!canAccessAdvancedFeatures && (\n        <Card className=\"border-yellow-200 bg-yellow-50\">\n          <CardContent className=\"p-6 text-center\">\n            <BarChart3 className=\"w-12 h-12 text-yellow-600 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">\n              Analytics avanc√©es disponibles\n            </h3>\n            <p className=\"text-yellow-700 mb-4\">\n              Upgrade vers Pro ou Elite pour acc√©der aux analyses d√©taill√©es, \n              d√©mographie des visiteurs, et bien plus encore.\n            </p>\n            <Button className=\"bg-yellow-600 hover:bg-yellow-700\">\n              Voir les plans\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  )\n}\n","size_bytes":35562},"upgrade-plan/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function POST(request: Request) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.id) {\n      console.error(\"Session non valide:\", session)\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const { plan, promoCode } = await request.json()\n\n    if (![\"FREE\", \"ATHLETE_PRO\", \"COACH\"].includes(plan)) {\n      return NextResponse.json({ error: \"Plan invalide\" }, { status: 400 })\n    }\n\n    console.log(\"Tentative de mise √† jour du plan pour userId:\", session.user.id, \"vers:\", plan)\n\n    // V√©rifier si le profil existe\n    const existingProfile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, stats: true }\n    })\n\n    if (!existingProfile) {\n      console.error(\"Profil non trouv√© pour userId:\", session.user.id)\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Pr√©parer les donn√©es de mise √† jour\n    const updateData: any = { plan }\n    \n    // Si un code promo est fourni, l'ajouter aux stats\n    if (promoCode) {\n      const stats = existingProfile.stats as any || {}\n      updateData.stats = {\n        ...stats,\n        promoCodeUsed: promoCode.toUpperCase(),\n        promoAppliedAt: new Date().toISOString()\n      }\n    }\n\n    // Mettre √† jour le plan\n    const profile = await prisma.profile.update({\n      where: { userId: session.user.id },\n      data: updateData\n    })\n\n    console.log(\"Plan mis √† jour avec succ√®s:\", profile.plan)\n\n    return NextResponse.json({ \n      success: true, \n      plan: profile.plan,\n      message: `Plan mis √† jour vers ${plan}`,\n      promoApplied: promoCode ? true : false\n    })\n  } catch (error) {\n    console.error(\"Erreur d√©taill√©e lors de la mise √† jour du plan:\", error)\n    return NextResponse.json(\n      { \n        error: \"Erreur lors de la mise √† jour\",\n        details: error instanceof Error ? error.message : \"Erreur inconnue\"\n      },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":2129},"components/ui-pro/linktree-link-card.tsx":{"content":"\"use client\"\n\nimport { motion } from \"framer-motion\"\nimport { useState } from \"react\"\n\ninterface LinktreeLinkCardProps {\n  id: string\n  title: string\n  url: string\n  icon?: string\n  index: number\n}\n\nexport function LinktreeLinkCard({ id, title, url, icon, index }: LinktreeLinkCardProps) {\n  const [isHovered, setIsHovered] = useState(false)\n\n  const handleClick = async () => {\n    try {\n      await fetch(`/api/links/${id}/click`, { method: 'POST' })\n    } catch (err) {\n      console.error('Failed to track click', err)\n    }\n  }\n\n  return (\n    <motion.a\n      href={url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      onClick={handleClick}\n      data-link-card\n      data-link-id={id}\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: index * 0.05 }}\n      whileHover={{ scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onHoverStart={() => setIsHovered(true)}\n      onHoverEnd={() => setIsHovered(false)}\n      className=\"block w-full group\"\n    >\n      <div className=\"backdrop-blur-xl bg-white/5 hover:bg-white/10 border border-yellow-500/20 hover:border-yellow-500/40 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 p-4 relative overflow-hidden\">\n        {/* Gradient overlay on hover */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: isHovered ? 1 : 0 }}\n          className=\"absolute inset-0 bg-gradient-to-r from-yellow-500/10 to-yellow-600/5 pointer-events-none\"\n        />\n\n        <div className=\"relative flex items-center justify-center gap-3\">\n          {/* Icon */}\n          {icon && (\n            <span className=\"text-2xl flex-shrink-0\">{icon}</span>\n          )}\n\n          {/* Title - Centered */}\n          <h3 className=\"font-bold text-base md:text-lg text-white group-hover:text-yellow-500 transition-colors\">\n            {title}\n          </h3>\n\n          {/* Arrow indicator */}\n          <motion.div\n            animate={{ x: isHovered ? 3 : 0 }}\n            className=\"text-gray-500 group-hover:text-yellow-500 transition-colors flex-shrink-0 ml-auto\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2.5} d=\"M9 5l7 7-7 7\" />\n            </svg>\n          </motion.div>\n        </div>\n\n        {/* Bottom gradient bar */}\n        <motion.div\n          initial={{ scaleX: 0 }}\n          animate={{ scaleX: isHovered ? 1 : 0 }}\n          transition={{ duration: 0.3 }}\n          className=\"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-yellow-500 to-yellow-600 origin-left\"\n        />\n      </div>\n    </motion.a>\n  )\n}\n\n","size_bytes":2721},"upload/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { supabase } from \"@/lib/supabase\"\nimport { prisma } from \"@/lib/db\"\nimport sharp from \"sharp\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const formData = await req.formData()\n    const file = formData.get(\"file\") as File\n    const type = formData.get(\"type\") as string // \"avatar\", \"cover\", \"media\", or \"sponsor\"\n\n    if (!file) {\n      return NextResponse.json({ error: \"Fichier manquant\" }, { status: 400 })\n    }\n\n    // Validate file type\n    const isMedia = type === \"media\"\n    const isSponsor = type === \"sponsor\"\n    const validTypes = isMedia \n      ? [\"image/\", \"video/\"] \n      : [\"image/\"]\n    \n    const isValidType = validTypes.some(validType => file.type.startsWith(validType))\n    \n    if (!isValidType) {\n      return NextResponse.json({ \n        error: isMedia \n          ? \"Le fichier doit √™tre une image ou une vid√©o\" \n          : \"Le fichier doit √™tre une image\" \n      }, { status: 400 })\n    }\n\n    // Reject HEIC/HEIF files explicitly\n    if (file.type === \"image/heic\" || file.type === \"image/heif\" || \n        file.name.toLowerCase().endsWith('.heic') || file.name.toLowerCase().endsWith('.heif')) {\n      return NextResponse.json({ \n        error: \"Les fichiers HEIC/HEIF ne sont pas support√©s. Veuillez convertir votre image en JPEG, PNG ou WebP.\" \n      }, { status: 400 })\n    }\n\n    // Validate file size (max 50MB for videos, 10MB for images, 30MB for others)\n    const isVideo = file.type.startsWith(\"video/\")\n    const maxSize = isVideo \n      ? 50 * 1024 * 1024  // 50MB for videos\n      : isMedia \n        ? 10 * 1024 * 1024  // 10MB for images\n        : 30 * 1024 * 1024   // 30MB for others (avatar, cover, sponsor)\n    \n    if (file.size > maxSize) {\n      return NextResponse.json({ \n        error: isVideo \n          ? \"Fichier vid√©o trop volumineux (max 50MB)\" \n          : isMedia \n            ? \"Fichier trop volumineux (max 10MB)\" \n            : \"Fichier trop volumineux (max 30MB)\" \n      }, { status: 400 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Convert File to ArrayBuffer then to Buffer\n    const arrayBuffer = await file.arrayBuffer()\n    let buffer = Buffer.from(arrayBuffer)\n\n    // Optimize image quality for avatars and covers (not videos)\n    // Resize to very high resolution (2000px) with maximum quality\n    if (!isVideo && (type === \"avatar\" || type === \"cover\")) {\n      try {\n        const targetSize = type === \"avatar\" ? 2000 : 2400\n        buffer = await sharp(buffer)\n          .resize(targetSize, type === \"avatar\" ? 2000 : 800, {\n            fit: 'cover',\n            position: 'center',\n            withoutEnlargement: false\n          })\n          .png({ quality: 100, compressionLevel: 0 }) // PNG sans compression pour qualit√© maximale\n          .toBuffer()\n      } catch (sharpError) {\n        // If sharp fails, use original buffer\n        console.warn(\"Sharp optimization failed, using original:\", sharpError)\n      }\n    }\n\n    // Generate unique filename\n    const fileExt = type === \"avatar\" || type === \"cover\" ? \"png\" : file.name.split('.').pop()\n    const fileName = `${profile.id}-${type}-${Date.now()}.${fileExt}`\n    const filePath = `${type}s/${fileName}`\n\n    // Upload to Supabase Storage\n    const { data, error } = await supabase.storage\n      .from('athlink-images')\n      .upload(filePath, buffer, {\n        contentType: type === \"avatar\" || type === \"cover\" ? \"image/png\" : file.type,\n        upsert: true,\n        cacheControl: '31536000' // Cache 1 an\n      })\n\n    if (error) {\n      console.error(\"Supabase upload error:\", error)\n      return NextResponse.json({ error: \"Erreur lors de l'upload\" }, { status: 500 })\n    }\n\n    // Get public URL\n    const { data: urlData } = supabase.storage\n      .from('athlink-images')\n      .getPublicUrl(filePath)\n\n    const publicUrl = urlData.publicUrl\n\n    // Update profile with new image URL (only for avatar and cover)\n    if (type === \"avatar\" || type === \"cover\") {\n      const updateData = type === \"avatar\" \n        ? { avatarUrl: publicUrl }\n        : { coverUrl: publicUrl }\n\n      await prisma.profile.update({\n        where: { id: profile.id },\n        data: updateData\n      })\n    }\n\n    return NextResponse.json({ url: publicUrl })\n\n  } catch (error) {\n    console.error(\"Upload error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":4772},"coaching/training-plans/[id]/sessions/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer le plan\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const plan = plans.find((p: any) => p.id === params.id)\n\n    if (!plan) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    const sessions = plan.sessions || []\n    return NextResponse.json(sessions)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des sessions:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer le plan\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const planIndex = plans.findIndex((p: any) => p.id === params.id)\n\n    if (planIndex === -1) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    const plan = plans[planIndex]\n\n    const body = await request.json()\n    const { title, description, weekNumber, dayNumber, duration, exercises } = body\n\n    // Validation\n    if (!title || !description || weekNumber === undefined || dayNumber === undefined) {\n      return NextResponse.json({ error: \"Donn√©es manquantes\" }, { status: 400 })\n    }\n\n    if (weekNumber < 1 || weekNumber > plan.duration) {\n      return NextResponse.json({ error: \"Num√©ro de semaine invalide\" }, { status: 400 })\n    }\n\n    if (dayNumber < 1 || dayNumber > 7) {\n      return NextResponse.json({ error: \"Num√©ro de jour invalide (1-7)\" }, { status: 400 })\n    }\n\n    // V√©rifier qu'il n'y a pas d√©j√† une session pour ce jour/semaine\n    const existingSession = (plan.sessions || []).find((s: any) => \n      s.weekNumber === parseInt(weekNumber) && s.dayNumber === parseInt(dayNumber)\n    )\n\n    if (existingSession) {\n      return NextResponse.json({ error: \"Une session existe d√©j√† pour ce jour/semaine\" }, { status: 400 })\n    }\n\n    // Cr√©er la nouvelle session\n    const newSession = {\n      id: `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      title,\n      description,\n      weekNumber: parseInt(weekNumber),\n      dayNumber: parseInt(dayNumber),\n      duration: duration ? parseInt(duration) : 60,\n      exercises: exercises || [],\n      createdAt: new Date().toISOString()\n    }\n\n    // Ajouter la session au plan\n    if (!plan.sessions) plan.sessions = []\n    plan.sessions.push(newSession)\n    plan._count.sessions = plan.sessions.length\n\n    // Sauvegarder\n    plans[planIndex] = plan\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: plans\n        }\n      }\n    })\n\n    return NextResponse.json(newSession, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation de la session:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":4352},"(dashboard)/dashboard/coaching/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { CoachingDashboardClient } from \"./coaching-dashboard-client\"\nimport { TrendingUp, Users, Euro, Calendar, Target, BarChart3, Clock, CheckCircle } from \"lucide-react\"\n\nexport default async function CoachingPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      username: true,\n      stats: true\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  // V√©rifier que l'utilisateur a le plan COACH ou ELITE\n  if (profile.plan !== \"COACH\" && profile.plan !== \"ELITE\") {\n    redirect(\"/dashboard\")\n  }\n\n  // Calculer les statistiques depuis les stats JSON\n  const stats = profile.stats as any || {}\n  const trainingPlans = stats.trainingPlans || []\n  const bookings = stats.bookings || []\n\n  const totalPlans = trainingPlans.length\n  const activePlans = trainingPlans.filter((plan: any) => plan.isActive).length\n  const totalBookings = bookings.length\n  const pendingBookings = bookings.filter((booking: any) => booking.status === \"PENDING\").length\n  const confirmedBookings = bookings.filter((booking: any) => booking.status === \"CONFIRMED\").length\n  const completedBookingsArray = bookings.filter((booking: any) => booking.status === \"COMPLETED\")\n  const completedBookings = completedBookingsArray.length\n  const totalRevenue = completedBookingsArray.reduce((sum: number, booking: any) => sum + booking.price, 0)\n  const monthlyRevenue = completedBookingsArray\n    .filter((booking: any) => {\n      const bookingDate = new Date(booking.date)\n      const now = new Date()\n      return bookingDate.getMonth() === now.getMonth() && bookingDate.getFullYear() === now.getFullYear()\n    })\n    .reduce((sum: number, booking: any) => sum + booking.price, 0)\n\n  const dashboardStats = {\n    totalPlans,\n    activePlans,\n    totalBookings,\n    pendingBookings,\n    confirmedBookings,\n    completedBookings,\n    totalRevenue,\n    monthlyRevenue\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Centre de Coaching */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-white rounded-b-2xl sm:rounded-b-3xl border-b border-gray-200 shadow-lg\">\n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-8\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center shadow-lg\">\n                  <Target className=\"w-6 h-6 text-black\" />\n                </div>\n                <PlanBadge plan=\"COACH\" size=\"lg\" />\n              </div>\n              \n              <h1 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-4 text-gray-900\">\n                Centre de Coaching\n              </h1>\n              <p className=\"text-lg sm:text-xl text-gray-600 font-medium mb-6\">\n                D√©veloppe ton business de coaching professionnel\n              </p>\n              \n              <div className=\"flex flex-wrap gap-4 text-sm\">\n                <div className=\"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200\">\n                  <CheckCircle className=\"w-4 h-4 text-gray-700\" />\n                  <span className=\"text-gray-700 font-medium\">Interface Professionnelle</span>\n                </div>\n                <div className=\"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200\">\n                  <TrendingUp className=\"w-4 h-4 text-gray-700\" />\n                  <span className=\"text-gray-700 font-medium\">Analytics Temps R√©el</span>\n                </div>\n                <div className=\"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200\">\n                  <Users className=\"w-4 h-4 text-gray-700\" />\n                  <span className=\"text-gray-700 font-medium\">Gestion Clients</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Stats */}\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 w-full lg:w-auto\">\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Target className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">Plans Actifs</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{activePlans}</div>\n                <div className=\"text-xs text-gray-500\">sur {totalPlans}</div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Calendar className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">R√©servations</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{totalBookings}</div>\n                <div className=\"text-xs text-gray-500\">{pendingBookings} en attente</div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Euro className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">Revenus</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{totalRevenue.toFixed(0)}‚Ç¨</div>\n                <div className=\"text-xs text-gray-500\">{monthlyRevenue.toFixed(0)}‚Ç¨ ce mois</div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <CheckCircle className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">Compl√©t√©es</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{completedBookings}</div>\n                <div className=\"text-xs text-gray-500\">s√©ances termin√©es</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component avec interface ultra-pro */}\n      <CoachingDashboardClient \n        initialStats={dashboardStats}\n        profileId={profile.id}\n        coachName={profile.displayName}\n        username={profile.username}\n      />\n    </div>\n  )\n}\n","size_bytes":7174},".next/server/chunks/ssr/app_page_tsx_55b2e5ee._.js":{"content":"module.exports = [\n\"[project]/app/page.tsx [app-ssr] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"default\",\n    ()=>Home\n]);\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js [app-ssr] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js [app-ssr] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs [app-ssr] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/next/dist/client/app-dir/link.js [app-ssr] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/next/image.js [app-ssr] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$activity$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Activity$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/activity.js [app-ssr] (ecmascript) <export default as Activity>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$trending$2d$up$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__TrendingUp$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/trending-up.js [app-ssr] (ecmascript) <export default as TrendingUp>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$users$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Users$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/users.js [app-ssr] (ecmascript) <export default as Users>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$award$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Award$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/award.js [app-ssr] (ecmascript) <export default as Award>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$calendar$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Calendar$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/calendar.js [app-ssr] (ecmascript) <export default as Calendar>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$target$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Target$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/target.js [app-ssr] (ecmascript) <export default as Target>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$arrow$2d$right$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__ArrowRight$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/arrow-right.js [app-ssr] (ecmascript) <export default as ArrowRight>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$check$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Check$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/check.js [app-ssr] (ecmascript) <export default as Check>\");\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$instagram$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Instagram$3e$__ = __turbopack_context__.i(\"[project]/node_modules/lucide-react/dist/esm/icons/instagram.js [app-ssr] (ecmascript) <export default as Instagram>\");\n\"use client\";\n;\n;\n;\n;\n;\n;\n// Composant carrousel pour les athl√®tes\nfunction AthleteCarousel() {\n    const [currentIndex, setCurrentIndex] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useState\"])(0);\n    const athletes = [\n        {\n            name: 'Noa',\n            handle: '@noa',\n            image: '/uploads/hero/noa.png'\n        },\n        {\n            name: 'Nathan',\n            handle: '@nathan',\n            image: '/uploads/hero/nathan.png'\n        }\n    ];\n    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useEffect\"])(()=>{\n        const interval = setInterval(()=>{\n            setCurrentIndex((prev)=>(prev + 1) % athletes.length);\n        }, 3000);\n        return ()=>clearInterval(interval);\n    }, []);\n    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n        className: \"max-w-md mx-auto\",\n        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n            initial: {\n                opacity: 0,\n                x: 50\n            },\n            animate: {\n                opacity: 1,\n                x: 0\n            },\n            exit: {\n                opacity: 0,\n                x: -50\n            },\n            transition: {\n                duration: 0.5\n            },\n            className: \"flex flex-col items-center\",\n            children: [\n                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"w-full max-w-sm h-96 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 mb-4 overflow-hidden p-4\",\n                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                        className: \"w-full h-full relative\",\n                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$image$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                            src: athletes[currentIndex].image,\n                            alt: athletes[currentIndex].name,\n                            fill: true,\n                            className: \"object-contain\",\n                            unoptimized: true\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 47,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"[project]/app/page.tsx\",\n                        lineNumber: 46,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 45,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                    className: \"text-lg text-gray-700 font-medium mb-1\",\n                    children: athletes[currentIndex].name\n                }, void 0, false, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 56,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                    className: \"text-sm text-gray-600 flex items-center gap-1\",\n                    children: [\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$instagram$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Instagram$3e$__[\"Instagram\"], {\n                            className: \"w-4 h-4\"\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 58,\n                            columnNumber: 11\n                        }, this),\n                        athletes[currentIndex].handle\n                    ]\n                }, void 0, true, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 57,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, currentIndex, true, {\n            fileName: \"[project]/app/page.tsx\",\n            lineNumber: 37,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"[project]/app/page.tsx\",\n        lineNumber: 36,\n        columnNumber: 5\n    }, this);\n}\nfunction Home() {\n    const [billingCycle, setBillingCycle] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"useState\"])(\"monthly\");\n    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"main\", {\n        className: \"min-h-screen bg-white\",\n        children: [\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"section\", {\n                className: \"relative min-h-[85vh] flex items-center justify-center bg-white\",\n                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"container mx-auto px-4 sm:px-6 max-w-7xl\",\n                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                        className: \"text-center max-w-4xl mx-auto\",\n                        children: [\n                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                                initial: {\n                                    opacity: 0,\n                                    y: 20\n                                },\n                                animate: {\n                                    opacity: 1,\n                                    y: 0\n                                },\n                                transition: {\n                                    duration: 0.6\n                                },\n                                className: \"flex flex-wrap gap-3 justify-center mb-8\",\n                                children: [\n                                    'Runners',\n                                    'Cyclistes',\n                                    'Triathl√®tes',\n                                    'Crossfit',\n                                    'Fitness'\n                                ].map((persona, i)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                        className: \"px-4 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\",\n                                        children: persona\n                                    }, i, false, {\n                                        fileName: \"[project]/app/page.tsx\",\n                                        lineNumber: 83,\n                                        columnNumber: 17\n                                    }, this))\n                            }, void 0, false, {\n                                fileName: \"[project]/app/page.tsx\",\n                                lineNumber: 76,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].h1, {\n                                initial: {\n                                    opacity: 0,\n                                    y: 30\n                                },\n                                animate: {\n                                    opacity: 1,\n                                    y: 0\n                                },\n                                transition: {\n                                    duration: 0.6,\n                                    delay: 0.2\n                                },\n                                className: \"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-gray-900 mb-6 leading-tight\",\n                                children: \"Le link-in-bio #1 pour athl√®tes\"\n                            }, void 0, false, {\n                                fileName: \"[project]/app/page.tsx\",\n                                lineNumber: 93,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].p, {\n                                initial: {\n                                    opacity: 0,\n                                    y: 20\n                                },\n                                animate: {\n                                    opacity: 1,\n                                    y: 0\n                                },\n                                transition: {\n                                    duration: 0.6,\n                                    delay: 0.4\n                                },\n                                className: \"text-lg sm:text-xl md:text-2xl text-gray-600 mb-10 leading-relaxed max-w-3xl mx-auto\",\n                                children: \"Tout ce dont tu as besoin pour partager tes performances, trouver des sponsors, et d√©velopper ta communaut√©. Le tout dans un seul lien.\"\n                            }, void 0, false, {\n                                fileName: \"[project]/app/page.tsx\",\n                                lineNumber: 103,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                                initial: {\n                                    opacity: 0,\n                                    y: 20\n                                },\n                                animate: {\n                                    opacity: 1,\n                                    y: 0\n                                },\n                                transition: {\n                                    duration: 0.6,\n                                    delay: 0.6\n                                },\n                                className: \"flex flex-col sm:flex-row gap-4 justify-center items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                        href: \"/signup\",\n                                        className: \"inline-flex items-center gap-2 bg-gray-900 text-white hover:bg-gray-800 px-8 py-4 rounded-full font-semibold text-lg shadow-lg transition-all hover:scale-105\",\n                                        children: [\n                                            \"Commencer gratuitement\",\n                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$arrow$2d$right$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__ArrowRight$3e$__[\"ArrowRight\"], {\n                                                className: \"w-5 h-5\"\n                                            }, void 0, false, {\n                                                fileName: \"[project]/app/page.tsx\",\n                                                lineNumber: 124,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"[project]/app/page.tsx\",\n                                        lineNumber: 119,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                        className: \"text-sm text-gray-500\",\n                                        children: \"100% gratuit\"\n                                    }, void 0, false, {\n                                        fileName: \"[project]/app/page.tsx\",\n                                        lineNumber: 126,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"[project]/app/page.tsx\",\n                                lineNumber: 113,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"[project]/app/page.tsx\",\n                        lineNumber: 74,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 73,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"[project]/app/page.tsx\",\n                lineNumber: 72,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"section\", {\n                className: \"py-20 bg-gray-50\",\n                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"container mx-auto px-4 sm:px-6 max-w-7xl\",\n                    children: [\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                            initial: {\n                                opacity: 0,\n                                y: 20\n                            },\n                            whileInView: {\n                                opacity: 1,\n                                y: 0\n                            },\n                            viewport: {\n                                once: true\n                            },\n                            className: \"text-center mb-12\",\n                            children: [\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h2\", {\n                                    className: \"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\",\n                                    children: \"Ils nous font confiance\"\n                                }, void 0, false, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 141,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                    className: \"text-lg text-gray-600\",\n                                    children: \"Rejoins nos athl√®tes qui utilisent Athlink pour d√©velopper leur communaut√©\"\n                                }, void 0, false, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 144,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 135,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(AthleteCarousel, {}, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 150,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 134,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"[project]/app/page.tsx\",\n                lineNumber: 133,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"section\", {\n                className: \"py-20 bg-white\",\n                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"container mx-auto px-4 sm:px-6 max-w-7xl\",\n                    children: [\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                            initial: {\n                                opacity: 0,\n                                y: 20\n                            },\n                            whileInView: {\n                                opacity: 1,\n                                y: 0\n                            },\n                            viewport: {\n                                once: true\n                            },\n                            className: \"text-center mb-16\",\n                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h2\", {\n                                className: \"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4\",\n                                children: \"Les objectifs √† avoir\"\n                            }, void 0, false, {\n                                fileName: \"[project]/app/page.tsx\",\n                                lineNumber: 163,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 157,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-3 gap-12\",\n                            children: [\n                                {\n                                    number: \"1,000+\",\n                                    label: \"Athl√®tes\",\n                                    description: \"Plus de 1000 athl√®tes nous font confiance pour g√©rer leur pr√©sence en ligne\"\n                                },\n                                {\n                                    number: \"500K+\",\n                                    label: \"Vues/mois\",\n                                    description: \"Chaque mois, plus d'un demi-million de visiteurs cliquent sur les profils de nos athl√®tes\"\n                                },\n                                {\n                                    number: \"50K+\",\n                                    label: \"Clics sponsors\",\n                                    description: \"Des milliers de clics g√©n√©r√©s vers les sponsors et partenaires chaque mois\"\n                                }\n                            ].map((stat, i)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                                    initial: {\n                                        opacity: 0,\n                                        y: 30\n                                    },\n                                    whileInView: {\n                                        opacity: 1,\n                                        y: 0\n                                    },\n                                    viewport: {\n                                        once: true\n                                    },\n                                    transition: {\n                                        delay: i * 0.2\n                                    },\n                                    className: \"text-center\",\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                            className: \"text-5xl sm:text-6xl font-bold text-gray-900 mb-2\",\n                                            children: stat.number\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 194,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                            className: \"text-xl font-semibold text-gray-700 mb-3\",\n                                            children: stat.label\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 197,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                            className: \"text-gray-600 leading-relaxed\",\n                                            children: stat.description\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 200,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, i, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 186,\n                                    columnNumber: 15\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 168,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 156,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"[project]/app/page.tsx\",\n                lineNumber: 155,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"section\", {\n                className: \"py-20 bg-gray-50\",\n                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"container mx-auto px-4 sm:px-6 max-w-7xl\",\n                    children: [\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                            initial: {\n                                opacity: 0,\n                                y: 20\n                            },\n                            whileInView: {\n                                opacity: 1,\n                                y: 0\n                            },\n                            viewport: {\n                                once: true\n                            },\n                            className: \"text-center mb-16\",\n                            children: [\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h2\", {\n                                    className: \"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4\",\n                                    children: \"Tout ce dont un athl√®te a besoin\"\n                                }, void 0, false, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 218,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                    className: \"text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto\",\n                                    children: \"Con√ßu sp√©cifiquement pour les sportifs, avec des fonctionnalit√©s uniques\"\n                                }, void 0, false, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 221,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 212,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\",\n                            children: [\n                                {\n                                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$activity$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Activity$3e$__[\"Activity\"],\n                                    title: \"Stats & Performance\",\n                                    description: \"Synchronise Strava, affiche tes records, graphiques de progression en temps r√©el\"\n                                },\n                                {\n                                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$calendar$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Calendar$3e$__[\"Calendar\"],\n                                    title: \"Calendrier Courses\",\n                                    description: \"Countdown jusqu'√† ta prochaine course, r√©sultats automatiques, historique complet\"\n                                },\n                                {\n                                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$users$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Users$3e$__[\"Users\"],\n                                    title: \"Sponsors & Partenaires\",\n                                    description: \"Section d√©di√©e avec tracking des clics, analytics pour tes sponsors\"\n                                },\n                                {\n                                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$award$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Award$3e$__[\"Award\"],\n                                    title: \"Galerie M√©dia\",\n                                    description: \"Photos, vid√©os, highlights de tes meilleures performances en action\"\n                                },\n                                {\n                                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$target$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Target$3e$__[\"Target\"],\n                                    title: \"Services Coaching\",\n                                    description: \"Vends tes plans d'entra√Ænement, g√®re tes bookings, d√©veloppe ton business\"\n                                },\n                                {\n                                    icon: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$trending$2d$up$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__TrendingUp$3e$__[\"TrendingUp\"],\n                                    title: \"Analytics Pro\",\n                                    description: \"Vois qui visite ton profil, quels liens performent, optimise ta strat√©gie\"\n                                }\n                            ].map((feature, i)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                                    initial: {\n                                        opacity: 0,\n                                        y: 30\n                                    },\n                                    whileInView: {\n                                        opacity: 1,\n                                        y: 0\n                                    },\n                                    viewport: {\n                                        once: true\n                                    },\n                                    transition: {\n                                        delay: i * 0.1\n                                    },\n                                    className: \"bg-white p-8 rounded-2xl shadow-sm hover:shadow-md transition-shadow\",\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                            className: \"inline-flex p-3 rounded-xl bg-gray-900 mb-4\",\n                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(feature.icon, {\n                                                className: \"w-6 h-6 text-white\"\n                                            }, void 0, false, {\n                                                fileName: \"[project]/app/page.tsx\",\n                                                lineNumber: 268,\n                                                columnNumber: 19\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 267,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h3\", {\n                                            className: \"text-xl font-semibold text-gray-900 mb-3\",\n                                            children: feature.title\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 270,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                            className: \"text-gray-600 leading-relaxed\",\n                                            children: feature.description\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 273,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, i, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 259,\n                                    columnNumber: 15\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 226,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 211,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"[project]/app/page.tsx\",\n                lineNumber: 210,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"section\", {\n                id: \"tarifs\",\n                className: \"py-20 bg-white\",\n                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"container mx-auto px-4 sm:px-6 max-w-7xl\",\n                    children: [\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                            initial: {\n                                opacity: 0,\n                                y: 20\n                            },\n                            whileInView: {\n                                opacity: 1,\n                                y: 0\n                            },\n                            viewport: {\n                                once: true\n                            },\n                            className: \"text-center mb-12\",\n                            children: [\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h2\", {\n                                    className: \"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4\",\n                                    children: \"Des plans adapt√©s √† tes besoins\"\n                                }, void 0, false, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 291,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                    className: \"text-lg text-gray-600 mb-8\",\n                                    children: \"Choisis le plan qui correspond le mieux √† tes objectifs\"\n                                }, void 0, false, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 294,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                    className: \"inline-flex items-center gap-4 p-1 bg-gray-100 rounded-full\",\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"button\", {\n                                            onClick: ()=>setBillingCycle(\"monthly\"),\n                                            className: `px-6 py-2 rounded-full font-medium transition-all ${billingCycle === \"monthly\" ? \"bg-white text-gray-900 shadow-sm\" : \"text-gray-600\"}`,\n                                            children: \"Mensuel\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 300,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"button\", {\n                                            onClick: ()=>setBillingCycle(\"yearly\"),\n                                            className: `px-6 py-2 rounded-full font-medium transition-all ${billingCycle === \"yearly\" ? \"bg-white text-gray-900 shadow-sm\" : \"text-gray-600\"}`,\n                                            children: [\n                                                \"Annuel\",\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                                    className: \"ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full\",\n                                                    children: \"2 mois offerts\"\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 319,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 310,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 299,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 285,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto\",\n                            children: [\n                                {\n                                    name: \"FREE\",\n                                    monthlyPrice: 0,\n                                    yearlyPrice: 0,\n                                    description: \"Pour d√©buter et tester la plateforme\",\n                                    features: [\n                                        \"1 profil public\",\n                                        \"Liens illimit√©s\",\n                                        \"Galerie photos & vid√©os\",\n                                        \"R√©seaux sociaux\",\n                                        \"Calendrier courses\",\n                                        \"Analytics basiques uniquement\",\n                                        \"Pas de domaine personnalis√©\",\n                                        \"Pas de CSS personnalis√©\",\n                                        \"Branding Athlink visible\"\n                                    ],\n                                    cta: \"Commencer\",\n                                    popular: false\n                                },\n                                {\n                                    name: \"PRO\",\n                                    monthlyPrice: 9.90,\n                                    yearlyPrice: 8.25,\n                                    description: \"Pour les athl√®tes s√©rieux\",\n                                    features: [\n                                        \"Tout FREE +\",\n                                        \"Liens, comp√©titions, sponsors et m√©dias illimit√©s\",\n                                        \"Analytics avanc√©es (7 jours)\",\n                                        \"Badge \\\"Pro\\\" sur le profil\",\n                                        \"Pas de pubs\",\n                                        \"Support prioritaire\"\n                                    ],\n                                    cta: \"Essayer PRO\",\n                                    popular: true\n                                },\n                                {\n                                    name: \"ELITE\",\n                                    monthlyPrice: 25.90,\n                                    yearlyPrice: 21.58,\n                                    description: \"Pour les professionnels\",\n                                    features: [\n                                        \"Tout PRO +\",\n                                        \"Analytics illimit√©es\",\n                                        \"Heatmap de clics\",\n                                        \"D√©mographie des visiteurs\",\n                                        \"Services coaching\",\n                                        \"CSS personnalis√©\",\n                                        \"Badge Elite sur le profil\",\n                                        \"Support prioritaire\"\n                                    ],\n                                    cta: \"Essayer ELITE\",\n                                    popular: false\n                                }\n                            ].map((plan, i)=>{\n                                const displayPrice = billingCycle === \"monthly\" ? plan.monthlyPrice : plan.yearlyPrice;\n                                const yearlySavings = plan.monthlyPrice > 0 ? ((plan.monthlyPrice - plan.yearlyPrice) * 12).toFixed(2) : null;\n                                return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$framer$2d$motion$2f$dist$2f$es$2f$render$2f$components$2f$motion$2f$proxy$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"motion\"].div, {\n                                    initial: {\n                                        opacity: 0,\n                                        y: 30\n                                    },\n                                    whileInView: {\n                                        opacity: 1,\n                                        y: 0\n                                    },\n                                    viewport: {\n                                        once: true\n                                    },\n                                    transition: {\n                                        delay: i * 0.1\n                                    },\n                                    className: `relative bg-white rounded-2xl p-8 ${plan.popular ? \"border-2 border-gray-900 shadow-xl\" : \"border border-gray-200 shadow-sm\"}`,\n                                    children: [\n                                        plan.popular && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                            className: \"absolute -top-4 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-4 py-1 rounded-full text-sm font-medium\",\n                                            children: \"Plus populaire\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 401,\n                                            columnNumber: 19\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                            className: \"text-center mb-6\",\n                                            children: [\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h3\", {\n                                                    className: \"text-2xl font-bold text-gray-900 mb-2\",\n                                                    children: plan.name\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 407,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                                    className: \"text-gray-600 mb-4\",\n                                                    children: plan.description\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 410,\n                                                    columnNumber: 19\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                                    className: \"flex items-baseline justify-center gap-1\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                                            className: \"text-5xl font-bold text-gray-900\",\n                                                            children: [\n                                                                displayPrice,\n                                                                \"‚Ç¨\"\n                                                            ]\n                                                        }, void 0, true, {\n                                                            fileName: \"[project]/app/page.tsx\",\n                                                            lineNumber: 412,\n                                                            columnNumber: 21\n                                                        }, this),\n                                                        displayPrice > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                                            className: \"text-gray-600\",\n                                                            children: \"/mois\"\n                                                        }, void 0, false, {\n                                                            fileName: \"[project]/app/page.tsx\",\n                                                            lineNumber: 416,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 411,\n                                                    columnNumber: 19\n                                                }, this),\n                                                billingCycle === \"yearly\" && yearlySavings && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                                    className: \"text-sm text-green-600 mt-2\",\n                                                    children: [\n                                                        \"√âconomise \",\n                                                        yearlySavings,\n                                                        \"‚Ç¨/an\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 420,\n                                                    columnNumber: 21\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 406,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"ul\", {\n                                            className: \"space-y-3 mb-8\",\n                                            children: plan.features.map((feature, j)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    className: \"flex items-start gap-3\",\n                                                    children: [\n                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$lucide$2d$react$2f$dist$2f$esm$2f$icons$2f$check$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$export__default__as__Check$3e$__[\"Check\"], {\n                                                            className: \"w-5 h-5 text-gray-900 flex-shrink-0 mt-0.5\"\n                                                        }, void 0, false, {\n                                                            fileName: \"[project]/app/page.tsx\",\n                                                            lineNumber: 429,\n                                                            columnNumber: 23\n                                                        }, this),\n                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"span\", {\n                                                            className: \"text-gray-700\",\n                                                            children: feature\n                                                        }, void 0, false, {\n                                                            fileName: \"[project]/app/page.tsx\",\n                                                            lineNumber: 430,\n                                                            columnNumber: 23\n                                                        }, this)\n                                                    ]\n                                                }, j, true, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 428,\n                                                    columnNumber: 21\n                                                }, this))\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 426,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                            href: \"/signup\",\n                                            className: `block w-full text-center py-3 rounded-full font-semibold transition-all ${plan.popular ? \"bg-gray-900 text-white hover:bg-gray-800\" : \"bg-gray-100 text-gray-900 hover:bg-gray-200\"}`,\n                                            children: plan.cta\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 435,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, i, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 388,\n                                    columnNumber: 15\n                                }, this);\n                            })\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 326,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 284,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"[project]/app/page.tsx\",\n                lineNumber: 283,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"footer\", {\n                className: \"py-12 bg-gray-900 text-white border-t border-gray-800\",\n                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                    className: \"container mx-auto px-4 sm:px-6 max-w-7xl\",\n                    children: [\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                            className: \"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\",\n                            children: [\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h3\", {\n                                            className: \"text-lg font-semibold mb-4\",\n                                            children: \"Athlink\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 458,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                            className: \"text-sm text-gray-400\",\n                                            children: \"La plateforme link-in-bio d√©di√©e aux athl√®tes pour d√©velopper leur pr√©sence en ligne.\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 459,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 457,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h3\", {\n                                            className: \"text-lg font-semibold mb-4\",\n                                            children: \"Produit\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 466,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"ul\", {\n                                            className: \"space-y-2 text-sm text-gray-400\",\n                                            children: [\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                                        href: \"#features\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Fonctionnalit√©s\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 468,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 468,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                                        href: \"#tarifs\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Tarifs\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 469,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 469,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                                        href: \"/signup\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Cr√©er un compte\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 470,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 470,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                                        href: \"/login\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Se connecter\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 471,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 471,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 467,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 465,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h3\", {\n                                            className: \"text-lg font-semibold mb-4\",\n                                            children: \"L√©gal\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 477,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"ul\", {\n                                            className: \"space-y-2 text-sm text-gray-400\",\n                                            children: [\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"a\", {\n                                                        href: \"https://www.iubenda.com/privacy-policy/27659887\",\n                                                        className: \"iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe hover:text-white transition-colors\",\n                                                        title: \"Politique de confidentialit√©\",\n                                                        children: \"Politique de Confidentialit√©\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 480,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 479,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"a\", {\n                                                        href: \"https://www.iubenda.com/privacy-policy/27659887/cookie-policy\",\n                                                        className: \"iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe hover:text-white transition-colors\",\n                                                        title: \"Politique relative aux Cookies\",\n                                                        children: \"Politique relative aux Cookies\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 489,\n                                                        columnNumber: 19\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 488,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"a\", {\n                                                        href: \"/legal/CGV.pdf\",\n                                                        target: \"_blank\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"CGV\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 497,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 497,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"a\", {\n                                                        href: \"/legal/Mentions_Legales.pdf\",\n                                                        target: \"_blank\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Mentions l√©gales\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 498,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 498,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 478,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 476,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"h3\", {\n                                            className: \"text-lg font-semibold mb-4\",\n                                            children: \"Support\"\n                                        }, void 0, false, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 504,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"ul\", {\n                                            className: \"space-y-2 text-sm text-gray-400\",\n                                            children: [\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                                        href: \"/help\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Centre d'aide\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 506,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 506,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$client$2f$app$2d$dir$2f$link$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"default\"], {\n                                                        href: \"/contact\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"Nous contacter\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 507,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 507,\n                                                    columnNumber: 17\n                                                }, this),\n                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"li\", {\n                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"a\", {\n                                                        href: \"mailto:support@athlink.com\",\n                                                        className: \"hover:text-white transition-colors\",\n                                                        children: \"support@athlink.com\"\n                                                    }, void 0, false, {\n                                                        fileName: \"[project]/app/page.tsx\",\n                                                        lineNumber: 508,\n                                                        columnNumber: 21\n                                                    }, this)\n                                                }, void 0, false, {\n                                                    fileName: \"[project]/app/page.tsx\",\n                                                    lineNumber: 508,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"[project]/app/page.tsx\",\n                                            lineNumber: 505,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"[project]/app/page.tsx\",\n                                    lineNumber: 503,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 455,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"div\", {\n                            className: \"border-t border-gray-800 pt-8 text-center text-sm text-gray-400\",\n                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$ssr$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__[\"jsxDEV\"])(\"p\", {\n                                children: \"¬© 2025 Athlink. Tous droits r√©serv√©s.\"\n                            }, void 0, false, {\n                                fileName: \"[project]/app/page.tsx\",\n                                lineNumber: 515,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"[project]/app/page.tsx\",\n                            lineNumber: 514,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"[project]/app/page.tsx\",\n                    lineNumber: 454,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"[project]/app/page.tsx\",\n                lineNumber: 453,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"[project]/app/page.tsx\",\n        lineNumber: 70,\n        columnNumber: 5\n    }, this);\n}\n}),\n];\n\n//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map","size_bytes":105281},".next/build/chunks/[turbopack-node]_transforms_postcss_ts_5260e9fa._.js":{"content":"module.exports = [\n\"[turbopack-node]/transforms/postcss.ts { CONFIG => \\\"[project]/postcss.config.mjs [postcss] (ecmascript)\\\" } [postcss] (ecmascript, async loader)\", ((__turbopack_context__) => {\n\n__turbopack_context__.v((parentImport) => {\n    return Promise.all([\n  \"build/chunks/node_modules_fe693df6._.js\",\n  \"build/chunks/[root-of-the-server]__51225daf._.js\"\n].map((chunk) => __turbopack_context__.l(chunk))).then(() => {\n        return parentImport(\"[turbopack-node]/transforms/postcss.ts { CONFIG => \\\"[project]/postcss.config.mjs [postcss] (ecmascript)\\\" } [postcss] (ecmascript)\");\n    });\n});\n}),\n];","size_bytes":611},".next/server/app/page_client-reference-manifest.js":{"content":"globalThis.__RSC_MANIFEST = globalThis.__RSC_MANIFEST || {};\nglobalThis.__RSC_MANIFEST[\"/page\"] = {\"moduleLoading\":{\"prefix\":\"\",\"crossOrigin\":null},\"clientModules\":{\"[project]/node_modules/next/dist/esm/client/components/layout-router.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/layout-router.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/layout-router.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/layout-router.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/render-from-template-context.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/render-from-template-context.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/render-from-template-context.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/render-from-template-context.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/client-page.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/client-page.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/client-page.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/client-page.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/client-segment.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/client-segment.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/client-segment.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/client-segment.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/http-access-fallback/error-boundary.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/http-access-fallback/error-boundary.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/lib/metadata/generate/icon-mark.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js\":{\"id\":\"[project]/node_modules/next/dist/lib/metadata/generate/icon-mark.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/metadata/async-metadata.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/metadata/async-metadata.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/client/components/metadata/async-metadata.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/metadata/async-metadata.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/lib/framework/boundary-components.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/lib/framework/boundary-components.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/lib/framework/boundary-components.js\":{\"id\":\"[project]/node_modules/next/dist/lib/framework/boundary-components.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js\":{\"id\":\"[project]/node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"/_next/static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"async\":false},\"[project]/node_modules/sonner/dist/index.mjs <module evaluation>\":{\"id\":\"[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\"],\"async\":false},\"[project]/node_modules/sonner/dist/index.mjs\":{\"id\":\"[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\"],\"async\":false},\"[project]/components/ConditionalNavbar.tsx <module evaluation>\":{\"id\":\"[project]/components/ConditionalNavbar.tsx [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\"],\"async\":false},\"[project]/components/ConditionalNavbar.tsx\":{\"id\":\"[project]/components/ConditionalNavbar.tsx [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\"],\"async\":false},\"[project]/node_modules/next/dist/client/script.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/script.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\"],\"async\":false},\"[project]/node_modules/next/dist/client/script.js\":{\"id\":\"[project]/node_modules/next/dist/client/script.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\"],\"async\":false},\"[project]/node_modules/next/dist/client/components/builtin/global-error.js <module evaluation>\":{\"id\":\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\",\"/_next/static/chunks/node_modules_next_dist_client_components_builtin_global-error_ecea1f7b.js\"],\"async\":false},\"[project]/node_modules/next/dist/client/components/builtin/global-error.js\":{\"id\":\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\",\"/_next/static/chunks/node_modules_next_dist_client_components_builtin_global-error_ecea1f7b.js\"],\"async\":false},\"[project]/app/page.tsx <module evaluation>\":{\"id\":\"[project]/app/page.tsx [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\",\"/_next/static/chunks/node_modules_eaed02a1._.js\",\"/_next/static/chunks/app_page_tsx_dda9881a._.js\",\"/_next/static/chunks/app_page_tsx_ecea1f7b._.js\"],\"async\":false},\"[project]/app/page.tsx\":{\"id\":\"[project]/app/page.tsx [app-client] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"/_next/static/chunks/node_modules_b2e0d0e6._.js\",\"/_next/static/chunks/components_8f100ce0._.js\",\"/_next/static/chunks/app_layout_tsx_0a548d63._.js\",\"/_next/static/chunks/node_modules_eaed02a1._.js\",\"/_next/static/chunks/app_page_tsx_dda9881a._.js\",\"/_next/static/chunks/app_page_tsx_ecea1f7b._.js\"],\"async\":false}},\"ssrModuleMapping\":{\"[project]/node_modules/next/dist/client/components/layout-router.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/layout-router.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/components/render-from-template-context.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/render-from-template-context.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/components/client-page.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/client-page.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/components/client-segment.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/client-segment.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/components/http-access-fallback/error-boundary.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/lib/metadata/generate/icon-mark.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/components/metadata/async-metadata.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/metadata/async-metadata.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/lib/framework/boundary-components.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/lib/framework/boundary-components.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/node_modules_next_dist_esm_968ff1ee._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_server_route-modules_app-page_f354387c._.js\",\"server/chunks/ssr/[root-of-the-server]__c80f7c8f._.js\"],\"async\":false}},\"[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/sonner/dist/index.mjs [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/[turbopack]_browser_dev_hmr-client_hmr-client_ts_89c5f8e8._.js\",\"server/chunks/ssr/node_modules_next_dist_client_ce3764a3._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_b1baabe8._.js\",\"server/chunks/ssr/node_modules_next_dist_f9d3683d._.js\",\"server/chunks/ssr/node_modules_next_navigation_34126abf.js\",\"server/chunks/ssr/node_modules_motion-dom_dist_es_ed19edc4._.js\",\"server/chunks/ssr/node_modules_framer-motion_dist_es_ad7b6bfa._.js\",\"server/chunks/ssr/node_modules_b67883c6._.js\",\"server/chunks/ssr/[root-of-the-server]__05d117f3._.js\"],\"async\":false}},\"[project]/components/ConditionalNavbar.tsx [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/components/ConditionalNavbar.tsx [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/[turbopack]_browser_dev_hmr-client_hmr-client_ts_89c5f8e8._.js\",\"server/chunks/ssr/node_modules_next_dist_client_ce3764a3._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_b1baabe8._.js\",\"server/chunks/ssr/node_modules_next_dist_f9d3683d._.js\",\"server/chunks/ssr/node_modules_next_navigation_34126abf.js\",\"server/chunks/ssr/node_modules_motion-dom_dist_es_ed19edc4._.js\",\"server/chunks/ssr/node_modules_framer-motion_dist_es_ad7b6bfa._.js\",\"server/chunks/ssr/node_modules_b67883c6._.js\",\"server/chunks/ssr/[root-of-the-server]__05d117f3._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/script.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/client/script.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/[turbopack]_browser_dev_hmr-client_hmr-client_ts_89c5f8e8._.js\",\"server/chunks/ssr/node_modules_next_dist_client_ce3764a3._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_b1baabe8._.js\",\"server/chunks/ssr/node_modules_next_dist_f9d3683d._.js\",\"server/chunks/ssr/node_modules_next_navigation_34126abf.js\",\"server/chunks/ssr/node_modules_motion-dom_dist_es_ed19edc4._.js\",\"server/chunks/ssr/node_modules_framer-motion_dist_es_ad7b6bfa._.js\",\"server/chunks/ssr/node_modules_b67883c6._.js\",\"server/chunks/ssr/[root-of-the-server]__05d117f3._.js\"],\"async\":false}},\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/[turbopack]_browser_dev_hmr-client_hmr-client_ts_89c5f8e8._.js\",\"server/chunks/ssr/node_modules_next_dist_client_ce3764a3._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_b1baabe8._.js\",\"server/chunks/ssr/node_modules_next_dist_f9d3683d._.js\",\"server/chunks/ssr/node_modules_next_navigation_34126abf.js\",\"server/chunks/ssr/node_modules_motion-dom_dist_es_ed19edc4._.js\",\"server/chunks/ssr/node_modules_framer-motion_dist_es_ad7b6bfa._.js\",\"server/chunks/ssr/node_modules_b67883c6._.js\",\"server/chunks/ssr/[root-of-the-server]__05d117f3._.js\"],\"async\":false}},\"[project]/app/page.tsx [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/app/page.tsx [app-ssr] (ecmascript)\",\"name\":\"*\",\"chunks\":[\"server/chunks/ssr/[turbopack]_browser_dev_hmr-client_hmr-client_ts_89c5f8e8._.js\",\"server/chunks/ssr/node_modules_next_dist_client_ce3764a3._.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_next-devtools_index_a19313bf.js\",\"server/chunks/ssr/node_modules_next_dist_compiled_b1baabe8._.js\",\"server/chunks/ssr/node_modules_next_dist_f9d3683d._.js\",\"server/chunks/ssr/node_modules_next_navigation_34126abf.js\",\"server/chunks/ssr/node_modules_motion-dom_dist_es_ed19edc4._.js\",\"server/chunks/ssr/node_modules_framer-motion_dist_es_ad7b6bfa._.js\",\"server/chunks/ssr/node_modules_b67883c6._.js\",\"server/chunks/ssr/[root-of-the-server]__05d117f3._.js\",\"server/chunks/ssr/node_modules_26ee7118._.js\",\"server/chunks/ssr/app_page_tsx_55b2e5ee._.js\"],\"async\":false}}},\"edgeSSRModuleMapping\":{},\"rscModuleMapping\":{\"[project]/node_modules/next/dist/client/components/layout-router.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/layout-router.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/components/render-from-template-context.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/render-from-template-context.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/components/client-page.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/client-page.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/components/client-segment.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/client-segment.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/components/http-access-fallback/error-boundary.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/http-access-fallback/error-boundary.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/lib/metadata/generate/icon-mark.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/lib/metadata/generate/icon-mark.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/components/metadata/async-metadata.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/client/components/metadata/async-metadata.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/lib/framework/boundary-components.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/lib/framework/boundary-components.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/next-devtools/userspace/app/segment-explorer-node.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/esm/next-devtools/userspace/app/segment-explorer-node.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/sonner/dist/index.mjs [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/sonner/dist/index.mjs [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/components/ConditionalNavbar.tsx [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/components/ConditionalNavbar.tsx [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/script.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/client/script.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}},\"[project]/app/page.tsx [app-client] (ecmascript)\":{\"*\":{\"id\":\"[project]/app/page.tsx [app-rsc] (client reference proxy)\",\"name\":\"*\",\"chunks\":[],\"async\":false}}},\"edgeRscModuleMapping\":{},\"entryCSSFiles\":{\"[project]/app/icon.png\":[],\"[project]/app/layout\":[{\"path\":\"static/chunks/[root-of-the-server]__077fd7b5._.css\",\"inlined\":false}],\"[project]/node_modules/next/dist/client/components/builtin/global-error\":[{\"path\":\"static/chunks/[root-of-the-server]__077fd7b5._.css\",\"inlined\":false}],\"[project]/app/page\":[{\"path\":\"static/chunks/[root-of-the-server]__077fd7b5._.css\",\"inlined\":false}]},\"entryJSFiles\":{\"[project]/app/icon.png\":[\"static/chunks/node_modules_next_dist_8db7fb1f._.js\",\"static/chunks/app_icon_png_mjs_7cd80e31._.js\"],\"[project]/app/layout\":[\"static/chunks/node_modules_b2e0d0e6._.js\",\"static/chunks/components_8f100ce0._.js\",\"static/chunks/app_layout_tsx_0a548d63._.js\"],\"[project]/node_modules/next/dist/client/components/builtin/global-error\":[\"static/chunks/node_modules_b2e0d0e6._.js\",\"static/chunks/components_8f100ce0._.js\",\"static/chunks/app_layout_tsx_0a548d63._.js\",\"static/chunks/node_modules_next_dist_client_components_builtin_global-error_ecea1f7b.js\"],\"[project]/app/page\":[\"static/chunks/node_modules_b2e0d0e6._.js\",\"static/chunks/components_8f100ce0._.js\",\"static/chunks/app_layout_tsx_0a548d63._.js\",\"static/chunks/node_modules_eaed02a1._.js\",\"static/chunks/app_page_tsx_dda9881a._.js\",\"static/chunks/app_page_tsx_ecea1f7b._.js\"]}}\n","size_bytes":24354},".next/postcss.js":{"content":"var R=require(\"./build/chunks/[turbopack]_runtime.js\")(\"postcss.js\")\nR.c(\"build/chunks/[turbopack-node]_transforms_postcss_ts_5260e9fa._.js\")\nR.c(\"build/chunks/[root-of-the-server]__974941ed._.js\")\nR.m(\"[turbopack-node]/globals.ts [postcss] (ecmascript)\")\nR.m(\"[turbopack-node]/ipc/evaluate.ts/evaluate.js { INNER => \\\"[turbopack-node]/transforms/postcss.ts { CONFIG => \\\\\\\"[project]/postcss.config.mjs [postcss] (ecmascript)\\\\\\\" } [postcss] (ecmascript)\\\", RUNTIME => \\\"[turbopack-node]/ipc/evaluate.ts [postcss] (ecmascript)\\\" } [postcss] (ecmascript)\")\nmodule.exports=R.m(\"[turbopack-node]/ipc/evaluate.ts/evaluate.js { INNER => \\\"[turbopack-node]/transforms/postcss.ts { CONFIG => \\\\\\\"[project]/postcss.config.mjs [postcss] (ecmascript)\\\\\\\" } [postcss] (ecmascript)\\\", RUNTIME => \\\"[turbopack-node]/ipc/evaluate.ts [postcss] (ecmascript)\\\" } [postcss] (ecmascript)\").exports\n","size_bytes":879},".next/build/chunks/[turbopack]_runtime.js":{"content":"const RUNTIME_PUBLIC_PATH = \"build/chunks/[turbopack]_runtime.js\";\nconst RELATIVE_ROOT_PATH = \"..\";\nconst ASSET_PREFIX = \"/\";\n/**\n * This file contains runtime types and functions that are shared between all\n * TurboPack ECMAScript runtimes.\n *\n * It will be prepended to the runtime code of each runtime.\n */ /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"./runtime-types.d.ts\" />\nconst REEXPORTED_OBJECTS = new WeakMap();\n/**\n * Constructs the `__turbopack_context__` object for a module.\n */ function Context(module, exports) {\n    this.m = module;\n    // We need to store this here instead of accessing it from the module object to:\n    // 1. Make it available to factories directly, since we rewrite `this` to\n    //    `__turbopack_context__.e` in CJS modules.\n    // 2. Support async modules which rewrite `module.exports` to a promise, so we\n    //    can still access the original exports object from functions like\n    //    `esmExport`\n    // Ideally we could find a new approach for async modules and drop this property altogether.\n    this.e = exports;\n}\nconst contextPrototype = Context.prototype;\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag;\nfunction defineProp(obj, name, options) {\n    if (!hasOwnProperty.call(obj, name)) Object.defineProperty(obj, name, options);\n}\nfunction getOverwrittenModule(moduleCache, id) {\n    let module = moduleCache[id];\n    if (!module) {\n        // This is invoked when a module is merged into another module, thus it wasn't invoked via\n        // instantiateModule and the cache entry wasn't created yet.\n        module = createModuleObject(id);\n        moduleCache[id] = module;\n    }\n    return module;\n}\n/**\n * Creates the module object. Only done here to ensure all module objects have the same shape.\n */ function createModuleObject(id) {\n    return {\n        exports: {},\n        error: undefined,\n        id,\n        namespaceObject: undefined\n    };\n}\n/**\n * Adds the getters to the exports object.\n */ function esm(exports, getters) {\n    defineProp(exports, '__esModule', {\n        value: true\n    });\n    if (toStringTag) defineProp(exports, toStringTag, {\n        value: 'Module'\n    });\n    let i = 0;\n    while(i < getters.length){\n        const propName = getters[i++];\n        // TODO(luke.sandberg): we could support raw values here, but would need a discriminator beyond 'not a function'\n        const getter = getters[i++];\n        if (typeof getters[i] === 'function') {\n            // a setter\n            defineProp(exports, propName, {\n                get: getter,\n                set: getters[i++],\n                enumerable: true\n            });\n        } else {\n            defineProp(exports, propName, {\n                get: getter,\n                enumerable: true\n            });\n        }\n    }\n    Object.seal(exports);\n}\n/**\n * Makes the module an ESM with exports\n */ function esmExport(getters, id) {\n    let module;\n    let exports;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n        exports = module.exports;\n    } else {\n        module = this.m;\n        exports = this.e;\n    }\n    module.namespaceObject = exports;\n    esm(exports, getters);\n}\ncontextPrototype.s = esmExport;\nfunction ensureDynamicExports(module, exports) {\n    let reexportedObjects = REEXPORTED_OBJECTS.get(module);\n    if (!reexportedObjects) {\n        REEXPORTED_OBJECTS.set(module, reexportedObjects = []);\n        module.exports = module.namespaceObject = new Proxy(exports, {\n            get (target, prop) {\n                if (hasOwnProperty.call(target, prop) || prop === 'default' || prop === '__esModule') {\n                    return Reflect.get(target, prop);\n                }\n                for (const obj of reexportedObjects){\n                    const value = Reflect.get(obj, prop);\n                    if (value !== undefined) return value;\n                }\n                return undefined;\n            },\n            ownKeys (target) {\n                const keys = Reflect.ownKeys(target);\n                for (const obj of reexportedObjects){\n                    for (const key of Reflect.ownKeys(obj)){\n                        if (key !== 'default' && !keys.includes(key)) keys.push(key);\n                    }\n                }\n                return keys;\n            }\n        });\n    }\n    return reexportedObjects;\n}\n/**\n * Dynamically exports properties from an object\n */ function dynamicExport(object, id) {\n    let module;\n    let exports;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n        exports = module.exports;\n    } else {\n        module = this.m;\n        exports = this.e;\n    }\n    const reexportedObjects = ensureDynamicExports(module, exports);\n    if (typeof object === 'object' && object !== null) {\n        reexportedObjects.push(object);\n    }\n}\ncontextPrototype.j = dynamicExport;\nfunction exportValue(value, id) {\n    let module;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n    } else {\n        module = this.m;\n    }\n    module.exports = value;\n}\ncontextPrototype.v = exportValue;\nfunction exportNamespace(namespace, id) {\n    let module;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n    } else {\n        module = this.m;\n    }\n    module.exports = module.namespaceObject = namespace;\n}\ncontextPrototype.n = exportNamespace;\nfunction createGetter(obj, key) {\n    return ()=>obj[key];\n}\n/**\n * @returns prototype of the object\n */ const getProto = Object.getPrototypeOf ? (obj)=>Object.getPrototypeOf(obj) : (obj)=>obj.__proto__;\n/** Prototypes that are not expanded for exports */ const LEAF_PROTOTYPES = [\n    null,\n    getProto({}),\n    getProto([]),\n    getProto(getProto)\n];\n/**\n * @param raw\n * @param ns\n * @param allowExportDefault\n *   * `false`: will have the raw module as default export\n *   * `true`: will have the default property as default export\n */ function interopEsm(raw, ns, allowExportDefault) {\n    const getters = [];\n    // The index of the `default` export if any\n    let defaultLocation = -1;\n    for(let current = raw; (typeof current === 'object' || typeof current === 'function') && !LEAF_PROTOTYPES.includes(current); current = getProto(current)){\n        for (const key of Object.getOwnPropertyNames(current)){\n            getters.push(key, createGetter(raw, key));\n            if (defaultLocation === -1 && key === 'default') {\n                defaultLocation = getters.length - 1;\n            }\n        }\n    }\n    // this is not really correct\n    // we should set the `default` getter if the imported module is a `.cjs file`\n    if (!(allowExportDefault && defaultLocation >= 0)) {\n        // Replace the binding with one for the namespace itself in order to preserve iteration order.\n        if (defaultLocation >= 0) {\n            getters[defaultLocation] = ()=>raw;\n        } else {\n            getters.push('default', ()=>raw);\n        }\n    }\n    esm(ns, getters);\n    return ns;\n}\nfunction createNS(raw) {\n    if (typeof raw === 'function') {\n        return function(...args) {\n            return raw.apply(this, args);\n        };\n    } else {\n        return Object.create(null);\n    }\n}\nfunction esmImport(id) {\n    const module = getOrInstantiateModuleFromParent(id, this.m);\n    // any ES module has to have `module.namespaceObject` defined.\n    if (module.namespaceObject) return module.namespaceObject;\n    // only ESM can be an async module, so we don't need to worry about exports being a promise here.\n    const raw = module.exports;\n    return module.namespaceObject = interopEsm(raw, createNS(raw), raw && raw.__esModule);\n}\ncontextPrototype.i = esmImport;\nfunction asyncLoader(moduleId) {\n    const loader = this.r(moduleId);\n    return loader(this.i.bind(this));\n}\ncontextPrototype.A = asyncLoader;\n// Add a simple runtime require so that environments without one can still pass\n// `typeof require` CommonJS checks so that exports are correctly registered.\nconst runtimeRequire = // @ts-ignore\ntypeof require === 'function' ? require : function require1() {\n    throw new Error('Unexpected use of runtime require');\n};\ncontextPrototype.t = runtimeRequire;\nfunction commonJsRequire(id) {\n    return getOrInstantiateModuleFromParent(id, this.m).exports;\n}\ncontextPrototype.r = commonJsRequire;\n/**\n * `require.context` and require/import expression runtime.\n */ function moduleContext(map) {\n    function moduleContext(id) {\n        if (hasOwnProperty.call(map, id)) {\n            return map[id].module();\n        }\n        const e = new Error(`Cannot find module '${id}'`);\n        e.code = 'MODULE_NOT_FOUND';\n        throw e;\n    }\n    moduleContext.keys = ()=>{\n        return Object.keys(map);\n    };\n    moduleContext.resolve = (id)=>{\n        if (hasOwnProperty.call(map, id)) {\n            return map[id].id();\n        }\n        const e = new Error(`Cannot find module '${id}'`);\n        e.code = 'MODULE_NOT_FOUND';\n        throw e;\n    };\n    moduleContext.import = async (id)=>{\n        return await moduleContext(id);\n    };\n    return moduleContext;\n}\ncontextPrototype.f = moduleContext;\n/**\n * Returns the path of a chunk defined by its data.\n */ function getChunkPath(chunkData) {\n    return typeof chunkData === 'string' ? chunkData : chunkData.path;\n}\nfunction isPromise(maybePromise) {\n    return maybePromise != null && typeof maybePromise === 'object' && 'then' in maybePromise && typeof maybePromise.then === 'function';\n}\nfunction isAsyncModuleExt(obj) {\n    return turbopackQueues in obj;\n}\nfunction createPromise() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej)=>{\n        reject = rej;\n        resolve = res;\n    });\n    return {\n        promise,\n        resolve: resolve,\n        reject: reject\n    };\n}\n// Load the CompressedmoduleFactories of a chunk into the `moduleFactories` Map.\n// The CompressedModuleFactories format is\n// - 1 or more module ids\n// - a module factory function\n// So walking this is a little complex but the flat structure is also fast to\n// traverse, we can use `typeof` operators to distinguish the two cases.\nfunction installCompressedModuleFactories(chunkModules, offset, moduleFactories, newModuleId) {\n    let i = offset;\n    while(i < chunkModules.length){\n        let moduleId = chunkModules[i];\n        let end = i + 1;\n        // Find our factory function\n        while(end < chunkModules.length && typeof chunkModules[end] !== 'function'){\n            end++;\n        }\n        if (end === chunkModules.length) {\n            throw new Error('malformed chunk format, expected a factory function');\n        }\n        // Each chunk item has a 'primary id' and optional additional ids. If the primary id is already\n        // present we know all the additional ids are also present, so we don't need to check.\n        if (!moduleFactories.has(moduleId)) {\n            const moduleFactoryFn = chunkModules[end];\n            applyModuleFactoryName(moduleFactoryFn);\n            newModuleId?.(moduleId);\n            for(; i < end; i++){\n                moduleId = chunkModules[i];\n                moduleFactories.set(moduleId, moduleFactoryFn);\n            }\n        }\n        i = end + 1; // end is pointing at the last factory advance to the next id or the end of the array.\n    }\n}\n// everything below is adapted from webpack\n// https://github.com/webpack/webpack/blob/6be4065ade1e252c1d8dcba4af0f43e32af1bdc1/lib/runtime/AsyncModuleRuntimeModule.js#L13\nconst turbopackQueues = Symbol('turbopack queues');\nconst turbopackExports = Symbol('turbopack exports');\nconst turbopackError = Symbol('turbopack error');\nfunction resolveQueue(queue) {\n    if (queue && queue.status !== 1) {\n        queue.status = 1;\n        queue.forEach((fn)=>fn.queueCount--);\n        queue.forEach((fn)=>fn.queueCount-- ? fn.queueCount++ : fn());\n    }\n}\nfunction wrapDeps(deps) {\n    return deps.map((dep)=>{\n        if (dep !== null && typeof dep === 'object') {\n            if (isAsyncModuleExt(dep)) return dep;\n            if (isPromise(dep)) {\n                const queue = Object.assign([], {\n                    status: 0\n                });\n                const obj = {\n                    [turbopackExports]: {},\n                    [turbopackQueues]: (fn)=>fn(queue)\n                };\n                dep.then((res)=>{\n                    obj[turbopackExports] = res;\n                    resolveQueue(queue);\n                }, (err)=>{\n                    obj[turbopackError] = err;\n                    resolveQueue(queue);\n                });\n                return obj;\n            }\n        }\n        return {\n            [turbopackExports]: dep,\n            [turbopackQueues]: ()=>{}\n        };\n    });\n}\nfunction asyncModule(body, hasAwait) {\n    const module = this.m;\n    const queue = hasAwait ? Object.assign([], {\n        status: -1\n    }) : undefined;\n    const depQueues = new Set();\n    const { resolve, reject, promise: rawPromise } = createPromise();\n    const promise = Object.assign(rawPromise, {\n        [turbopackExports]: module.exports,\n        [turbopackQueues]: (fn)=>{\n            queue && fn(queue);\n            depQueues.forEach(fn);\n            promise['catch'](()=>{});\n        }\n    });\n    const attributes = {\n        get () {\n            return promise;\n        },\n        set (v) {\n            // Calling `esmExport` leads to this.\n            if (v !== promise) {\n                promise[turbopackExports] = v;\n            }\n        }\n    };\n    Object.defineProperty(module, 'exports', attributes);\n    Object.defineProperty(module, 'namespaceObject', attributes);\n    function handleAsyncDependencies(deps) {\n        const currentDeps = wrapDeps(deps);\n        const getResult = ()=>currentDeps.map((d)=>{\n                if (d[turbopackError]) throw d[turbopackError];\n                return d[turbopackExports];\n            });\n        const { promise, resolve } = createPromise();\n        const fn = Object.assign(()=>resolve(getResult), {\n            queueCount: 0\n        });\n        function fnQueue(q) {\n            if (q !== queue && !depQueues.has(q)) {\n                depQueues.add(q);\n                if (q && q.status === 0) {\n                    fn.queueCount++;\n                    q.push(fn);\n                }\n            }\n        }\n        currentDeps.map((dep)=>dep[turbopackQueues](fnQueue));\n        return fn.queueCount ? promise : getResult();\n    }\n    function asyncResult(err) {\n        if (err) {\n            reject(promise[turbopackError] = err);\n        } else {\n            resolve(promise[turbopackExports]);\n        }\n        resolveQueue(queue);\n    }\n    body(handleAsyncDependencies, asyncResult);\n    if (queue && queue.status === -1) {\n        queue.status = 0;\n    }\n}\ncontextPrototype.a = asyncModule;\n/**\n * A pseudo \"fake\" URL object to resolve to its relative path.\n *\n * When UrlRewriteBehavior is set to relative, calls to the `new URL()` will construct url without base using this\n * runtime function to generate context-agnostic urls between different rendering context, i.e ssr / client to avoid\n * hydration mismatch.\n *\n * This is based on webpack's existing implementation:\n * https://github.com/webpack/webpack/blob/87660921808566ef3b8796f8df61bd79fc026108/lib/runtime/RelativeUrlRuntimeModule.js\n */ const relativeURL = function relativeURL(inputUrl) {\n    const realUrl = new URL(inputUrl, 'x:/');\n    const values = {};\n    for(const key in realUrl)values[key] = realUrl[key];\n    values.href = inputUrl;\n    values.pathname = inputUrl.replace(/[?#].*/, '');\n    values.origin = values.protocol = '';\n    values.toString = values.toJSON = (..._args)=>inputUrl;\n    for(const key in values)Object.defineProperty(this, key, {\n        enumerable: true,\n        configurable: true,\n        value: values[key]\n    });\n};\nrelativeURL.prototype = URL.prototype;\ncontextPrototype.U = relativeURL;\n/**\n * Utility function to ensure all variants of an enum are handled.\n */ function invariant(never, computeMessage) {\n    throw new Error(`Invariant: ${computeMessage(never)}`);\n}\n/**\n * A stub function to make `require` available but non-functional in ESM.\n */ function requireStub(_moduleId) {\n    throw new Error('dynamic usage of require is not supported');\n}\ncontextPrototype.z = requireStub;\n// Make `globalThis` available to the module in a way that cannot be shadowed by a local variable.\ncontextPrototype.g = globalThis;\nfunction applyModuleFactoryName(factory) {\n    // Give the module factory a nice name to improve stack traces.\n    Object.defineProperty(factory, 'name', {\n        value: '__TURBOPACK__module__evaluation__'\n    });\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\n/// A 'base' utilities to support runtime can have externals.\n/// Currently this is for node.js / edge runtime both.\n/// If a fn requires node.js specific behavior, it should be placed in `node-external-utils` instead.\nasync function externalImport(id) {\n    let raw;\n    try {\n        raw = await import(id);\n    } catch (err) {\n        // TODO(alexkirsz) This can happen when a client-side module tries to load\n        // an external module we don't provide a shim for (e.g. querystring, url).\n        // For now, we fail semi-silently, but in the future this should be a\n        // compilation error.\n        throw new Error(`Failed to load external module ${id}: ${err}`);\n    }\n    if (raw && raw.__esModule && raw.default && 'default' in raw.default) {\n        return interopEsm(raw.default, createNS(raw), true);\n    }\n    return raw;\n}\ncontextPrototype.y = externalImport;\nfunction externalRequire(id, thunk, esm = false) {\n    let raw;\n    try {\n        raw = thunk();\n    } catch (err) {\n        // TODO(alexkirsz) This can happen when a client-side module tries to load\n        // an external module we don't provide a shim for (e.g. querystring, url).\n        // For now, we fail semi-silently, but in the future this should be a\n        // compilation error.\n        throw new Error(`Failed to load external module ${id}: ${err}`);\n    }\n    if (!esm || raw.__esModule) {\n        return raw;\n    }\n    return interopEsm(raw, createNS(raw), true);\n}\nexternalRequire.resolve = (id, options)=>{\n    return require.resolve(id, options);\n};\ncontextPrototype.x = externalRequire;\n/* eslint-disable @typescript-eslint/no-unused-vars */ const path = require('path');\nconst relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.');\n// Compute the relative path to the `distDir`.\nconst relativePathToDistRoot = path.join(relativePathToRuntimeRoot, RELATIVE_ROOT_PATH);\nconst RUNTIME_ROOT = path.resolve(__filename, relativePathToRuntimeRoot);\n// Compute the absolute path to the root, by stripping distDir from the absolute path to this file.\nconst ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot);\n/**\n * Returns an absolute path to the given module path.\n * Module path should be relative, either path to a file or a directory.\n *\n * This fn allows to calculate an absolute path for some global static values, such as\n * `__dirname` or `import.meta.url` that Turbopack will not embeds in compile time.\n * See ImportMetaBinding::code_generation for the usage.\n */ function resolveAbsolutePath(modulePath) {\n    if (modulePath) {\n        return path.join(ABSOLUTE_ROOT, modulePath);\n    }\n    return ABSOLUTE_ROOT;\n}\nContext.prototype.P = resolveAbsolutePath;\n/* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\nfunction readWebAssemblyAsResponse(path) {\n    const { createReadStream } = require('fs');\n    const { Readable } = require('stream');\n    const stream = createReadStream(path);\n    // @ts-ignore unfortunately there's a slight type mismatch with the stream.\n    return new Response(Readable.toWeb(stream), {\n        headers: {\n            'content-type': 'application/wasm'\n        }\n    });\n}\nasync function compileWebAssemblyFromPath(path) {\n    const response = readWebAssemblyAsResponse(path);\n    return await WebAssembly.compileStreaming(response);\n}\nasync function instantiateWebAssemblyFromPath(path, importsObj) {\n    const response = readWebAssemblyAsResponse(path);\n    const { instance } = await WebAssembly.instantiateStreaming(response, importsObj);\n    return instance.exports;\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\n/// <reference path=\"../shared-node/base-externals-utils.ts\" />\n/// <reference path=\"../shared-node/node-externals-utils.ts\" />\n/// <reference path=\"../shared-node/node-wasm-utils.ts\" />\nvar SourceType = /*#__PURE__*/ function(SourceType) {\n    /**\n   * The module was instantiated because it was included in an evaluated chunk's\n   * runtime.\n   * SourceData is a ChunkPath.\n   */ SourceType[SourceType[\"Runtime\"] = 0] = \"Runtime\";\n    /**\n   * The module was instantiated because a parent module imported it.\n   * SourceData is a ModuleId.\n   */ SourceType[SourceType[\"Parent\"] = 1] = \"Parent\";\n    return SourceType;\n}(SourceType || {});\nprocess.env.TURBOPACK = '1';\nconst nodeContextPrototype = Context.prototype;\nconst url = require('url');\nconst moduleFactories = new Map();\nnodeContextPrototype.M = moduleFactories;\nconst moduleCache = Object.create(null);\nnodeContextPrototype.c = moduleCache;\n/**\n * Returns an absolute path to the given module's id.\n */ function resolvePathFromModule(moduleId) {\n    const exported = this.r(moduleId);\n    const exportedPath = exported?.default ?? exported;\n    if (typeof exportedPath !== 'string') {\n        return exported;\n    }\n    const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length);\n    const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix);\n    return url.pathToFileURL(resolved).href;\n}\nnodeContextPrototype.R = resolvePathFromModule;\nfunction loadRuntimeChunk(sourcePath, chunkData) {\n    if (typeof chunkData === 'string') {\n        loadRuntimeChunkPath(sourcePath, chunkData);\n    } else {\n        loadRuntimeChunkPath(sourcePath, chunkData.path);\n    }\n}\nconst loadedChunks = new Set();\nconst unsupportedLoadChunk = Promise.resolve(undefined);\nconst loadedChunk = Promise.resolve(undefined);\nconst chunkCache = new Map();\nfunction clearChunkCache() {\n    chunkCache.clear();\n}\nfunction loadRuntimeChunkPath(sourcePath, chunkPath) {\n    if (!isJs(chunkPath)) {\n        // We only support loading JS chunks in Node.js.\n        // This branch can be hit when trying to load a CSS chunk.\n        return;\n    }\n    if (loadedChunks.has(chunkPath)) {\n        return;\n    }\n    try {\n        const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n        const chunkModules = require(resolved);\n        installCompressedModuleFactories(chunkModules, 0, moduleFactories);\n        loadedChunks.add(chunkPath);\n    } catch (e) {\n        let errorMessage = `Failed to load chunk ${chunkPath}`;\n        if (sourcePath) {\n            errorMessage += ` from runtime for chunk ${sourcePath}`;\n        }\n        throw new Error(errorMessage, {\n            cause: e\n        });\n    }\n}\nfunction loadChunkAsync(chunkData) {\n    const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path;\n    if (!isJs(chunkPath)) {\n        // We only support loading JS chunks in Node.js.\n        // This branch can be hit when trying to load a CSS chunk.\n        return unsupportedLoadChunk;\n    }\n    let entry = chunkCache.get(chunkPath);\n    if (entry === undefined) {\n        try {\n            // resolve to an absolute path to simplify `require` handling\n            const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n            // TODO: consider switching to `import()` to enable concurrent chunk loading and async file io\n            // However this is incompatible with hot reloading (since `import` doesn't use the require cache)\n            const chunkModules = require(resolved);\n            installCompressedModuleFactories(chunkModules, 0, moduleFactories);\n            entry = loadedChunk;\n        } catch (e) {\n            const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`;\n            // Cache the failure promise, future requests will also get this same rejection\n            entry = Promise.reject(new Error(errorMessage, {\n                cause: e\n            }));\n        }\n        chunkCache.set(chunkPath, entry);\n    }\n    // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\n    return entry;\n}\ncontextPrototype.l = loadChunkAsync;\nfunction loadChunkAsyncByUrl(chunkUrl) {\n    const path1 = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT));\n    return loadChunkAsync.call(this, path1);\n}\ncontextPrototype.L = loadChunkAsyncByUrl;\nfunction loadWebAssembly(chunkPath, _edgeModule, imports) {\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n    return instantiateWebAssemblyFromPath(resolved, imports);\n}\ncontextPrototype.w = loadWebAssembly;\nfunction loadWebAssemblyModule(chunkPath, _edgeModule) {\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n    return compileWebAssemblyFromPath(resolved);\n}\ncontextPrototype.u = loadWebAssemblyModule;\nfunction getWorkerBlobURL(_chunks) {\n    throw new Error('Worker blobs are not implemented yet for Node.js');\n}\nnodeContextPrototype.b = getWorkerBlobURL;\nfunction instantiateModule(id, sourceType, sourceData) {\n    const moduleFactory = moduleFactories.get(id);\n    if (typeof moduleFactory !== 'function') {\n        // This can happen if modules incorrectly handle HMR disposes/updates,\n        // e.g. when they keep a `setTimeout` around which still executes old code\n        // and contains e.g. a `require(\"something\")` call.\n        let instantiationReason;\n        switch(sourceType){\n            case 0:\n                instantiationReason = `as a runtime entry of chunk ${sourceData}`;\n                break;\n            case 1:\n                instantiationReason = `because it was required from module ${sourceData}`;\n                break;\n            default:\n                invariant(sourceType, (sourceType)=>`Unknown source type: ${sourceType}`);\n        }\n        throw new Error(`Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`);\n    }\n    const module1 = createModuleObject(id);\n    const exports = module1.exports;\n    moduleCache[id] = module1;\n    const context = new Context(module1, exports);\n    // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n    try {\n        moduleFactory(context, module1, exports);\n    } catch (error) {\n        module1.error = error;\n        throw error;\n    }\n    module1.loaded = true;\n    if (module1.namespaceObject && module1.exports !== module1.namespaceObject) {\n        // in case of a circular dependency: cjs1 -> esm2 -> cjs1\n        interopEsm(module1.exports, module1.namespaceObject);\n    }\n    return module1;\n}\n/**\n * Retrieves a module from the cache, or instantiate it if it is not cached.\n */ // @ts-ignore\nfunction getOrInstantiateModuleFromParent(id, sourceModule) {\n    const module1 = moduleCache[id];\n    if (module1) {\n        if (module1.error) {\n            throw module1.error;\n        }\n        return module1;\n    }\n    return instantiateModule(id, 1, sourceModule.id);\n}\n/**\n * Instantiates a runtime module.\n */ function instantiateRuntimeModule(chunkPath, moduleId) {\n    return instantiateModule(moduleId, 0, chunkPath);\n}\n/**\n * Retrieves a module from the cache, or instantiate it as a runtime module if it is not cached.\n */ // @ts-ignore TypeScript doesn't separate this module space from the browser runtime\nfunction getOrInstantiateRuntimeModule(chunkPath, moduleId) {\n    const module1 = moduleCache[moduleId];\n    if (module1) {\n        if (module1.error) {\n            throw module1.error;\n        }\n        return module1;\n    }\n    return instantiateRuntimeModule(chunkPath, moduleId);\n}\nconst regexJsUrl = /\\.js(?:\\?[^#]*)?(?:#.*)?$/;\n/**\n * Checks if a given path/URL ends with .js, optionally followed by ?query or #fragment.\n */ function isJs(chunkUrlOrPath) {\n    return regexJsUrl.test(chunkUrlOrPath);\n}\nmodule.exports = (sourcePath)=>({\n        m: (id)=>getOrInstantiateRuntimeModule(sourcePath, id),\n        c: (chunkData)=>loadRuntimeChunk(sourcePath, chunkData)\n    });\n\n\n//# sourceMappingURL=%5Bturbopack%5D_runtime.js.map","size_bytes":28456},".next/server/chunks/ssr/[turbopack]_runtime.js":{"content":"const RUNTIME_PUBLIC_PATH = \"server/chunks/ssr/[turbopack]_runtime.js\";\nconst RELATIVE_ROOT_PATH = \"..\";\nconst ASSET_PREFIX = \"/_next/\";\n/**\n * This file contains runtime types and functions that are shared between all\n * TurboPack ECMAScript runtimes.\n *\n * It will be prepended to the runtime code of each runtime.\n */ /* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"./runtime-types.d.ts\" />\nconst REEXPORTED_OBJECTS = new WeakMap();\n/**\n * Constructs the `__turbopack_context__` object for a module.\n */ function Context(module, exports) {\n    this.m = module;\n    // We need to store this here instead of accessing it from the module object to:\n    // 1. Make it available to factories directly, since we rewrite `this` to\n    //    `__turbopack_context__.e` in CJS modules.\n    // 2. Support async modules which rewrite `module.exports` to a promise, so we\n    //    can still access the original exports object from functions like\n    //    `esmExport`\n    // Ideally we could find a new approach for async modules and drop this property altogether.\n    this.e = exports;\n}\nconst contextPrototype = Context.prototype;\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst toStringTag = typeof Symbol !== 'undefined' && Symbol.toStringTag;\nfunction defineProp(obj, name, options) {\n    if (!hasOwnProperty.call(obj, name)) Object.defineProperty(obj, name, options);\n}\nfunction getOverwrittenModule(moduleCache, id) {\n    let module = moduleCache[id];\n    if (!module) {\n        // This is invoked when a module is merged into another module, thus it wasn't invoked via\n        // instantiateModule and the cache entry wasn't created yet.\n        module = createModuleObject(id);\n        moduleCache[id] = module;\n    }\n    return module;\n}\n/**\n * Creates the module object. Only done here to ensure all module objects have the same shape.\n */ function createModuleObject(id) {\n    return {\n        exports: {},\n        error: undefined,\n        id,\n        namespaceObject: undefined\n    };\n}\n/**\n * Adds the getters to the exports object.\n */ function esm(exports, getters) {\n    defineProp(exports, '__esModule', {\n        value: true\n    });\n    if (toStringTag) defineProp(exports, toStringTag, {\n        value: 'Module'\n    });\n    let i = 0;\n    while(i < getters.length){\n        const propName = getters[i++];\n        // TODO(luke.sandberg): we could support raw values here, but would need a discriminator beyond 'not a function'\n        const getter = getters[i++];\n        if (typeof getters[i] === 'function') {\n            // a setter\n            defineProp(exports, propName, {\n                get: getter,\n                set: getters[i++],\n                enumerable: true\n            });\n        } else {\n            defineProp(exports, propName, {\n                get: getter,\n                enumerable: true\n            });\n        }\n    }\n    Object.seal(exports);\n}\n/**\n * Makes the module an ESM with exports\n */ function esmExport(getters, id) {\n    let module;\n    let exports;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n        exports = module.exports;\n    } else {\n        module = this.m;\n        exports = this.e;\n    }\n    module.namespaceObject = exports;\n    esm(exports, getters);\n}\ncontextPrototype.s = esmExport;\nfunction ensureDynamicExports(module, exports) {\n    let reexportedObjects = REEXPORTED_OBJECTS.get(module);\n    if (!reexportedObjects) {\n        REEXPORTED_OBJECTS.set(module, reexportedObjects = []);\n        module.exports = module.namespaceObject = new Proxy(exports, {\n            get (target, prop) {\n                if (hasOwnProperty.call(target, prop) || prop === 'default' || prop === '__esModule') {\n                    return Reflect.get(target, prop);\n                }\n                for (const obj of reexportedObjects){\n                    const value = Reflect.get(obj, prop);\n                    if (value !== undefined) return value;\n                }\n                return undefined;\n            },\n            ownKeys (target) {\n                const keys = Reflect.ownKeys(target);\n                for (const obj of reexportedObjects){\n                    for (const key of Reflect.ownKeys(obj)){\n                        if (key !== 'default' && !keys.includes(key)) keys.push(key);\n                    }\n                }\n                return keys;\n            }\n        });\n    }\n    return reexportedObjects;\n}\n/**\n * Dynamically exports properties from an object\n */ function dynamicExport(object, id) {\n    let module;\n    let exports;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n        exports = module.exports;\n    } else {\n        module = this.m;\n        exports = this.e;\n    }\n    const reexportedObjects = ensureDynamicExports(module, exports);\n    if (typeof object === 'object' && object !== null) {\n        reexportedObjects.push(object);\n    }\n}\ncontextPrototype.j = dynamicExport;\nfunction exportValue(value, id) {\n    let module;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n    } else {\n        module = this.m;\n    }\n    module.exports = value;\n}\ncontextPrototype.v = exportValue;\nfunction exportNamespace(namespace, id) {\n    let module;\n    if (id != null) {\n        module = getOverwrittenModule(this.c, id);\n    } else {\n        module = this.m;\n    }\n    module.exports = module.namespaceObject = namespace;\n}\ncontextPrototype.n = exportNamespace;\nfunction createGetter(obj, key) {\n    return ()=>obj[key];\n}\n/**\n * @returns prototype of the object\n */ const getProto = Object.getPrototypeOf ? (obj)=>Object.getPrototypeOf(obj) : (obj)=>obj.__proto__;\n/** Prototypes that are not expanded for exports */ const LEAF_PROTOTYPES = [\n    null,\n    getProto({}),\n    getProto([]),\n    getProto(getProto)\n];\n/**\n * @param raw\n * @param ns\n * @param allowExportDefault\n *   * `false`: will have the raw module as default export\n *   * `true`: will have the default property as default export\n */ function interopEsm(raw, ns, allowExportDefault) {\n    const getters = [];\n    // The index of the `default` export if any\n    let defaultLocation = -1;\n    for(let current = raw; (typeof current === 'object' || typeof current === 'function') && !LEAF_PROTOTYPES.includes(current); current = getProto(current)){\n        for (const key of Object.getOwnPropertyNames(current)){\n            getters.push(key, createGetter(raw, key));\n            if (defaultLocation === -1 && key === 'default') {\n                defaultLocation = getters.length - 1;\n            }\n        }\n    }\n    // this is not really correct\n    // we should set the `default` getter if the imported module is a `.cjs file`\n    if (!(allowExportDefault && defaultLocation >= 0)) {\n        // Replace the binding with one for the namespace itself in order to preserve iteration order.\n        if (defaultLocation >= 0) {\n            getters[defaultLocation] = ()=>raw;\n        } else {\n            getters.push('default', ()=>raw);\n        }\n    }\n    esm(ns, getters);\n    return ns;\n}\nfunction createNS(raw) {\n    if (typeof raw === 'function') {\n        return function(...args) {\n            return raw.apply(this, args);\n        };\n    } else {\n        return Object.create(null);\n    }\n}\nfunction esmImport(id) {\n    const module = getOrInstantiateModuleFromParent(id, this.m);\n    // any ES module has to have `module.namespaceObject` defined.\n    if (module.namespaceObject) return module.namespaceObject;\n    // only ESM can be an async module, so we don't need to worry about exports being a promise here.\n    const raw = module.exports;\n    return module.namespaceObject = interopEsm(raw, createNS(raw), raw && raw.__esModule);\n}\ncontextPrototype.i = esmImport;\nfunction asyncLoader(moduleId) {\n    const loader = this.r(moduleId);\n    return loader(this.i.bind(this));\n}\ncontextPrototype.A = asyncLoader;\n// Add a simple runtime require so that environments without one can still pass\n// `typeof require` CommonJS checks so that exports are correctly registered.\nconst runtimeRequire = // @ts-ignore\ntypeof require === 'function' ? require : function require1() {\n    throw new Error('Unexpected use of runtime require');\n};\ncontextPrototype.t = runtimeRequire;\nfunction commonJsRequire(id) {\n    return getOrInstantiateModuleFromParent(id, this.m).exports;\n}\ncontextPrototype.r = commonJsRequire;\n/**\n * `require.context` and require/import expression runtime.\n */ function moduleContext(map) {\n    function moduleContext(id) {\n        if (hasOwnProperty.call(map, id)) {\n            return map[id].module();\n        }\n        const e = new Error(`Cannot find module '${id}'`);\n        e.code = 'MODULE_NOT_FOUND';\n        throw e;\n    }\n    moduleContext.keys = ()=>{\n        return Object.keys(map);\n    };\n    moduleContext.resolve = (id)=>{\n        if (hasOwnProperty.call(map, id)) {\n            return map[id].id();\n        }\n        const e = new Error(`Cannot find module '${id}'`);\n        e.code = 'MODULE_NOT_FOUND';\n        throw e;\n    };\n    moduleContext.import = async (id)=>{\n        return await moduleContext(id);\n    };\n    return moduleContext;\n}\ncontextPrototype.f = moduleContext;\n/**\n * Returns the path of a chunk defined by its data.\n */ function getChunkPath(chunkData) {\n    return typeof chunkData === 'string' ? chunkData : chunkData.path;\n}\nfunction isPromise(maybePromise) {\n    return maybePromise != null && typeof maybePromise === 'object' && 'then' in maybePromise && typeof maybePromise.then === 'function';\n}\nfunction isAsyncModuleExt(obj) {\n    return turbopackQueues in obj;\n}\nfunction createPromise() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej)=>{\n        reject = rej;\n        resolve = res;\n    });\n    return {\n        promise,\n        resolve: resolve,\n        reject: reject\n    };\n}\n// Load the CompressedmoduleFactories of a chunk into the `moduleFactories` Map.\n// The CompressedModuleFactories format is\n// - 1 or more module ids\n// - a module factory function\n// So walking this is a little complex but the flat structure is also fast to\n// traverse, we can use `typeof` operators to distinguish the two cases.\nfunction installCompressedModuleFactories(chunkModules, offset, moduleFactories, newModuleId) {\n    let i = offset;\n    while(i < chunkModules.length){\n        let moduleId = chunkModules[i];\n        let end = i + 1;\n        // Find our factory function\n        while(end < chunkModules.length && typeof chunkModules[end] !== 'function'){\n            end++;\n        }\n        if (end === chunkModules.length) {\n            throw new Error('malformed chunk format, expected a factory function');\n        }\n        // Each chunk item has a 'primary id' and optional additional ids. If the primary id is already\n        // present we know all the additional ids are also present, so we don't need to check.\n        if (!moduleFactories.has(moduleId)) {\n            const moduleFactoryFn = chunkModules[end];\n            applyModuleFactoryName(moduleFactoryFn);\n            newModuleId?.(moduleId);\n            for(; i < end; i++){\n                moduleId = chunkModules[i];\n                moduleFactories.set(moduleId, moduleFactoryFn);\n            }\n        }\n        i = end + 1; // end is pointing at the last factory advance to the next id or the end of the array.\n    }\n}\n// everything below is adapted from webpack\n// https://github.com/webpack/webpack/blob/6be4065ade1e252c1d8dcba4af0f43e32af1bdc1/lib/runtime/AsyncModuleRuntimeModule.js#L13\nconst turbopackQueues = Symbol('turbopack queues');\nconst turbopackExports = Symbol('turbopack exports');\nconst turbopackError = Symbol('turbopack error');\nfunction resolveQueue(queue) {\n    if (queue && queue.status !== 1) {\n        queue.status = 1;\n        queue.forEach((fn)=>fn.queueCount--);\n        queue.forEach((fn)=>fn.queueCount-- ? fn.queueCount++ : fn());\n    }\n}\nfunction wrapDeps(deps) {\n    return deps.map((dep)=>{\n        if (dep !== null && typeof dep === 'object') {\n            if (isAsyncModuleExt(dep)) return dep;\n            if (isPromise(dep)) {\n                const queue = Object.assign([], {\n                    status: 0\n                });\n                const obj = {\n                    [turbopackExports]: {},\n                    [turbopackQueues]: (fn)=>fn(queue)\n                };\n                dep.then((res)=>{\n                    obj[turbopackExports] = res;\n                    resolveQueue(queue);\n                }, (err)=>{\n                    obj[turbopackError] = err;\n                    resolveQueue(queue);\n                });\n                return obj;\n            }\n        }\n        return {\n            [turbopackExports]: dep,\n            [turbopackQueues]: ()=>{}\n        };\n    });\n}\nfunction asyncModule(body, hasAwait) {\n    const module = this.m;\n    const queue = hasAwait ? Object.assign([], {\n        status: -1\n    }) : undefined;\n    const depQueues = new Set();\n    const { resolve, reject, promise: rawPromise } = createPromise();\n    const promise = Object.assign(rawPromise, {\n        [turbopackExports]: module.exports,\n        [turbopackQueues]: (fn)=>{\n            queue && fn(queue);\n            depQueues.forEach(fn);\n            promise['catch'](()=>{});\n        }\n    });\n    const attributes = {\n        get () {\n            return promise;\n        },\n        set (v) {\n            // Calling `esmExport` leads to this.\n            if (v !== promise) {\n                promise[turbopackExports] = v;\n            }\n        }\n    };\n    Object.defineProperty(module, 'exports', attributes);\n    Object.defineProperty(module, 'namespaceObject', attributes);\n    function handleAsyncDependencies(deps) {\n        const currentDeps = wrapDeps(deps);\n        const getResult = ()=>currentDeps.map((d)=>{\n                if (d[turbopackError]) throw d[turbopackError];\n                return d[turbopackExports];\n            });\n        const { promise, resolve } = createPromise();\n        const fn = Object.assign(()=>resolve(getResult), {\n            queueCount: 0\n        });\n        function fnQueue(q) {\n            if (q !== queue && !depQueues.has(q)) {\n                depQueues.add(q);\n                if (q && q.status === 0) {\n                    fn.queueCount++;\n                    q.push(fn);\n                }\n            }\n        }\n        currentDeps.map((dep)=>dep[turbopackQueues](fnQueue));\n        return fn.queueCount ? promise : getResult();\n    }\n    function asyncResult(err) {\n        if (err) {\n            reject(promise[turbopackError] = err);\n        } else {\n            resolve(promise[turbopackExports]);\n        }\n        resolveQueue(queue);\n    }\n    body(handleAsyncDependencies, asyncResult);\n    if (queue && queue.status === -1) {\n        queue.status = 0;\n    }\n}\ncontextPrototype.a = asyncModule;\n/**\n * A pseudo \"fake\" URL object to resolve to its relative path.\n *\n * When UrlRewriteBehavior is set to relative, calls to the `new URL()` will construct url without base using this\n * runtime function to generate context-agnostic urls between different rendering context, i.e ssr / client to avoid\n * hydration mismatch.\n *\n * This is based on webpack's existing implementation:\n * https://github.com/webpack/webpack/blob/87660921808566ef3b8796f8df61bd79fc026108/lib/runtime/RelativeUrlRuntimeModule.js\n */ const relativeURL = function relativeURL(inputUrl) {\n    const realUrl = new URL(inputUrl, 'x:/');\n    const values = {};\n    for(const key in realUrl)values[key] = realUrl[key];\n    values.href = inputUrl;\n    values.pathname = inputUrl.replace(/[?#].*/, '');\n    values.origin = values.protocol = '';\n    values.toString = values.toJSON = (..._args)=>inputUrl;\n    for(const key in values)Object.defineProperty(this, key, {\n        enumerable: true,\n        configurable: true,\n        value: values[key]\n    });\n};\nrelativeURL.prototype = URL.prototype;\ncontextPrototype.U = relativeURL;\n/**\n * Utility function to ensure all variants of an enum are handled.\n */ function invariant(never, computeMessage) {\n    throw new Error(`Invariant: ${computeMessage(never)}`);\n}\n/**\n * A stub function to make `require` available but non-functional in ESM.\n */ function requireStub(_moduleId) {\n    throw new Error('dynamic usage of require is not supported');\n}\ncontextPrototype.z = requireStub;\n// Make `globalThis` available to the module in a way that cannot be shadowed by a local variable.\ncontextPrototype.g = globalThis;\nfunction applyModuleFactoryName(factory) {\n    // Give the module factory a nice name to improve stack traces.\n    Object.defineProperty(factory, 'name', {\n        value: '__TURBOPACK__module__evaluation__'\n    });\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\n/// A 'base' utilities to support runtime can have externals.\n/// Currently this is for node.js / edge runtime both.\n/// If a fn requires node.js specific behavior, it should be placed in `node-external-utils` instead.\nasync function externalImport(id) {\n    let raw;\n    try {\n        raw = await import(id);\n    } catch (err) {\n        // TODO(alexkirsz) This can happen when a client-side module tries to load\n        // an external module we don't provide a shim for (e.g. querystring, url).\n        // For now, we fail semi-silently, but in the future this should be a\n        // compilation error.\n        throw new Error(`Failed to load external module ${id}: ${err}`);\n    }\n    if (raw && raw.__esModule && raw.default && 'default' in raw.default) {\n        return interopEsm(raw.default, createNS(raw), true);\n    }\n    return raw;\n}\ncontextPrototype.y = externalImport;\nfunction externalRequire(id, thunk, esm = false) {\n    let raw;\n    try {\n        raw = thunk();\n    } catch (err) {\n        // TODO(alexkirsz) This can happen when a client-side module tries to load\n        // an external module we don't provide a shim for (e.g. querystring, url).\n        // For now, we fail semi-silently, but in the future this should be a\n        // compilation error.\n        throw new Error(`Failed to load external module ${id}: ${err}`);\n    }\n    if (!esm || raw.__esModule) {\n        return raw;\n    }\n    return interopEsm(raw, createNS(raw), true);\n}\nexternalRequire.resolve = (id, options)=>{\n    return require.resolve(id, options);\n};\ncontextPrototype.x = externalRequire;\n/* eslint-disable @typescript-eslint/no-unused-vars */ const path = require('path');\nconst relativePathToRuntimeRoot = path.relative(RUNTIME_PUBLIC_PATH, '.');\n// Compute the relative path to the `distDir`.\nconst relativePathToDistRoot = path.join(relativePathToRuntimeRoot, RELATIVE_ROOT_PATH);\nconst RUNTIME_ROOT = path.resolve(__filename, relativePathToRuntimeRoot);\n// Compute the absolute path to the root, by stripping distDir from the absolute path to this file.\nconst ABSOLUTE_ROOT = path.resolve(__filename, relativePathToDistRoot);\n/**\n * Returns an absolute path to the given module path.\n * Module path should be relative, either path to a file or a directory.\n *\n * This fn allows to calculate an absolute path for some global static values, such as\n * `__dirname` or `import.meta.url` that Turbopack will not embeds in compile time.\n * See ImportMetaBinding::code_generation for the usage.\n */ function resolveAbsolutePath(modulePath) {\n    if (modulePath) {\n        return path.join(ABSOLUTE_ROOT, modulePath);\n    }\n    return ABSOLUTE_ROOT;\n}\nContext.prototype.P = resolveAbsolutePath;\n/* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\nfunction readWebAssemblyAsResponse(path) {\n    const { createReadStream } = require('fs');\n    const { Readable } = require('stream');\n    const stream = createReadStream(path);\n    // @ts-ignore unfortunately there's a slight type mismatch with the stream.\n    return new Response(Readable.toWeb(stream), {\n        headers: {\n            'content-type': 'application/wasm'\n        }\n    });\n}\nasync function compileWebAssemblyFromPath(path) {\n    const response = readWebAssemblyAsResponse(path);\n    return await WebAssembly.compileStreaming(response);\n}\nasync function instantiateWebAssemblyFromPath(path, importsObj) {\n    const response = readWebAssemblyAsResponse(path);\n    const { instance } = await WebAssembly.instantiateStreaming(response, importsObj);\n    return instance.exports;\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */ /// <reference path=\"../shared/runtime-utils.ts\" />\n/// <reference path=\"../shared-node/base-externals-utils.ts\" />\n/// <reference path=\"../shared-node/node-externals-utils.ts\" />\n/// <reference path=\"../shared-node/node-wasm-utils.ts\" />\nvar SourceType = /*#__PURE__*/ function(SourceType) {\n    /**\n   * The module was instantiated because it was included in an evaluated chunk's\n   * runtime.\n   * SourceData is a ChunkPath.\n   */ SourceType[SourceType[\"Runtime\"] = 0] = \"Runtime\";\n    /**\n   * The module was instantiated because a parent module imported it.\n   * SourceData is a ModuleId.\n   */ SourceType[SourceType[\"Parent\"] = 1] = \"Parent\";\n    return SourceType;\n}(SourceType || {});\nprocess.env.TURBOPACK = '1';\nconst nodeContextPrototype = Context.prototype;\nconst url = require('url');\nconst moduleFactories = new Map();\nnodeContextPrototype.M = moduleFactories;\nconst moduleCache = Object.create(null);\nnodeContextPrototype.c = moduleCache;\n/**\n * Returns an absolute path to the given module's id.\n */ function resolvePathFromModule(moduleId) {\n    const exported = this.r(moduleId);\n    const exportedPath = exported?.default ?? exported;\n    if (typeof exportedPath !== 'string') {\n        return exported;\n    }\n    const strippedAssetPrefix = exportedPath.slice(ASSET_PREFIX.length);\n    const resolved = path.resolve(RUNTIME_ROOT, strippedAssetPrefix);\n    return url.pathToFileURL(resolved).href;\n}\nnodeContextPrototype.R = resolvePathFromModule;\nfunction loadRuntimeChunk(sourcePath, chunkData) {\n    if (typeof chunkData === 'string') {\n        loadRuntimeChunkPath(sourcePath, chunkData);\n    } else {\n        loadRuntimeChunkPath(sourcePath, chunkData.path);\n    }\n}\nconst loadedChunks = new Set();\nconst unsupportedLoadChunk = Promise.resolve(undefined);\nconst loadedChunk = Promise.resolve(undefined);\nconst chunkCache = new Map();\nfunction clearChunkCache() {\n    chunkCache.clear();\n}\nfunction loadRuntimeChunkPath(sourcePath, chunkPath) {\n    if (!isJs(chunkPath)) {\n        // We only support loading JS chunks in Node.js.\n        // This branch can be hit when trying to load a CSS chunk.\n        return;\n    }\n    if (loadedChunks.has(chunkPath)) {\n        return;\n    }\n    try {\n        const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n        const chunkModules = require(resolved);\n        installCompressedModuleFactories(chunkModules, 0, moduleFactories);\n        loadedChunks.add(chunkPath);\n    } catch (e) {\n        let errorMessage = `Failed to load chunk ${chunkPath}`;\n        if (sourcePath) {\n            errorMessage += ` from runtime for chunk ${sourcePath}`;\n        }\n        throw new Error(errorMessage, {\n            cause: e\n        });\n    }\n}\nfunction loadChunkAsync(chunkData) {\n    const chunkPath = typeof chunkData === 'string' ? chunkData : chunkData.path;\n    if (!isJs(chunkPath)) {\n        // We only support loading JS chunks in Node.js.\n        // This branch can be hit when trying to load a CSS chunk.\n        return unsupportedLoadChunk;\n    }\n    let entry = chunkCache.get(chunkPath);\n    if (entry === undefined) {\n        try {\n            // resolve to an absolute path to simplify `require` handling\n            const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n            // TODO: consider switching to `import()` to enable concurrent chunk loading and async file io\n            // However this is incompatible with hot reloading (since `import` doesn't use the require cache)\n            const chunkModules = require(resolved);\n            installCompressedModuleFactories(chunkModules, 0, moduleFactories);\n            entry = loadedChunk;\n        } catch (e) {\n            const errorMessage = `Failed to load chunk ${chunkPath} from module ${this.m.id}`;\n            // Cache the failure promise, future requests will also get this same rejection\n            entry = Promise.reject(new Error(errorMessage, {\n                cause: e\n            }));\n        }\n        chunkCache.set(chunkPath, entry);\n    }\n    // TODO: Return an instrumented Promise that React can use instead of relying on referential equality.\n    return entry;\n}\ncontextPrototype.l = loadChunkAsync;\nfunction loadChunkAsyncByUrl(chunkUrl) {\n    const path1 = url.fileURLToPath(new URL(chunkUrl, RUNTIME_ROOT));\n    return loadChunkAsync.call(this, path1);\n}\ncontextPrototype.L = loadChunkAsyncByUrl;\nfunction loadWebAssembly(chunkPath, _edgeModule, imports) {\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n    return instantiateWebAssemblyFromPath(resolved, imports);\n}\ncontextPrototype.w = loadWebAssembly;\nfunction loadWebAssemblyModule(chunkPath, _edgeModule) {\n    const resolved = path.resolve(RUNTIME_ROOT, chunkPath);\n    return compileWebAssemblyFromPath(resolved);\n}\ncontextPrototype.u = loadWebAssemblyModule;\nfunction getWorkerBlobURL(_chunks) {\n    throw new Error('Worker blobs are not implemented yet for Node.js');\n}\nnodeContextPrototype.b = getWorkerBlobURL;\nfunction instantiateModule(id, sourceType, sourceData) {\n    const moduleFactory = moduleFactories.get(id);\n    if (typeof moduleFactory !== 'function') {\n        // This can happen if modules incorrectly handle HMR disposes/updates,\n        // e.g. when they keep a `setTimeout` around which still executes old code\n        // and contains e.g. a `require(\"something\")` call.\n        let instantiationReason;\n        switch(sourceType){\n            case 0:\n                instantiationReason = `as a runtime entry of chunk ${sourceData}`;\n                break;\n            case 1:\n                instantiationReason = `because it was required from module ${sourceData}`;\n                break;\n            default:\n                invariant(sourceType, (sourceType)=>`Unknown source type: ${sourceType}`);\n        }\n        throw new Error(`Module ${id} was instantiated ${instantiationReason}, but the module factory is not available.`);\n    }\n    const module1 = createModuleObject(id);\n    const exports = module1.exports;\n    moduleCache[id] = module1;\n    const context = new Context(module1, exports);\n    // NOTE(alexkirsz) This can fail when the module encounters a runtime error.\n    try {\n        moduleFactory(context, module1, exports);\n    } catch (error) {\n        module1.error = error;\n        throw error;\n    }\n    module1.loaded = true;\n    if (module1.namespaceObject && module1.exports !== module1.namespaceObject) {\n        // in case of a circular dependency: cjs1 -> esm2 -> cjs1\n        interopEsm(module1.exports, module1.namespaceObject);\n    }\n    return module1;\n}\n/**\n * Retrieves a module from the cache, or instantiate it if it is not cached.\n */ // @ts-ignore\nfunction getOrInstantiateModuleFromParent(id, sourceModule) {\n    const module1 = moduleCache[id];\n    if (module1) {\n        if (module1.error) {\n            throw module1.error;\n        }\n        return module1;\n    }\n    return instantiateModule(id, 1, sourceModule.id);\n}\n/**\n * Instantiates a runtime module.\n */ function instantiateRuntimeModule(chunkPath, moduleId) {\n    return instantiateModule(moduleId, 0, chunkPath);\n}\n/**\n * Retrieves a module from the cache, or instantiate it as a runtime module if it is not cached.\n */ // @ts-ignore TypeScript doesn't separate this module space from the browser runtime\nfunction getOrInstantiateRuntimeModule(chunkPath, moduleId) {\n    const module1 = moduleCache[moduleId];\n    if (module1) {\n        if (module1.error) {\n            throw module1.error;\n        }\n        return module1;\n    }\n    return instantiateRuntimeModule(chunkPath, moduleId);\n}\nconst regexJsUrl = /\\.js(?:\\?[^#]*)?(?:#.*)?$/;\n/**\n * Checks if a given path/URL ends with .js, optionally followed by ?query or #fragment.\n */ function isJs(chunkUrlOrPath) {\n    return regexJsUrl.test(chunkUrlOrPath);\n}\nmodule.exports = (sourcePath)=>({\n        m: (id)=>getOrInstantiateRuntimeModule(sourcePath, id),\n        c: (chunkData)=>loadRuntimeChunk(sourcePath, chunkData)\n    });\n\n\n//# sourceMappingURL=%5Bturbopack%5D_runtime.js.map","size_bytes":28467},".next/server/server-reference-manifest.js":{"content":"self.__RSC_SERVER_MANIFEST=\"{\\n  \\\"node\\\": {},\\n  \\\"edge\\\": {},\\n  \\\"encryptionKey\\\": \\\"XOPj1DNh2Abvi+JB++boGQ2brckpmdhwEG0c8V/t6Pk=\\\"\\n}\"","size_bytes":138},".next/build/chunks/node_modules_fe693df6._.js":{"content":"module.exports = [\n\"[project]/node_modules/picocolors/picocolors.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\nlet p = process || {}, argv = p.argv || [], env = p.env || {};\nlet isColorSupported = !(!!env.NO_COLOR || argv.includes(\"--no-color\")) && (!!env.FORCE_COLOR || argv.includes(\"--color\") || p.platform === \"win32\" || (p.stdout || {}).isTTY && env.TERM !== \"dumb\" || !!env.CI);\nlet formatter = (open, close, replace = open)=>(input)=>{\n        let string = \"\" + input, index = string.indexOf(close, open.length);\n        return ~index ? open + replaceClose(string, close, replace, index) + close : open + string + close;\n    };\nlet replaceClose = (string, close, replace, index)=>{\n    let result = \"\", cursor = 0;\n    do {\n        result += string.substring(cursor, index) + replace;\n        cursor = index + close.length;\n        index = string.indexOf(close, cursor);\n    }while (~index)\n    return result + string.substring(cursor);\n};\nlet createColors = (enabled = isColorSupported)=>{\n    let f = enabled ? formatter : ()=>String;\n    return {\n        isColorSupported: enabled,\n        reset: f(\"\\x1b[0m\", \"\\x1b[0m\"),\n        bold: f(\"\\x1b[1m\", \"\\x1b[22m\", \"\\x1b[22m\\x1b[1m\"),\n        dim: f(\"\\x1b[2m\", \"\\x1b[22m\", \"\\x1b[22m\\x1b[2m\"),\n        italic: f(\"\\x1b[3m\", \"\\x1b[23m\"),\n        underline: f(\"\\x1b[4m\", \"\\x1b[24m\"),\n        inverse: f(\"\\x1b[7m\", \"\\x1b[27m\"),\n        hidden: f(\"\\x1b[8m\", \"\\x1b[28m\"),\n        strikethrough: f(\"\\x1b[9m\", \"\\x1b[29m\"),\n        black: f(\"\\x1b[30m\", \"\\x1b[39m\"),\n        red: f(\"\\x1b[31m\", \"\\x1b[39m\"),\n        green: f(\"\\x1b[32m\", \"\\x1b[39m\"),\n        yellow: f(\"\\x1b[33m\", \"\\x1b[39m\"),\n        blue: f(\"\\x1b[34m\", \"\\x1b[39m\"),\n        magenta: f(\"\\x1b[35m\", \"\\x1b[39m\"),\n        cyan: f(\"\\x1b[36m\", \"\\x1b[39m\"),\n        white: f(\"\\x1b[37m\", \"\\x1b[39m\"),\n        gray: f(\"\\x1b[90m\", \"\\x1b[39m\"),\n        bgBlack: f(\"\\x1b[40m\", \"\\x1b[49m\"),\n        bgRed: f(\"\\x1b[41m\", \"\\x1b[49m\"),\n        bgGreen: f(\"\\x1b[42m\", \"\\x1b[49m\"),\n        bgYellow: f(\"\\x1b[43m\", \"\\x1b[49m\"),\n        bgBlue: f(\"\\x1b[44m\", \"\\x1b[49m\"),\n        bgMagenta: f(\"\\x1b[45m\", \"\\x1b[49m\"),\n        bgCyan: f(\"\\x1b[46m\", \"\\x1b[49m\"),\n        bgWhite: f(\"\\x1b[47m\", \"\\x1b[49m\"),\n        blackBright: f(\"\\x1b[90m\", \"\\x1b[39m\"),\n        redBright: f(\"\\x1b[91m\", \"\\x1b[39m\"),\n        greenBright: f(\"\\x1b[92m\", \"\\x1b[39m\"),\n        yellowBright: f(\"\\x1b[93m\", \"\\x1b[39m\"),\n        blueBright: f(\"\\x1b[94m\", \"\\x1b[39m\"),\n        magentaBright: f(\"\\x1b[95m\", \"\\x1b[39m\"),\n        cyanBright: f(\"\\x1b[96m\", \"\\x1b[39m\"),\n        whiteBright: f(\"\\x1b[97m\", \"\\x1b[39m\"),\n        bgBlackBright: f(\"\\x1b[100m\", \"\\x1b[49m\"),\n        bgRedBright: f(\"\\x1b[101m\", \"\\x1b[49m\"),\n        bgGreenBright: f(\"\\x1b[102m\", \"\\x1b[49m\"),\n        bgYellowBright: f(\"\\x1b[103m\", \"\\x1b[49m\"),\n        bgBlueBright: f(\"\\x1b[104m\", \"\\x1b[49m\"),\n        bgMagentaBright: f(\"\\x1b[105m\", \"\\x1b[49m\"),\n        bgCyanBright: f(\"\\x1b[106m\", \"\\x1b[49m\"),\n        bgWhiteBright: f(\"\\x1b[107m\", \"\\x1b[49m\")\n    };\n};\nmodule.exports = createColors();\nmodule.exports.createColors = createColors;\n}),\n\"[project]/node_modules/postcss/lib/tokenize.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nconst SINGLE_QUOTE = \"'\".charCodeAt(0);\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0);\nconst BACKSLASH = '\\\\'.charCodeAt(0);\nconst SLASH = '/'.charCodeAt(0);\nconst NEWLINE = '\\n'.charCodeAt(0);\nconst SPACE = ' '.charCodeAt(0);\nconst FEED = '\\f'.charCodeAt(0);\nconst TAB = '\\t'.charCodeAt(0);\nconst CR = '\\r'.charCodeAt(0);\nconst OPEN_SQUARE = '['.charCodeAt(0);\nconst CLOSE_SQUARE = ']'.charCodeAt(0);\nconst OPEN_PARENTHESES = '('.charCodeAt(0);\nconst CLOSE_PARENTHESES = ')'.charCodeAt(0);\nconst OPEN_CURLY = '{'.charCodeAt(0);\nconst CLOSE_CURLY = '}'.charCodeAt(0);\nconst SEMICOLON = ';'.charCodeAt(0);\nconst ASTERISK = '*'.charCodeAt(0);\nconst COLON = ':'.charCodeAt(0);\nconst AT = '@'.charCodeAt(0);\nconst RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g;\nconst RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g;\nconst RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/;\nconst RE_HEX_ESCAPE = /[\\da-f]/i;\nmodule.exports = function tokenizer(input, options = {}) {\n    let css = input.css.valueOf();\n    let ignore = options.ignoreErrors;\n    let code, content, escape, next, quote;\n    let currentToken, escaped, escapePos, n, prev;\n    let length = css.length;\n    let pos = 0;\n    let buffer = [];\n    let returned = [];\n    function position() {\n        return pos;\n    }\n    function unclosed(what) {\n        throw input.error('Unclosed ' + what, pos);\n    }\n    function endOfFile() {\n        return returned.length === 0 && pos >= length;\n    }\n    function nextToken(opts) {\n        if (returned.length) return returned.pop();\n        if (pos >= length) return;\n        let ignoreUnclosed = opts ? opts.ignoreUnclosed : false;\n        code = css.charCodeAt(pos);\n        switch(code){\n            case NEWLINE:\n            case SPACE:\n            case TAB:\n            case CR:\n            case FEED:\n                {\n                    next = pos;\n                    do {\n                        next += 1;\n                        code = css.charCodeAt(next);\n                    }while (code === SPACE || code === NEWLINE || code === TAB || code === CR || code === FEED)\n                    currentToken = [\n                        'space',\n                        css.slice(pos, next)\n                    ];\n                    pos = next - 1;\n                    break;\n                }\n            case OPEN_SQUARE:\n            case CLOSE_SQUARE:\n            case OPEN_CURLY:\n            case CLOSE_CURLY:\n            case COLON:\n            case SEMICOLON:\n            case CLOSE_PARENTHESES:\n                {\n                    let controlChar = String.fromCharCode(code);\n                    currentToken = [\n                        controlChar,\n                        controlChar,\n                        pos\n                    ];\n                    break;\n                }\n            case OPEN_PARENTHESES:\n                {\n                    prev = buffer.length ? buffer.pop()[1] : '';\n                    n = css.charCodeAt(pos + 1);\n                    if (prev === 'url' && n !== SINGLE_QUOTE && n !== DOUBLE_QUOTE && n !== SPACE && n !== NEWLINE && n !== TAB && n !== FEED && n !== CR) {\n                        next = pos;\n                        do {\n                            escaped = false;\n                            next = css.indexOf(')', next + 1);\n                            if (next === -1) {\n                                if (ignore || ignoreUnclosed) {\n                                    next = pos;\n                                    break;\n                                } else {\n                                    unclosed('bracket');\n                                }\n                            }\n                            escapePos = next;\n                            while(css.charCodeAt(escapePos - 1) === BACKSLASH){\n                                escapePos -= 1;\n                                escaped = !escaped;\n                            }\n                        }while (escaped)\n                        currentToken = [\n                            'brackets',\n                            css.slice(pos, next + 1),\n                            pos,\n                            next\n                        ];\n                        pos = next;\n                    } else {\n                        next = css.indexOf(')', pos + 1);\n                        content = css.slice(pos, next + 1);\n                        if (next === -1 || RE_BAD_BRACKET.test(content)) {\n                            currentToken = [\n                                '(',\n                                '(',\n                                pos\n                            ];\n                        } else {\n                            currentToken = [\n                                'brackets',\n                                content,\n                                pos,\n                                next\n                            ];\n                            pos = next;\n                        }\n                    }\n                    break;\n                }\n            case SINGLE_QUOTE:\n            case DOUBLE_QUOTE:\n                {\n                    quote = code === SINGLE_QUOTE ? \"'\" : '\"';\n                    next = pos;\n                    do {\n                        escaped = false;\n                        next = css.indexOf(quote, next + 1);\n                        if (next === -1) {\n                            if (ignore || ignoreUnclosed) {\n                                next = pos + 1;\n                                break;\n                            } else {\n                                unclosed('string');\n                            }\n                        }\n                        escapePos = next;\n                        while(css.charCodeAt(escapePos - 1) === BACKSLASH){\n                            escapePos -= 1;\n                            escaped = !escaped;\n                        }\n                    }while (escaped)\n                    currentToken = [\n                        'string',\n                        css.slice(pos, next + 1),\n                        pos,\n                        next\n                    ];\n                    pos = next;\n                    break;\n                }\n            case AT:\n                {\n                    RE_AT_END.lastIndex = pos + 1;\n                    RE_AT_END.test(css);\n                    if (RE_AT_END.lastIndex === 0) {\n                        next = css.length - 1;\n                    } else {\n                        next = RE_AT_END.lastIndex - 2;\n                    }\n                    currentToken = [\n                        'at-word',\n                        css.slice(pos, next + 1),\n                        pos,\n                        next\n                    ];\n                    pos = next;\n                    break;\n                }\n            case BACKSLASH:\n                {\n                    next = pos;\n                    escape = true;\n                    while(css.charCodeAt(next + 1) === BACKSLASH){\n                        next += 1;\n                        escape = !escape;\n                    }\n                    code = css.charCodeAt(next + 1);\n                    if (escape && code !== SLASH && code !== SPACE && code !== NEWLINE && code !== TAB && code !== CR && code !== FEED) {\n                        next += 1;\n                        if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n                            while(RE_HEX_ESCAPE.test(css.charAt(next + 1))){\n                                next += 1;\n                            }\n                            if (css.charCodeAt(next + 1) === SPACE) {\n                                next += 1;\n                            }\n                        }\n                    }\n                    currentToken = [\n                        'word',\n                        css.slice(pos, next + 1),\n                        pos,\n                        next\n                    ];\n                    pos = next;\n                    break;\n                }\n            default:\n                {\n                    if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n                        next = css.indexOf('*/', pos + 2) + 1;\n                        if (next === 0) {\n                            if (ignore || ignoreUnclosed) {\n                                next = css.length;\n                            } else {\n                                unclosed('comment');\n                            }\n                        }\n                        currentToken = [\n                            'comment',\n                            css.slice(pos, next + 1),\n                            pos,\n                            next\n                        ];\n                        pos = next;\n                    } else {\n                        RE_WORD_END.lastIndex = pos + 1;\n                        RE_WORD_END.test(css);\n                        if (RE_WORD_END.lastIndex === 0) {\n                            next = css.length - 1;\n                        } else {\n                            next = RE_WORD_END.lastIndex - 2;\n                        }\n                        currentToken = [\n                            'word',\n                            css.slice(pos, next + 1),\n                            pos,\n                            next\n                        ];\n                        buffer.push(currentToken);\n                        pos = next;\n                    }\n                    break;\n                }\n        }\n        pos++;\n        return currentToken;\n    }\n    function back(token) {\n        returned.push(token);\n    }\n    return {\n        back,\n        endOfFile,\n        nextToken,\n        position\n    };\n};\n}),\n\"[project]/node_modules/postcss/lib/terminal-highlight.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet pico = __turbopack_context__.r(\"[project]/node_modules/picocolors/picocolors.js [postcss] (ecmascript)\");\nlet tokenizer = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/tokenize.js [postcss] (ecmascript)\");\nlet Input;\nfunction registerInput(dependant) {\n    Input = dependant;\n}\nconst HIGHLIGHT_THEME = {\n    ';': pico.yellow,\n    ':': pico.yellow,\n    '(': pico.cyan,\n    ')': pico.cyan,\n    '[': pico.yellow,\n    ']': pico.yellow,\n    '{': pico.yellow,\n    '}': pico.yellow,\n    'at-word': pico.cyan,\n    'brackets': pico.cyan,\n    'call': pico.cyan,\n    'class': pico.yellow,\n    'comment': pico.gray,\n    'hash': pico.magenta,\n    'string': pico.green\n};\nfunction getTokenType([type, value], processor) {\n    if (type === 'word') {\n        if (value[0] === '.') {\n            return 'class';\n        }\n        if (value[0] === '#') {\n            return 'hash';\n        }\n    }\n    if (!processor.endOfFile()) {\n        let next = processor.nextToken();\n        processor.back(next);\n        if (next[0] === 'brackets' || next[0] === '(') return 'call';\n    }\n    return type;\n}\nfunction terminalHighlight(css) {\n    let processor = tokenizer(new Input(css), {\n        ignoreErrors: true\n    });\n    let result = '';\n    while(!processor.endOfFile()){\n        let token = processor.nextToken();\n        let color = HIGHLIGHT_THEME[getTokenType(token, processor)];\n        if (color) {\n            result += token[1].split(/\\r?\\n/).map((i)=>color(i)).join('\\n');\n        } else {\n            result += token[1];\n        }\n    }\n    return result;\n}\nterminalHighlight.registerInput = registerInput;\nmodule.exports = terminalHighlight;\n}),\n\"[project]/node_modules/postcss/lib/css-syntax-error.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet pico = __turbopack_context__.r(\"[project]/node_modules/picocolors/picocolors.js [postcss] (ecmascript)\");\nlet terminalHighlight = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/terminal-highlight.js [postcss] (ecmascript)\");\nclass CssSyntaxError extends Error {\n    constructor(message, line, column, source, file, plugin){\n        super(message);\n        this.name = 'CssSyntaxError';\n        this.reason = message;\n        if (file) {\n            this.file = file;\n        }\n        if (source) {\n            this.source = source;\n        }\n        if (plugin) {\n            this.plugin = plugin;\n        }\n        if (typeof line !== 'undefined' && typeof column !== 'undefined') {\n            if (typeof line === 'number') {\n                this.line = line;\n                this.column = column;\n            } else {\n                this.line = line.line;\n                this.column = line.column;\n                this.endLine = column.line;\n                this.endColumn = column.column;\n            }\n        }\n        this.setMessage();\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, CssSyntaxError);\n        }\n    }\n    setMessage() {\n        this.message = this.plugin ? this.plugin + ': ' : '';\n        this.message += this.file ? this.file : '<css input>';\n        if (typeof this.line !== 'undefined') {\n            this.message += ':' + this.line + ':' + this.column;\n        }\n        this.message += ': ' + this.reason;\n    }\n    showSourceCode(color) {\n        if (!this.source) return '';\n        let css = this.source;\n        if (color == null) color = pico.isColorSupported;\n        let aside = (text)=>text;\n        let mark = (text)=>text;\n        let highlight = (text)=>text;\n        if (color) {\n            let { bold, gray, red } = pico.createColors(true);\n            mark = (text)=>bold(red(text));\n            aside = (text)=>gray(text);\n            if (terminalHighlight) {\n                highlight = (text)=>terminalHighlight(text);\n            }\n        }\n        let lines = css.split(/\\r?\\n/);\n        let start = Math.max(this.line - 3, 0);\n        let end = Math.min(this.line + 2, lines.length);\n        let maxWidth = String(end).length;\n        return lines.slice(start, end).map((line, index)=>{\n            let number = start + 1 + index;\n            let gutter = ' ' + (' ' + number).slice(-maxWidth) + ' | ';\n            if (number === this.line) {\n                if (line.length > 160) {\n                    let padding = 20;\n                    let subLineStart = Math.max(0, this.column - padding);\n                    let subLineEnd = Math.max(this.column + padding, this.endColumn + padding);\n                    let subLine = line.slice(subLineStart, subLineEnd);\n                    let spacing = aside(gutter.replace(/\\d/g, ' ')) + line.slice(0, Math.min(this.column - 1, padding - 1)).replace(/[^\\t]/g, ' ');\n                    return mark('>') + aside(gutter) + highlight(subLine) + '\\n ' + spacing + mark('^');\n                }\n                let spacing = aside(gutter.replace(/\\d/g, ' ')) + line.slice(0, this.column - 1).replace(/[^\\t]/g, ' ');\n                return mark('>') + aside(gutter) + highlight(line) + '\\n ' + spacing + mark('^');\n            }\n            return ' ' + aside(gutter) + highlight(line);\n        }).join('\\n');\n    }\n    toString() {\n        let code = this.showSourceCode();\n        if (code) {\n            code = '\\n\\n' + code + '\\n';\n        }\n        return this.name + ': ' + this.message + code;\n    }\n}\nmodule.exports = CssSyntaxError;\nCssSyntaxError.default = CssSyntaxError;\n}),\n\"[project]/node_modules/postcss/lib/stringifier.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nconst DEFAULT_RAW = {\n    after: '\\n',\n    beforeClose: '\\n',\n    beforeComment: '\\n',\n    beforeDecl: '\\n',\n    beforeOpen: ' ',\n    beforeRule: '\\n',\n    colon: ': ',\n    commentLeft: ' ',\n    commentRight: ' ',\n    emptyBody: '',\n    indent: '    ',\n    semicolon: false\n};\nfunction capitalize(str) {\n    return str[0].toUpperCase() + str.slice(1);\n}\nclass Stringifier {\n    constructor(builder){\n        this.builder = builder;\n    }\n    atrule(node, semicolon) {\n        let name = '@' + node.name;\n        let params = node.params ? this.rawValue(node, 'params') : '';\n        if (typeof node.raws.afterName !== 'undefined') {\n            name += node.raws.afterName;\n        } else if (params) {\n            name += ' ';\n        }\n        if (node.nodes) {\n            this.block(node, name + params);\n        } else {\n            let end = (node.raws.between || '') + (semicolon ? ';' : '');\n            this.builder(name + params + end, node);\n        }\n    }\n    beforeAfter(node, detect) {\n        let value;\n        if (node.type === 'decl') {\n            value = this.raw(node, null, 'beforeDecl');\n        } else if (node.type === 'comment') {\n            value = this.raw(node, null, 'beforeComment');\n        } else if (detect === 'before') {\n            value = this.raw(node, null, 'beforeRule');\n        } else {\n            value = this.raw(node, null, 'beforeClose');\n        }\n        let buf = node.parent;\n        let depth = 0;\n        while(buf && buf.type !== 'root'){\n            depth += 1;\n            buf = buf.parent;\n        }\n        if (value.includes('\\n')) {\n            let indent = this.raw(node, null, 'indent');\n            if (indent.length) {\n                for(let step = 0; step < depth; step++)value += indent;\n            }\n        }\n        return value;\n    }\n    block(node, start) {\n        let between = this.raw(node, 'between', 'beforeOpen');\n        this.builder(start + between + '{', node, 'start');\n        let after;\n        if (node.nodes && node.nodes.length) {\n            this.body(node);\n            after = this.raw(node, 'after');\n        } else {\n            after = this.raw(node, 'after', 'emptyBody');\n        }\n        if (after) this.builder(after);\n        this.builder('}', node, 'end');\n    }\n    body(node) {\n        let last = node.nodes.length - 1;\n        while(last > 0){\n            if (node.nodes[last].type !== 'comment') break;\n            last -= 1;\n        }\n        let semicolon = this.raw(node, 'semicolon');\n        for(let i = 0; i < node.nodes.length; i++){\n            let child = node.nodes[i];\n            let before = this.raw(child, 'before');\n            if (before) this.builder(before);\n            this.stringify(child, last !== i || semicolon);\n        }\n    }\n    comment(node) {\n        let left = this.raw(node, 'left', 'commentLeft');\n        let right = this.raw(node, 'right', 'commentRight');\n        this.builder('/*' + left + node.text + right + '*/', node);\n    }\n    decl(node, semicolon) {\n        let between = this.raw(node, 'between', 'colon');\n        let string = node.prop + between + this.rawValue(node, 'value');\n        if (node.important) {\n            string += node.raws.important || ' !important';\n        }\n        if (semicolon) string += ';';\n        this.builder(string, node);\n    }\n    document(node) {\n        this.body(node);\n    }\n    raw(node, own, detect) {\n        let value;\n        if (!detect) detect = own;\n        // Already had\n        if (own) {\n            value = node.raws[own];\n            if (typeof value !== 'undefined') return value;\n        }\n        let parent = node.parent;\n        if (detect === 'before') {\n            // Hack for first rule in CSS\n            if (!parent || parent.type === 'root' && parent.first === node) {\n                return '';\n            }\n            // `root` nodes in `document` should use only their own raws\n            if (parent && parent.type === 'document') {\n                return '';\n            }\n        }\n        // Floating child without parent\n        if (!parent) return DEFAULT_RAW[detect];\n        // Detect style by other nodes\n        let root = node.root();\n        if (!root.rawCache) root.rawCache = {};\n        if (typeof root.rawCache[detect] !== 'undefined') {\n            return root.rawCache[detect];\n        }\n        if (detect === 'before' || detect === 'after') {\n            return this.beforeAfter(node, detect);\n        } else {\n            let method = 'raw' + capitalize(detect);\n            if (this[method]) {\n                value = this[method](root, node);\n            } else {\n                root.walk((i)=>{\n                    value = i.raws[own];\n                    if (typeof value !== 'undefined') return false;\n                });\n            }\n        }\n        if (typeof value === 'undefined') value = DEFAULT_RAW[detect];\n        root.rawCache[detect] = value;\n        return value;\n    }\n    rawBeforeClose(root) {\n        let value;\n        root.walk((i)=>{\n            if (i.nodes && i.nodes.length > 0) {\n                if (typeof i.raws.after !== 'undefined') {\n                    value = i.raws.after;\n                    if (value.includes('\\n')) {\n                        value = value.replace(/[^\\n]+$/, '');\n                    }\n                    return false;\n                }\n            }\n        });\n        if (value) value = value.replace(/\\S/g, '');\n        return value;\n    }\n    rawBeforeComment(root, node) {\n        let value;\n        root.walkComments((i)=>{\n            if (typeof i.raws.before !== 'undefined') {\n                value = i.raws.before;\n                if (value.includes('\\n')) {\n                    value = value.replace(/[^\\n]+$/, '');\n                }\n                return false;\n            }\n        });\n        if (typeof value === 'undefined') {\n            value = this.raw(node, null, 'beforeDecl');\n        } else if (value) {\n            value = value.replace(/\\S/g, '');\n        }\n        return value;\n    }\n    rawBeforeDecl(root, node) {\n        let value;\n        root.walkDecls((i)=>{\n            if (typeof i.raws.before !== 'undefined') {\n                value = i.raws.before;\n                if (value.includes('\\n')) {\n                    value = value.replace(/[^\\n]+$/, '');\n                }\n                return false;\n            }\n        });\n        if (typeof value === 'undefined') {\n            value = this.raw(node, null, 'beforeRule');\n        } else if (value) {\n            value = value.replace(/\\S/g, '');\n        }\n        return value;\n    }\n    rawBeforeOpen(root) {\n        let value;\n        root.walk((i)=>{\n            if (i.type !== 'decl') {\n                value = i.raws.between;\n                if (typeof value !== 'undefined') return false;\n            }\n        });\n        return value;\n    }\n    rawBeforeRule(root) {\n        let value;\n        root.walk((i)=>{\n            if (i.nodes && (i.parent !== root || root.first !== i)) {\n                if (typeof i.raws.before !== 'undefined') {\n                    value = i.raws.before;\n                    if (value.includes('\\n')) {\n                        value = value.replace(/[^\\n]+$/, '');\n                    }\n                    return false;\n                }\n            }\n        });\n        if (value) value = value.replace(/\\S/g, '');\n        return value;\n    }\n    rawColon(root) {\n        let value;\n        root.walkDecls((i)=>{\n            if (typeof i.raws.between !== 'undefined') {\n                value = i.raws.between.replace(/[^\\s:]/g, '');\n                return false;\n            }\n        });\n        return value;\n    }\n    rawEmptyBody(root) {\n        let value;\n        root.walk((i)=>{\n            if (i.nodes && i.nodes.length === 0) {\n                value = i.raws.after;\n                if (typeof value !== 'undefined') return false;\n            }\n        });\n        return value;\n    }\n    rawIndent(root) {\n        if (root.raws.indent) return root.raws.indent;\n        let value;\n        root.walk((i)=>{\n            let p = i.parent;\n            if (p && p !== root && p.parent && p.parent === root) {\n                if (typeof i.raws.before !== 'undefined') {\n                    let parts = i.raws.before.split('\\n');\n                    value = parts[parts.length - 1];\n                    value = value.replace(/\\S/g, '');\n                    return false;\n                }\n            }\n        });\n        return value;\n    }\n    rawSemicolon(root) {\n        let value;\n        root.walk((i)=>{\n            if (i.nodes && i.nodes.length && i.last.type === 'decl') {\n                value = i.raws.semicolon;\n                if (typeof value !== 'undefined') return false;\n            }\n        });\n        return value;\n    }\n    rawValue(node, prop) {\n        let value = node[prop];\n        let raw = node.raws[prop];\n        if (raw && raw.value === value) {\n            return raw.raw;\n        }\n        return value;\n    }\n    root(node) {\n        this.body(node);\n        if (node.raws.after) this.builder(node.raws.after);\n    }\n    rule(node) {\n        this.block(node, this.rawValue(node, 'selector'));\n        if (node.raws.ownSemicolon) {\n            this.builder(node.raws.ownSemicolon, node, 'end');\n        }\n    }\n    stringify(node, semicolon) {\n        /* c8 ignore start */ if (!this[node.type]) {\n            throw new Error('Unknown AST node type ' + node.type + '. ' + 'Maybe you need to change PostCSS stringifier.');\n        }\n        /* c8 ignore stop */ this[node.type](node, semicolon);\n    }\n}\nmodule.exports = Stringifier;\nStringifier.default = Stringifier;\n}),\n\"[project]/node_modules/postcss/lib/stringify.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Stringifier = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/stringifier.js [postcss] (ecmascript)\");\nfunction stringify(node, builder) {\n    let str = new Stringifier(builder);\n    str.stringify(node);\n}\nmodule.exports = stringify;\nstringify.default = stringify;\n}),\n\"[project]/node_modules/postcss/lib/symbols.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nmodule.exports.isClean = Symbol('isClean');\nmodule.exports.my = Symbol('my');\n}),\n\"[project]/node_modules/postcss/lib/node.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet CssSyntaxError = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/css-syntax-error.js [postcss] (ecmascript)\");\nlet Stringifier = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/stringifier.js [postcss] (ecmascript)\");\nlet stringify = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/stringify.js [postcss] (ecmascript)\");\nlet { isClean, my } = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/symbols.js [postcss] (ecmascript)\");\nfunction cloneNode(obj, parent) {\n    let cloned = new obj.constructor();\n    for(let i in obj){\n        if (!Object.prototype.hasOwnProperty.call(obj, i)) {\n            continue;\n        }\n        if (i === 'proxyCache') continue;\n        let value = obj[i];\n        let type = typeof value;\n        if (i === 'parent' && type === 'object') {\n            if (parent) cloned[i] = parent;\n        } else if (i === 'source') {\n            cloned[i] = value;\n        } else if (Array.isArray(value)) {\n            cloned[i] = value.map((j)=>cloneNode(j, cloned));\n        } else {\n            if (type === 'object' && value !== null) value = cloneNode(value);\n            cloned[i] = value;\n        }\n    }\n    return cloned;\n}\nfunction sourceOffset(inputCSS, position) {\n    // Not all custom syntaxes support `offset` in `source.start` and `source.end`\n    if (position && typeof position.offset !== 'undefined') {\n        return position.offset;\n    }\n    let column = 1;\n    let line = 1;\n    let offset = 0;\n    for(let i = 0; i < inputCSS.length; i++){\n        if (line === position.line && column === position.column) {\n            offset = i;\n            break;\n        }\n        if (inputCSS[i] === '\\n') {\n            column = 1;\n            line += 1;\n        } else {\n            column += 1;\n        }\n    }\n    return offset;\n}\nclass Node {\n    get proxyOf() {\n        return this;\n    }\n    constructor(defaults = {}){\n        this.raws = {};\n        this[isClean] = false;\n        this[my] = true;\n        for(let name in defaults){\n            if (name === 'nodes') {\n                this.nodes = [];\n                for (let node of defaults[name]){\n                    if (typeof node.clone === 'function') {\n                        this.append(node.clone());\n                    } else {\n                        this.append(node);\n                    }\n                }\n            } else {\n                this[name] = defaults[name];\n            }\n        }\n    }\n    addToError(error) {\n        error.postcssNode = this;\n        if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n            let s = this.source;\n            error.stack = error.stack.replace(/\\n\\s{4}at /, `$&${s.input.from}:${s.start.line}:${s.start.column}$&`);\n        }\n        return error;\n    }\n    after(add) {\n        this.parent.insertAfter(this, add);\n        return this;\n    }\n    assign(overrides = {}) {\n        for(let name in overrides){\n            this[name] = overrides[name];\n        }\n        return this;\n    }\n    before(add) {\n        this.parent.insertBefore(this, add);\n        return this;\n    }\n    cleanRaws(keepBetween) {\n        delete this.raws.before;\n        delete this.raws.after;\n        if (!keepBetween) delete this.raws.between;\n    }\n    clone(overrides = {}) {\n        let cloned = cloneNode(this);\n        for(let name in overrides){\n            cloned[name] = overrides[name];\n        }\n        return cloned;\n    }\n    cloneAfter(overrides = {}) {\n        let cloned = this.clone(overrides);\n        this.parent.insertAfter(this, cloned);\n        return cloned;\n    }\n    cloneBefore(overrides = {}) {\n        let cloned = this.clone(overrides);\n        this.parent.insertBefore(this, cloned);\n        return cloned;\n    }\n    error(message, opts = {}) {\n        if (this.source) {\n            let { end, start } = this.rangeBy(opts);\n            return this.source.input.error(message, {\n                column: start.column,\n                line: start.line\n            }, {\n                column: end.column,\n                line: end.line\n            }, opts);\n        }\n        return new CssSyntaxError(message);\n    }\n    getProxyProcessor() {\n        return {\n            get (node, prop) {\n                if (prop === 'proxyOf') {\n                    return node;\n                } else if (prop === 'root') {\n                    return ()=>node.root().toProxy();\n                } else {\n                    return node[prop];\n                }\n            },\n            set (node, prop, value) {\n                if (node[prop] === value) return true;\n                node[prop] = value;\n                if (prop === 'prop' || prop === 'value' || prop === 'name' || prop === 'params' || prop === 'important' || /* c8 ignore next */ prop === 'text') {\n                    node.markDirty();\n                }\n                return true;\n            }\n        };\n    }\n    /* c8 ignore next 3 */ markClean() {\n        this[isClean] = true;\n    }\n    markDirty() {\n        if (this[isClean]) {\n            this[isClean] = false;\n            let next = this;\n            while(next = next.parent){\n                next[isClean] = false;\n            }\n        }\n    }\n    next() {\n        if (!this.parent) return undefined;\n        let index = this.parent.index(this);\n        return this.parent.nodes[index + 1];\n    }\n    positionBy(opts = {}) {\n        let pos = this.source.start;\n        if (opts.index) {\n            pos = this.positionInside(opts.index);\n        } else if (opts.word) {\n            let inputString = 'document' in this.source.input ? this.source.input.document : this.source.input.css;\n            let stringRepresentation = inputString.slice(sourceOffset(inputString, this.source.start), sourceOffset(inputString, this.source.end));\n            let index = stringRepresentation.indexOf(opts.word);\n            if (index !== -1) pos = this.positionInside(index);\n        }\n        return pos;\n    }\n    positionInside(index) {\n        let column = this.source.start.column;\n        let line = this.source.start.line;\n        let inputString = 'document' in this.source.input ? this.source.input.document : this.source.input.css;\n        let offset = sourceOffset(inputString, this.source.start);\n        let end = offset + index;\n        for(let i = offset; i < end; i++){\n            if (inputString[i] === '\\n') {\n                column = 1;\n                line += 1;\n            } else {\n                column += 1;\n            }\n        }\n        return {\n            column,\n            line,\n            offset: end\n        };\n    }\n    prev() {\n        if (!this.parent) return undefined;\n        let index = this.parent.index(this);\n        return this.parent.nodes[index - 1];\n    }\n    rangeBy(opts = {}) {\n        let inputString = 'document' in this.source.input ? this.source.input.document : this.source.input.css;\n        let start = {\n            column: this.source.start.column,\n            line: this.source.start.line,\n            offset: sourceOffset(inputString, this.source.start)\n        };\n        let end = this.source.end ? {\n            column: this.source.end.column + 1,\n            line: this.source.end.line,\n            offset: typeof this.source.end.offset === 'number' ? this.source.end.offset : // the `sourceOffset(... , this.source.end)` returns an inclusive offset.\n            // So, we add 1 to convert it to exclusive.\n            sourceOffset(inputString, this.source.end) + 1\n        } : {\n            column: start.column + 1,\n            line: start.line,\n            offset: start.offset + 1\n        };\n        if (opts.word) {\n            let stringRepresentation = inputString.slice(sourceOffset(inputString, this.source.start), sourceOffset(inputString, this.source.end));\n            let index = stringRepresentation.indexOf(opts.word);\n            if (index !== -1) {\n                start = this.positionInside(index);\n                end = this.positionInside(index + opts.word.length);\n            }\n        } else {\n            if (opts.start) {\n                start = {\n                    column: opts.start.column,\n                    line: opts.start.line,\n                    offset: sourceOffset(inputString, opts.start)\n                };\n            } else if (opts.index) {\n                start = this.positionInside(opts.index);\n            }\n            if (opts.end) {\n                end = {\n                    column: opts.end.column,\n                    line: opts.end.line,\n                    offset: sourceOffset(inputString, opts.end)\n                };\n            } else if (typeof opts.endIndex === 'number') {\n                end = this.positionInside(opts.endIndex);\n            } else if (opts.index) {\n                end = this.positionInside(opts.index + 1);\n            }\n        }\n        if (end.line < start.line || end.line === start.line && end.column <= start.column) {\n            end = {\n                column: start.column + 1,\n                line: start.line,\n                offset: start.offset + 1\n            };\n        }\n        return {\n            end,\n            start\n        };\n    }\n    raw(prop, defaultType) {\n        let str = new Stringifier();\n        return str.raw(this, prop, defaultType);\n    }\n    remove() {\n        if (this.parent) {\n            this.parent.removeChild(this);\n        }\n        this.parent = undefined;\n        return this;\n    }\n    replaceWith(...nodes) {\n        if (this.parent) {\n            let bookmark = this;\n            let foundSelf = false;\n            for (let node of nodes){\n                if (node === this) {\n                    foundSelf = true;\n                } else if (foundSelf) {\n                    this.parent.insertAfter(bookmark, node);\n                    bookmark = node;\n                } else {\n                    this.parent.insertBefore(bookmark, node);\n                }\n            }\n            if (!foundSelf) {\n                this.remove();\n            }\n        }\n        return this;\n    }\n    root() {\n        let result = this;\n        while(result.parent && result.parent.type !== 'document'){\n            result = result.parent;\n        }\n        return result;\n    }\n    toJSON(_, inputs) {\n        let fixed = {};\n        let emitInputs = inputs == null;\n        inputs = inputs || new Map();\n        let inputsNextIndex = 0;\n        for(let name in this){\n            if (!Object.prototype.hasOwnProperty.call(this, name)) {\n                continue;\n            }\n            if (name === 'parent' || name === 'proxyCache') continue;\n            let value = this[name];\n            if (Array.isArray(value)) {\n                fixed[name] = value.map((i)=>{\n                    if (typeof i === 'object' && i.toJSON) {\n                        return i.toJSON(null, inputs);\n                    } else {\n                        return i;\n                    }\n                });\n            } else if (typeof value === 'object' && value.toJSON) {\n                fixed[name] = value.toJSON(null, inputs);\n            } else if (name === 'source') {\n                if (value == null) continue;\n                let inputId = inputs.get(value.input);\n                if (inputId == null) {\n                    inputId = inputsNextIndex;\n                    inputs.set(value.input, inputsNextIndex);\n                    inputsNextIndex++;\n                }\n                fixed[name] = {\n                    end: value.end,\n                    inputId,\n                    start: value.start\n                };\n            } else {\n                fixed[name] = value;\n            }\n        }\n        if (emitInputs) {\n            fixed.inputs = [\n                ...inputs.keys()\n            ].map((input)=>input.toJSON());\n        }\n        return fixed;\n    }\n    toProxy() {\n        if (!this.proxyCache) {\n            this.proxyCache = new Proxy(this, this.getProxyProcessor());\n        }\n        return this.proxyCache;\n    }\n    toString(stringifier = stringify) {\n        if (stringifier.stringify) stringifier = stringifier.stringify;\n        let result = '';\n        stringifier(this, (i)=>{\n            result += i;\n        });\n        return result;\n    }\n    warn(result, text, opts = {}) {\n        let data = {\n            node: this\n        };\n        for(let i in opts)data[i] = opts[i];\n        return result.warn(text, data);\n    }\n}\nmodule.exports = Node;\nNode.default = Node;\n}),\n\"[project]/node_modules/postcss/lib/comment.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Node = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/node.js [postcss] (ecmascript)\");\nclass Comment extends Node {\n    constructor(defaults){\n        super(defaults);\n        this.type = 'comment';\n    }\n}\nmodule.exports = Comment;\nComment.default = Comment;\n}),\n\"[project]/node_modules/postcss/lib/declaration.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Node = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/node.js [postcss] (ecmascript)\");\nclass Declaration extends Node {\n    get variable() {\n        return this.prop.startsWith('--') || this.prop[0] === '$';\n    }\n    constructor(defaults){\n        if (defaults && typeof defaults.value !== 'undefined' && typeof defaults.value !== 'string') {\n            defaults = {\n                ...defaults,\n                value: String(defaults.value)\n            };\n        }\n        super(defaults);\n        this.type = 'decl';\n    }\n}\nmodule.exports = Declaration;\nDeclaration.default = Declaration;\n}),\n\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Comment = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/comment.js [postcss] (ecmascript)\");\nlet Declaration = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/declaration.js [postcss] (ecmascript)\");\nlet Node = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/node.js [postcss] (ecmascript)\");\nlet { isClean, my } = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/symbols.js [postcss] (ecmascript)\");\nlet AtRule, parse, Root, Rule;\nfunction cleanSource(nodes) {\n    return nodes.map((i)=>{\n        if (i.nodes) i.nodes = cleanSource(i.nodes);\n        delete i.source;\n        return i;\n    });\n}\nfunction markTreeDirty(node) {\n    node[isClean] = false;\n    if (node.proxyOf.nodes) {\n        for (let i of node.proxyOf.nodes){\n            markTreeDirty(i);\n        }\n    }\n}\nclass Container extends Node {\n    get first() {\n        if (!this.proxyOf.nodes) return undefined;\n        return this.proxyOf.nodes[0];\n    }\n    get last() {\n        if (!this.proxyOf.nodes) return undefined;\n        return this.proxyOf.nodes[this.proxyOf.nodes.length - 1];\n    }\n    append(...children) {\n        for (let child of children){\n            let nodes = this.normalize(child, this.last);\n            for (let node of nodes)this.proxyOf.nodes.push(node);\n        }\n        this.markDirty();\n        return this;\n    }\n    cleanRaws(keepBetween) {\n        super.cleanRaws(keepBetween);\n        if (this.nodes) {\n            for (let node of this.nodes)node.cleanRaws(keepBetween);\n        }\n    }\n    each(callback) {\n        if (!this.proxyOf.nodes) return undefined;\n        let iterator = this.getIterator();\n        let index, result;\n        while(this.indexes[iterator] < this.proxyOf.nodes.length){\n            index = this.indexes[iterator];\n            result = callback(this.proxyOf.nodes[index], index);\n            if (result === false) break;\n            this.indexes[iterator] += 1;\n        }\n        delete this.indexes[iterator];\n        return result;\n    }\n    every(condition) {\n        return this.nodes.every(condition);\n    }\n    getIterator() {\n        if (!this.lastEach) this.lastEach = 0;\n        if (!this.indexes) this.indexes = {};\n        this.lastEach += 1;\n        let iterator = this.lastEach;\n        this.indexes[iterator] = 0;\n        return iterator;\n    }\n    getProxyProcessor() {\n        return {\n            get (node, prop) {\n                if (prop === 'proxyOf') {\n                    return node;\n                } else if (!node[prop]) {\n                    return node[prop];\n                } else if (prop === 'each' || typeof prop === 'string' && prop.startsWith('walk')) {\n                    return (...args)=>{\n                        return node[prop](...args.map((i)=>{\n                            if (typeof i === 'function') {\n                                return (child, index)=>i(child.toProxy(), index);\n                            } else {\n                                return i;\n                            }\n                        }));\n                    };\n                } else if (prop === 'every' || prop === 'some') {\n                    return (cb)=>{\n                        return node[prop]((child, ...other)=>cb(child.toProxy(), ...other));\n                    };\n                } else if (prop === 'root') {\n                    return ()=>node.root().toProxy();\n                } else if (prop === 'nodes') {\n                    return node.nodes.map((i)=>i.toProxy());\n                } else if (prop === 'first' || prop === 'last') {\n                    return node[prop].toProxy();\n                } else {\n                    return node[prop];\n                }\n            },\n            set (node, prop, value) {\n                if (node[prop] === value) return true;\n                node[prop] = value;\n                if (prop === 'name' || prop === 'params' || prop === 'selector') {\n                    node.markDirty();\n                }\n                return true;\n            }\n        };\n    }\n    index(child) {\n        if (typeof child === 'number') return child;\n        if (child.proxyOf) child = child.proxyOf;\n        return this.proxyOf.nodes.indexOf(child);\n    }\n    insertAfter(exist, add) {\n        let existIndex = this.index(exist);\n        let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse();\n        existIndex = this.index(exist);\n        for (let node of nodes)this.proxyOf.nodes.splice(existIndex + 1, 0, node);\n        let index;\n        for(let id in this.indexes){\n            index = this.indexes[id];\n            if (existIndex < index) {\n                this.indexes[id] = index + nodes.length;\n            }\n        }\n        this.markDirty();\n        return this;\n    }\n    insertBefore(exist, add) {\n        let existIndex = this.index(exist);\n        let type = existIndex === 0 ? 'prepend' : false;\n        let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse();\n        existIndex = this.index(exist);\n        for (let node of nodes)this.proxyOf.nodes.splice(existIndex, 0, node);\n        let index;\n        for(let id in this.indexes){\n            index = this.indexes[id];\n            if (existIndex <= index) {\n                this.indexes[id] = index + nodes.length;\n            }\n        }\n        this.markDirty();\n        return this;\n    }\n    normalize(nodes, sample) {\n        if (typeof nodes === 'string') {\n            nodes = cleanSource(parse(nodes).nodes);\n        } else if (typeof nodes === 'undefined') {\n            nodes = [];\n        } else if (Array.isArray(nodes)) {\n            nodes = nodes.slice(0);\n            for (let i of nodes){\n                if (i.parent) i.parent.removeChild(i, 'ignore');\n            }\n        } else if (nodes.type === 'root' && this.type !== 'document') {\n            nodes = nodes.nodes.slice(0);\n            for (let i of nodes){\n                if (i.parent) i.parent.removeChild(i, 'ignore');\n            }\n        } else if (nodes.type) {\n            nodes = [\n                nodes\n            ];\n        } else if (nodes.prop) {\n            if (typeof nodes.value === 'undefined') {\n                throw new Error('Value field is missed in node creation');\n            } else if (typeof nodes.value !== 'string') {\n                nodes.value = String(nodes.value);\n            }\n            nodes = [\n                new Declaration(nodes)\n            ];\n        } else if (nodes.selector || nodes.selectors) {\n            nodes = [\n                new Rule(nodes)\n            ];\n        } else if (nodes.name) {\n            nodes = [\n                new AtRule(nodes)\n            ];\n        } else if (nodes.text) {\n            nodes = [\n                new Comment(nodes)\n            ];\n        } else {\n            throw new Error('Unknown node type in node creation');\n        }\n        let processed = nodes.map((i)=>{\n            /* c8 ignore next */ if (!i[my]) Container.rebuild(i);\n            i = i.proxyOf;\n            if (i.parent) i.parent.removeChild(i);\n            if (i[isClean]) markTreeDirty(i);\n            if (!i.raws) i.raws = {};\n            if (typeof i.raws.before === 'undefined') {\n                if (sample && typeof sample.raws.before !== 'undefined') {\n                    i.raws.before = sample.raws.before.replace(/\\S/g, '');\n                }\n            }\n            i.parent = this.proxyOf;\n            return i;\n        });\n        return processed;\n    }\n    prepend(...children) {\n        children = children.reverse();\n        for (let child of children){\n            let nodes = this.normalize(child, this.first, 'prepend').reverse();\n            for (let node of nodes)this.proxyOf.nodes.unshift(node);\n            for(let id in this.indexes){\n                this.indexes[id] = this.indexes[id] + nodes.length;\n            }\n        }\n        this.markDirty();\n        return this;\n    }\n    push(child) {\n        child.parent = this;\n        this.proxyOf.nodes.push(child);\n        return this;\n    }\n    removeAll() {\n        for (let node of this.proxyOf.nodes)node.parent = undefined;\n        this.proxyOf.nodes = [];\n        this.markDirty();\n        return this;\n    }\n    removeChild(child) {\n        child = this.index(child);\n        this.proxyOf.nodes[child].parent = undefined;\n        this.proxyOf.nodes.splice(child, 1);\n        let index;\n        for(let id in this.indexes){\n            index = this.indexes[id];\n            if (index >= child) {\n                this.indexes[id] = index - 1;\n            }\n        }\n        this.markDirty();\n        return this;\n    }\n    replaceValues(pattern, opts, callback) {\n        if (!callback) {\n            callback = opts;\n            opts = {};\n        }\n        this.walkDecls((decl)=>{\n            if (opts.props && !opts.props.includes(decl.prop)) return;\n            if (opts.fast && !decl.value.includes(opts.fast)) return;\n            decl.value = decl.value.replace(pattern, callback);\n        });\n        this.markDirty();\n        return this;\n    }\n    some(condition) {\n        return this.nodes.some(condition);\n    }\n    walk(callback) {\n        return this.each((child, i)=>{\n            let result;\n            try {\n                result = callback(child, i);\n            } catch (e) {\n                throw child.addToError(e);\n            }\n            if (result !== false && child.walk) {\n                result = child.walk(callback);\n            }\n            return result;\n        });\n    }\n    walkAtRules(name, callback) {\n        if (!callback) {\n            callback = name;\n            return this.walk((child, i)=>{\n                if (child.type === 'atrule') {\n                    return callback(child, i);\n                }\n            });\n        }\n        if (name instanceof RegExp) {\n            return this.walk((child, i)=>{\n                if (child.type === 'atrule' && name.test(child.name)) {\n                    return callback(child, i);\n                }\n            });\n        }\n        return this.walk((child, i)=>{\n            if (child.type === 'atrule' && child.name === name) {\n                return callback(child, i);\n            }\n        });\n    }\n    walkComments(callback) {\n        return this.walk((child, i)=>{\n            if (child.type === 'comment') {\n                return callback(child, i);\n            }\n        });\n    }\n    walkDecls(prop, callback) {\n        if (!callback) {\n            callback = prop;\n            return this.walk((child, i)=>{\n                if (child.type === 'decl') {\n                    return callback(child, i);\n                }\n            });\n        }\n        if (prop instanceof RegExp) {\n            return this.walk((child, i)=>{\n                if (child.type === 'decl' && prop.test(child.prop)) {\n                    return callback(child, i);\n                }\n            });\n        }\n        return this.walk((child, i)=>{\n            if (child.type === 'decl' && child.prop === prop) {\n                return callback(child, i);\n            }\n        });\n    }\n    walkRules(selector, callback) {\n        if (!callback) {\n            callback = selector;\n            return this.walk((child, i)=>{\n                if (child.type === 'rule') {\n                    return callback(child, i);\n                }\n            });\n        }\n        if (selector instanceof RegExp) {\n            return this.walk((child, i)=>{\n                if (child.type === 'rule' && selector.test(child.selector)) {\n                    return callback(child, i);\n                }\n            });\n        }\n        return this.walk((child, i)=>{\n            if (child.type === 'rule' && child.selector === selector) {\n                return callback(child, i);\n            }\n        });\n    }\n}\nContainer.registerParse = (dependant)=>{\n    parse = dependant;\n};\nContainer.registerRule = (dependant)=>{\n    Rule = dependant;\n};\nContainer.registerAtRule = (dependant)=>{\n    AtRule = dependant;\n};\nContainer.registerRoot = (dependant)=>{\n    Root = dependant;\n};\nmodule.exports = Container;\nContainer.default = Container;\n/* c8 ignore start */ Container.rebuild = (node)=>{\n    if (node.type === 'atrule') {\n        Object.setPrototypeOf(node, AtRule.prototype);\n    } else if (node.type === 'rule') {\n        Object.setPrototypeOf(node, Rule.prototype);\n    } else if (node.type === 'decl') {\n        Object.setPrototypeOf(node, Declaration.prototype);\n    } else if (node.type === 'comment') {\n        Object.setPrototypeOf(node, Comment.prototype);\n    } else if (node.type === 'root') {\n        Object.setPrototypeOf(node, Root.prototype);\n    }\n    node[my] = true;\n    if (node.nodes) {\n        node.nodes.forEach((child)=>{\n            Container.rebuild(child);\n        });\n    }\n}; /* c8 ignore stop */ \n}),\n\"[project]/node_modules/postcss/lib/at-rule.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nclass AtRule extends Container {\n    constructor(defaults){\n        super(defaults);\n        this.type = 'atrule';\n    }\n    append(...children) {\n        if (!this.proxyOf.nodes) this.nodes = [];\n        return super.append(...children);\n    }\n    prepend(...children) {\n        if (!this.proxyOf.nodes) this.nodes = [];\n        return super.prepend(...children);\n    }\n}\nmodule.exports = AtRule;\nAtRule.default = AtRule;\nContainer.registerAtRule(AtRule);\n}),\n\"[project]/node_modules/postcss/lib/document.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nlet LazyResult, Processor;\nclass Document extends Container {\n    constructor(defaults){\n        // type needs to be passed to super, otherwise child roots won't be normalized correctly\n        super({\n            type: 'document',\n            ...defaults\n        });\n        if (!this.nodes) {\n            this.nodes = [];\n        }\n    }\n    toResult(opts = {}) {\n        let lazy = new LazyResult(new Processor(), this, opts);\n        return lazy.stringify();\n    }\n}\nDocument.registerLazyResult = (dependant)=>{\n    LazyResult = dependant;\n};\nDocument.registerProcessor = (dependant)=>{\n    Processor = dependant;\n};\nmodule.exports = Document;\nDocument.default = Document;\n}),\n\"[project]/node_modules/nanoid/non-secure/index.cjs [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n// This alphabet uses `A-Za-z0-9_-` symbols.\n// The order of characters is optimized for better gzip and brotli compression.\n// References to the same file (works both for gzip and brotli):\n// `'use`, `andom`, and `rict'`\n// References to the brotli default dictionary:\n// `-26T`, `1983`, `40px`, `75px`, `bush`, `jack`, `mind`, `very`, and `wolf`\nlet urlAlphabet = 'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict';\nlet customAlphabet = (alphabet, defaultSize = 21)=>{\n    return (size = defaultSize)=>{\n        let id = '';\n        // A compact alternative for `for (var i = 0; i < step; i++)`.\n        let i = size | 0;\n        while(i--){\n            // `| 0` is more compact and faster than `Math.floor()`.\n            id += alphabet[Math.random() * alphabet.length | 0];\n        }\n        return id;\n    };\n};\nlet nanoid = (size = 21)=>{\n    let id = '';\n    // A compact alternative for `for (var i = 0; i < step; i++)`.\n    let i = size | 0;\n    while(i--){\n        // `| 0` is more compact and faster than `Math.floor()`.\n        id += urlAlphabet[Math.random() * 64 | 0];\n    }\n    return id;\n};\nmodule.exports = {\n    nanoid,\n    customAlphabet\n};\n}),\n\"[project]/node_modules/source-map-js/lib/base64.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ var intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */ exports.encode = function(number) {\n    if (0 <= number && number < intToCharMap.length) {\n        return intToCharMap[number];\n    }\n    throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */ exports.decode = function(charCode) {\n    var bigA = 65; // 'A'\n    var bigZ = 90; // 'Z'\n    var littleA = 97; // 'a'\n    var littleZ = 122; // 'z'\n    var zero = 48; // '0'\n    var nine = 57; // '9'\n    var plus = 43; // '+'\n    var slash = 47; // '/'\n    var littleOffset = 26;\n    var numberOffset = 52;\n    // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n    if (bigA <= charCode && charCode <= bigZ) {\n        return charCode - bigA;\n    }\n    // 26 - 51: abcdefghijklmnopqrstuvwxyz\n    if (littleA <= charCode && charCode <= littleZ) {\n        return charCode - littleA + littleOffset;\n    }\n    // 52 - 61: 0123456789\n    if (zero <= charCode && charCode <= nine) {\n        return charCode - zero + numberOffset;\n    }\n    // 62: +\n    if (charCode == plus) {\n        return 62;\n    }\n    // 63: /\n    if (charCode == slash) {\n        return 63;\n    }\n    // Invalid base64 digit.\n    return -1;\n};\n}),\n\"[project]/node_modules/source-map-js/lib/base64-vlq.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */ var base64 = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/base64.js [postcss] (ecmascript)\");\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\nvar VLQ_BASE_SHIFT = 5;\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */ function toVLQSigned(aValue) {\n    return aValue < 0 ? (-aValue << 1) + 1 : (aValue << 1) + 0;\n}\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */ function fromVLQSigned(aValue) {\n    var isNegative = (aValue & 1) === 1;\n    var shifted = aValue >> 1;\n    return isNegative ? -shifted : shifted;\n}\n/**\n * Returns the base 64 VLQ encoded value.\n */ exports.encode = function base64VLQ_encode(aValue) {\n    var encoded = \"\";\n    var digit;\n    var vlq = toVLQSigned(aValue);\n    do {\n        digit = vlq & VLQ_BASE_MASK;\n        vlq >>>= VLQ_BASE_SHIFT;\n        if (vlq > 0) {\n            // There are still more digits in this value, so we must make sure the\n            // continuation bit is marked.\n            digit |= VLQ_CONTINUATION_BIT;\n        }\n        encoded += base64.encode(digit);\n    }while (vlq > 0)\n    return encoded;\n};\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */ exports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n    var strLen = aStr.length;\n    var result = 0;\n    var shift = 0;\n    var continuation, digit;\n    do {\n        if (aIndex >= strLen) {\n            throw new Error(\"Expected more digits in base 64 VLQ value.\");\n        }\n        digit = base64.decode(aStr.charCodeAt(aIndex++));\n        if (digit === -1) {\n            throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n        }\n        continuation = !!(digit & VLQ_CONTINUATION_BIT);\n        digit &= VLQ_BASE_MASK;\n        result = result + (digit << shift);\n        shift += VLQ_BASE_SHIFT;\n    }while (continuation)\n    aOutParam.value = fromVLQSigned(result);\n    aOutParam.rest = aIndex;\n};\n}),\n\"[project]/node_modules/source-map-js/lib/util.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ /**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */ function getArg(aArgs, aName, aDefaultValue) {\n    if (aName in aArgs) {\n        return aArgs[aName];\n    } else if (arguments.length === 3) {\n        return aDefaultValue;\n    } else {\n        throw new Error('\"' + aName + '\" is a required argument.');\n    }\n}\nexports.getArg = getArg;\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\nfunction urlParse(aUrl) {\n    var match = aUrl.match(urlRegexp);\n    if (!match) {\n        return null;\n    }\n    return {\n        scheme: match[1],\n        auth: match[2],\n        host: match[3],\n        port: match[4],\n        path: match[5]\n    };\n}\nexports.urlParse = urlParse;\nfunction urlGenerate(aParsedUrl) {\n    var url = '';\n    if (aParsedUrl.scheme) {\n        url += aParsedUrl.scheme + ':';\n    }\n    url += '//';\n    if (aParsedUrl.auth) {\n        url += aParsedUrl.auth + '@';\n    }\n    if (aParsedUrl.host) {\n        url += aParsedUrl.host;\n    }\n    if (aParsedUrl.port) {\n        url += \":\" + aParsedUrl.port;\n    }\n    if (aParsedUrl.path) {\n        url += aParsedUrl.path;\n    }\n    return url;\n}\nexports.urlGenerate = urlGenerate;\nvar MAX_CACHED_INPUTS = 32;\n/**\n * Takes some function `f(input) -> result` and returns a memoized version of\n * `f`.\n *\n * We keep at most `MAX_CACHED_INPUTS` memoized results of `f` alive. The\n * memoization is a dumb-simple, linear least-recently-used cache.\n */ function lruMemoize(f) {\n    var cache = [];\n    return function(input) {\n        for(var i = 0; i < cache.length; i++){\n            if (cache[i].input === input) {\n                var temp = cache[0];\n                cache[0] = cache[i];\n                cache[i] = temp;\n                return cache[0].result;\n            }\n        }\n        var result = f(input);\n        cache.unshift({\n            input,\n            result\n        });\n        if (cache.length > MAX_CACHED_INPUTS) {\n            cache.pop();\n        }\n        return result;\n    };\n}\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */ var normalize = lruMemoize(function normalize(aPath) {\n    var path = aPath;\n    var url = urlParse(aPath);\n    if (url) {\n        if (!url.path) {\n            return aPath;\n        }\n        path = url.path;\n    }\n    var isAbsolute = exports.isAbsolute(path);\n    // Split the path into parts between `/` characters. This is much faster than\n    // using `.split(/\\/+/g)`.\n    var parts = [];\n    var start = 0;\n    var i = 0;\n    while(true){\n        start = i;\n        i = path.indexOf(\"/\", start);\n        if (i === -1) {\n            parts.push(path.slice(start));\n            break;\n        } else {\n            parts.push(path.slice(start, i));\n            while(i < path.length && path[i] === \"/\"){\n                i++;\n            }\n        }\n    }\n    for(var part, up = 0, i = parts.length - 1; i >= 0; i--){\n        part = parts[i];\n        if (part === '.') {\n            parts.splice(i, 1);\n        } else if (part === '..') {\n            up++;\n        } else if (up > 0) {\n            if (part === '') {\n                // The first part is blank if the path is absolute. Trying to go\n                // above the root is a no-op. Therefore we can remove all '..' parts\n                // directly after the root.\n                parts.splice(i + 1, up);\n                up = 0;\n            } else {\n                parts.splice(i, 2);\n                up--;\n            }\n        }\n    }\n    path = parts.join('/');\n    if (path === '') {\n        path = isAbsolute ? '/' : '.';\n    }\n    if (url) {\n        url.path = path;\n        return urlGenerate(url);\n    }\n    return path;\n});\nexports.normalize = normalize;\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */ function join(aRoot, aPath) {\n    if (aRoot === \"\") {\n        aRoot = \".\";\n    }\n    if (aPath === \"\") {\n        aPath = \".\";\n    }\n    var aPathUrl = urlParse(aPath);\n    var aRootUrl = urlParse(aRoot);\n    if (aRootUrl) {\n        aRoot = aRootUrl.path || '/';\n    }\n    // `join(foo, '//www.example.org')`\n    if (aPathUrl && !aPathUrl.scheme) {\n        if (aRootUrl) {\n            aPathUrl.scheme = aRootUrl.scheme;\n        }\n        return urlGenerate(aPathUrl);\n    }\n    if (aPathUrl || aPath.match(dataUrlRegexp)) {\n        return aPath;\n    }\n    // `join('http://', 'www.example.com')`\n    if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n        aRootUrl.host = aPath;\n        return urlGenerate(aRootUrl);\n    }\n    var joined = aPath.charAt(0) === '/' ? aPath : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n    if (aRootUrl) {\n        aRootUrl.path = joined;\n        return urlGenerate(aRootUrl);\n    }\n    return joined;\n}\nexports.join = join;\nexports.isAbsolute = function(aPath) {\n    return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */ function relative(aRoot, aPath) {\n    if (aRoot === \"\") {\n        aRoot = \".\";\n    }\n    aRoot = aRoot.replace(/\\/$/, '');\n    // It is possible for the path to be above the root. In this case, simply\n    // checking whether the root is a prefix of the path won't work. Instead, we\n    // need to remove components from the root one by one, until either we find\n    // a prefix that fits, or we run out of components to remove.\n    var level = 0;\n    while(aPath.indexOf(aRoot + '/') !== 0){\n        var index = aRoot.lastIndexOf(\"/\");\n        if (index < 0) {\n            return aPath;\n        }\n        // If the only part of the root that is left is the scheme (i.e. http://,\n        // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n        // have exhausted all components, so the path is not relative to the root.\n        aRoot = aRoot.slice(0, index);\n        if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n            return aPath;\n        }\n        ++level;\n    }\n    // Make sure we add a \"../\" for each component we removed from the root.\n    return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\nvar supportsNullProto = function() {\n    var obj = Object.create(null);\n    return !('__proto__' in obj);\n}();\nfunction identity(s) {\n    return s;\n}\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */ function toSetString(aStr) {\n    if (isProtoString(aStr)) {\n        return '$' + aStr;\n    }\n    return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\nfunction fromSetString(aStr) {\n    if (isProtoString(aStr)) {\n        return aStr.slice(1);\n    }\n    return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\nfunction isProtoString(s) {\n    if (!s) {\n        return false;\n    }\n    var length = s.length;\n    if (length < 9 /* \"__proto__\".length */ ) {\n        return false;\n    }\n    if (s.charCodeAt(length - 1) !== 95 /* '_' */  || s.charCodeAt(length - 2) !== 95 /* '_' */  || s.charCodeAt(length - 3) !== 111 /* 'o' */  || s.charCodeAt(length - 4) !== 116 /* 't' */  || s.charCodeAt(length - 5) !== 111 /* 'o' */  || s.charCodeAt(length - 6) !== 114 /* 'r' */  || s.charCodeAt(length - 7) !== 112 /* 'p' */  || s.charCodeAt(length - 8) !== 95 /* '_' */  || s.charCodeAt(length - 9) !== 95 /* '_' */ ) {\n        return false;\n    }\n    for(var i = length - 10; i >= 0; i--){\n        if (s.charCodeAt(i) !== 36 /* '$' */ ) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */ function compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n    var cmp = strcmp(mappingA.source, mappingB.source);\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalLine - mappingB.originalLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalColumn - mappingB.originalColumn;\n    if (cmp !== 0 || onlyCompareOriginal) {\n        return cmp;\n    }\n    cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.generatedLine - mappingB.generatedLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\nfunction compareByOriginalPositionsNoSource(mappingA, mappingB, onlyCompareOriginal) {\n    var cmp;\n    cmp = mappingA.originalLine - mappingB.originalLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalColumn - mappingB.originalColumn;\n    if (cmp !== 0 || onlyCompareOriginal) {\n        return cmp;\n    }\n    cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.generatedLine - mappingB.generatedLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositionsNoSource = compareByOriginalPositionsNoSource;\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */ function compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n    var cmp = mappingA.generatedLine - mappingB.generatedLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n    if (cmp !== 0 || onlyCompareGenerated) {\n        return cmp;\n    }\n    cmp = strcmp(mappingA.source, mappingB.source);\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalLine - mappingB.originalLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalColumn - mappingB.originalColumn;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\nfunction compareByGeneratedPositionsDeflatedNoLine(mappingA, mappingB, onlyCompareGenerated) {\n    var cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n    if (cmp !== 0 || onlyCompareGenerated) {\n        return cmp;\n    }\n    cmp = strcmp(mappingA.source, mappingB.source);\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalLine - mappingB.originalLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalColumn - mappingB.originalColumn;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflatedNoLine = compareByGeneratedPositionsDeflatedNoLine;\nfunction strcmp(aStr1, aStr2) {\n    if (aStr1 === aStr2) {\n        return 0;\n    }\n    if (aStr1 === null) {\n        return 1; // aStr2 !== null\n    }\n    if (aStr2 === null) {\n        return -1; // aStr1 !== null\n    }\n    if (aStr1 > aStr2) {\n        return 1;\n    }\n    return -1;\n}\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */ function compareByGeneratedPositionsInflated(mappingA, mappingB) {\n    var cmp = mappingA.generatedLine - mappingB.generatedLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = strcmp(mappingA.source, mappingB.source);\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalLine - mappingB.originalLine;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    cmp = mappingA.originalColumn - mappingB.originalColumn;\n    if (cmp !== 0) {\n        return cmp;\n    }\n    return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */ function parseSourceMapInput(str) {\n    return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */ function computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n    sourceURL = sourceURL || '';\n    if (sourceRoot) {\n        // This follows what Chrome does.\n        if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n            sourceRoot += '/';\n        }\n        // The spec says:\n        //   Line 4: An optional source root, useful for relocating source\n        //   files on a server or removing repeated values in the\n        //   ‚Äúsources‚Äù entry.  This value is prepended to the individual\n        //   entries in the ‚Äúsource‚Äù field.\n        sourceURL = sourceRoot + sourceURL;\n    }\n    // Historically, SourceMapConsumer did not take the sourceMapURL as\n    // a parameter.  This mode is still somewhat supported, which is why\n    // this code block is conditional.  However, it's preferable to pass\n    // the source map URL to SourceMapConsumer, so that this function\n    // can implement the source URL resolution algorithm as outlined in\n    // the spec.  This block is basically the equivalent of:\n    //    new URL(sourceURL, sourceMapURL).toString()\n    // ... except it avoids using URL, which wasn't available in the\n    // older releases of node still supported by this library.\n    //\n    // The spec says:\n    //   If the sources are not absolute URLs after prepending of the\n    //   ‚ÄúsourceRoot‚Äù, the sources are resolved relative to the\n    //   SourceMap (like resolving script src in a html document).\n    if (sourceMapURL) {\n        var parsed = urlParse(sourceMapURL);\n        if (!parsed) {\n            throw new Error(\"sourceMapURL could not be parsed\");\n        }\n        if (parsed.path) {\n            // Strip the last path component, but keep the \"/\".\n            var index = parsed.path.lastIndexOf('/');\n            if (index >= 0) {\n                parsed.path = parsed.path.substring(0, index + 1);\n            }\n        }\n        sourceURL = join(urlGenerate(parsed), sourceURL);\n    }\n    return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n}),\n\"[project]/node_modules/source-map-js/lib/array-set.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ var util = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/util.js [postcss] (ecmascript)\");\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */ function ArraySet() {\n    this._array = [];\n    this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n/**\n * Static method for creating ArraySet instances from an existing array.\n */ ArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n    var set = new ArraySet();\n    for(var i = 0, len = aArray.length; i < len; i++){\n        set.add(aArray[i], aAllowDuplicates);\n    }\n    return set;\n};\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */ ArraySet.prototype.size = function ArraySet_size() {\n    return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */ ArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n    var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n    var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n    var idx = this._array.length;\n    if (!isDuplicate || aAllowDuplicates) {\n        this._array.push(aStr);\n    }\n    if (!isDuplicate) {\n        if (hasNativeMap) {\n            this._set.set(aStr, idx);\n        } else {\n            this._set[sStr] = idx;\n        }\n    }\n};\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */ ArraySet.prototype.has = function ArraySet_has(aStr) {\n    if (hasNativeMap) {\n        return this._set.has(aStr);\n    } else {\n        var sStr = util.toSetString(aStr);\n        return has.call(this._set, sStr);\n    }\n};\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */ ArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n    if (hasNativeMap) {\n        var idx = this._set.get(aStr);\n        if (idx >= 0) {\n            return idx;\n        }\n    } else {\n        var sStr = util.toSetString(aStr);\n        if (has.call(this._set, sStr)) {\n            return this._set[sStr];\n        }\n    }\n    throw new Error('\"' + aStr + '\" is not in the set.');\n};\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */ ArraySet.prototype.at = function ArraySet_at(aIdx) {\n    if (aIdx >= 0 && aIdx < this._array.length) {\n        return this._array[aIdx];\n    }\n    throw new Error('No element indexed by ' + aIdx);\n};\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */ ArraySet.prototype.toArray = function ArraySet_toArray() {\n    return this._array.slice();\n};\nexports.ArraySet = ArraySet;\n}),\n\"[project]/node_modules/source-map-js/lib/mapping-list.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ var util = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/util.js [postcss] (ecmascript)\");\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */ function generatedPositionAfter(mappingA, mappingB) {\n    // Optimized for most common case\n    var lineA = mappingA.generatedLine;\n    var lineB = mappingB.generatedLine;\n    var columnA = mappingA.generatedColumn;\n    var columnB = mappingB.generatedColumn;\n    return lineB > lineA || lineB == lineA && columnB >= columnA || util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */ function MappingList() {\n    this._array = [];\n    this._sorted = true;\n    // Serves as infimum\n    this._last = {\n        generatedLine: -1,\n        generatedColumn: 0\n    };\n}\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */ MappingList.prototype.unsortedForEach = function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n};\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */ MappingList.prototype.add = function MappingList_add(aMapping) {\n    if (generatedPositionAfter(this._last, aMapping)) {\n        this._last = aMapping;\n        this._array.push(aMapping);\n    } else {\n        this._sorted = false;\n        this._array.push(aMapping);\n    }\n};\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */ MappingList.prototype.toArray = function MappingList_toArray() {\n    if (!this._sorted) {\n        this._array.sort(util.compareByGeneratedPositionsInflated);\n        this._sorted = true;\n    }\n    return this._array;\n};\nexports.MappingList = MappingList;\n}),\n\"[project]/node_modules/source-map-js/lib/source-map-generator.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ var base64VLQ = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/base64-vlq.js [postcss] (ecmascript)\");\nvar util = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/util.js [postcss] (ecmascript)\");\nvar ArraySet = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/array-set.js [postcss] (ecmascript)\").ArraySet;\nvar MappingList = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/mapping-list.js [postcss] (ecmascript)\").MappingList;\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */ function SourceMapGenerator(aArgs) {\n    if (!aArgs) {\n        aArgs = {};\n    }\n    this._file = util.getArg(aArgs, 'file', null);\n    this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n    this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n    this._ignoreInvalidMapping = util.getArg(aArgs, 'ignoreInvalidMapping', false);\n    this._sources = new ArraySet();\n    this._names = new ArraySet();\n    this._mappings = new MappingList();\n    this._sourcesContents = null;\n}\nSourceMapGenerator.prototype._version = 3;\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */ SourceMapGenerator.fromSourceMap = function SourceMapGenerator_fromSourceMap(aSourceMapConsumer, generatorOps) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator(Object.assign(generatorOps || {}, {\n        file: aSourceMapConsumer.file,\n        sourceRoot: sourceRoot\n    }));\n    aSourceMapConsumer.eachMapping(function(mapping) {\n        var newMapping = {\n            generated: {\n                line: mapping.generatedLine,\n                column: mapping.generatedColumn\n            }\n        };\n        if (mapping.source != null) {\n            newMapping.source = mapping.source;\n            if (sourceRoot != null) {\n                newMapping.source = util.relative(sourceRoot, newMapping.source);\n            }\n            newMapping.original = {\n                line: mapping.originalLine,\n                column: mapping.originalColumn\n            };\n            if (mapping.name != null) {\n                newMapping.name = mapping.name;\n            }\n        }\n        generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function(sourceFile) {\n        var sourceRelative = sourceFile;\n        if (sourceRoot !== null) {\n            sourceRelative = util.relative(sourceRoot, sourceFile);\n        }\n        if (!generator._sources.has(sourceRelative)) {\n            generator._sources.add(sourceRelative);\n        }\n        var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n        if (content != null) {\n            generator.setSourceContent(sourceFile, content);\n        }\n    });\n    return generator;\n};\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */ SourceMapGenerator.prototype.addMapping = function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n    if (!this._skipValidation) {\n        if (this._validateMapping(generated, original, source, name) === false) {\n            return;\n        }\n    }\n    if (source != null) {\n        source = String(source);\n        if (!this._sources.has(source)) {\n            this._sources.add(source);\n        }\n    }\n    if (name != null) {\n        name = String(name);\n        if (!this._names.has(name)) {\n            this._names.add(name);\n        }\n    }\n    this._mappings.add({\n        generatedLine: generated.line,\n        generatedColumn: generated.column,\n        originalLine: original != null && original.line,\n        originalColumn: original != null && original.column,\n        source: source,\n        name: name\n    });\n};\n/**\n * Set the source content for a source file.\n */ SourceMapGenerator.prototype.setSourceContent = function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n        source = util.relative(this._sourceRoot, source);\n    }\n    if (aSourceContent != null) {\n        // Add the source content to the _sourcesContents map.\n        // Create a new _sourcesContents map if the property is null.\n        if (!this._sourcesContents) {\n            this._sourcesContents = Object.create(null);\n        }\n        this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n        // Remove the source file from the _sourcesContents map.\n        // If the _sourcesContents map is empty, set the property to null.\n        delete this._sourcesContents[util.toSetString(source)];\n        if (Object.keys(this._sourcesContents).length === 0) {\n            this._sourcesContents = null;\n        }\n    }\n};\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */ SourceMapGenerator.prototype.applySourceMap = function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n        if (aSourceMapConsumer.file == null) {\n            throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' + 'or the source map\\'s \"file\" property. Both were omitted.');\n        }\n        sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n        sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function(mapping) {\n        if (mapping.source === sourceFile && mapping.originalLine != null) {\n            // Check if it can be mapped by the source map, then update the mapping.\n            var original = aSourceMapConsumer.originalPositionFor({\n                line: mapping.originalLine,\n                column: mapping.originalColumn\n            });\n            if (original.source != null) {\n                // Copy mapping\n                mapping.source = original.source;\n                if (aSourceMapPath != null) {\n                    mapping.source = util.join(aSourceMapPath, mapping.source);\n                }\n                if (sourceRoot != null) {\n                    mapping.source = util.relative(sourceRoot, mapping.source);\n                }\n                mapping.originalLine = original.line;\n                mapping.originalColumn = original.column;\n                if (original.name != null) {\n                    mapping.name = original.name;\n                }\n            }\n        }\n        var source = mapping.source;\n        if (source != null && !newSources.has(source)) {\n            newSources.add(source);\n        }\n        var name = mapping.name;\n        if (name != null && !newNames.has(name)) {\n            newNames.add(name);\n        }\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function(sourceFile) {\n        var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n        if (content != null) {\n            if (aSourceMapPath != null) {\n                sourceFile = util.join(aSourceMapPath, sourceFile);\n            }\n            if (sourceRoot != null) {\n                sourceFile = util.relative(sourceRoot, sourceFile);\n            }\n            this.setSourceContent(sourceFile, content);\n        }\n    }, this);\n};\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */ SourceMapGenerator.prototype._validateMapping = function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource, aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        var message = 'original.line and original.column are not numbers -- you probably meant to omit ' + 'the original mapping entirely and only map the generated position. If so, pass ' + 'null for the original mapping instead of an object with empty or null values.';\n        if (this._ignoreInvalidMapping) {\n            if (typeof console !== 'undefined' && console.warn) {\n                console.warn(message);\n            }\n            return false;\n        } else {\n            throw new Error(message);\n        }\n    }\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated && aGenerated.line > 0 && aGenerated.column >= 0 && !aOriginal && !aSource && !aName) {\n        // Case 1.\n        return;\n    } else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated && aOriginal && 'line' in aOriginal && 'column' in aOriginal && aGenerated.line > 0 && aGenerated.column >= 0 && aOriginal.line > 0 && aOriginal.column >= 0 && aSource) {\n        // Cases 2 and 3.\n        return;\n    } else {\n        var message = 'Invalid mapping: ' + JSON.stringify({\n            generated: aGenerated,\n            source: aSource,\n            original: aOriginal,\n            name: aName\n        });\n        if (this._ignoreInvalidMapping) {\n            if (typeof console !== 'undefined' && console.warn) {\n                console.warn(message);\n            }\n            return false;\n        } else {\n            throw new Error(message);\n        }\n    }\n};\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */ SourceMapGenerator.prototype._serializeMappings = function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n    var mappings = this._mappings.toArray();\n    for(var i = 0, len = mappings.length; i < len; i++){\n        mapping = mappings[i];\n        next = '';\n        if (mapping.generatedLine !== previousGeneratedLine) {\n            previousGeneratedColumn = 0;\n            while(mapping.generatedLine !== previousGeneratedLine){\n                next += ';';\n                previousGeneratedLine++;\n            }\n        } else {\n            if (i > 0) {\n                if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n                    continue;\n                }\n                next += ',';\n            }\n        }\n        next += base64VLQ.encode(mapping.generatedColumn - previousGeneratedColumn);\n        previousGeneratedColumn = mapping.generatedColumn;\n        if (mapping.source != null) {\n            sourceIdx = this._sources.indexOf(mapping.source);\n            next += base64VLQ.encode(sourceIdx - previousSource);\n            previousSource = sourceIdx;\n            // lines are stored 0-based in SourceMap spec version 3\n            next += base64VLQ.encode(mapping.originalLine - 1 - previousOriginalLine);\n            previousOriginalLine = mapping.originalLine - 1;\n            next += base64VLQ.encode(mapping.originalColumn - previousOriginalColumn);\n            previousOriginalColumn = mapping.originalColumn;\n            if (mapping.name != null) {\n                nameIdx = this._names.indexOf(mapping.name);\n                next += base64VLQ.encode(nameIdx - previousName);\n                previousName = nameIdx;\n            }\n        }\n        result += next;\n    }\n    return result;\n};\nSourceMapGenerator.prototype._generateSourcesContent = function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function(source) {\n        if (!this._sourcesContents) {\n            return null;\n        }\n        if (aSourceRoot != null) {\n            source = util.relative(aSourceRoot, source);\n        }\n        var key = util.toSetString(source);\n        return Object.prototype.hasOwnProperty.call(this._sourcesContents, key) ? this._sourcesContents[key] : null;\n    }, this);\n};\n/**\n * Externalize the source map.\n */ SourceMapGenerator.prototype.toJSON = function SourceMapGenerator_toJSON() {\n    var map = {\n        version: this._version,\n        sources: this._sources.toArray(),\n        names: this._names.toArray(),\n        mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n        map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n        map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n        map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n    return map;\n};\n/**\n * Render the source map being generated to a string.\n */ SourceMapGenerator.prototype.toString = function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n};\nexports.SourceMapGenerator = SourceMapGenerator;\n}),\n\"[project]/node_modules/source-map-js/lib/binary-search.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ exports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */ function recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n    // This function terminates when one of the following is true:\n    //\n    //   1. We find the exact element we are looking for.\n    //\n    //   2. We did not find the exact element, but we can return the index of\n    //      the next-closest element.\n    //\n    //   3. We did not find the exact element, and there is no next-closest\n    //      element than the one we are searching for, so we return -1.\n    var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n    var cmp = aCompare(aNeedle, aHaystack[mid], true);\n    if (cmp === 0) {\n        // Found the element we are looking for.\n        return mid;\n    } else if (cmp > 0) {\n        // Our needle is greater than aHaystack[mid].\n        if (aHigh - mid > 1) {\n            // The element is in the upper half.\n            return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n        }\n        // The exact needle element was not found in this haystack. Determine if\n        // we are in termination case (3) or (2) and return the appropriate thing.\n        if (aBias == exports.LEAST_UPPER_BOUND) {\n            return aHigh < aHaystack.length ? aHigh : -1;\n        } else {\n            return mid;\n        }\n    } else {\n        // Our needle is less than aHaystack[mid].\n        if (mid - aLow > 1) {\n            // The element is in the lower half.\n            return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n        }\n        // we are in termination case (3) or (2) and return the appropriate thing.\n        if (aBias == exports.LEAST_UPPER_BOUND) {\n            return mid;\n        } else {\n            return aLow < 0 ? -1 : aLow;\n        }\n    }\n}\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */ exports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n    if (aHaystack.length === 0) {\n        return -1;\n    }\n    var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack, aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n    if (index < 0) {\n        return -1;\n    }\n    // We have found either the exact element, or the next-closest element than\n    // the one we are searching for. However, there may be more than one such\n    // element. Make sure we always return the smallest of these.\n    while(index - 1 >= 0){\n        if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n            break;\n        }\n        --index;\n    }\n    return index;\n};\n}),\n\"[project]/node_modules/source-map-js/lib/quick-sort.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ // It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\nfunction SortTemplate(comparator) {\n    /**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */ function swap(ary, x, y) {\n        var temp = ary[x];\n        ary[x] = ary[y];\n        ary[y] = temp;\n    }\n    /**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */ function randomIntInRange(low, high) {\n        return Math.round(low + Math.random() * (high - low));\n    }\n    /**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */ function doQuickSort(ary, comparator, p, r) {\n        // If our lower bound is less than our upper bound, we (1) partition the\n        // array into two pieces and (2) recurse on each half. If it is not, this is\n        // the empty array and our base case.\n        if (p < r) {\n            // (1) Partitioning.\n            //\n            // The partitioning chooses a pivot between `p` and `r` and moves all\n            // elements that are less than or equal to the pivot to the before it, and\n            // all the elements that are greater than it after it. The effect is that\n            // once partition is done, the pivot is in the exact place it will be when\n            // the array is put in sorted order, and it will not need to be moved\n            // again. This runs in O(n) time.\n            // Always choose a random pivot so that an input array which is reverse\n            // sorted does not cause O(n^2) running time.\n            var pivotIndex = randomIntInRange(p, r);\n            var i = p - 1;\n            swap(ary, pivotIndex, r);\n            var pivot = ary[r];\n            // Immediately after `j` is incremented in this loop, the following hold\n            // true:\n            //\n            //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n            //\n            //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n            for(var j = p; j < r; j++){\n                if (comparator(ary[j], pivot, false) <= 0) {\n                    i += 1;\n                    swap(ary, i, j);\n                }\n            }\n            swap(ary, i + 1, j);\n            var q = i + 1;\n            // (2) Recurse on each half.\n            doQuickSort(ary, comparator, p, q - 1);\n            doQuickSort(ary, comparator, q + 1, r);\n        }\n    }\n    return doQuickSort;\n}\nfunction cloneSort(comparator) {\n    let template = SortTemplate.toString();\n    let templateFn = new Function(`return ${template}`)();\n    return templateFn(comparator);\n}\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */ let sortCache = new WeakMap();\nexports.quickSort = function(ary, comparator, start = 0) {\n    let doQuickSort = sortCache.get(comparator);\n    if (doQuickSort === void 0) {\n        doQuickSort = cloneSort(comparator);\n        sortCache.set(comparator, doQuickSort);\n    }\n    doQuickSort(ary, comparator, start, ary.length - 1);\n};\n}),\n\"[project]/node_modules/source-map-js/lib/source-map-consumer.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ var util = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/util.js [postcss] (ecmascript)\");\nvar binarySearch = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/binary-search.js [postcss] (ecmascript)\");\nvar ArraySet = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/array-set.js [postcss] (ecmascript)\").ArraySet;\nvar base64VLQ = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/base64-vlq.js [postcss] (ecmascript)\");\nvar quickSort = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/quick-sort.js [postcss] (ecmascript)\").quickSort;\nfunction SourceMapConsumer(aSourceMap, aSourceMapURL) {\n    var sourceMap = aSourceMap;\n    if (typeof aSourceMap === 'string') {\n        sourceMap = util.parseSourceMapInput(aSourceMap);\n    }\n    return sourceMap.sections != null ? new IndexedSourceMapConsumer(sourceMap, aSourceMapURL) : new BasicSourceMapConsumer(sourceMap, aSourceMapURL);\n}\nSourceMapConsumer.fromSourceMap = function(aSourceMap, aSourceMapURL) {\n    return BasicSourceMapConsumer.fromSourceMap(aSourceMap, aSourceMapURL);\n};\n/**\n * The version of the source mapping spec that we are consuming.\n */ SourceMapConsumer.prototype._version = 3;\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n        if (!this.__generatedMappings) {\n            this._parseMappings(this._mappings, this.sourceRoot);\n        }\n        return this.__generatedMappings;\n    }\n});\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n        if (!this.__originalMappings) {\n            this._parseMappings(this._mappings, this.sourceRoot);\n        }\n        return this.__originalMappings;\n    }\n});\nSourceMapConsumer.prototype._charIsMappingSeparator = function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n};\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */ SourceMapConsumer.prototype._parseMappings = function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n};\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */ SourceMapConsumer.prototype.eachMapping = function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n    var mappings;\n    switch(order){\n        case SourceMapConsumer.GENERATED_ORDER:\n            mappings = this._generatedMappings;\n            break;\n        case SourceMapConsumer.ORIGINAL_ORDER:\n            mappings = this._originalMappings;\n            break;\n        default:\n            throw new Error(\"Unknown order of iteration.\");\n    }\n    var sourceRoot = this.sourceRoot;\n    var boundCallback = aCallback.bind(context);\n    var names = this._names;\n    var sources = this._sources;\n    var sourceMapURL = this._sourceMapURL;\n    for(var i = 0, n = mappings.length; i < n; i++){\n        var mapping = mappings[i];\n        var source = mapping.source === null ? null : sources.at(mapping.source);\n        if (source !== null) {\n            source = util.computeSourceURL(sourceRoot, source, sourceMapURL);\n        }\n        boundCallback({\n            source: source,\n            generatedLine: mapping.generatedLine,\n            generatedColumn: mapping.generatedColumn,\n            originalLine: mapping.originalLine,\n            originalColumn: mapping.originalColumn,\n            name: mapping.name === null ? null : names.at(mapping.name)\n        });\n    }\n};\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number is 1-based.\n *   - column: Optional. the column number in the original source.\n *    The column number is 0-based.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *    line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *    The column number is 0-based.\n */ SourceMapConsumer.prototype.allGeneratedPositionsFor = function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n        source: util.getArg(aArgs, 'source'),\n        originalLine: line,\n        originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n    needle.source = this._findSourceIndex(needle.source);\n    if (needle.source < 0) {\n        return [];\n    }\n    var mappings = [];\n    var index = this._findMapping(needle, this._originalMappings, \"originalLine\", \"originalColumn\", util.compareByOriginalPositions, binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n        var mapping = this._originalMappings[index];\n        if (aArgs.column === undefined) {\n            var originalLine = mapping.originalLine;\n            // Iterate until either we run out of mappings, or we run into\n            // a mapping for a different line than the one we found. Since\n            // mappings are sorted, this is guaranteed to find all mappings for\n            // the line we found.\n            while(mapping && mapping.originalLine === originalLine){\n                mappings.push({\n                    line: util.getArg(mapping, 'generatedLine', null),\n                    column: util.getArg(mapping, 'generatedColumn', null),\n                    lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n                });\n                mapping = this._originalMappings[++index];\n            }\n        } else {\n            var originalColumn = mapping.originalColumn;\n            // Iterate until either we run out of mappings, or we run into\n            // a mapping for a different line than the one we were searching for.\n            // Since mappings are sorted, this is guaranteed to find all mappings for\n            // the line we are searching for.\n            while(mapping && mapping.originalLine === line && mapping.originalColumn == originalColumn){\n                mappings.push({\n                    line: util.getArg(mapping, 'generatedLine', null),\n                    column: util.getArg(mapping, 'generatedColumn', null),\n                    lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n                });\n                mapping = this._originalMappings[++index];\n            }\n        }\n    }\n    return mappings;\n};\nexports.SourceMapConsumer = SourceMapConsumer;\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The first parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */ function BasicSourceMapConsumer(aSourceMap, aSourceMapURL) {\n    var sourceMap = aSourceMap;\n    if (typeof aSourceMap === 'string') {\n        sourceMap = util.parseSourceMapInput(aSourceMap);\n    }\n    var version = util.getArg(sourceMap, 'version');\n    var sources = util.getArg(sourceMap, 'sources');\n    // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n    // requires the array) to play nice here.\n    var names = util.getArg(sourceMap, 'names', []);\n    var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n    var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n    var mappings = util.getArg(sourceMap, 'mappings');\n    var file = util.getArg(sourceMap, 'file', null);\n    // Once again, Sass deviates from the spec and supplies the version as a\n    // string rather than a number, so we use loose equality checking here.\n    if (version != this._version) {\n        throw new Error('Unsupported version: ' + version);\n    }\n    if (sourceRoot) {\n        sourceRoot = util.normalize(sourceRoot);\n    }\n    sources = sources.map(String)// Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)// Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function(source) {\n        return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source) ? util.relative(sourceRoot, source) : source;\n    });\n    // Pass `true` below to allow duplicate names and sources. While source maps\n    // are intended to be compressed and deduplicated, the TypeScript compiler\n    // sometimes generates source maps with duplicates in them. See Github issue\n    // #72 and bugzil.la/889492.\n    this._names = ArraySet.fromArray(names.map(String), true);\n    this._sources = ArraySet.fromArray(sources, true);\n    this._absoluteSources = this._sources.toArray().map(function(s) {\n        return util.computeSourceURL(sourceRoot, s, aSourceMapURL);\n    });\n    this.sourceRoot = sourceRoot;\n    this.sourcesContent = sourcesContent;\n    this._mappings = mappings;\n    this._sourceMapURL = aSourceMapURL;\n    this.file = file;\n}\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n/**\n * Utility function to find the index of a source.  Returns -1 if not\n * found.\n */ BasicSourceMapConsumer.prototype._findSourceIndex = function(aSource) {\n    var relativeSource = aSource;\n    if (this.sourceRoot != null) {\n        relativeSource = util.relative(this.sourceRoot, relativeSource);\n    }\n    if (this._sources.has(relativeSource)) {\n        return this._sources.indexOf(relativeSource);\n    }\n    // Maybe aSource is an absolute URL as returned by |sources|.  In\n    // this case we can't simply undo the transform.\n    var i;\n    for(i = 0; i < this._absoluteSources.length; ++i){\n        if (this._absoluteSources[i] == aSource) {\n            return i;\n        }\n    }\n    return -1;\n};\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @param String aSourceMapURL\n *        The URL at which the source map can be found (optional)\n * @returns BasicSourceMapConsumer\n */ BasicSourceMapConsumer.fromSourceMap = function SourceMapConsumer_fromSourceMap(aSourceMap, aSourceMapURL) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(), smc.sourceRoot);\n    smc.file = aSourceMap._file;\n    smc._sourceMapURL = aSourceMapURL;\n    smc._absoluteSources = smc._sources.toArray().map(function(s) {\n        return util.computeSourceURL(smc.sourceRoot, s, aSourceMapURL);\n    });\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n    for(var i = 0, length = generatedMappings.length; i < length; i++){\n        var srcMapping = generatedMappings[i];\n        var destMapping = new Mapping;\n        destMapping.generatedLine = srcMapping.generatedLine;\n        destMapping.generatedColumn = srcMapping.generatedColumn;\n        if (srcMapping.source) {\n            destMapping.source = sources.indexOf(srcMapping.source);\n            destMapping.originalLine = srcMapping.originalLine;\n            destMapping.originalColumn = srcMapping.originalColumn;\n            if (srcMapping.name) {\n                destMapping.name = names.indexOf(srcMapping.name);\n            }\n            destOriginalMappings.push(destMapping);\n        }\n        destGeneratedMappings.push(destMapping);\n    }\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n    return smc;\n};\n/**\n * The version of the source mapping spec that we are consuming.\n */ BasicSourceMapConsumer.prototype._version = 3;\n/**\n * The list of original sources.\n */ Object.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n    get: function() {\n        return this._absoluteSources.slice();\n    }\n});\n/**\n * Provide the JIT with a nice shape / hidden class.\n */ function Mapping() {\n    this.generatedLine = 0;\n    this.generatedColumn = 0;\n    this.source = null;\n    this.originalLine = null;\n    this.originalColumn = null;\n    this.name = null;\n}\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */ const compareGenerated = util.compareByGeneratedPositionsDeflatedNoLine;\nfunction sortGenerated(array, start) {\n    let l = array.length;\n    let n = array.length - start;\n    if (n <= 1) {\n        return;\n    } else if (n == 2) {\n        let a = array[start];\n        let b = array[start + 1];\n        if (compareGenerated(a, b) > 0) {\n            array[start] = b;\n            array[start + 1] = a;\n        }\n    } else if (n < 20) {\n        for(let i = start; i < l; i++){\n            for(let j = i; j > start; j--){\n                let a = array[j - 1];\n                let b = array[j];\n                if (compareGenerated(a, b) <= 0) {\n                    break;\n                }\n                array[j - 1] = b;\n                array[j] = a;\n            }\n        }\n    } else {\n        quickSort(array, compareGenerated, start);\n    }\n}\nBasicSourceMapConsumer.prototype._parseMappings = function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n    let subarrayStart = 0;\n    while(index < length){\n        if (aStr.charAt(index) === ';') {\n            generatedLine++;\n            index++;\n            previousGeneratedColumn = 0;\n            sortGenerated(generatedMappings, subarrayStart);\n            subarrayStart = generatedMappings.length;\n        } else if (aStr.charAt(index) === ',') {\n            index++;\n        } else {\n            mapping = new Mapping();\n            mapping.generatedLine = generatedLine;\n            for(end = index; end < length; end++){\n                if (this._charIsMappingSeparator(aStr, end)) {\n                    break;\n                }\n            }\n            str = aStr.slice(index, end);\n            segment = [];\n            while(index < end){\n                base64VLQ.decode(aStr, index, temp);\n                value = temp.value;\n                index = temp.rest;\n                segment.push(value);\n            }\n            if (segment.length === 2) {\n                throw new Error('Found a source, but no line and column');\n            }\n            if (segment.length === 3) {\n                throw new Error('Found a source and line, but no column');\n            }\n            // Generated column.\n            mapping.generatedColumn = previousGeneratedColumn + segment[0];\n            previousGeneratedColumn = mapping.generatedColumn;\n            if (segment.length > 1) {\n                // Original source.\n                mapping.source = previousSource + segment[1];\n                previousSource += segment[1];\n                // Original line.\n                mapping.originalLine = previousOriginalLine + segment[2];\n                previousOriginalLine = mapping.originalLine;\n                // Lines are stored 0-based\n                mapping.originalLine += 1;\n                // Original column.\n                mapping.originalColumn = previousOriginalColumn + segment[3];\n                previousOriginalColumn = mapping.originalColumn;\n                if (segment.length > 4) {\n                    // Original name.\n                    mapping.name = previousName + segment[4];\n                    previousName += segment[4];\n                }\n            }\n            generatedMappings.push(mapping);\n            if (typeof mapping.originalLine === 'number') {\n                let currentSource = mapping.source;\n                while(originalMappings.length <= currentSource){\n                    originalMappings.push(null);\n                }\n                if (originalMappings[currentSource] === null) {\n                    originalMappings[currentSource] = [];\n                }\n                originalMappings[currentSource].push(mapping);\n            }\n        }\n    }\n    sortGenerated(generatedMappings, subarrayStart);\n    this.__generatedMappings = generatedMappings;\n    for(var i = 0; i < originalMappings.length; i++){\n        if (originalMappings[i] != null) {\n            quickSort(originalMappings[i], util.compareByOriginalPositionsNoSource);\n        }\n    }\n    this.__originalMappings = [].concat(...originalMappings);\n};\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */ BasicSourceMapConsumer.prototype._findMapping = function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName, aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n    if (aNeedle[aLineName] <= 0) {\n        throw new TypeError('Line must be greater than or equal to 1, got ' + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n        throw new TypeError('Column must be greater than or equal to 0, got ' + aNeedle[aColumnName]);\n    }\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n};\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */ BasicSourceMapConsumer.prototype.computeColumnSpans = function SourceMapConsumer_computeColumnSpans() {\n    for(var index = 0; index < this._generatedMappings.length; ++index){\n        var mapping = this._generatedMappings[index];\n        // Mappings do not contain a field for the last generated columnt. We\n        // can come up with an optimistic estimate, however, by assuming that\n        // mappings are contiguous (i.e. given two consecutive mappings, the\n        // first mapping ends where the second one starts).\n        if (index + 1 < this._generatedMappings.length) {\n            var nextMapping = this._generatedMappings[index + 1];\n            if (mapping.generatedLine === nextMapping.generatedLine) {\n                mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n                continue;\n            }\n        }\n        // The last mapping for each line spans the entire line.\n        mapping.lastGeneratedColumn = Infinity;\n    }\n};\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */ BasicSourceMapConsumer.prototype.originalPositionFor = function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n        generatedLine: util.getArg(aArgs, 'line'),\n        generatedColumn: util.getArg(aArgs, 'column')\n    };\n    var index = this._findMapping(needle, this._generatedMappings, \"generatedLine\", \"generatedColumn\", util.compareByGeneratedPositionsDeflated, util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND));\n    if (index >= 0) {\n        var mapping = this._generatedMappings[index];\n        if (mapping.generatedLine === needle.generatedLine) {\n            var source = util.getArg(mapping, 'source', null);\n            if (source !== null) {\n                source = this._sources.at(source);\n                source = util.computeSourceURL(this.sourceRoot, source, this._sourceMapURL);\n            }\n            var name = util.getArg(mapping, 'name', null);\n            if (name !== null) {\n                name = this._names.at(name);\n            }\n            return {\n                source: source,\n                line: util.getArg(mapping, 'originalLine', null),\n                column: util.getArg(mapping, 'originalColumn', null),\n                name: name\n            };\n        }\n    }\n    return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n    };\n};\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */ BasicSourceMapConsumer.prototype.hasContentsOfAllSources = function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n        return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() && !this.sourcesContent.some(function(sc) {\n        return sc == null;\n    });\n};\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */ BasicSourceMapConsumer.prototype.sourceContentFor = function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n        return null;\n    }\n    var index = this._findSourceIndex(aSource);\n    if (index >= 0) {\n        return this.sourcesContent[index];\n    }\n    var relativeSource = aSource;\n    if (this.sourceRoot != null) {\n        relativeSource = util.relative(this.sourceRoot, relativeSource);\n    }\n    var url;\n    if (this.sourceRoot != null && (url = util.urlParse(this.sourceRoot))) {\n        // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n        // many users. We can help them out when they expect file:// URIs to\n        // behave like it would if they were running a local HTTP server. See\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n        var fileUriAbsPath = relativeSource.replace(/^file:\\/\\//, \"\");\n        if (url.scheme == \"file\" && this._sources.has(fileUriAbsPath)) {\n            return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)];\n        }\n        if ((!url.path || url.path == \"/\") && this._sources.has(\"/\" + relativeSource)) {\n            return this.sourcesContent[this._sources.indexOf(\"/\" + relativeSource)];\n        }\n    }\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n        return null;\n    } else {\n        throw new Error('\"' + relativeSource + '\" is not in the SourceMap.');\n    }\n};\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */ BasicSourceMapConsumer.prototype.generatedPositionFor = function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    source = this._findSourceIndex(source);\n    if (source < 0) {\n        return {\n            line: null,\n            column: null,\n            lastColumn: null\n        };\n    }\n    var needle = {\n        source: source,\n        originalLine: util.getArg(aArgs, 'line'),\n        originalColumn: util.getArg(aArgs, 'column')\n    };\n    var index = this._findMapping(needle, this._originalMappings, \"originalLine\", \"originalColumn\", util.compareByOriginalPositions, util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND));\n    if (index >= 0) {\n        var mapping = this._originalMappings[index];\n        if (mapping.source === needle.source) {\n            return {\n                line: util.getArg(mapping, 'generatedLine', null),\n                column: util.getArg(mapping, 'generatedColumn', null),\n                lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n            };\n        }\n    }\n    return {\n        line: null,\n        column: null,\n        lastColumn: null\n    };\n};\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The first parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */ function IndexedSourceMapConsumer(aSourceMap, aSourceMapURL) {\n    var sourceMap = aSourceMap;\n    if (typeof aSourceMap === 'string') {\n        sourceMap = util.parseSourceMapInput(aSourceMap);\n    }\n    var version = util.getArg(sourceMap, 'version');\n    var sections = util.getArg(sourceMap, 'sections');\n    if (version != this._version) {\n        throw new Error('Unsupported version: ' + version);\n    }\n    this._sources = new ArraySet();\n    this._names = new ArraySet();\n    var lastOffset = {\n        line: -1,\n        column: 0\n    };\n    this._sections = sections.map(function(s) {\n        if (s.url) {\n            // The url field will require support for asynchronicity.\n            // See https://github.com/mozilla/source-map/issues/16\n            throw new Error('Support for url field in sections not implemented.');\n        }\n        var offset = util.getArg(s, 'offset');\n        var offsetLine = util.getArg(offset, 'line');\n        var offsetColumn = util.getArg(offset, 'column');\n        if (offsetLine < lastOffset.line || offsetLine === lastOffset.line && offsetColumn < lastOffset.column) {\n            throw new Error('Section offsets must be ordered and non-overlapping.');\n        }\n        lastOffset = offset;\n        return {\n            generatedOffset: {\n                // The offset fields are 0-based, but we use 1-based indices when\n                // encoding/decoding from VLQ.\n                generatedLine: offsetLine + 1,\n                generatedColumn: offsetColumn + 1\n            },\n            consumer: new SourceMapConsumer(util.getArg(s, 'map'), aSourceMapURL)\n        };\n    });\n}\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n/**\n * The version of the source mapping spec that we are consuming.\n */ IndexedSourceMapConsumer.prototype._version = 3;\n/**\n * The list of original sources.\n */ Object.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n    get: function() {\n        var sources = [];\n        for(var i = 0; i < this._sections.length; i++){\n            for(var j = 0; j < this._sections[i].consumer.sources.length; j++){\n                sources.push(this._sections[i].consumer.sources[j]);\n            }\n        }\n        return sources;\n    }\n});\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */ IndexedSourceMapConsumer.prototype.originalPositionFor = function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n        generatedLine: util.getArg(aArgs, 'line'),\n        generatedColumn: util.getArg(aArgs, 'column')\n    };\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections, function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n            return cmp;\n        }\n        return needle.generatedColumn - section.generatedOffset.generatedColumn;\n    });\n    var section = this._sections[sectionIndex];\n    if (!section) {\n        return {\n            source: null,\n            line: null,\n            column: null,\n            name: null\n        };\n    }\n    return section.consumer.originalPositionFor({\n        line: needle.generatedLine - (section.generatedOffset.generatedLine - 1),\n        column: needle.generatedColumn - (section.generatedOffset.generatedLine === needle.generatedLine ? section.generatedOffset.generatedColumn - 1 : 0),\n        bias: aArgs.bias\n    });\n};\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */ IndexedSourceMapConsumer.prototype.hasContentsOfAllSources = function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function(s) {\n        return s.consumer.hasContentsOfAllSources();\n    });\n};\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */ IndexedSourceMapConsumer.prototype.sourceContentFor = function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for(var i = 0; i < this._sections.length; i++){\n        var section = this._sections[i];\n        var content = section.consumer.sourceContentFor(aSource, true);\n        if (content || content === '') {\n            return content;\n        }\n    }\n    if (nullOnMissing) {\n        return null;\n    } else {\n        throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n};\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based. \n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */ IndexedSourceMapConsumer.prototype.generatedPositionFor = function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for(var i = 0; i < this._sections.length; i++){\n        var section = this._sections[i];\n        // Only consider this section if the requested source is in the list of\n        // sources of the consumer.\n        if (section.consumer._findSourceIndex(util.getArg(aArgs, 'source')) === -1) {\n            continue;\n        }\n        var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n        if (generatedPosition) {\n            var ret = {\n                line: generatedPosition.line + (section.generatedOffset.generatedLine - 1),\n                column: generatedPosition.column + (section.generatedOffset.generatedLine === generatedPosition.line ? section.generatedOffset.generatedColumn - 1 : 0)\n            };\n            return ret;\n        }\n    }\n    return {\n        line: null,\n        column: null\n    };\n};\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */ IndexedSourceMapConsumer.prototype._parseMappings = function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for(var i = 0; i < this._sections.length; i++){\n        var section = this._sections[i];\n        var sectionMappings = section.consumer._generatedMappings;\n        for(var j = 0; j < sectionMappings.length; j++){\n            var mapping = sectionMappings[j];\n            var source = section.consumer._sources.at(mapping.source);\n            if (source !== null) {\n                source = util.computeSourceURL(section.consumer.sourceRoot, source, this._sourceMapURL);\n            }\n            this._sources.add(source);\n            source = this._sources.indexOf(source);\n            var name = null;\n            if (mapping.name) {\n                name = section.consumer._names.at(mapping.name);\n                this._names.add(name);\n                name = this._names.indexOf(name);\n            }\n            // The mappings coming from the consumer for the section have\n            // generated positions relative to the start of the section, so we\n            // need to offset them to be relative to the start of the concatenated\n            // generated file.\n            var adjustedMapping = {\n                source: source,\n                generatedLine: mapping.generatedLine + (section.generatedOffset.generatedLine - 1),\n                generatedColumn: mapping.generatedColumn + (section.generatedOffset.generatedLine === mapping.generatedLine ? section.generatedOffset.generatedColumn - 1 : 0),\n                originalLine: mapping.originalLine,\n                originalColumn: mapping.originalColumn,\n                name: name\n            };\n            this.__generatedMappings.push(adjustedMapping);\n            if (typeof adjustedMapping.originalLine === 'number') {\n                this.__originalMappings.push(adjustedMapping);\n            }\n        }\n    }\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n};\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n}),\n\"[project]/node_modules/source-map-js/lib/source-node.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/* -*- Mode: js; js-indent-level: 2; -*- */ /*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ var SourceMapGenerator = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/source-map-generator.js [postcss] (ecmascript)\").SourceMapGenerator;\nvar util = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/util.js [postcss] (ecmascript)\");\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */ function SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n    this.children = [];\n    this.sourceContents = {};\n    this.line = aLine == null ? null : aLine;\n    this.column = aColumn == null ? null : aColumn;\n    this.source = aSource == null ? null : aSource;\n    this.name = aName == null ? null : aName;\n    this[isSourceNode] = true;\n    if (aChunks != null) this.add(aChunks);\n}\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */ SourceNode.fromStringWithSourceMap = function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n        var lineContents = getNextLine();\n        // The last line of a file might not have a newline.\n        var newLine = getNextLine() || \"\";\n        return lineContents + newLine;\n        //TURBOPACK unreachable\n        ;\n        function getNextLine() {\n            return remainingLinesIndex < remainingLines.length ? remainingLines[remainingLinesIndex++] : undefined;\n        }\n    };\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n    aSourceMapConsumer.eachMapping(function(mapping) {\n        if (lastMapping !== null) {\n            // We add the code from \"lastMapping\" to \"mapping\":\n            // First check if there is a new line in between.\n            if (lastGeneratedLine < mapping.generatedLine) {\n                // Associate first line with \"lastMapping\"\n                addMappingWithCode(lastMapping, shiftNextLine());\n                lastGeneratedLine++;\n                lastGeneratedColumn = 0;\n            // The remaining code is added without mapping\n            } else {\n                // There is no new line in between.\n                // Associate the code between \"lastGeneratedColumn\" and\n                // \"mapping.generatedColumn\" with \"lastMapping\"\n                var nextLine = remainingLines[remainingLinesIndex] || '';\n                var code = nextLine.substr(0, mapping.generatedColumn - lastGeneratedColumn);\n                remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn - lastGeneratedColumn);\n                lastGeneratedColumn = mapping.generatedColumn;\n                addMappingWithCode(lastMapping, code);\n                // No more remaining code, continue\n                lastMapping = mapping;\n                return;\n            }\n        }\n        // We add the generated code until the first mapping\n        // to the SourceNode without any mapping.\n        // Each line is added as separate string.\n        while(lastGeneratedLine < mapping.generatedLine){\n            node.add(shiftNextLine());\n            lastGeneratedLine++;\n        }\n        if (lastGeneratedColumn < mapping.generatedColumn) {\n            var nextLine = remainingLines[remainingLinesIndex] || '';\n            node.add(nextLine.substr(0, mapping.generatedColumn));\n            remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n            lastGeneratedColumn = mapping.generatedColumn;\n        }\n        lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n        if (lastMapping) {\n            // Associate the remaining code in the current line with \"lastMapping\"\n            addMappingWithCode(lastMapping, shiftNextLine());\n        }\n        // and add the remaining lines without any mapping\n        node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function(sourceFile) {\n        var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n        if (content != null) {\n            if (aRelativePath != null) {\n                sourceFile = util.join(aRelativePath, sourceFile);\n            }\n            node.setSourceContent(sourceFile, content);\n        }\n    });\n    return node;\n    //TURBOPACK unreachable\n    ;\n    function addMappingWithCode(mapping, code) {\n        if (mapping === null || mapping.source === undefined) {\n            node.add(code);\n        } else {\n            var source = aRelativePath ? util.join(aRelativePath, mapping.source) : mapping.source;\n            node.add(new SourceNode(mapping.originalLine, mapping.originalColumn, source, code, mapping.name));\n        }\n    }\n};\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */ SourceNode.prototype.add = function SourceNode_add(aChunk) {\n    if (Array.isArray(aChunk)) {\n        aChunk.forEach(function(chunk) {\n            this.add(chunk);\n        }, this);\n    } else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n        if (aChunk) {\n            this.children.push(aChunk);\n        }\n    } else {\n        throw new TypeError(\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk);\n    }\n    return this;\n};\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */ SourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n    if (Array.isArray(aChunk)) {\n        for(var i = aChunk.length - 1; i >= 0; i--){\n            this.prepend(aChunk[i]);\n        }\n    } else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n        this.children.unshift(aChunk);\n    } else {\n        throw new TypeError(\"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk);\n    }\n    return this;\n};\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */ SourceNode.prototype.walk = function SourceNode_walk(aFn) {\n    var chunk;\n    for(var i = 0, len = this.children.length; i < len; i++){\n        chunk = this.children[i];\n        if (chunk[isSourceNode]) {\n            chunk.walk(aFn);\n        } else {\n            if (chunk !== '') {\n                aFn(chunk, {\n                    source: this.source,\n                    line: this.line,\n                    column: this.column,\n                    name: this.name\n                });\n            }\n        }\n    }\n};\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */ SourceNode.prototype.join = function SourceNode_join(aSep) {\n    var newChildren;\n    var i;\n    var len = this.children.length;\n    if (len > 0) {\n        newChildren = [];\n        for(i = 0; i < len - 1; i++){\n            newChildren.push(this.children[i]);\n            newChildren.push(aSep);\n        }\n        newChildren.push(this.children[i]);\n        this.children = newChildren;\n    }\n    return this;\n};\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */ SourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n    var lastChild = this.children[this.children.length - 1];\n    if (lastChild[isSourceNode]) {\n        lastChild.replaceRight(aPattern, aReplacement);\n    } else if (typeof lastChild === 'string') {\n        this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n    } else {\n        this.children.push(''.replace(aPattern, aReplacement));\n    }\n    return this;\n};\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */ SourceNode.prototype.setSourceContent = function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n};\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */ SourceNode.prototype.walkSourceContents = function SourceNode_walkSourceContents(aFn) {\n    for(var i = 0, len = this.children.length; i < len; i++){\n        if (this.children[i][isSourceNode]) {\n            this.children[i].walkSourceContents(aFn);\n        }\n    }\n    var sources = Object.keys(this.sourceContents);\n    for(var i = 0, len = sources.length; i < len; i++){\n        aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n};\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */ SourceNode.prototype.toString = function SourceNode_toString() {\n    var str = \"\";\n    this.walk(function(chunk) {\n        str += chunk;\n    });\n    return str;\n};\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */ SourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n    var generated = {\n        code: \"\",\n        line: 1,\n        column: 0\n    };\n    var map = new SourceMapGenerator(aArgs);\n    var sourceMappingActive = false;\n    var lastOriginalSource = null;\n    var lastOriginalLine = null;\n    var lastOriginalColumn = null;\n    var lastOriginalName = null;\n    this.walk(function(chunk, original) {\n        generated.code += chunk;\n        if (original.source !== null && original.line !== null && original.column !== null) {\n            if (lastOriginalSource !== original.source || lastOriginalLine !== original.line || lastOriginalColumn !== original.column || lastOriginalName !== original.name) {\n                map.addMapping({\n                    source: original.source,\n                    original: {\n                        line: original.line,\n                        column: original.column\n                    },\n                    generated: {\n                        line: generated.line,\n                        column: generated.column\n                    },\n                    name: original.name\n                });\n            }\n            lastOriginalSource = original.source;\n            lastOriginalLine = original.line;\n            lastOriginalColumn = original.column;\n            lastOriginalName = original.name;\n            sourceMappingActive = true;\n        } else if (sourceMappingActive) {\n            map.addMapping({\n                generated: {\n                    line: generated.line,\n                    column: generated.column\n                }\n            });\n            lastOriginalSource = null;\n            sourceMappingActive = false;\n        }\n        for(var idx = 0, length = chunk.length; idx < length; idx++){\n            if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n                generated.line++;\n                generated.column = 0;\n                // Mappings end at eol\n                if (idx + 1 === length) {\n                    lastOriginalSource = null;\n                    sourceMappingActive = false;\n                } else if (sourceMappingActive) {\n                    map.addMapping({\n                        source: original.source,\n                        original: {\n                            line: original.line,\n                            column: original.column\n                        },\n                        generated: {\n                            line: generated.line,\n                            column: generated.column\n                        },\n                        name: original.name\n                    });\n                }\n            } else {\n                generated.column++;\n            }\n        }\n    });\n    this.walkSourceContents(function(sourceFile, sourceContent) {\n        map.setSourceContent(sourceFile, sourceContent);\n    });\n    return {\n        code: generated.code,\n        map: map\n    };\n};\nexports.SourceNode = SourceNode;\n}),\n\"[project]/node_modules/source-map-js/source-map.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */ exports.SourceMapGenerator = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/source-map-generator.js [postcss] (ecmascript)\").SourceMapGenerator;\nexports.SourceMapConsumer = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/source-map-consumer.js [postcss] (ecmascript)\").SourceMapConsumer;\nexports.SourceNode = __turbopack_context__.r(\"[project]/node_modules/source-map-js/lib/source-node.js [postcss] (ecmascript)\").SourceNode;\n}),\n\"[project]/node_modules/postcss/lib/previous-map.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet { existsSync, readFileSync } = __turbopack_context__.r(\"[externals]/fs [external] (fs, cjs)\");\nlet { dirname, join } = __turbopack_context__.r(\"[externals]/path [external] (path, cjs)\");\nlet { SourceMapConsumer, SourceMapGenerator } = __turbopack_context__.r(\"[project]/node_modules/source-map-js/source-map.js [postcss] (ecmascript)\");\nfunction fromBase64(str) {\n    if (\"TURBOPACK compile-time truthy\", 1) {\n        return Buffer.from(str, 'base64').toString();\n    } else //TURBOPACK unreachable\n    ;\n}\nclass PreviousMap {\n    constructor(css, opts){\n        if (opts.map === false) return;\n        this.loadAnnotation(css);\n        this.inline = this.startWith(this.annotation, 'data:');\n        let prev = opts.map ? opts.map.prev : undefined;\n        let text = this.loadMap(opts.from, prev);\n        if (!this.mapFile && opts.from) {\n            this.mapFile = opts.from;\n        }\n        if (this.mapFile) this.root = dirname(this.mapFile);\n        if (text) this.text = text;\n    }\n    consumer() {\n        if (!this.consumerCache) {\n            this.consumerCache = new SourceMapConsumer(this.text);\n        }\n        return this.consumerCache;\n    }\n    decodeInline(text) {\n        let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/;\n        let baseUri = /^data:application\\/json;base64,/;\n        let charsetUri = /^data:application\\/json;charset=utf-?8,/;\n        let uri = /^data:application\\/json,/;\n        let uriMatch = text.match(charsetUri) || text.match(uri);\n        if (uriMatch) {\n            return decodeURIComponent(text.substr(uriMatch[0].length));\n        }\n        let baseUriMatch = text.match(baseCharsetUri) || text.match(baseUri);\n        if (baseUriMatch) {\n            return fromBase64(text.substr(baseUriMatch[0].length));\n        }\n        let encoding = text.match(/data:application\\/json;([^,]+),/)[1];\n        throw new Error('Unsupported source map encoding ' + encoding);\n    }\n    getAnnotationURL(sourceMapString) {\n        return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, '').trim();\n    }\n    isMap(map) {\n        if (typeof map !== 'object') return false;\n        return typeof map.mappings === 'string' || typeof map._mappings === 'string' || Array.isArray(map.sections);\n    }\n    loadAnnotation(css) {\n        let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/g);\n        if (!comments) return;\n        // sourceMappingURLs from comments, strings, etc.\n        let start = css.lastIndexOf(comments.pop());\n        let end = css.indexOf('*/', start);\n        if (start > -1 && end > -1) {\n            // Locate the last sourceMappingURL to avoid pickin\n            this.annotation = this.getAnnotationURL(css.substring(start, end));\n        }\n    }\n    loadFile(path) {\n        this.root = dirname(path);\n        if (existsSync(path)) {\n            this.mapFile = path;\n            return readFileSync(path, 'utf-8').toString().trim();\n        }\n    }\n    loadMap(file, prev) {\n        if (prev === false) return false;\n        if (prev) {\n            if (typeof prev === 'string') {\n                return prev;\n            } else if (typeof prev === 'function') {\n                let prevPath = prev(file);\n                if (prevPath) {\n                    let map = this.loadFile(prevPath);\n                    if (!map) {\n                        throw new Error('Unable to load previous source map: ' + prevPath.toString());\n                    }\n                    return map;\n                }\n            } else if (prev instanceof SourceMapConsumer) {\n                return SourceMapGenerator.fromSourceMap(prev).toString();\n            } else if (prev instanceof SourceMapGenerator) {\n                return prev.toString();\n            } else if (this.isMap(prev)) {\n                return JSON.stringify(prev);\n            } else {\n                throw new Error('Unsupported previous source map format: ' + prev.toString());\n            }\n        } else if (this.inline) {\n            return this.decodeInline(this.annotation);\n        } else if (this.annotation) {\n            let map = this.annotation;\n            if (file) map = join(dirname(file), map);\n            return this.loadFile(map);\n        }\n    }\n    startWith(string, start) {\n        if (!string) return false;\n        return string.substr(0, start.length) === start;\n    }\n    withContent() {\n        return !!(this.consumer().sourcesContent && this.consumer().sourcesContent.length > 0);\n    }\n}\nmodule.exports = PreviousMap;\nPreviousMap.default = PreviousMap;\n}),\n\"[project]/node_modules/postcss/lib/input.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet { nanoid } = __turbopack_context__.r(\"[project]/node_modules/nanoid/non-secure/index.cjs [postcss] (ecmascript)\");\nlet { isAbsolute, resolve } = __turbopack_context__.r(\"[externals]/path [external] (path, cjs)\");\nlet { SourceMapConsumer, SourceMapGenerator } = __turbopack_context__.r(\"[project]/node_modules/source-map-js/source-map.js [postcss] (ecmascript)\");\nlet { fileURLToPath, pathToFileURL } = __turbopack_context__.r(\"[externals]/url [external] (url, cjs)\");\nlet CssSyntaxError = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/css-syntax-error.js [postcss] (ecmascript)\");\nlet PreviousMap = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/previous-map.js [postcss] (ecmascript)\");\nlet terminalHighlight = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/terminal-highlight.js [postcss] (ecmascript)\");\nlet lineToIndexCache = Symbol('lineToIndexCache');\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\nlet pathAvailable = Boolean(resolve && isAbsolute);\nfunction getLineToIndex(input) {\n    if (input[lineToIndexCache]) return input[lineToIndexCache];\n    let lines = input.css.split('\\n');\n    let lineToIndex = new Array(lines.length);\n    let prevIndex = 0;\n    for(let i = 0, l = lines.length; i < l; i++){\n        lineToIndex[i] = prevIndex;\n        prevIndex += lines[i].length + 1;\n    }\n    input[lineToIndexCache] = lineToIndex;\n    return lineToIndex;\n}\nclass Input {\n    get from() {\n        return this.file || this.id;\n    }\n    constructor(css, opts = {}){\n        if (css === null || typeof css === 'undefined' || typeof css === 'object' && !css.toString) {\n            throw new Error(`PostCSS received ${css} instead of CSS string`);\n        }\n        this.css = css.toString();\n        if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n            this.hasBOM = true;\n            this.css = this.css.slice(1);\n        } else {\n            this.hasBOM = false;\n        }\n        this.document = this.css;\n        if (opts.document) this.document = opts.document.toString();\n        if (opts.from) {\n            if (!pathAvailable || /^\\w+:\\/\\//.test(opts.from) || isAbsolute(opts.from)) {\n                this.file = opts.from;\n            } else {\n                this.file = resolve(opts.from);\n            }\n        }\n        if (pathAvailable && sourceMapAvailable) {\n            let map = new PreviousMap(this.css, opts);\n            if (map.text) {\n                this.map = map;\n                let file = map.consumer().file;\n                if (!this.file && file) this.file = this.mapResolve(file);\n            }\n        }\n        if (!this.file) {\n            this.id = '<input css ' + nanoid(6) + '>';\n        }\n        if (this.map) this.map.file = this.from;\n    }\n    error(message, line, column, opts = {}) {\n        let endColumn, endLine, endOffset, offset, result;\n        if (line && typeof line === 'object') {\n            let start = line;\n            let end = column;\n            if (typeof start.offset === 'number') {\n                offset = start.offset;\n                let pos = this.fromOffset(offset);\n                line = pos.line;\n                column = pos.col;\n            } else {\n                line = start.line;\n                column = start.column;\n                offset = this.fromLineAndColumn(line, column);\n            }\n            if (typeof end.offset === 'number') {\n                endOffset = end.offset;\n                let pos = this.fromOffset(endOffset);\n                endLine = pos.line;\n                endColumn = pos.col;\n            } else {\n                endLine = end.line;\n                endColumn = end.column;\n                endOffset = this.fromLineAndColumn(end.line, end.column);\n            }\n        } else if (!column) {\n            offset = line;\n            let pos = this.fromOffset(offset);\n            line = pos.line;\n            column = pos.col;\n        } else {\n            offset = this.fromLineAndColumn(line, column);\n        }\n        let origin = this.origin(line, column, endLine, endColumn);\n        if (origin) {\n            result = new CssSyntaxError(message, origin.endLine === undefined ? origin.line : {\n                column: origin.column,\n                line: origin.line\n            }, origin.endLine === undefined ? origin.column : {\n                column: origin.endColumn,\n                line: origin.endLine\n            }, origin.source, origin.file, opts.plugin);\n        } else {\n            result = new CssSyntaxError(message, endLine === undefined ? line : {\n                column,\n                line\n            }, endLine === undefined ? column : {\n                column: endColumn,\n                line: endLine\n            }, this.css, this.file, opts.plugin);\n        }\n        result.input = {\n            column,\n            endColumn,\n            endLine,\n            endOffset,\n            line,\n            offset,\n            source: this.css\n        };\n        if (this.file) {\n            if (pathToFileURL) {\n                result.input.url = pathToFileURL(this.file).toString();\n            }\n            result.input.file = this.file;\n        }\n        return result;\n    }\n    fromLineAndColumn(line, column) {\n        let lineToIndex = getLineToIndex(this);\n        let index = lineToIndex[line - 1];\n        return index + column - 1;\n    }\n    fromOffset(offset) {\n        let lineToIndex = getLineToIndex(this);\n        let lastLine = lineToIndex[lineToIndex.length - 1];\n        let min = 0;\n        if (offset >= lastLine) {\n            min = lineToIndex.length - 1;\n        } else {\n            let max = lineToIndex.length - 2;\n            let mid;\n            while(min < max){\n                mid = min + (max - min >> 1);\n                if (offset < lineToIndex[mid]) {\n                    max = mid - 1;\n                } else if (offset >= lineToIndex[mid + 1]) {\n                    min = mid + 1;\n                } else {\n                    min = mid;\n                    break;\n                }\n            }\n        }\n        return {\n            col: offset - lineToIndex[min] + 1,\n            line: min + 1\n        };\n    }\n    mapResolve(file) {\n        if (/^\\w+:\\/\\//.test(file)) {\n            return file;\n        }\n        return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file);\n    }\n    origin(line, column, endLine, endColumn) {\n        if (!this.map) return false;\n        let consumer = this.map.consumer();\n        let from = consumer.originalPositionFor({\n            column,\n            line\n        });\n        if (!from.source) return false;\n        let to;\n        if (typeof endLine === 'number') {\n            to = consumer.originalPositionFor({\n                column: endColumn,\n                line: endLine\n            });\n        }\n        let fromUrl;\n        if (isAbsolute(from.source)) {\n            fromUrl = pathToFileURL(from.source);\n        } else {\n            fromUrl = new URL(from.source, this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile));\n        }\n        let result = {\n            column: from.column,\n            endColumn: to && to.column,\n            endLine: to && to.line,\n            line: from.line,\n            url: fromUrl.toString()\n        };\n        if (fromUrl.protocol === 'file:') {\n            if (fileURLToPath) {\n                result.file = fileURLToPath(fromUrl);\n            } else {\n                /* c8 ignore next 2 */ throw new Error(`file: protocol is not available in this PostCSS build`);\n            }\n        }\n        let source = consumer.sourceContentFor(from.source);\n        if (source) result.source = source;\n        return result;\n    }\n    toJSON() {\n        let json = {};\n        for (let name of [\n            'hasBOM',\n            'css',\n            'file',\n            'id'\n        ]){\n            if (this[name] != null) {\n                json[name] = this[name];\n            }\n        }\n        if (this.map) {\n            json.map = {\n                ...this.map\n            };\n            if (json.map.consumerCache) {\n                json.map.consumerCache = undefined;\n            }\n        }\n        return json;\n    }\n}\nmodule.exports = Input;\nInput.default = Input;\nif (terminalHighlight && terminalHighlight.registerInput) {\n    terminalHighlight.registerInput(Input);\n}\n}),\n\"[project]/node_modules/postcss/lib/root.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nlet LazyResult, Processor;\nclass Root extends Container {\n    constructor(defaults){\n        super(defaults);\n        this.type = 'root';\n        if (!this.nodes) this.nodes = [];\n    }\n    normalize(child, sample, type) {\n        let nodes = super.normalize(child);\n        if (sample) {\n            if (type === 'prepend') {\n                if (this.nodes.length > 1) {\n                    sample.raws.before = this.nodes[1].raws.before;\n                } else {\n                    delete sample.raws.before;\n                }\n            } else if (this.first !== sample) {\n                for (let node of nodes){\n                    node.raws.before = sample.raws.before;\n                }\n            }\n        }\n        return nodes;\n    }\n    removeChild(child, ignore) {\n        let index = this.index(child);\n        if (!ignore && index === 0 && this.nodes.length > 1) {\n            this.nodes[1].raws.before = this.nodes[index].raws.before;\n        }\n        return super.removeChild(child);\n    }\n    toResult(opts = {}) {\n        let lazy = new LazyResult(new Processor(), this, opts);\n        return lazy.stringify();\n    }\n}\nRoot.registerLazyResult = (dependant)=>{\n    LazyResult = dependant;\n};\nRoot.registerProcessor = (dependant)=>{\n    Processor = dependant;\n};\nmodule.exports = Root;\nRoot.default = Root;\nContainer.registerRoot(Root);\n}),\n\"[project]/node_modules/postcss/lib/list.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet list = {\n    comma (string) {\n        return list.split(string, [\n            ','\n        ], true);\n    },\n    space (string) {\n        let spaces = [\n            ' ',\n            '\\n',\n            '\\t'\n        ];\n        return list.split(string, spaces);\n    },\n    split (string, separators, last) {\n        let array = [];\n        let current = '';\n        let split = false;\n        let func = 0;\n        let inQuote = false;\n        let prevQuote = '';\n        let escape = false;\n        for (let letter of string){\n            if (escape) {\n                escape = false;\n            } else if (letter === '\\\\') {\n                escape = true;\n            } else if (inQuote) {\n                if (letter === prevQuote) {\n                    inQuote = false;\n                }\n            } else if (letter === '\"' || letter === \"'\") {\n                inQuote = true;\n                prevQuote = letter;\n            } else if (letter === '(') {\n                func += 1;\n            } else if (letter === ')') {\n                if (func > 0) func -= 1;\n            } else if (func === 0) {\n                if (separators.includes(letter)) split = true;\n            }\n            if (split) {\n                if (current !== '') array.push(current.trim());\n                current = '';\n                split = false;\n            } else {\n                current += letter;\n            }\n        }\n        if (last || current !== '') array.push(current.trim());\n        return array;\n    }\n};\nmodule.exports = list;\nlist.default = list;\n}),\n\"[project]/node_modules/postcss/lib/rule.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nlet list = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/list.js [postcss] (ecmascript)\");\nclass Rule extends Container {\n    get selectors() {\n        return list.comma(this.selector);\n    }\n    set selectors(values) {\n        let match = this.selector ? this.selector.match(/,\\s*/) : null;\n        let sep = match ? match[0] : ',' + this.raw('between', 'beforeOpen');\n        this.selector = values.join(sep);\n    }\n    constructor(defaults){\n        super(defaults);\n        this.type = 'rule';\n        if (!this.nodes) this.nodes = [];\n    }\n}\nmodule.exports = Rule;\nRule.default = Rule;\nContainer.registerRule(Rule);\n}),\n\"[project]/node_modules/postcss/lib/fromJSON.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet AtRule = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/at-rule.js [postcss] (ecmascript)\");\nlet Comment = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/comment.js [postcss] (ecmascript)\");\nlet Declaration = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/declaration.js [postcss] (ecmascript)\");\nlet Input = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/input.js [postcss] (ecmascript)\");\nlet PreviousMap = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/previous-map.js [postcss] (ecmascript)\");\nlet Root = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/root.js [postcss] (ecmascript)\");\nlet Rule = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/rule.js [postcss] (ecmascript)\");\nfunction fromJSON(json, inputs) {\n    if (Array.isArray(json)) return json.map((n)=>fromJSON(n));\n    let { inputs: ownInputs, ...defaults } = json;\n    if (ownInputs) {\n        inputs = [];\n        for (let input of ownInputs){\n            let inputHydrated = {\n                ...input,\n                __proto__: Input.prototype\n            };\n            if (inputHydrated.map) {\n                inputHydrated.map = {\n                    ...inputHydrated.map,\n                    __proto__: PreviousMap.prototype\n                };\n            }\n            inputs.push(inputHydrated);\n        }\n    }\n    if (defaults.nodes) {\n        defaults.nodes = json.nodes.map((n)=>fromJSON(n, inputs));\n    }\n    if (defaults.source) {\n        let { inputId, ...source } = defaults.source;\n        defaults.source = source;\n        if (inputId != null) {\n            defaults.source.input = inputs[inputId];\n        }\n    }\n    if (defaults.type === 'root') {\n        return new Root(defaults);\n    } else if (defaults.type === 'decl') {\n        return new Declaration(defaults);\n    } else if (defaults.type === 'rule') {\n        return new Rule(defaults);\n    } else if (defaults.type === 'comment') {\n        return new Comment(defaults);\n    } else if (defaults.type === 'atrule') {\n        return new AtRule(defaults);\n    } else {\n        throw new Error('Unknown node type: ' + json.type);\n    }\n}\nmodule.exports = fromJSON;\nfromJSON.default = fromJSON;\n}),\n\"[project]/node_modules/postcss/lib/map-generator.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet { dirname, relative, resolve, sep } = __turbopack_context__.r(\"[externals]/path [external] (path, cjs)\");\nlet { SourceMapConsumer, SourceMapGenerator } = __turbopack_context__.r(\"[project]/node_modules/source-map-js/source-map.js [postcss] (ecmascript)\");\nlet { pathToFileURL } = __turbopack_context__.r(\"[externals]/url [external] (url, cjs)\");\nlet Input = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/input.js [postcss] (ecmascript)\");\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator);\nlet pathAvailable = Boolean(dirname && resolve && relative && sep);\nclass MapGenerator {\n    constructor(stringify, root, opts, cssString){\n        this.stringify = stringify;\n        this.mapOpts = opts.map || {};\n        this.root = root;\n        this.opts = opts;\n        this.css = cssString;\n        this.originalCSS = cssString;\n        this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute;\n        this.memoizedFileURLs = new Map();\n        this.memoizedPaths = new Map();\n        this.memoizedURLs = new Map();\n    }\n    addAnnotation() {\n        let content;\n        if (this.isInline()) {\n            content = 'data:application/json;base64,' + this.toBase64(this.map.toString());\n        } else if (typeof this.mapOpts.annotation === 'string') {\n            content = this.mapOpts.annotation;\n        } else if (typeof this.mapOpts.annotation === 'function') {\n            content = this.mapOpts.annotation(this.opts.to, this.root);\n        } else {\n            content = this.outputFile() + '.map';\n        }\n        let eol = '\\n';\n        if (this.css.includes('\\r\\n')) eol = '\\r\\n';\n        this.css += eol + '/*# sourceMappingURL=' + content + ' */';\n    }\n    applyPrevMaps() {\n        for (let prev of this.previous()){\n            let from = this.toUrl(this.path(prev.file));\n            let root = prev.root || dirname(prev.file);\n            let map;\n            if (this.mapOpts.sourcesContent === false) {\n                map = new SourceMapConsumer(prev.text);\n                if (map.sourcesContent) {\n                    map.sourcesContent = null;\n                }\n            } else {\n                map = prev.consumer();\n            }\n            this.map.applySourceMap(map, from, this.toUrl(this.path(root)));\n        }\n    }\n    clearAnnotation() {\n        if (this.mapOpts.annotation === false) return;\n        if (this.root) {\n            let node;\n            for(let i = this.root.nodes.length - 1; i >= 0; i--){\n                node = this.root.nodes[i];\n                if (node.type !== 'comment') continue;\n                if (node.text.startsWith('# sourceMappingURL=')) {\n                    this.root.removeChild(i);\n                }\n            }\n        } else if (this.css) {\n            this.css = this.css.replace(/\\n*\\/\\*#[\\S\\s]*?\\*\\/$/gm, '');\n        }\n    }\n    generate() {\n        this.clearAnnotation();\n        if (pathAvailable && sourceMapAvailable && this.isMap()) {\n            return this.generateMap();\n        } else {\n            let result = '';\n            this.stringify(this.root, (i)=>{\n                result += i;\n            });\n            return [\n                result\n            ];\n        }\n    }\n    generateMap() {\n        if (this.root) {\n            this.generateString();\n        } else if (this.previous().length === 1) {\n            let prev = this.previous()[0].consumer();\n            prev.file = this.outputFile();\n            this.map = SourceMapGenerator.fromSourceMap(prev, {\n                ignoreInvalidMapping: true\n            });\n        } else {\n            this.map = new SourceMapGenerator({\n                file: this.outputFile(),\n                ignoreInvalidMapping: true\n            });\n            this.map.addMapping({\n                generated: {\n                    column: 0,\n                    line: 1\n                },\n                original: {\n                    column: 0,\n                    line: 1\n                },\n                source: this.opts.from ? this.toUrl(this.path(this.opts.from)) : '<no source>'\n            });\n        }\n        if (this.isSourcesContent()) this.setSourcesContent();\n        if (this.root && this.previous().length > 0) this.applyPrevMaps();\n        if (this.isAnnotation()) this.addAnnotation();\n        if (this.isInline()) {\n            return [\n                this.css\n            ];\n        } else {\n            return [\n                this.css,\n                this.map\n            ];\n        }\n    }\n    generateString() {\n        this.css = '';\n        this.map = new SourceMapGenerator({\n            file: this.outputFile(),\n            ignoreInvalidMapping: true\n        });\n        let line = 1;\n        let column = 1;\n        let noSource = '<no source>';\n        let mapping = {\n            generated: {\n                column: 0,\n                line: 0\n            },\n            original: {\n                column: 0,\n                line: 0\n            },\n            source: ''\n        };\n        let last, lines;\n        this.stringify(this.root, (str, node, type)=>{\n            this.css += str;\n            if (node && type !== 'end') {\n                mapping.generated.line = line;\n                mapping.generated.column = column - 1;\n                if (node.source && node.source.start) {\n                    mapping.source = this.sourcePath(node);\n                    mapping.original.line = node.source.start.line;\n                    mapping.original.column = node.source.start.column - 1;\n                    this.map.addMapping(mapping);\n                } else {\n                    mapping.source = noSource;\n                    mapping.original.line = 1;\n                    mapping.original.column = 0;\n                    this.map.addMapping(mapping);\n                }\n            }\n            lines = str.match(/\\n/g);\n            if (lines) {\n                line += lines.length;\n                last = str.lastIndexOf('\\n');\n                column = str.length - last;\n            } else {\n                column += str.length;\n            }\n            if (node && type !== 'start') {\n                let p = node.parent || {\n                    raws: {}\n                };\n                let childless = node.type === 'decl' || node.type === 'atrule' && !node.nodes;\n                if (!childless || node !== p.last || p.raws.semicolon) {\n                    if (node.source && node.source.end) {\n                        mapping.source = this.sourcePath(node);\n                        mapping.original.line = node.source.end.line;\n                        mapping.original.column = node.source.end.column - 1;\n                        mapping.generated.line = line;\n                        mapping.generated.column = column - 2;\n                        this.map.addMapping(mapping);\n                    } else {\n                        mapping.source = noSource;\n                        mapping.original.line = 1;\n                        mapping.original.column = 0;\n                        mapping.generated.line = line;\n                        mapping.generated.column = column - 1;\n                        this.map.addMapping(mapping);\n                    }\n                }\n            }\n        });\n    }\n    isAnnotation() {\n        if (this.isInline()) {\n            return true;\n        }\n        if (typeof this.mapOpts.annotation !== 'undefined') {\n            return this.mapOpts.annotation;\n        }\n        if (this.previous().length) {\n            return this.previous().some((i)=>i.annotation);\n        }\n        return true;\n    }\n    isInline() {\n        if (typeof this.mapOpts.inline !== 'undefined') {\n            return this.mapOpts.inline;\n        }\n        let annotation = this.mapOpts.annotation;\n        if (typeof annotation !== 'undefined' && annotation !== true) {\n            return false;\n        }\n        if (this.previous().length) {\n            return this.previous().some((i)=>i.inline);\n        }\n        return true;\n    }\n    isMap() {\n        if (typeof this.opts.map !== 'undefined') {\n            return !!this.opts.map;\n        }\n        return this.previous().length > 0;\n    }\n    isSourcesContent() {\n        if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n            return this.mapOpts.sourcesContent;\n        }\n        if (this.previous().length) {\n            return this.previous().some((i)=>i.withContent());\n        }\n        return true;\n    }\n    outputFile() {\n        if (this.opts.to) {\n            return this.path(this.opts.to);\n        } else if (this.opts.from) {\n            return this.path(this.opts.from);\n        } else {\n            return 'to.css';\n        }\n    }\n    path(file) {\n        if (this.mapOpts.absolute) return file;\n        if (file.charCodeAt(0) === 60 /* `<` */ ) return file;\n        if (/^\\w+:\\/\\//.test(file)) return file;\n        let cached = this.memoizedPaths.get(file);\n        if (cached) return cached;\n        let from = this.opts.to ? dirname(this.opts.to) : '.';\n        if (typeof this.mapOpts.annotation === 'string') {\n            from = dirname(resolve(from, this.mapOpts.annotation));\n        }\n        let path = relative(from, file);\n        this.memoizedPaths.set(file, path);\n        return path;\n    }\n    previous() {\n        if (!this.previousMaps) {\n            this.previousMaps = [];\n            if (this.root) {\n                this.root.walk((node)=>{\n                    if (node.source && node.source.input.map) {\n                        let map = node.source.input.map;\n                        if (!this.previousMaps.includes(map)) {\n                            this.previousMaps.push(map);\n                        }\n                    }\n                });\n            } else {\n                let input = new Input(this.originalCSS, this.opts);\n                if (input.map) this.previousMaps.push(input.map);\n            }\n        }\n        return this.previousMaps;\n    }\n    setSourcesContent() {\n        let already = {};\n        if (this.root) {\n            this.root.walk((node)=>{\n                if (node.source) {\n                    let from = node.source.input.from;\n                    if (from && !already[from]) {\n                        already[from] = true;\n                        let fromUrl = this.usesFileUrls ? this.toFileUrl(from) : this.toUrl(this.path(from));\n                        this.map.setSourceContent(fromUrl, node.source.input.css);\n                    }\n                }\n            });\n        } else if (this.css) {\n            let from = this.opts.from ? this.toUrl(this.path(this.opts.from)) : '<no source>';\n            this.map.setSourceContent(from, this.css);\n        }\n    }\n    sourcePath(node) {\n        if (this.mapOpts.from) {\n            return this.toUrl(this.mapOpts.from);\n        } else if (this.usesFileUrls) {\n            return this.toFileUrl(node.source.input.from);\n        } else {\n            return this.toUrl(this.path(node.source.input.from));\n        }\n    }\n    toBase64(str) {\n        if (\"TURBOPACK compile-time truthy\", 1) {\n            return Buffer.from(str).toString('base64');\n        } else //TURBOPACK unreachable\n        ;\n    }\n    toFileUrl(path) {\n        let cached = this.memoizedFileURLs.get(path);\n        if (cached) return cached;\n        if (pathToFileURL) {\n            let fileURL = pathToFileURL(path).toString();\n            this.memoizedFileURLs.set(path, fileURL);\n            return fileURL;\n        } else {\n            throw new Error('`map.absolute` option is not available in this PostCSS build');\n        }\n    }\n    toUrl(path) {\n        let cached = this.memoizedURLs.get(path);\n        if (cached) return cached;\n        if (sep === '\\\\') {\n            path = path.replace(/\\\\/g, '/');\n        }\n        let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent);\n        this.memoizedURLs.set(path, url);\n        return url;\n    }\n}\nmodule.exports = MapGenerator;\n}),\n\"[project]/node_modules/postcss/lib/parser.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet AtRule = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/at-rule.js [postcss] (ecmascript)\");\nlet Comment = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/comment.js [postcss] (ecmascript)\");\nlet Declaration = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/declaration.js [postcss] (ecmascript)\");\nlet Root = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/root.js [postcss] (ecmascript)\");\nlet Rule = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/rule.js [postcss] (ecmascript)\");\nlet tokenizer = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/tokenize.js [postcss] (ecmascript)\");\nconst SAFE_COMMENT_NEIGHBOR = {\n    empty: true,\n    space: true\n};\nfunction findLastWithPosition(tokens) {\n    for(let i = tokens.length - 1; i >= 0; i--){\n        let token = tokens[i];\n        let pos = token[3] || token[2];\n        if (pos) return pos;\n    }\n}\nclass Parser {\n    constructor(input){\n        this.input = input;\n        this.root = new Root();\n        this.current = this.root;\n        this.spaces = '';\n        this.semicolon = false;\n        this.createTokenizer();\n        this.root.source = {\n            input,\n            start: {\n                column: 1,\n                line: 1,\n                offset: 0\n            }\n        };\n    }\n    atrule(token) {\n        let node = new AtRule();\n        node.name = token[1].slice(1);\n        if (node.name === '') {\n            this.unnamedAtrule(node, token);\n        }\n        this.init(node, token[2]);\n        let type;\n        let prev;\n        let shift;\n        let last = false;\n        let open = false;\n        let params = [];\n        let brackets = [];\n        while(!this.tokenizer.endOfFile()){\n            token = this.tokenizer.nextToken();\n            type = token[0];\n            if (type === '(' || type === '[') {\n                brackets.push(type === '(' ? ')' : ']');\n            } else if (type === '{' && brackets.length > 0) {\n                brackets.push('}');\n            } else if (type === brackets[brackets.length - 1]) {\n                brackets.pop();\n            }\n            if (brackets.length === 0) {\n                if (type === ';') {\n                    node.source.end = this.getPosition(token[2]);\n                    node.source.end.offset++;\n                    this.semicolon = true;\n                    break;\n                } else if (type === '{') {\n                    open = true;\n                    break;\n                } else if (type === '}') {\n                    if (params.length > 0) {\n                        shift = params.length - 1;\n                        prev = params[shift];\n                        while(prev && prev[0] === 'space'){\n                            prev = params[--shift];\n                        }\n                        if (prev) {\n                            node.source.end = this.getPosition(prev[3] || prev[2]);\n                            node.source.end.offset++;\n                        }\n                    }\n                    this.end(token);\n                    break;\n                } else {\n                    params.push(token);\n                }\n            } else {\n                params.push(token);\n            }\n            if (this.tokenizer.endOfFile()) {\n                last = true;\n                break;\n            }\n        }\n        node.raws.between = this.spacesAndCommentsFromEnd(params);\n        if (params.length) {\n            node.raws.afterName = this.spacesAndCommentsFromStart(params);\n            this.raw(node, 'params', params);\n            if (last) {\n                token = params[params.length - 1];\n                node.source.end = this.getPosition(token[3] || token[2]);\n                node.source.end.offset++;\n                this.spaces = node.raws.between;\n                node.raws.between = '';\n            }\n        } else {\n            node.raws.afterName = '';\n            node.params = '';\n        }\n        if (open) {\n            node.nodes = [];\n            this.current = node;\n        }\n    }\n    checkMissedSemicolon(tokens) {\n        let colon = this.colon(tokens);\n        if (colon === false) return;\n        let founded = 0;\n        let token;\n        for(let j = colon - 1; j >= 0; j--){\n            token = tokens[j];\n            if (token[0] !== 'space') {\n                founded += 1;\n                if (founded === 2) break;\n            }\n        }\n        // If the token is a word, e.g. `!important`, `red` or any other valid property's value.\n        // Then we need to return the colon after that word token. [3] is the \"end\" colon of that word.\n        // And because we need it after that one we do +1 to get the next one.\n        throw this.input.error('Missed semicolon', token[0] === 'word' ? token[3] + 1 : token[2]);\n    }\n    colon(tokens) {\n        let brackets = 0;\n        let prev, token, type;\n        for (let [i, element] of tokens.entries()){\n            token = element;\n            type = token[0];\n            if (type === '(') {\n                brackets += 1;\n            }\n            if (type === ')') {\n                brackets -= 1;\n            }\n            if (brackets === 0 && type === ':') {\n                if (!prev) {\n                    this.doubleColon(token);\n                } else if (prev[0] === 'word' && prev[1] === 'progid') {\n                    continue;\n                } else {\n                    return i;\n                }\n            }\n            prev = token;\n        }\n        return false;\n    }\n    comment(token) {\n        let node = new Comment();\n        this.init(node, token[2]);\n        node.source.end = this.getPosition(token[3] || token[2]);\n        node.source.end.offset++;\n        let text = token[1].slice(2, -2);\n        if (/^\\s*$/.test(text)) {\n            node.text = '';\n            node.raws.left = text;\n            node.raws.right = '';\n        } else {\n            let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/);\n            node.text = match[2];\n            node.raws.left = match[1];\n            node.raws.right = match[3];\n        }\n    }\n    createTokenizer() {\n        this.tokenizer = tokenizer(this.input);\n    }\n    decl(tokens, customProperty) {\n        let node = new Declaration();\n        this.init(node, tokens[0][2]);\n        let last = tokens[tokens.length - 1];\n        if (last[0] === ';') {\n            this.semicolon = true;\n            tokens.pop();\n        }\n        node.source.end = this.getPosition(last[3] || last[2] || findLastWithPosition(tokens));\n        node.source.end.offset++;\n        while(tokens[0][0] !== 'word'){\n            if (tokens.length === 1) this.unknownWord(tokens);\n            node.raws.before += tokens.shift()[1];\n        }\n        node.source.start = this.getPosition(tokens[0][2]);\n        node.prop = '';\n        while(tokens.length){\n            let type = tokens[0][0];\n            if (type === ':' || type === 'space' || type === 'comment') {\n                break;\n            }\n            node.prop += tokens.shift()[1];\n        }\n        node.raws.between = '';\n        let token;\n        while(tokens.length){\n            token = tokens.shift();\n            if (token[0] === ':') {\n                node.raws.between += token[1];\n                break;\n            } else {\n                if (token[0] === 'word' && /\\w/.test(token[1])) {\n                    this.unknownWord([\n                        token\n                    ]);\n                }\n                node.raws.between += token[1];\n            }\n        }\n        if (node.prop[0] === '_' || node.prop[0] === '*') {\n            node.raws.before += node.prop[0];\n            node.prop = node.prop.slice(1);\n        }\n        let firstSpaces = [];\n        let next;\n        while(tokens.length){\n            next = tokens[0][0];\n            if (next !== 'space' && next !== 'comment') break;\n            firstSpaces.push(tokens.shift());\n        }\n        this.precheckMissedSemicolon(tokens);\n        for(let i = tokens.length - 1; i >= 0; i--){\n            token = tokens[i];\n            if (token[1].toLowerCase() === '!important') {\n                node.important = true;\n                let string = this.stringFrom(tokens, i);\n                string = this.spacesFromEnd(tokens) + string;\n                if (string !== ' !important') node.raws.important = string;\n                break;\n            } else if (token[1].toLowerCase() === 'important') {\n                let cache = tokens.slice(0);\n                let str = '';\n                for(let j = i; j > 0; j--){\n                    let type = cache[j][0];\n                    if (str.trim().startsWith('!') && type !== 'space') {\n                        break;\n                    }\n                    str = cache.pop()[1] + str;\n                }\n                if (str.trim().startsWith('!')) {\n                    node.important = true;\n                    node.raws.important = str;\n                    tokens = cache;\n                }\n            }\n            if (token[0] !== 'space' && token[0] !== 'comment') {\n                break;\n            }\n        }\n        let hasWord = tokens.some((i)=>i[0] !== 'space' && i[0] !== 'comment');\n        if (hasWord) {\n            node.raws.between += firstSpaces.map((i)=>i[1]).join('');\n            firstSpaces = [];\n        }\n        this.raw(node, 'value', firstSpaces.concat(tokens), customProperty);\n        if (node.value.includes(':') && !customProperty) {\n            this.checkMissedSemicolon(tokens);\n        }\n    }\n    doubleColon(token) {\n        throw this.input.error('Double colon', {\n            offset: token[2]\n        }, {\n            offset: token[2] + token[1].length\n        });\n    }\n    emptyRule(token) {\n        let node = new Rule();\n        this.init(node, token[2]);\n        node.selector = '';\n        node.raws.between = '';\n        this.current = node;\n    }\n    end(token) {\n        if (this.current.nodes && this.current.nodes.length) {\n            this.current.raws.semicolon = this.semicolon;\n        }\n        this.semicolon = false;\n        this.current.raws.after = (this.current.raws.after || '') + this.spaces;\n        this.spaces = '';\n        if (this.current.parent) {\n            this.current.source.end = this.getPosition(token[2]);\n            this.current.source.end.offset++;\n            this.current = this.current.parent;\n        } else {\n            this.unexpectedClose(token);\n        }\n    }\n    endFile() {\n        if (this.current.parent) this.unclosedBlock();\n        if (this.current.nodes && this.current.nodes.length) {\n            this.current.raws.semicolon = this.semicolon;\n        }\n        this.current.raws.after = (this.current.raws.after || '') + this.spaces;\n        this.root.source.end = this.getPosition(this.tokenizer.position());\n    }\n    freeSemicolon(token) {\n        this.spaces += token[1];\n        if (this.current.nodes) {\n            let prev = this.current.nodes[this.current.nodes.length - 1];\n            if (prev && prev.type === 'rule' && !prev.raws.ownSemicolon) {\n                prev.raws.ownSemicolon = this.spaces;\n                this.spaces = '';\n                prev.source.end = this.getPosition(token[2]);\n                prev.source.end.offset += prev.raws.ownSemicolon.length;\n            }\n        }\n    }\n    // Helpers\n    getPosition(offset) {\n        let pos = this.input.fromOffset(offset);\n        return {\n            column: pos.col,\n            line: pos.line,\n            offset\n        };\n    }\n    init(node, offset) {\n        this.current.push(node);\n        node.source = {\n            input: this.input,\n            start: this.getPosition(offset)\n        };\n        node.raws.before = this.spaces;\n        this.spaces = '';\n        if (node.type !== 'comment') this.semicolon = false;\n    }\n    other(start) {\n        let end = false;\n        let type = null;\n        let colon = false;\n        let bracket = null;\n        let brackets = [];\n        let customProperty = start[1].startsWith('--');\n        let tokens = [];\n        let token = start;\n        while(token){\n            type = token[0];\n            tokens.push(token);\n            if (type === '(' || type === '[') {\n                if (!bracket) bracket = token;\n                brackets.push(type === '(' ? ')' : ']');\n            } else if (customProperty && colon && type === '{') {\n                if (!bracket) bracket = token;\n                brackets.push('}');\n            } else if (brackets.length === 0) {\n                if (type === ';') {\n                    if (colon) {\n                        this.decl(tokens, customProperty);\n                        return;\n                    } else {\n                        break;\n                    }\n                } else if (type === '{') {\n                    this.rule(tokens);\n                    return;\n                } else if (type === '}') {\n                    this.tokenizer.back(tokens.pop());\n                    end = true;\n                    break;\n                } else if (type === ':') {\n                    colon = true;\n                }\n            } else if (type === brackets[brackets.length - 1]) {\n                brackets.pop();\n                if (brackets.length === 0) bracket = null;\n            }\n            token = this.tokenizer.nextToken();\n        }\n        if (this.tokenizer.endOfFile()) end = true;\n        if (brackets.length > 0) this.unclosedBracket(bracket);\n        if (end && colon) {\n            if (!customProperty) {\n                while(tokens.length){\n                    token = tokens[tokens.length - 1][0];\n                    if (token !== 'space' && token !== 'comment') break;\n                    this.tokenizer.back(tokens.pop());\n                }\n            }\n            this.decl(tokens, customProperty);\n        } else {\n            this.unknownWord(tokens);\n        }\n    }\n    parse() {\n        let token;\n        while(!this.tokenizer.endOfFile()){\n            token = this.tokenizer.nextToken();\n            switch(token[0]){\n                case 'space':\n                    this.spaces += token[1];\n                    break;\n                case ';':\n                    this.freeSemicolon(token);\n                    break;\n                case '}':\n                    this.end(token);\n                    break;\n                case 'comment':\n                    this.comment(token);\n                    break;\n                case 'at-word':\n                    this.atrule(token);\n                    break;\n                case '{':\n                    this.emptyRule(token);\n                    break;\n                default:\n                    this.other(token);\n                    break;\n            }\n        }\n        this.endFile();\n    }\n    precheckMissedSemicolon() {\n    // Hook for Safe Parser\n    }\n    raw(node, prop, tokens, customProperty) {\n        let token, type;\n        let length = tokens.length;\n        let value = '';\n        let clean = true;\n        let next, prev;\n        for(let i = 0; i < length; i += 1){\n            token = tokens[i];\n            type = token[0];\n            if (type === 'space' && i === length - 1 && !customProperty) {\n                clean = false;\n            } else if (type === 'comment') {\n                prev = tokens[i - 1] ? tokens[i - 1][0] : 'empty';\n                next = tokens[i + 1] ? tokens[i + 1][0] : 'empty';\n                if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n                    if (value.slice(-1) === ',') {\n                        clean = false;\n                    } else {\n                        value += token[1];\n                    }\n                } else {\n                    clean = false;\n                }\n            } else {\n                value += token[1];\n            }\n        }\n        if (!clean) {\n            let raw = tokens.reduce((all, i)=>all + i[1], '');\n            node.raws[prop] = {\n                raw,\n                value\n            };\n        }\n        node[prop] = value;\n    }\n    rule(tokens) {\n        tokens.pop();\n        let node = new Rule();\n        this.init(node, tokens[0][2]);\n        node.raws.between = this.spacesAndCommentsFromEnd(tokens);\n        this.raw(node, 'selector', tokens);\n        this.current = node;\n    }\n    spacesAndCommentsFromEnd(tokens) {\n        let lastTokenType;\n        let spaces = '';\n        while(tokens.length){\n            lastTokenType = tokens[tokens.length - 1][0];\n            if (lastTokenType !== 'space' && lastTokenType !== 'comment') break;\n            spaces = tokens.pop()[1] + spaces;\n        }\n        return spaces;\n    }\n    // Errors\n    spacesAndCommentsFromStart(tokens) {\n        let next;\n        let spaces = '';\n        while(tokens.length){\n            next = tokens[0][0];\n            if (next !== 'space' && next !== 'comment') break;\n            spaces += tokens.shift()[1];\n        }\n        return spaces;\n    }\n    spacesFromEnd(tokens) {\n        let lastTokenType;\n        let spaces = '';\n        while(tokens.length){\n            lastTokenType = tokens[tokens.length - 1][0];\n            if (lastTokenType !== 'space') break;\n            spaces = tokens.pop()[1] + spaces;\n        }\n        return spaces;\n    }\n    stringFrom(tokens, from) {\n        let result = '';\n        for(let i = from; i < tokens.length; i++){\n            result += tokens[i][1];\n        }\n        tokens.splice(from, tokens.length - from);\n        return result;\n    }\n    unclosedBlock() {\n        let pos = this.current.source.start;\n        throw this.input.error('Unclosed block', pos.line, pos.column);\n    }\n    unclosedBracket(bracket) {\n        throw this.input.error('Unclosed bracket', {\n            offset: bracket[2]\n        }, {\n            offset: bracket[2] + 1\n        });\n    }\n    unexpectedClose(token) {\n        throw this.input.error('Unexpected }', {\n            offset: token[2]\n        }, {\n            offset: token[2] + 1\n        });\n    }\n    unknownWord(tokens) {\n        throw this.input.error('Unknown word ' + tokens[0][1], {\n            offset: tokens[0][2]\n        }, {\n            offset: tokens[0][2] + tokens[0][1].length\n        });\n    }\n    unnamedAtrule(node, token) {\n        throw this.input.error('At-rule without name', {\n            offset: token[2]\n        }, {\n            offset: token[2] + token[1].length\n        });\n    }\n}\nmodule.exports = Parser;\n}),\n\"[project]/node_modules/postcss/lib/parse.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nlet Input = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/input.js [postcss] (ecmascript)\");\nlet Parser = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/parser.js [postcss] (ecmascript)\");\nfunction parse(css, opts) {\n    let input = new Input(css, opts);\n    let parser = new Parser(input);\n    try {\n        parser.parse();\n    } catch (e) {\n        if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n        ;\n        throw e;\n    }\n    return parser.root;\n}\nmodule.exports = parse;\nparse.default = parse;\nContainer.registerParse(parse);\n}),\n\"[project]/node_modules/postcss/lib/warning.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nclass Warning {\n    constructor(text, opts = {}){\n        this.type = 'warning';\n        this.text = text;\n        if (opts.node && opts.node.source) {\n            let range = opts.node.rangeBy(opts);\n            this.line = range.start.line;\n            this.column = range.start.column;\n            this.endLine = range.end.line;\n            this.endColumn = range.end.column;\n        }\n        for(let opt in opts)this[opt] = opts[opt];\n    }\n    toString() {\n        if (this.node) {\n            return this.node.error(this.text, {\n                index: this.index,\n                plugin: this.plugin,\n                word: this.word\n            }).message;\n        }\n        if (this.plugin) {\n            return this.plugin + ': ' + this.text;\n        }\n        return this.text;\n    }\n}\nmodule.exports = Warning;\nWarning.default = Warning;\n}),\n\"[project]/node_modules/postcss/lib/result.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Warning = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/warning.js [postcss] (ecmascript)\");\nclass Result {\n    get content() {\n        return this.css;\n    }\n    constructor(processor, root, opts){\n        this.processor = processor;\n        this.messages = [];\n        this.root = root;\n        this.opts = opts;\n        this.css = '';\n        this.map = undefined;\n    }\n    toString() {\n        return this.css;\n    }\n    warn(text, opts = {}) {\n        if (!opts.plugin) {\n            if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n                opts.plugin = this.lastPlugin.postcssPlugin;\n            }\n        }\n        let warning = new Warning(text, opts);\n        this.messages.push(warning);\n        return warning;\n    }\n    warnings() {\n        return this.messages.filter((i)=>i.type === 'warning');\n    }\n}\nmodule.exports = Result;\nResult.default = Result;\n}),\n\"[project]/node_modules/postcss/lib/warn-once.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\n/* eslint-disable no-console */ let printed = {};\nmodule.exports = function warnOnce(message) {\n    if (printed[message]) return;\n    printed[message] = true;\n    if (typeof console !== 'undefined' && console.warn) {\n        console.warn(message);\n    }\n};\n}),\n\"[project]/node_modules/postcss/lib/lazy-result.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nlet Document = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/document.js [postcss] (ecmascript)\");\nlet MapGenerator = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/map-generator.js [postcss] (ecmascript)\");\nlet parse = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/parse.js [postcss] (ecmascript)\");\nlet Result = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/result.js [postcss] (ecmascript)\");\nlet Root = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/root.js [postcss] (ecmascript)\");\nlet stringify = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/stringify.js [postcss] (ecmascript)\");\nlet { isClean, my } = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/symbols.js [postcss] (ecmascript)\");\nlet warnOnce = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/warn-once.js [postcss] (ecmascript)\");\nconst TYPE_TO_CLASS_NAME = {\n    atrule: 'AtRule',\n    comment: 'Comment',\n    decl: 'Declaration',\n    document: 'Document',\n    root: 'Root',\n    rule: 'Rule'\n};\nconst PLUGIN_PROPS = {\n    AtRule: true,\n    AtRuleExit: true,\n    Comment: true,\n    CommentExit: true,\n    Declaration: true,\n    DeclarationExit: true,\n    Document: true,\n    DocumentExit: true,\n    Once: true,\n    OnceExit: true,\n    postcssPlugin: true,\n    prepare: true,\n    Root: true,\n    RootExit: true,\n    Rule: true,\n    RuleExit: true\n};\nconst NOT_VISITORS = {\n    Once: true,\n    postcssPlugin: true,\n    prepare: true\n};\nconst CHILDREN = 0;\nfunction isPromise(obj) {\n    return typeof obj === 'object' && typeof obj.then === 'function';\n}\nfunction getEvents(node) {\n    let key = false;\n    let type = TYPE_TO_CLASS_NAME[node.type];\n    if (node.type === 'decl') {\n        key = node.prop.toLowerCase();\n    } else if (node.type === 'atrule') {\n        key = node.name.toLowerCase();\n    }\n    if (key && node.append) {\n        return [\n            type,\n            type + '-' + key,\n            CHILDREN,\n            type + 'Exit',\n            type + 'Exit-' + key\n        ];\n    } else if (key) {\n        return [\n            type,\n            type + '-' + key,\n            type + 'Exit',\n            type + 'Exit-' + key\n        ];\n    } else if (node.append) {\n        return [\n            type,\n            CHILDREN,\n            type + 'Exit'\n        ];\n    } else {\n        return [\n            type,\n            type + 'Exit'\n        ];\n    }\n}\nfunction toStack(node) {\n    let events;\n    if (node.type === 'document') {\n        events = [\n            'Document',\n            CHILDREN,\n            'DocumentExit'\n        ];\n    } else if (node.type === 'root') {\n        events = [\n            'Root',\n            CHILDREN,\n            'RootExit'\n        ];\n    } else {\n        events = getEvents(node);\n    }\n    return {\n        eventIndex: 0,\n        events,\n        iterator: 0,\n        node,\n        visitorIndex: 0,\n        visitors: []\n    };\n}\nfunction cleanMarks(node) {\n    node[isClean] = false;\n    if (node.nodes) node.nodes.forEach((i)=>cleanMarks(i));\n    return node;\n}\nlet postcss = {};\nclass LazyResult {\n    get content() {\n        return this.stringify().content;\n    }\n    get css() {\n        return this.stringify().css;\n    }\n    get map() {\n        return this.stringify().map;\n    }\n    get messages() {\n        return this.sync().messages;\n    }\n    get opts() {\n        return this.result.opts;\n    }\n    get processor() {\n        return this.result.processor;\n    }\n    get root() {\n        return this.sync().root;\n    }\n    get [Symbol.toStringTag]() {\n        return 'LazyResult';\n    }\n    constructor(processor, css, opts){\n        this.stringified = false;\n        this.processed = false;\n        let root;\n        if (typeof css === 'object' && css !== null && (css.type === 'root' || css.type === 'document')) {\n            root = cleanMarks(css);\n        } else if (css instanceof LazyResult || css instanceof Result) {\n            root = cleanMarks(css.root);\n            if (css.map) {\n                if (typeof opts.map === 'undefined') opts.map = {};\n                if (!opts.map.inline) opts.map.inline = false;\n                opts.map.prev = css.map;\n            }\n        } else {\n            let parser = parse;\n            if (opts.syntax) parser = opts.syntax.parse;\n            if (opts.parser) parser = opts.parser;\n            if (parser.parse) parser = parser.parse;\n            try {\n                root = parser(css, opts);\n            } catch (error) {\n                this.processed = true;\n                this.error = error;\n            }\n            if (root && !root[my]) {\n                /* c8 ignore next 2 */ Container.rebuild(root);\n            }\n        }\n        this.result = new Result(processor, root, opts);\n        this.helpers = {\n            ...postcss,\n            postcss,\n            result: this.result\n        };\n        this.plugins = this.processor.plugins.map((plugin)=>{\n            if (typeof plugin === 'object' && plugin.prepare) {\n                return {\n                    ...plugin,\n                    ...plugin.prepare(this.result)\n                };\n            } else {\n                return plugin;\n            }\n        });\n    }\n    async() {\n        if (this.error) return Promise.reject(this.error);\n        if (this.processed) return Promise.resolve(this.result);\n        if (!this.processing) {\n            this.processing = this.runAsync();\n        }\n        return this.processing;\n    }\n    catch(onRejected) {\n        return this.async().catch(onRejected);\n    }\n    finally(onFinally) {\n        return this.async().then(onFinally, onFinally);\n    }\n    getAsyncError() {\n        throw new Error('Use process(css).then(cb) to work with async plugins');\n    }\n    handleError(error, node) {\n        let plugin = this.result.lastPlugin;\n        try {\n            if (node) node.addToError(error);\n            this.error = error;\n            if (error.name === 'CssSyntaxError' && !error.plugin) {\n                error.plugin = plugin.postcssPlugin;\n                error.setMessage();\n            } else if (plugin.postcssVersion) {\n                if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n                ;\n            }\n        } catch (err) {\n            /* c8 ignore next 3 */ // eslint-disable-next-line no-console\n            if (console && console.error) console.error(err);\n        }\n        return error;\n    }\n    prepareVisitors() {\n        this.listeners = {};\n        let add = (plugin, type, cb)=>{\n            if (!this.listeners[type]) this.listeners[type] = [];\n            this.listeners[type].push([\n                plugin,\n                cb\n            ]);\n        };\n        for (let plugin of this.plugins){\n            if (typeof plugin === 'object') {\n                for(let event in plugin){\n                    if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n                        throw new Error(`Unknown event ${event} in ${plugin.postcssPlugin}. ` + `Try to update PostCSS (${this.processor.version} now).`);\n                    }\n                    if (!NOT_VISITORS[event]) {\n                        if (typeof plugin[event] === 'object') {\n                            for(let filter in plugin[event]){\n                                if (filter === '*') {\n                                    add(plugin, event, plugin[event][filter]);\n                                } else {\n                                    add(plugin, event + '-' + filter.toLowerCase(), plugin[event][filter]);\n                                }\n                            }\n                        } else if (typeof plugin[event] === 'function') {\n                            add(plugin, event, plugin[event]);\n                        }\n                    }\n                }\n            }\n        }\n        this.hasListener = Object.keys(this.listeners).length > 0;\n    }\n    async runAsync() {\n        this.plugin = 0;\n        for(let i = 0; i < this.plugins.length; i++){\n            let plugin = this.plugins[i];\n            let promise = this.runOnRoot(plugin);\n            if (isPromise(promise)) {\n                try {\n                    await promise;\n                } catch (error) {\n                    throw this.handleError(error);\n                }\n            }\n        }\n        this.prepareVisitors();\n        if (this.hasListener) {\n            let root = this.result.root;\n            while(!root[isClean]){\n                root[isClean] = true;\n                let stack = [\n                    toStack(root)\n                ];\n                while(stack.length > 0){\n                    let promise = this.visitTick(stack);\n                    if (isPromise(promise)) {\n                        try {\n                            await promise;\n                        } catch (e) {\n                            let node = stack[stack.length - 1].node;\n                            throw this.handleError(e, node);\n                        }\n                    }\n                }\n            }\n            if (this.listeners.OnceExit) {\n                for (let [plugin, visitor] of this.listeners.OnceExit){\n                    this.result.lastPlugin = plugin;\n                    try {\n                        if (root.type === 'document') {\n                            let roots = root.nodes.map((subRoot)=>visitor(subRoot, this.helpers));\n                            await Promise.all(roots);\n                        } else {\n                            await visitor(root, this.helpers);\n                        }\n                    } catch (e) {\n                        throw this.handleError(e);\n                    }\n                }\n            }\n        }\n        this.processed = true;\n        return this.stringify();\n    }\n    runOnRoot(plugin) {\n        this.result.lastPlugin = plugin;\n        try {\n            if (typeof plugin === 'object' && plugin.Once) {\n                if (this.result.root.type === 'document') {\n                    let roots = this.result.root.nodes.map((root)=>plugin.Once(root, this.helpers));\n                    if (isPromise(roots[0])) {\n                        return Promise.all(roots);\n                    }\n                    return roots;\n                }\n                return plugin.Once(this.result.root, this.helpers);\n            } else if (typeof plugin === 'function') {\n                return plugin(this.result.root, this.result);\n            }\n        } catch (error) {\n            throw this.handleError(error);\n        }\n    }\n    stringify() {\n        if (this.error) throw this.error;\n        if (this.stringified) return this.result;\n        this.stringified = true;\n        this.sync();\n        let opts = this.result.opts;\n        let str = stringify;\n        if (opts.syntax) str = opts.syntax.stringify;\n        if (opts.stringifier) str = opts.stringifier;\n        if (str.stringify) str = str.stringify;\n        let map = new MapGenerator(str, this.result.root, this.result.opts);\n        let data = map.generate();\n        this.result.css = data[0];\n        this.result.map = data[1];\n        return this.result;\n    }\n    sync() {\n        if (this.error) throw this.error;\n        if (this.processed) return this.result;\n        this.processed = true;\n        if (this.processing) {\n            throw this.getAsyncError();\n        }\n        for (let plugin of this.plugins){\n            let promise = this.runOnRoot(plugin);\n            if (isPromise(promise)) {\n                throw this.getAsyncError();\n            }\n        }\n        this.prepareVisitors();\n        if (this.hasListener) {\n            let root = this.result.root;\n            while(!root[isClean]){\n                root[isClean] = true;\n                this.walkSync(root);\n            }\n            if (this.listeners.OnceExit) {\n                if (root.type === 'document') {\n                    for (let subRoot of root.nodes){\n                        this.visitSync(this.listeners.OnceExit, subRoot);\n                    }\n                } else {\n                    this.visitSync(this.listeners.OnceExit, root);\n                }\n            }\n        }\n        return this.result;\n    }\n    then(onFulfilled, onRejected) {\n        if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n        ;\n        return this.async().then(onFulfilled, onRejected);\n    }\n    toString() {\n        return this.css;\n    }\n    visitSync(visitors, node) {\n        for (let [plugin, visitor] of visitors){\n            this.result.lastPlugin = plugin;\n            let promise;\n            try {\n                promise = visitor(node, this.helpers);\n            } catch (e) {\n                throw this.handleError(e, node.proxyOf);\n            }\n            if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n                return true;\n            }\n            if (isPromise(promise)) {\n                throw this.getAsyncError();\n            }\n        }\n    }\n    visitTick(stack) {\n        let visit = stack[stack.length - 1];\n        let { node, visitors } = visit;\n        if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n            stack.pop();\n            return;\n        }\n        if (visitors.length > 0 && visit.visitorIndex < visitors.length) {\n            let [plugin, visitor] = visitors[visit.visitorIndex];\n            visit.visitorIndex += 1;\n            if (visit.visitorIndex === visitors.length) {\n                visit.visitors = [];\n                visit.visitorIndex = 0;\n            }\n            this.result.lastPlugin = plugin;\n            try {\n                return visitor(node.toProxy(), this.helpers);\n            } catch (e) {\n                throw this.handleError(e, node);\n            }\n        }\n        if (visit.iterator !== 0) {\n            let iterator = visit.iterator;\n            let child;\n            while(child = node.nodes[node.indexes[iterator]]){\n                node.indexes[iterator] += 1;\n                if (!child[isClean]) {\n                    child[isClean] = true;\n                    stack.push(toStack(child));\n                    return;\n                }\n            }\n            visit.iterator = 0;\n            delete node.indexes[iterator];\n        }\n        let events = visit.events;\n        while(visit.eventIndex < events.length){\n            let event = events[visit.eventIndex];\n            visit.eventIndex += 1;\n            if (event === CHILDREN) {\n                if (node.nodes && node.nodes.length) {\n                    node[isClean] = true;\n                    visit.iterator = node.getIterator();\n                }\n                return;\n            } else if (this.listeners[event]) {\n                visit.visitors = this.listeners[event];\n                return;\n            }\n        }\n        stack.pop();\n    }\n    walkSync(node) {\n        node[isClean] = true;\n        let events = getEvents(node);\n        for (let event of events){\n            if (event === CHILDREN) {\n                if (node.nodes) {\n                    node.each((child)=>{\n                        if (!child[isClean]) this.walkSync(child);\n                    });\n                }\n            } else {\n                let visitors = this.listeners[event];\n                if (visitors) {\n                    if (this.visitSync(visitors, node.toProxy())) return;\n                }\n            }\n        }\n    }\n    warnings() {\n        return this.sync().warnings();\n    }\n}\nLazyResult.registerPostcss = (dependant)=>{\n    postcss = dependant;\n};\nmodule.exports = LazyResult;\nLazyResult.default = LazyResult;\nRoot.registerLazyResult(LazyResult);\nDocument.registerLazyResult(LazyResult);\n}),\n\"[project]/node_modules/postcss/lib/no-work-result.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet MapGenerator = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/map-generator.js [postcss] (ecmascript)\");\nlet parse = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/parse.js [postcss] (ecmascript)\");\nconst Result = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/result.js [postcss] (ecmascript)\");\nlet stringify = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/stringify.js [postcss] (ecmascript)\");\nlet warnOnce = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/warn-once.js [postcss] (ecmascript)\");\nclass NoWorkResult {\n    get content() {\n        return this.result.css;\n    }\n    get css() {\n        return this.result.css;\n    }\n    get map() {\n        return this.result.map;\n    }\n    get messages() {\n        return [];\n    }\n    get opts() {\n        return this.result.opts;\n    }\n    get processor() {\n        return this.result.processor;\n    }\n    get root() {\n        if (this._root) {\n            return this._root;\n        }\n        let root;\n        let parser = parse;\n        try {\n            root = parser(this._css, this._opts);\n        } catch (error) {\n            this.error = error;\n        }\n        if (this.error) {\n            throw this.error;\n        } else {\n            this._root = root;\n            return root;\n        }\n    }\n    get [Symbol.toStringTag]() {\n        return 'NoWorkResult';\n    }\n    constructor(processor, css, opts){\n        css = css.toString();\n        this.stringified = false;\n        this._processor = processor;\n        this._css = css;\n        this._opts = opts;\n        this._map = undefined;\n        let root;\n        let str = stringify;\n        this.result = new Result(this._processor, root, this._opts);\n        this.result.css = css;\n        let self = this;\n        Object.defineProperty(this.result, 'root', {\n            get () {\n                return self.root;\n            }\n        });\n        let map = new MapGenerator(str, root, this._opts, css);\n        if (map.isMap()) {\n            let [generatedCSS, generatedMap] = map.generate();\n            if (generatedCSS) {\n                this.result.css = generatedCSS;\n            }\n            if (generatedMap) {\n                this.result.map = generatedMap;\n            }\n        } else {\n            map.clearAnnotation();\n            this.result.css = map.css;\n        }\n    }\n    async() {\n        if (this.error) return Promise.reject(this.error);\n        return Promise.resolve(this.result);\n    }\n    catch(onRejected) {\n        return this.async().catch(onRejected);\n    }\n    finally(onFinally) {\n        return this.async().then(onFinally, onFinally);\n    }\n    sync() {\n        if (this.error) throw this.error;\n        return this.result;\n    }\n    then(onFulfilled, onRejected) {\n        if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n        ;\n        return this.async().then(onFulfilled, onRejected);\n    }\n    toString() {\n        return this._css;\n    }\n    warnings() {\n        return [];\n    }\n}\nmodule.exports = NoWorkResult;\nNoWorkResult.default = NoWorkResult;\n}),\n\"[project]/node_modules/postcss/lib/processor.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet Document = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/document.js [postcss] (ecmascript)\");\nlet LazyResult = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/lazy-result.js [postcss] (ecmascript)\");\nlet NoWorkResult = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/no-work-result.js [postcss] (ecmascript)\");\nlet Root = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/root.js [postcss] (ecmascript)\");\nclass Processor {\n    constructor(plugins = []){\n        this.version = '8.5.6';\n        this.plugins = this.normalize(plugins);\n    }\n    normalize(plugins) {\n        let normalized = [];\n        for (let i of plugins){\n            if (i.postcss === true) {\n                i = i();\n            } else if (i.postcss) {\n                i = i.postcss;\n            }\n            if (typeof i === 'object' && Array.isArray(i.plugins)) {\n                normalized = normalized.concat(i.plugins);\n            } else if (typeof i === 'object' && i.postcssPlugin) {\n                normalized.push(i);\n            } else if (typeof i === 'function') {\n                normalized.push(i);\n            } else if (typeof i === 'object' && (i.parse || i.stringify)) {\n                if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n                ;\n            } else {\n                throw new Error(i + ' is not a PostCSS plugin');\n            }\n        }\n        return normalized;\n    }\n    process(css, opts = {}) {\n        if (!this.plugins.length && !opts.parser && !opts.stringifier && !opts.syntax) {\n            return new NoWorkResult(this, css, opts);\n        } else {\n            return new LazyResult(this, css, opts);\n        }\n    }\n    use(plugin) {\n        this.plugins = this.plugins.concat(this.normalize([\n            plugin\n        ]));\n        return this;\n    }\n}\nmodule.exports = Processor;\nProcessor.default = Processor;\nRoot.registerProcessor(Processor);\nDocument.registerProcessor(Processor);\n}),\n\"[project]/node_modules/postcss/lib/postcss.js [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\"use strict\";\n\nlet AtRule = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/at-rule.js [postcss] (ecmascript)\");\nlet Comment = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/comment.js [postcss] (ecmascript)\");\nlet Container = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/container.js [postcss] (ecmascript)\");\nlet CssSyntaxError = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/css-syntax-error.js [postcss] (ecmascript)\");\nlet Declaration = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/declaration.js [postcss] (ecmascript)\");\nlet Document = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/document.js [postcss] (ecmascript)\");\nlet fromJSON = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/fromJSON.js [postcss] (ecmascript)\");\nlet Input = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/input.js [postcss] (ecmascript)\");\nlet LazyResult = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/lazy-result.js [postcss] (ecmascript)\");\nlet list = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/list.js [postcss] (ecmascript)\");\nlet Node = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/node.js [postcss] (ecmascript)\");\nlet parse = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/parse.js [postcss] (ecmascript)\");\nlet Processor = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/processor.js [postcss] (ecmascript)\");\nlet Result = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/result.js [postcss] (ecmascript)\");\nlet Root = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/root.js [postcss] (ecmascript)\");\nlet Rule = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/rule.js [postcss] (ecmascript)\");\nlet stringify = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/stringify.js [postcss] (ecmascript)\");\nlet Warning = __turbopack_context__.r(\"[project]/node_modules/postcss/lib/warning.js [postcss] (ecmascript)\");\nfunction postcss(...plugins) {\n    if (plugins.length === 1 && Array.isArray(plugins[0])) {\n        plugins = plugins[0];\n    }\n    return new Processor(plugins);\n}\npostcss.plugin = function plugin(name, initializer) {\n    let warningPrinted = false;\n    function creator(...args) {\n        // eslint-disable-next-line no-console\n        if (console && console.warn && !warningPrinted) {\n            warningPrinted = true;\n            // eslint-disable-next-line no-console\n            console.warn(name + ': postcss.plugin was deprecated. Migration guide:\\n' + 'https://evilmartians.com/chronicles/postcss-8-plugin-migration');\n            if (process.env.LANG && process.env.LANG.startsWith('cn')) {\n                /* c8 ignore next 7 */ // eslint-disable-next-line no-console\n                console.warn(name + ': ÈáåÈù¢ postcss.plugin Ë¢´ÂºÉÁî®. ËøÅÁßªÊåáÂçó:\\n' + 'https://www.w3ctech.com/topic/2226');\n            }\n        }\n        let transformer = initializer(...args);\n        transformer.postcssPlugin = name;\n        transformer.postcssVersion = new Processor().version;\n        return transformer;\n    }\n    let cache;\n    Object.defineProperty(creator, 'postcss', {\n        get () {\n            if (!cache) cache = creator();\n            return cache;\n        }\n    });\n    creator.process = function(css, processOpts, pluginOpts) {\n        return postcss([\n            creator(pluginOpts)\n        ]).process(css, processOpts);\n    };\n    return creator;\n};\npostcss.stringify = stringify;\npostcss.parse = parse;\npostcss.fromJSON = fromJSON;\npostcss.list = list;\npostcss.comment = (defaults)=>new Comment(defaults);\npostcss.atRule = (defaults)=>new AtRule(defaults);\npostcss.decl = (defaults)=>new Declaration(defaults);\npostcss.rule = (defaults)=>new Rule(defaults);\npostcss.root = (defaults)=>new Root(defaults);\npostcss.document = (defaults)=>new Document(defaults);\npostcss.CssSyntaxError = CssSyntaxError;\npostcss.Declaration = Declaration;\npostcss.Container = Container;\npostcss.Processor = Processor;\npostcss.Document = Document;\npostcss.Comment = Comment;\npostcss.Warning = Warning;\npostcss.AtRule = AtRule;\npostcss.Result = Result;\npostcss.Input = Input;\npostcss.Rule = Rule;\npostcss.Root = Root;\npostcss.Node = Node;\nLazyResult.registerPostcss(postcss);\nmodule.exports = postcss;\npostcss.default = postcss;\n}),\n\"[project]/node_modules/postcss/lib/postcss.mjs [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"AtRule\",\n    ()=>AtRule,\n    \"Comment\",\n    ()=>Comment,\n    \"Container\",\n    ()=>Container,\n    \"CssSyntaxError\",\n    ()=>CssSyntaxError,\n    \"Declaration\",\n    ()=>Declaration,\n    \"Document\",\n    ()=>Document,\n    \"Input\",\n    ()=>Input,\n    \"Node\",\n    ()=>Node,\n    \"Processor\",\n    ()=>Processor,\n    \"Result\",\n    ()=>Result,\n    \"Root\",\n    ()=>Root,\n    \"Rule\",\n    ()=>Rule,\n    \"Warning\",\n    ()=>Warning,\n    \"atRule\",\n    ()=>atRule,\n    \"comment\",\n    ()=>comment,\n    \"decl\",\n    ()=>decl,\n    \"default\",\n    ()=>__TURBOPACK__default__export__,\n    \"document\",\n    ()=>document,\n    \"fromJSON\",\n    ()=>fromJSON,\n    \"list\",\n    ()=>list,\n    \"parse\",\n    ()=>parse,\n    \"plugin\",\n    ()=>plugin,\n    \"root\",\n    ()=>root,\n    \"rule\",\n    ()=>rule,\n    \"stringify\",\n    ()=>stringify\n]);\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/postcss/lib/postcss.js [postcss] (ecmascript)\");\n;\nconst __TURBOPACK__default__export__ = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"];\nconst stringify = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].stringify;\nconst fromJSON = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].fromJSON;\nconst plugin = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].plugin;\nconst parse = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].parse;\nconst list = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].list;\nconst document = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].document;\nconst comment = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].comment;\nconst atRule = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].atRule;\nconst rule = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].rule;\nconst decl = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].decl;\nconst root = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].root;\nconst CssSyntaxError = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].CssSyntaxError;\nconst Declaration = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Declaration;\nconst Container = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Container;\nconst Processor = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Processor;\nconst Document = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Document;\nconst Comment = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Comment;\nconst Warning = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Warning;\nconst AtRule = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].AtRule;\nconst Result = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Result;\nconst Input = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Input;\nconst Rule = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Rule;\nconst Root = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Root;\nconst Node = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"].Node;\n}),\n];\n\n//# sourceMappingURL=node_modules_fe693df6._.js.map","size_bytes":256183},".next/build/chunks/[root-of-the-server]__974941ed._.js":{"content":"module.exports = [\n\"[turbopack-node]/globals.ts [postcss] (ecmascript)\", ((__turbopack_context__, module, exports) => {\n\n// @ts-ignore\nprocess.turbopack = {};\n}),\n\"[externals]/node:net [external] (node:net, cjs)\", ((__turbopack_context__, module, exports) => {\n\nconst mod = __turbopack_context__.x(\"node:net\", () => require(\"node:net\"));\n\nmodule.exports = mod;\n}),\n\"[externals]/node:stream [external] (node:stream, cjs)\", ((__turbopack_context__, module, exports) => {\n\nconst mod = __turbopack_context__.x(\"node:stream\", () => require(\"node:stream\"));\n\nmodule.exports = mod;\n}),\n\"[turbopack-node]/compiled/stacktrace-parser/index.js [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"parse\",\n    ()=>parse\n]);\nif (typeof __nccwpck_require__ !== \"undefined\") __nccwpck_require__.ab = (\"TURBOPACK compile-time value\", \"/ROOT/compiled/stacktrace-parser\") + \"/\";\nvar n = \"<unknown>\";\nfunction parse(e) {\n    var r = e.split(\"\\n\");\n    return r.reduce(function(e, r) {\n        var n = parseChrome(r) || parseWinjs(r) || parseGecko(r) || parseNode(r) || parseJSC(r);\n        if (n) {\n            e.push(n);\n        }\n        return e;\n    }, []);\n}\nvar a = /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nvar l = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nfunction parseChrome(e) {\n    var r = a.exec(e);\n    if (!r) {\n        return null;\n    }\n    var u = r[2] && r[2].indexOf(\"native\") === 0;\n    var t = r[2] && r[2].indexOf(\"eval\") === 0;\n    var i = l.exec(r[2]);\n    if (t && i != null) {\n        r[2] = i[1];\n        r[3] = i[2];\n        r[4] = i[3];\n    }\n    return {\n        file: !u ? r[2] : null,\n        methodName: r[1] || n,\n        arguments: u ? [\n            r[2]\n        ] : [],\n        lineNumber: r[3] ? +r[3] : null,\n        column: r[4] ? +r[4] : null\n    };\n}\nvar u = /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseWinjs(e) {\n    var r = u.exec(e);\n    if (!r) {\n        return null;\n    }\n    return {\n        file: r[2],\n        methodName: r[1] || n,\n        arguments: [],\n        lineNumber: +r[3],\n        column: r[4] ? +r[4] : null\n    };\n}\nvar t = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar i = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nfunction parseGecko(e) {\n    var r = t.exec(e);\n    if (!r) {\n        return null;\n    }\n    var a = r[3] && r[3].indexOf(\" > eval\") > -1;\n    var l = i.exec(r[3]);\n    if (a && l != null) {\n        r[3] = l[1];\n        r[4] = l[2];\n        r[5] = null;\n    }\n    return {\n        file: r[3],\n        methodName: r[1] || n,\n        arguments: r[2] ? r[2].split(\",\") : [],\n        lineNumber: r[4] ? +r[4] : null,\n        column: r[5] ? +r[5] : null\n    };\n}\nvar s = /^\\s*(?:([^@]*)(?:\\((.*?)\\))?@)?(\\S.*?):(\\d+)(?::(\\d+))?\\s*$/i;\nfunction parseJSC(e) {\n    var r = s.exec(e);\n    if (!r) {\n        return null;\n    }\n    return {\n        file: r[3],\n        methodName: r[1] || n,\n        arguments: [],\n        lineNumber: +r[4],\n        column: r[5] ? +r[5] : null\n    };\n}\nvar o = /^\\s*at (?:((?:\\[object object\\])?[^\\\\/]+(?: \\[as \\S+\\])?) )?\\(?(.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseNode(e) {\n    var r = o.exec(e);\n    if (!r) {\n        return null;\n    }\n    return {\n        file: r[2],\n        methodName: r[1] || n,\n        arguments: [],\n        lineNumber: +r[3],\n        column: r[4] ? +r[4] : null\n    };\n}\n}),\n\"[turbopack-node]/ipc/error.ts [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n// merged from next.js\n// https://github.com/vercel/next.js/blob/e657741b9908cf0044aaef959c0c4defb19ed6d8/packages/next/src/lib/is-error.ts\n// https://github.com/vercel/next.js/blob/e657741b9908cf0044aaef959c0c4defb19ed6d8/packages/next/src/shared/lib/is-plain-object.ts\n__turbopack_context__.s([\n    \"default\",\n    ()=>isError,\n    \"getProperError\",\n    ()=>getProperError\n]);\nfunction isError(err) {\n    return typeof err === 'object' && err !== null && 'name' in err && 'message' in err;\n}\nfunction getProperError(err) {\n    if (isError(err)) {\n        return err;\n    }\n    if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable\n    ;\n    return new Error(isPlainObject(err) ? JSON.stringify(err) : err + '');\n}\nfunction getObjectClassLabel(value) {\n    return Object.prototype.toString.call(value);\n}\nfunction isPlainObject(value) {\n    if (getObjectClassLabel(value) !== '[object Object]') {\n        return false;\n    }\n    const prototype = Object.getPrototypeOf(value);\n    /**\n   * this used to be previously:\n   *\n   * `return prototype === null || prototype === Object.prototype`\n   *\n   * but Edge Runtime expose Object from vm, being that kind of type-checking wrongly fail.\n   *\n   * It was changed to the current implementation since it's resilient to serialization.\n   */ return prototype === null || prototype.hasOwnProperty('isPrototypeOf');\n}\n}),\n\"[turbopack-node]/ipc/index.ts [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"IPC\",\n    ()=>IPC,\n    \"structuredError\",\n    ()=>structuredError\n]);\nvar __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$net__$5b$external$5d$__$28$node$3a$net$2c$__cjs$29$__ = __turbopack_context__.i(\"[externals]/node:net [external] (node:net, cjs)\");\nvar __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$stream__$5b$external$5d$__$28$node$3a$stream$2c$__cjs$29$__ = __turbopack_context__.i(\"[externals]/node:stream [external] (node:stream, cjs)\");\nvar __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$compiled$2f$stacktrace$2d$parser$2f$index$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[turbopack-node]/compiled/stacktrace-parser/index.js [postcss] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$error$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[turbopack-node]/ipc/error.ts [postcss] (ecmascript)\");\n;\n;\n;\n;\nfunction structuredError(e) {\n    e = (0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$error$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"getProperError\"])(e);\n    return {\n        name: e.name,\n        message: e.message,\n        stack: typeof e.stack === 'string' ? (0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$compiled$2f$stacktrace$2d$parser$2f$index$2e$js__$5b$postcss$5d$__$28$ecmascript$29$__[\"parse\"])(e.stack) : [],\n        cause: e.cause ? structuredError((0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$error$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"getProperError\"])(e.cause)) : undefined\n    };\n}\nfunction createIpc(port) {\n    const socket = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$net__$5b$external$5d$__$28$node$3a$net$2c$__cjs$29$__[\"createConnection\"])({\n        port,\n        host: '127.0.0.1'\n    });\n    /**\n   * A writable stream that writes to the socket.\n   * We don't write directly to the socket because we need to\n   * handle backpressure and wait for the socket to be drained\n   * before writing more data.\n   */ const socketWritable = new __TURBOPACK__imported__module__$5b$externals$5d2f$node$3a$stream__$5b$external$5d$__$28$node$3a$stream$2c$__cjs$29$__[\"Writable\"]({\n        write (chunk, _enc, cb) {\n            if (socket.write(chunk)) {\n                cb();\n            } else {\n                socket.once('drain', cb);\n            }\n        },\n        final (cb) {\n            socket.end(cb);\n        }\n    });\n    const packetQueue = [];\n    const recvPromiseResolveQueue = [];\n    function pushPacket(packet) {\n        const recvPromiseResolve = recvPromiseResolveQueue.shift();\n        if (recvPromiseResolve != null) {\n            recvPromiseResolve(JSON.parse(packet.toString('utf8')));\n        } else {\n            packetQueue.push(packet);\n        }\n    }\n    let state = {\n        type: 'waiting'\n    };\n    let buffer = Buffer.alloc(0);\n    socket.once('connect', ()=>{\n        socket.on('data', (chunk)=>{\n            buffer = Buffer.concat([\n                buffer,\n                chunk\n            ]);\n            loop: while(true){\n                switch(state.type){\n                    case 'waiting':\n                        {\n                            if (buffer.length >= 4) {\n                                const length = buffer.readUInt32BE(0);\n                                buffer = buffer.subarray(4);\n                                state = {\n                                    type: 'packet',\n                                    length\n                                };\n                            } else {\n                                break loop;\n                            }\n                            break;\n                        }\n                    case 'packet':\n                        {\n                            if (buffer.length >= state.length) {\n                                const packet = buffer.subarray(0, state.length);\n                                buffer = buffer.subarray(state.length);\n                                state = {\n                                    type: 'waiting'\n                                };\n                                pushPacket(packet);\n                            } else {\n                                break loop;\n                            }\n                            break;\n                        }\n                    default:\n                        invariant(state, (state)=>`Unknown state type: ${state?.type}`);\n                }\n            }\n        });\n    });\n    // When the socket is closed, this process is no longer needed.\n    // This might happen e. g. when parent process is killed or\n    // node.js pool is garbage collected.\n    socket.once('close', ()=>{\n        process.exit(0);\n    });\n    // TODO(lukesandberg): some of the messages being sent are very large and contain lots\n    //  of redundant information.  Consider adding gzip compression to our stream.\n    function doSend(message) {\n        return new Promise((resolve, reject)=>{\n            // Reserve 4 bytes for our length prefix, we will over-write after encoding.\n            const packet = Buffer.from('0000' + message, 'utf8');\n            packet.writeUInt32BE(packet.length - 4, 0);\n            socketWritable.write(packet, (err)=>{\n                process.stderr.write(`TURBOPACK_OUTPUT_D\\n`);\n                process.stdout.write(`TURBOPACK_OUTPUT_D\\n`);\n                if (err != null) {\n                    reject(err);\n                } else {\n                    resolve();\n                }\n            });\n        });\n    }\n    function send(message) {\n        return doSend(JSON.stringify(message));\n    }\n    function sendReady() {\n        return doSend('');\n    }\n    return {\n        async recv () {\n            const packet = packetQueue.shift();\n            if (packet != null) {\n                return JSON.parse(packet.toString('utf8'));\n            }\n            const result = await new Promise((resolve)=>{\n                recvPromiseResolveQueue.push((result)=>{\n                    resolve(result);\n                });\n            });\n            return result;\n        },\n        send (message) {\n            return send(message);\n        },\n        sendReady,\n        async sendError (error) {\n            let failed = false;\n            try {\n                await send({\n                    type: 'error',\n                    ...structuredError(error)\n                });\n            } catch (err) {\n                // There's nothing we can do about errors that happen after this point, we can't tell anyone\n                // about them.\n                console.error('failed to send error back to rust:', err);\n                failed = true;\n            }\n            await new Promise((res)=>socket.end(()=>res()));\n            process.exit(failed ? 1 : 0);\n        }\n    };\n}\nconst PORT = process.argv[2];\nconst IPC = createIpc(parseInt(PORT, 10));\nprocess.on('uncaughtException', (err)=>{\n    IPC.sendError(err);\n});\nconst improveConsole = (name, stream, addStack)=>{\n    // @ts-ignore\n    const original = console[name];\n    // @ts-ignore\n    const stdio = process[stream];\n    // @ts-ignore\n    console[name] = (...args)=>{\n        stdio.write(`TURBOPACK_OUTPUT_B\\n`);\n        original(...args);\n        if (addStack) {\n            const stack = new Error().stack?.replace(/^.+\\n.+\\n/, '') + '\\n';\n            stdio.write('TURBOPACK_OUTPUT_S\\n');\n            stdio.write(stack);\n        }\n        stdio.write('TURBOPACK_OUTPUT_E\\n');\n    };\n};\nimproveConsole('error', 'stderr', true);\nimproveConsole('warn', 'stderr', true);\nimproveConsole('count', 'stdout', true);\nimproveConsole('trace', 'stderr', false);\nimproveConsole('log', 'stdout', true);\nimproveConsole('group', 'stdout', true);\nimproveConsole('groupCollapsed', 'stdout', true);\nimproveConsole('table', 'stdout', true);\nimproveConsole('debug', 'stdout', true);\nimproveConsole('info', 'stdout', true);\nimproveConsole('dir', 'stdout', true);\nimproveConsole('dirxml', 'stdout', true);\nimproveConsole('timeEnd', 'stdout', true);\nimproveConsole('timeLog', 'stdout', true);\nimproveConsole('timeStamp', 'stdout', true);\nimproveConsole('assert', 'stderr', true);\n/**\n * Utility function to ensure all variants of an enum are handled.\n */ function invariant(never, computeMessage) {\n    throw new Error(`Invariant: ${computeMessage(never)}`);\n}\n}),\n\"[turbopack-node]/ipc/evaluate.ts [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"run\",\n    ()=>run\n]);\nvar __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$index$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[turbopack-node]/ipc/index.ts [postcss] (ecmascript)\");\n;\nconst ipc = __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$index$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"IPC\"];\nconst queue = [];\nconst run = async (moduleFactory)=>{\n    let nextId = 1;\n    const requests = new Map();\n    const internalIpc = {\n        sendInfo: (message)=>ipc.send({\n                type: 'info',\n                data: message\n            }),\n        sendRequest: (message)=>{\n            const id = nextId++;\n            let resolve, reject;\n            const promise = new Promise((res, rej)=>{\n                resolve = res;\n                reject = rej;\n            });\n            requests.set(id, {\n                resolve,\n                reject\n            });\n            return ipc.send({\n                type: 'request',\n                id,\n                data: message\n            }).then(()=>promise);\n        },\n        sendError: (error)=>{\n            return ipc.sendError(error);\n        }\n    };\n    // Initialize module and send ready message\n    let getValue;\n    try {\n        const module = await moduleFactory();\n        if (typeof module.init === 'function') {\n            await module.init();\n        }\n        getValue = module.default;\n        await ipc.sendReady();\n    } catch (err) {\n        await ipc.sendReady();\n        await ipc.sendError(err);\n    }\n    // Queue handling\n    let isRunning = false;\n    const run = async ()=>{\n        while(queue.length > 0){\n            const args = queue.shift();\n            try {\n                const value = await getValue(internalIpc, ...args);\n                await ipc.send({\n                    type: 'end',\n                    data: value === undefined ? undefined : JSON.stringify(value, null, 2),\n                    duration: 0\n                });\n            } catch (e) {\n                await ipc.sendError(e);\n            }\n        }\n        isRunning = false;\n    };\n    // Communication handling\n    while(true){\n        const msg = await ipc.recv();\n        switch(msg.type){\n            case 'evaluate':\n                {\n                    queue.push(msg.args);\n                    if (!isRunning) {\n                        isRunning = true;\n                        run();\n                    }\n                    break;\n                }\n            case 'result':\n                {\n                    const request = requests.get(msg.id);\n                    if (request) {\n                        requests.delete(msg.id);\n                        if (msg.error) {\n                            request.reject(new Error(msg.error));\n                        } else {\n                            request.resolve(msg.data);\n                        }\n                    }\n                    break;\n                }\n            default:\n                {\n                    console.error('unexpected message type', msg.type);\n                    process.exit(1);\n                }\n        }\n    }\n};\n}),\n\"[turbopack-node]/ipc/evaluate.ts/evaluate.js { INNER => \\\"[turbopack-node]/transforms/postcss.ts { CONFIG => \\\\\\\"[project]/postcss.config.mjs [postcss] (ecmascript)\\\\\\\" } [postcss] (ecmascript)\\\", RUNTIME => \\\"[turbopack-node]/ipc/evaluate.ts [postcss] (ecmascript)\\\" } [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([]);\nvar __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$evaluate$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[turbopack-node]/ipc/evaluate.ts [postcss] (ecmascript)\");\n;\n(0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$ipc$2f$evaluate$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"run\"])(()=>__turbopack_context__.A('[turbopack-node]/transforms/postcss.ts { CONFIG => \"[project]/postcss.config.mjs [postcss] (ecmascript)\" } [postcss] (ecmascript, async loader)'));\n}),\n];\n\n//# sourceMappingURL=%5Broot-of-the-server%5D__974941ed._.js.map","size_bytes":17868},".next/server/next-font-manifest.js":{"content":"self.__NEXT_FONT_MANIFEST=\"{\\n  \\\"app\\\": {\\n    \\\"[project]/app/page\\\": [\\n      \\\"static/media/83afe278b6a6bb3c-s.p.3a6ba036.woff2\\\"\\n    ]\\n  },\\n  \\\"appUsingSizeAdjust\\\": true,\\n  \\\"pages\\\": {},\\n  \\\"pagesUsingSizeAdjust\\\": false\\n}\"","size_bytes":236},".next/server/app/page.js":{"content":"var R=require(\"../chunks/ssr/[turbopack]_runtime.js\")(\"server/app/page.js\")\nR.c(\"server/chunks/ssr/node_modules_5f2d4120._.js\")\nR.c(\"server/chunks/ssr/[root-of-the-server]__e8a2741f._.js\")\nR.c(\"server/chunks/ssr/app_5a09c952._.js\")\nR.c(\"server/chunks/ssr/app_1026281d._.js\")\nR.c(\"server/chunks/ssr/[root-of-the-server]__7994b7fe._.js\")\nR.c(\"server/chunks/ssr/node_modules_next_dist_client_components_9774470f._.js\")\nR.c(\"server/chunks/ssr/node_modules_next_dist_client_components_builtin_forbidden_45780354.js\")\nR.c(\"server/chunks/ssr/node_modules_next_dist_client_components_builtin_unauthorized_15817684.js\")\nR.c(\"server/chunks/ssr/node_modules_next_dist_client_components_builtin_global-error_ece394eb.js\")\nR.c(\"server/chunks/ssr/node_modules_next_dist_7adf3517._.js\")\nR.c(\"server/chunks/ssr/[root-of-the-server]__d24db971._.js\")\nR.m(\"[project]/.next-internal/server/app/page/actions.js [app-rsc] (server actions loader, ecmascript)\")\nR.m(\"[project]/node_modules/next/dist/esm/build/templates/app-page.js?page=/page { GLOBAL_ERROR_MODULE => \\\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-rsc] (ecmascript, Next.js Server Component)\\\", METADATA_0 => \\\"[project]/app/icon.png.mjs { IMAGE => \\\\\\\"[project]/app/icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", METADATA_1 => \\\"[project]/app/apple-icon.png.mjs { IMAGE => \\\\\\\"[project]/app/apple-icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", MODULE_2 => \\\"[project]/app/layout.tsx [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_3 => \\\"[project]/node_modules/next/dist/client/components/builtin/not-found.js [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_4 => \\\"[project]/node_modules/next/dist/client/components/builtin/forbidden.js [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_5 => \\\"[project]/node_modules/next/dist/client/components/builtin/unauthorized.js [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_6 => \\\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-rsc] (ecmascript, Next.js Server Component)\\\", METADATA_7 => \\\"[project]/app/icon.png.mjs { IMAGE => \\\\\\\"[project]/app/icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", METADATA_8 => \\\"[project]/app/apple-icon.png.mjs { IMAGE => \\\\\\\"[project]/app/apple-icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", MODULE_9 => \\\"[project]/app/page.tsx [app-rsc] (ecmascript, Next.js Server Component)\\\" } [app-rsc] (ecmascript)\")\nmodule.exports=R.m(\"[project]/node_modules/next/dist/esm/build/templates/app-page.js?page=/page { GLOBAL_ERROR_MODULE => \\\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-rsc] (ecmascript, Next.js Server Component)\\\", METADATA_0 => \\\"[project]/app/icon.png.mjs { IMAGE => \\\\\\\"[project]/app/icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", METADATA_1 => \\\"[project]/app/apple-icon.png.mjs { IMAGE => \\\\\\\"[project]/app/apple-icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", MODULE_2 => \\\"[project]/app/layout.tsx [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_3 => \\\"[project]/node_modules/next/dist/client/components/builtin/not-found.js [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_4 => \\\"[project]/node_modules/next/dist/client/components/builtin/forbidden.js [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_5 => \\\"[project]/node_modules/next/dist/client/components/builtin/unauthorized.js [app-rsc] (ecmascript, Next.js Server Component)\\\", MODULE_6 => \\\"[project]/node_modules/next/dist/client/components/builtin/global-error.js [app-rsc] (ecmascript, Next.js Server Component)\\\", METADATA_7 => \\\"[project]/app/icon.png.mjs { IMAGE => \\\\\\\"[project]/app/icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", METADATA_8 => \\\"[project]/app/apple-icon.png.mjs { IMAGE => \\\\\\\"[project]/app/apple-icon.png (static in ecmascript)\\\\\\\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)\\\", MODULE_9 => \\\"[project]/app/page.tsx [app-rsc] (ecmascript, Next.js Server Component)\\\" } [app-rsc] (ecmascript)\").exports\n","size_bytes":4503},".next/build/chunks/[root-of-the-server]__51225daf._.js":{"content":"module.exports = [\n\"[externals]/path [external] (path, cjs)\", ((__turbopack_context__, module, exports) => {\n\nconst mod = __turbopack_context__.x(\"path\", () => require(\"path\"));\n\nmodule.exports = mod;\n}),\n\"[externals]/url [external] (url, cjs)\", ((__turbopack_context__, module, exports) => {\n\nconst mod = __turbopack_context__.x(\"url\", () => require(\"url\"));\n\nmodule.exports = mod;\n}),\n\"[externals]/fs [external] (fs, cjs)\", ((__turbopack_context__, module, exports) => {\n\nconst mod = __turbopack_context__.x(\"fs\", () => require(\"fs\"));\n\nmodule.exports = mod;\n}),\n\"[project]/postcss.config.mjs [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"default\",\n    ()=>__TURBOPACK__default__export__\n]);\nconst config = {\n    plugins: [\n        \"@tailwindcss/postcss\"\n    ]\n};\nconst __TURBOPACK__default__export__ = config;\n}),\n\"[turbopack-node]/transforms/transforms.ts [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n/**\n * Shared utilities for our 2 transform implementations.\n */ __turbopack_context__.s([\n    \"fromPath\",\n    ()=>fromPath,\n    \"getReadEnvVariables\",\n    ()=>getReadEnvVariables,\n    \"toPath\",\n    ()=>toPath\n]);\nvar __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i(\"[externals]/path [external] (path, cjs)\");\n;\nconst contextDir = process.cwd();\nconst toPath = (file)=>{\n    const relPath = (0, __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"relative\"])(contextDir, file);\n    if ((0, __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"isAbsolute\"])(relPath)) {\n        throw new Error(`Cannot depend on path (${file}) outside of root directory (${contextDir})`);\n    }\n    return __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"sep\"] !== '/' ? relPath.replaceAll(__TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"sep\"], '/') : relPath;\n};\nconst fromPath = (path)=>{\n    return (0, __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"join\"])(contextDir, __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"sep\"] !== '/' ? path.replaceAll('/', __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__[\"sep\"]) : path);\n};\n// Patch process.env to track which env vars are read\nconst originalEnv = process.env;\nconst readEnvVars = new Set();\nprocess.env = new Proxy(originalEnv, {\n    get (target, prop) {\n        if (typeof prop === 'string') {\n            // We register the env var as dependency on the\n            // current transform and all future transforms\n            // since the env var might be cached in module scope\n            // and influence them all\n            readEnvVars.add(prop);\n        }\n        return Reflect.get(target, prop);\n    },\n    set (target, prop, value) {\n        return Reflect.set(target, prop, value);\n    }\n});\nfunction getReadEnvVariables() {\n    return Array.from(readEnvVars);\n}\n}),\n\"[turbopack-node]/transforms/postcss.ts { CONFIG => \\\"[project]/postcss.config.mjs [postcss] (ecmascript)\\\" } [postcss] (ecmascript)\", ((__turbopack_context__) => {\n\"use strict\";\n\n__turbopack_context__.s([\n    \"default\",\n    ()=>transform,\n    \"init\",\n    ()=>init\n]);\n// @ts-ignore\nvar __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$mjs__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/node_modules/postcss/lib/postcss.mjs [postcss] (ecmascript)\");\n// @ts-ignore\nvar __TURBOPACK__imported__module__$5b$project$5d2f$postcss$2e$config$2e$mjs__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[project]/postcss.config.mjs [postcss] (ecmascript)\");\nvar __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$transforms$2f$transforms$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__ = __turbopack_context__.i(\"[turbopack-node]/transforms/transforms.ts [postcss] (ecmascript)\");\n;\n;\n;\nlet processor;\nconst init = async (ipc)=>{\n    let config = __TURBOPACK__imported__module__$5b$project$5d2f$postcss$2e$config$2e$mjs__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"];\n    if (typeof config === 'function') {\n        config = await config({\n            env: 'development'\n        });\n    }\n    if (typeof config === 'undefined') {\n        throw new Error('PostCSS config is undefined (make sure to export an function or object from config file)');\n    }\n    let plugins;\n    if (Array.isArray(config.plugins)) {\n        plugins = config.plugins.map((plugin)=>{\n            if (Array.isArray(plugin)) {\n                return plugin;\n            } else if (typeof plugin === 'string') {\n                return [\n                    plugin,\n                    {}\n                ];\n            } else {\n                return plugin;\n            }\n        });\n    } else if (typeof config.plugins === 'object') {\n        plugins = Object.entries(config.plugins).filter(([, options])=>options);\n    } else {\n        plugins = [];\n    }\n    const loadedPlugins = plugins.map((plugin)=>{\n        if (Array.isArray(plugin)) {\n            const [arg, options] = plugin;\n            let pluginFactory = arg;\n            if (typeof pluginFactory === 'string') {\n                pluginFactory = require(/* turbopackIgnore: true */ pluginFactory);\n            }\n            if (pluginFactory.default) {\n                pluginFactory = pluginFactory.default;\n            }\n            return pluginFactory(options);\n        }\n        return plugin;\n    });\n    processor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$postcss$2f$lib$2f$postcss$2e$mjs__$5b$postcss$5d$__$28$ecmascript$29$__[\"default\"])(loadedPlugins);\n};\nasync function transform(ipc, cssContent, name, sourceMap) {\n    const { css, map, messages } = await processor.process(cssContent, {\n        from: name,\n        to: name,\n        map: sourceMap ? {\n            inline: false,\n            annotation: false\n        } : undefined\n    });\n    const assets = [];\n    const filePaths = [];\n    const buildFilePaths = [];\n    const directories = [];\n    for (const msg of messages){\n        switch(msg.type){\n            case 'asset':\n                assets.push({\n                    file: msg.file,\n                    content: msg.content,\n                    sourceMap: !sourceMap ? undefined : typeof msg.sourceMap === 'string' ? msg.sourceMap : JSON.stringify(msg.sourceMap)\n                });\n                break;\n            case 'dependency':\n            case 'missing-dependency':\n                filePaths.push((0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$transforms$2f$transforms$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"toPath\"])(msg.file));\n                break;\n            case 'build-dependency':\n                buildFilePaths.push((0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$transforms$2f$transforms$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"toPath\"])(msg.file));\n                break;\n            case 'dir-dependency':\n                directories.push([\n                    (0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$transforms$2f$transforms$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"toPath\"])(msg.dir),\n                    msg.glob\n                ]);\n                break;\n            case 'context-dependency':\n                directories.push([\n                    (0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$transforms$2f$transforms$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"toPath\"])(msg.dir),\n                    '**'\n                ]);\n                break;\n            default:\n                break;\n        }\n    }\n    ipc.sendInfo({\n        type: 'dependencies',\n        filePaths,\n        directories,\n        buildFilePaths,\n        envVariables: (0, __TURBOPACK__imported__module__$5b$turbopack$2d$node$5d2f$transforms$2f$transforms$2e$ts__$5b$postcss$5d$__$28$ecmascript$29$__[\"getReadEnvVariables\"])()\n    });\n    return {\n        css,\n        map: sourceMap ? JSON.stringify(map) : undefined,\n        assets\n    };\n}\n}),\n];\n\n//# sourceMappingURL=%5Broot-of-the-server%5D__51225daf._.js.map","size_bytes":8405},"app/(dashboard)/dashboard/coaching/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { CoachingDashboardClient } from \"./coaching-dashboard-client\"\nimport { TrendingUp, Users, Euro, Calendar, Target, BarChart3, Clock, CheckCircle } from \"lucide-react\"\nimport { PlanType } from \"@/lib/features\"\n\nexport default async function CoachingPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      id: true,\n      plan: true,\n      displayName: true,\n      username: true,\n      stats: true\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  // V√©rifier que l'utilisateur a le plan COACH ou ELITE\n  if (profile.plan !== PlanType.ELITE) {\n    redirect(\"/dashboard\")\n  }\n\n  // Calculer les statistiques depuis les stats JSON\n  const stats = profile.stats as any || {}\n  const trainingPlans = stats.trainingPlans || []\n  const bookings = stats.bookings || []\n\n  const totalPlans = trainingPlans.length\n  const activePlans = trainingPlans.filter((plan: any) => plan.isActive).length\n  const totalBookings = bookings.length\n  const pendingBookings = bookings.filter((booking: any) => booking.status === \"PENDING\").length\n  const confirmedBookings = bookings.filter((booking: any) => booking.status === \"CONFIRMED\").length\n  const completedBookingsArray = bookings.filter((booking: any) => booking.status === \"COMPLETED\")\n  const completedBookings = completedBookingsArray.length\n  const totalRevenue = completedBookingsArray.reduce((sum: number, booking: any) => sum + booking.price, 0)\n  const monthlyRevenue = completedBookingsArray\n    .filter((booking: any) => {\n      const bookingDate = new Date(booking.date)\n      const now = new Date()\n      return bookingDate.getMonth() === now.getMonth() && bookingDate.getFullYear() === now.getFullYear()\n    })\n    .reduce((sum: number, booking: any) => sum + booking.price, 0)\n\n  const dashboardStats = {\n    totalPlans,\n    activePlans,\n    totalBookings,\n    pendingBookings,\n    confirmedBookings,\n    completedBookings,\n    totalRevenue,\n    monthlyRevenue\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header Centre de Coaching */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-white rounded-b-2xl sm:rounded-b-3xl border-b border-gray-200 shadow-lg\">\n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-8\">\n            <div className=\"flex-1\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center shadow-lg\">\n                  <Target className=\"w-6 h-6 text-black\" />\n                </div>\n                <PlanBadge plan={profile.plan as PlanType} size=\"lg\" />\n              </div>\n              \n              <h1 className=\"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-black mb-4 text-gray-900\">\n                Centre de Coaching\n              </h1>\n              <p className=\"text-lg sm:text-xl text-gray-600 font-medium mb-6\">\n                D√©veloppe ton business de coaching professionnel\n              </p>\n              \n              <div className=\"flex flex-wrap gap-4 text-sm\">\n                <div className=\"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200\">\n                  <CheckCircle className=\"w-4 h-4 text-gray-700\" />\n                  <span className=\"text-gray-700 font-medium\">Interface Professionnelle</span>\n                </div>\n                <div className=\"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200\">\n                  <TrendingUp className=\"w-4 h-4 text-gray-700\" />\n                  <span className=\"text-gray-700 font-medium\">Analytics Temps R√©el</span>\n                </div>\n                <div className=\"flex items-center gap-2 bg-gray-50 px-4 py-2 rounded-full border border-gray-200\">\n                  <Users className=\"w-4 h-4 text-gray-700\" />\n                  <span className=\"text-gray-700 font-medium\">Gestion Clients</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Quick Stats */}\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4 w-full lg:w-auto\">\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Target className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">Plans Actifs</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{activePlans}</div>\n                <div className=\"text-xs text-gray-500\">sur {totalPlans}</div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Calendar className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">R√©servations</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{totalBookings}</div>\n                <div className=\"text-xs text-gray-500\">{pendingBookings} en attente</div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <Euro className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">Revenus</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{totalRevenue.toFixed(0)}‚Ç¨</div>\n                <div className=\"text-xs text-gray-500\">{monthlyRevenue.toFixed(0)}‚Ç¨ ce mois</div>\n              </div>\n\n              <div className=\"bg-gray-50 rounded-2xl p-4 border border-gray-200 hover:border-gray-300 hover:shadow-md transition-all\">\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <CheckCircle className=\"w-5 h-5 text-gray-700\" />\n                  <span className=\"text-xs text-gray-600 font-medium\">Compl√©t√©es</span>\n                </div>\n                <div className=\"text-2xl font-bold text-gray-900\">{completedBookings}</div>\n                <div className=\"text-xs text-gray-500\">s√©ances termin√©es</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component avec interface ultra-pro */}\n      <CoachingDashboardClient \n        initialStats={dashboardStats}\n        profileId={profile.id}\n        coachName={profile.displayName}\n        username={profile.username}\n      />\n    </div>\n  )\n}\n","size_bytes":7230},"app/api/sponsors/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { sponsorSchema } from \"@/lib/validations\"\nimport { canAddItem, getLimitMessage, PlanType } from \"@/lib/features\"\n\n// GET all sponsors\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        sponsors: {\n          orderBy: { position: 'asc' }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ sponsors: profile.sponsors })\n\n  } catch (error) {\n    console.error(\"GET sponsors error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// POST new sponsor\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = sponsorSchema.parse(body)\n\n    // Convertir les cha√Ænes vides en null pour Prisma\n    const cleanedData = {\n      ...validatedData,\n      logoUrl: validatedData.logoUrl && validatedData.logoUrl.trim() !== \"\" ? validatedData.logoUrl : null,\n      websiteUrl: validatedData.websiteUrl && validatedData.websiteUrl.trim() !== \"\" ? validatedData.websiteUrl : null,\n      promoCode: validatedData.promoCode && validatedData.promoCode.trim() !== \"\" ? validatedData.promoCode : null,\n      description: validatedData.description && validatedData.description.trim() !== \"\" ? validatedData.description : null,\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: { sponsors: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Check plan limits using features system\n    const userPlan = profile.plan as PlanType\n    if (!canAddItem(profile.sponsors.length, userPlan, 'sponsors')) {\n      return NextResponse.json(\n        { error: getLimitMessage(userPlan, 'sponsors') },\n        { status: 403 }\n      )\n    }\n\n    const maxPosition = await prisma.sponsor.aggregate({\n      where: { profileId: profile.id },\n      _max: { position: true }\n    })\n\n    const sponsor = await prisma.sponsor.create({\n      data: {\n        ...cleanedData,\n        profileId: profile.id,\n        position: (maxPosition._max.position || 0) + 1\n      }\n    })\n\n    return NextResponse.json({ sponsor }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"POST sponsor error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3114},".next/types/routes.d.ts":{"content":"// This file is generated automatically by Next.js\n// Do not edit this file manually\n\ntype AppRoutes = \"/\" | \"/[username]\" | \"/[username]/coaching\" | \"/[username]/galerie\" | \"/admin/ambassadors\" | \"/admin/ambassadors/[id]\" | \"/dashboard\" | \"/dashboard/analytics\" | \"/dashboard/coaching\" | \"/dashboard/coaching/bookings\" | \"/dashboard/coaching/business-analytics\" | \"/dashboard/coaching/training-plans\" | \"/dashboard/media\" | \"/dashboard/profile\" | \"/dashboard/settings\" | \"/dashboard/share\" | \"/dashboard/sources\" | \"/dashboard/upgrade\" | \"/login\" | \"/signup\"\ntype AppRouteHandlerRoutes = \"/api/admin/ambassadors\" | \"/api/admin/ambassadors/[id]\" | \"/api/admin/promo-codes\" | \"/api/admin/promo-codes/[id]\" | \"/api/analytics/data\" | \"/api/analytics/export-csv\" | \"/api/analytics/export-pdf\" | \"/api/analytics/track-click\" | \"/api/analytics/track-view\" | \"/api/auth/[...nextauth]\" | \"/api/auth/signup\" | \"/api/coaching/bookings\" | \"/api/coaching/bookings/[id]\" | \"/api/coaching/training-plans\" | \"/api/coaching/training-plans/[id]\" | \"/api/coaching/upload-pdf\" | \"/api/create-checkout-session\" | \"/api/cron/expire-trials\" | \"/api/links\" | \"/api/links/[id]\" | \"/api/media\" | \"/api/media/[id]\" | \"/api/profile\" | \"/api/promo-codes/apply\" | \"/api/promo-codes/use\" | \"/api/promo-codes/validate\" | \"/api/public/booking-request\" | \"/api/races\" | \"/api/races/[id]\" | \"/api/races/extract-logo\" | \"/api/sponsors\" | \"/api/sponsors/[id]\" | \"/api/sponsors/extract-logo\" | \"/api/upgrade-plan\" | \"/api/upload\" | \"/api/webhooks/stripe\"\ntype PageRoutes = never\ntype LayoutRoutes = \"/\"\ntype RedirectRoutes = never\ntype RewriteRoutes = never\ntype Routes = AppRoutes | PageRoutes | LayoutRoutes | RedirectRoutes | RewriteRoutes | AppRouteHandlerRoutes\n\n\ninterface ParamMap {\n  \"/\": {}\n  \"/[username]\": { \"username\": string; }\n  \"/[username]/coaching\": { \"username\": string; }\n  \"/[username]/galerie\": { \"username\": string; }\n  \"/admin/ambassadors\": {}\n  \"/admin/ambassadors/[id]\": { \"id\": string; }\n  \"/api/admin/ambassadors\": {}\n  \"/api/admin/ambassadors/[id]\": { \"id\": string; }\n  \"/api/admin/promo-codes\": {}\n  \"/api/admin/promo-codes/[id]\": { \"id\": string; }\n  \"/api/analytics/data\": {}\n  \"/api/analytics/export-csv\": {}\n  \"/api/analytics/export-pdf\": {}\n  \"/api/analytics/track-click\": {}\n  \"/api/analytics/track-view\": {}\n  \"/api/auth/[...nextauth]\": { \"nextauth\": string[]; }\n  \"/api/auth/signup\": {}\n  \"/api/coaching/bookings\": {}\n  \"/api/coaching/bookings/[id]\": { \"id\": string; }\n  \"/api/coaching/training-plans\": {}\n  \"/api/coaching/training-plans/[id]\": { \"id\": string; }\n  \"/api/coaching/upload-pdf\": {}\n  \"/api/create-checkout-session\": {}\n  \"/api/cron/expire-trials\": {}\n  \"/api/links\": {}\n  \"/api/links/[id]\": { \"id\": string; }\n  \"/api/media\": {}\n  \"/api/media/[id]\": { \"id\": string; }\n  \"/api/profile\": {}\n  \"/api/promo-codes/apply\": {}\n  \"/api/promo-codes/use\": {}\n  \"/api/promo-codes/validate\": {}\n  \"/api/public/booking-request\": {}\n  \"/api/races\": {}\n  \"/api/races/[id]\": { \"id\": string; }\n  \"/api/races/extract-logo\": {}\n  \"/api/sponsors\": {}\n  \"/api/sponsors/[id]\": { \"id\": string; }\n  \"/api/sponsors/extract-logo\": {}\n  \"/api/upgrade-plan\": {}\n  \"/api/upload\": {}\n  \"/api/webhooks/stripe\": {}\n  \"/dashboard\": {}\n  \"/dashboard/analytics\": {}\n  \"/dashboard/coaching\": {}\n  \"/dashboard/coaching/bookings\": {}\n  \"/dashboard/coaching/business-analytics\": {}\n  \"/dashboard/coaching/training-plans\": {}\n  \"/dashboard/media\": {}\n  \"/dashboard/profile\": {}\n  \"/dashboard/settings\": {}\n  \"/dashboard/share\": {}\n  \"/dashboard/sources\": {}\n  \"/dashboard/upgrade\": {}\n  \"/login\": {}\n  \"/signup\": {}\n}\n\n\nexport type ParamsOf<Route extends Routes> = ParamMap[Route]\n\ninterface LayoutSlotMap {\n  \"/\": never\n}\n\n\nexport type { AppRoutes, PageRoutes, LayoutRoutes, RedirectRoutes, RewriteRoutes, ParamMap, AppRouteHandlerRoutes }\n\ndeclare global {\n  /**\n   * Props for Next.js App Router page components\n   * @example\n   * ```tsx\n   * export default function Page(props: PageProps<'/blog/[slug]'>) {\n   *   const { slug } = await props.params\n   *   return <div>Blog post: {slug}</div>\n   * }\n   * ```\n   */\n  interface PageProps<AppRoute extends AppRoutes> {\n    params: Promise<ParamMap[AppRoute]>\n    searchParams: Promise<Record<string, string | string[] | undefined>>\n  }\n\n  /**\n   * Props for Next.js App Router layout components\n   * @example\n   * ```tsx\n   * export default function Layout(props: LayoutProps<'/dashboard'>) {\n   *   return <div>{props.children}</div>\n   * }\n   * ```\n   */\n  type LayoutProps<LayoutRoute extends LayoutRoutes> = {\n    params: Promise<ParamMap[LayoutRoute]>\n    children: React.ReactNode\n  } & {\n    [K in LayoutSlotMap[LayoutRoute]]: React.ReactNode\n  }\n\n  /**\n   * Context for Next.js App Router route handlers\n   * @example\n   * ```tsx\n   * export async function GET(request: NextRequest, context: RouteContext<'/api/users/[id]'>) {\n   *   const { id } = await context.params\n   *   return Response.json({ id })\n   * }\n   * ```\n   */\n  interface RouteContext<AppRouteHandlerRoute extends AppRouteHandlerRoutes> {\n    params: Promise<ParamMap[AppRouteHandlerRoute]>\n  }\n}\n","size_bytes":5097},".next/types/validator.ts":{"content":"// This file is generated automatically by Next.js\n// Do not edit this file manually\n// This file validates that all pages and layouts export the correct types\n\nimport type { AppRoutes, LayoutRoutes, ParamMap, AppRouteHandlerRoutes } from \"./routes.js\"\nimport type { ResolvingMetadata, ResolvingViewport } from \"next/types.js\"\nimport type { NextRequest } from 'next/server.js'\n\ntype AppPageConfig<Route extends AppRoutes = AppRoutes> = {\n  default: React.ComponentType<{ params: Promise<ParamMap[Route]> } & any> | ((props: { params: Promise<ParamMap[Route]> } & any) => React.ReactNode | Promise<React.ReactNode> | never | void | Promise<void>)\n  generateStaticParams?: (props: { params: ParamMap[Route] }) => Promise<any[]> | any[]\n  generateMetadata?: (\n    props: { params: Promise<ParamMap[Route]> } & any,\n    parent: ResolvingMetadata\n  ) => Promise<any> | any\n  generateViewport?: (\n    props: { params: Promise<ParamMap[Route]> } & any,\n    parent: ResolvingViewport\n  ) => Promise<any> | any\n  metadata?: any\n  viewport?: any\n}\n\ntype LayoutConfig<Route extends LayoutRoutes = LayoutRoutes> = {\n  default: React.ComponentType<LayoutProps<Route>> | ((props: LayoutProps<Route>) => React.ReactNode | Promise<React.ReactNode> | never | void | Promise<void>)\n  generateStaticParams?: (props: { params: ParamMap[Route] }) => Promise<any[]> | any[]\n  generateMetadata?: (\n    props: { params: Promise<ParamMap[Route]> } & any,\n    parent: ResolvingMetadata\n  ) => Promise<any> | any\n  generateViewport?: (\n    props: { params: Promise<ParamMap[Route]> } & any,\n    parent: ResolvingViewport\n  ) => Promise<any> | any\n  metadata?: any\n  viewport?: any\n}\n\ntype RouteHandlerConfig<Route extends AppRouteHandlerRoutes = AppRouteHandlerRoutes> = {\n  GET?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n  POST?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n  PUT?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n  PATCH?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n  DELETE?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n  HEAD?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n  OPTIONS?: (request: NextRequest, context: { params: Promise<ParamMap[Route]> }) => Promise<Response | void> | Response | void\n}\n\n\n// Validate ../../app/(auth)/login/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/login\">> = Specific\n  const handler = {} as typeof import(\"../../app/(auth)/login/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(auth)/signup/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/signup\">> = Specific\n  const handler = {} as typeof import(\"../../app/(auth)/signup/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/analytics/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/analytics\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/analytics/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/coaching/bookings/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/coaching/bookings\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/coaching/bookings/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/coaching/business-analytics/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/coaching/business-analytics\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/coaching/business-analytics/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/coaching/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/coaching\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/coaching/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/coaching/training-plans/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/coaching/training-plans\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/coaching/training-plans/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/media/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/media\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/media/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/profile/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/profile\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/profile/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/settings/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/settings\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/settings/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/share/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/share\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/share/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/sources/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/sources\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/sources/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/dashboard/upgrade/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/dashboard/upgrade\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/dashboard/upgrade/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/[username]/coaching/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/[username]/coaching\">> = Specific\n  const handler = {} as typeof import(\"../../app/[username]/coaching/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/[username]/galerie/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/[username]/galerie\">> = Specific\n  const handler = {} as typeof import(\"../../app/[username]/galerie/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/[username]/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/[username]\">> = Specific\n  const handler = {} as typeof import(\"../../app/[username]/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/admin/ambassadors/[id]/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/admin/ambassadors/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/admin/ambassadors/[id]/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/admin/ambassadors/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/admin/ambassadors\">> = Specific\n  const handler = {} as typeof import(\"../../app/admin/ambassadors/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/page.tsx\n{\n  type __IsExpected<Specific extends AppPageConfig<\"/\">> = Specific\n  const handler = {} as typeof import(\"../../app/page.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/admin/ambassadors/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/admin/ambassadors/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/admin/ambassadors/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/admin/ambassadors/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/admin/ambassadors\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/admin/ambassadors/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/admin/promo-codes/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/admin/promo-codes/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/admin/promo-codes/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/admin/promo-codes/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/admin/promo-codes\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/admin/promo-codes/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/analytics/data/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/analytics/data\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/analytics/data/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/analytics/export-csv/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/analytics/export-csv\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/analytics/export-csv/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/analytics/export-pdf/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/analytics/export-pdf\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/analytics/export-pdf/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/analytics/track-click/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/analytics/track-click\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/analytics/track-click/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/analytics/track-view/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/analytics/track-view\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/analytics/track-view/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/auth/[...nextauth]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/auth/[...nextauth]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/auth/[...nextauth]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/auth/signup/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/auth/signup\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/auth/signup/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/coaching/bookings/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/coaching/bookings/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/coaching/bookings/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/coaching/bookings/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/coaching/bookings\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/coaching/bookings/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/coaching/training-plans/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/coaching/training-plans/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/coaching/training-plans/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/coaching/training-plans/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/coaching/training-plans\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/coaching/training-plans/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/coaching/upload-pdf/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/coaching/upload-pdf\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/coaching/upload-pdf/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/create-checkout-session/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/create-checkout-session\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/create-checkout-session/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/cron/expire-trials/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/cron/expire-trials\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/cron/expire-trials/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/links/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/links/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/links/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/links/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/links\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/links/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/media/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/media/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/media/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/media/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/media\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/media/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/profile/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/profile\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/profile/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/promo-codes/apply/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/promo-codes/apply\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/promo-codes/apply/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/promo-codes/use/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/promo-codes/use\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/promo-codes/use/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/promo-codes/validate/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/promo-codes/validate\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/promo-codes/validate/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/public/booking-request/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/public/booking-request\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/public/booking-request/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/races/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/races/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/races/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/races/extract-logo/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/races/extract-logo\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/races/extract-logo/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/races/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/races\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/races/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/sponsors/[id]/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/sponsors/[id]\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/sponsors/[id]/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/sponsors/extract-logo/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/sponsors/extract-logo\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/sponsors/extract-logo/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/sponsors/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/sponsors\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/sponsors/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/upgrade-plan/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/upgrade-plan\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/upgrade-plan/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/upload/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/upload\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/upload/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/api/webhooks/stripe/route.ts\n{\n  type __IsExpected<Specific extends RouteHandlerConfig<\"/api/webhooks/stripe\">> = Specific\n  const handler = {} as typeof import(\"../../app/api/webhooks/stripe/route.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n\n\n\n\n// Validate ../../app/(auth)/layout.tsx\n{\n  type __IsExpected<Specific extends LayoutConfig<\"/\">> = Specific\n  const handler = {} as typeof import(\"../../app/(auth)/layout.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/(dashboard)/layout.tsx\n{\n  type __IsExpected<Specific extends LayoutConfig<\"/\">> = Specific\n  const handler = {} as typeof import(\"../../app/(dashboard)/layout.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n\n// Validate ../../app/layout.tsx\n{\n  type __IsExpected<Specific extends LayoutConfig<\"/\">> = Specific\n  const handler = {} as typeof import(\"../../app/layout.js\")\n  type __Check = __IsExpected<typeof handler>\n  // @ts-ignore\n  type __Unused = __Check\n}\n","size_bytes":21292},"app/api/races/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { raceSchema } from \"@/lib/validations\"\nimport { canAddItem, getLimitMessage, PlanType } from \"@/lib/features\"\n\n// GET all races\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        races: {\n          orderBy: { date: 'desc' }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ races: profile.races })\n\n  } catch (error) {\n    console.error(\"GET races error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// POST new race\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = raceSchema.parse(body)\n\n    // Convertir les cha√Ænes vides en null pour Prisma\n    const cleanedData = {\n      ...validatedData,\n      location: validatedData.location && validatedData.location.trim() !== \"\" ? validatedData.location : null,\n      distance: validatedData.distance && validatedData.distance.trim() !== \"\" ? validatedData.distance : null,\n      result: validatedData.result && validatedData.result.trim() !== \"\" ? validatedData.result : null,\n      url: validatedData.url && validatedData.url.trim() !== \"\" ? validatedData.url : null,\n      logoUrl: validatedData.logoUrl && validatedData.logoUrl.trim() !== \"\" ? validatedData.logoUrl : null,\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: { races: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Check plan limits using features system\n    const userPlan = profile.plan as PlanType\n    if (!canAddItem(profile.races.length, userPlan, 'races')) {\n      return NextResponse.json(\n        { error: getLimitMessage(userPlan, 'races') },\n        { status: 403 }\n      )\n    }\n\n    // Convert date string to Date object if needed\n    const raceDate = typeof cleanedData.date === 'string' \n      ? new Date(cleanedData.date) \n      : cleanedData.date\n\n    const race = await prisma.race.create({\n      data: {\n        ...cleanedData,\n        date: raceDate,\n        profileId: profile.id,\n      }\n    })\n\n    return NextResponse.json({ race }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"POST race error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3129},"app/api/links/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { linkSchema } from \"@/lib/validations\"\nimport { canAddItem, getLimitMessage, PlanType } from \"@/lib/features\"\n\n// GET all links\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        links: {\n          orderBy: { position: 'asc' }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ links: profile.links })\n\n  } catch (error) {\n    console.error(\"GET links error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// POST new link\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = linkSchema.parse(body)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: { links: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Check plan limits using features system\n    const userPlan = profile.plan as PlanType\n    if (!canAddItem(profile.links.length, userPlan, 'links')) {\n      return NextResponse.json(\n        { error: getLimitMessage(userPlan, 'links') },\n        { status: 403 }\n      )\n    }\n\n    const maxPosition = await prisma.link.aggregate({\n      where: { profileId: profile.id },\n      _max: { position: true }\n    })\n\n    const link = await prisma.link.create({\n      data: {\n        ...validatedData,\n        profileId: profile.id,\n        position: (maxPosition._max.position || 0) + 1\n      }\n    })\n\n    return NextResponse.json({ link }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"POST link error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2484},"replit.md":{"content":"# Athlink - Athletic Link-in-Bio Platform\n\n## Overview\nAthlink is a Next.js-based link-in-bio platform for athletes to create digital profiles, showcase performances, competitions, sponsors, and media, and track visitor analytics. Its purpose is to help athletes build their personal brand and connect with sponsors and fans through tiered subscription plans (FREE, PRO, ELITE) that offer progressive features.\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: Next.js 15.5.4 (App Router) with React 19.1.0, utilizing Server and Client Components and TypeScript.\n- **UI/UX**: Shadcn UI with Radix UI primitives, Tailwind CSS 4, and Framer Motion for animations. Features a 7-color vibrant palette and a mobile-first responsive design. The homepage has been redesigned for a clean, professional, and minimalist aesthetic, inspired by platforms like GetAllMyLinks, with strong social proof elements.\n- **State Management**: React hooks for local state; Next.js App Router for server-side data fetching; API polling for real-time analytics.\n\n### Backend Architecture\n- **API Layer**: Next.js API Routes (App Router) for RESTful CRUD operations and Server Actions. All API routes for coaching services are fully operational with comprehensive Zod validation.\n- **Authentication**: NextAuth.js v5 (beta) with Credentials and Google OAuth providers, JWT sessions, and Prisma adapter.\n- **Authorization**: Session-based route protection, plan-based feature gating defined in `lib/features.ts`, with server-side enforcement of plan limits across all API routes. Access to coaching services is restricted to the ELITE plan.\n- **Business Logic**: Includes sport type mapping, promo code validation, analytics tracking, and image processing with Sharp. Advanced analytics for the ELITE plan provide intelligent, personalized advice across visibility, conversion, content, and retention, including calendar heatmaps and dynamic trend calculations.\n- **Promo Codes**: A system for promotional codes with automatic expiration, managed via cron jobs and real-time checks.\n\n### Data Architecture\n- **ORM**: Prisma with PostgreSQL, defining models for User, Profile, Link, Race, Sponsor, Media, AnalyticsView, and AnalyticsClick.\n- **Database Schema**: Profiles link to user authentication, containing athlete info. Links, Races, Sponsors, and Media are associated with profiles. Analytics store referrer, device, and geolocation data.\n- **File Storage**: Supabase Storage for avatars, covers, media, and sponsor images, with Sharp-based image optimization.\n\n### Key Design Patterns\n- **Component Architecture**: Separation of UI primitives (`components/ui`) and feature components (`components/ui-pro`), clear Client/Server Component boundaries.\n- **Data Fetching**: Server Components for page-level data, Client Components for mutations.\n- **Form Validation**: Zod schemas for client and server-side validation, integrated with react-hook-form, providing detailed error messages in French.\n- **Plan Management**: Simplified to FREE, PRO, ELITE plans, with consistent plan type mapping and feature limit definitions.\n- **Error Handling**: Try-catch blocks in APIs, Sonner for toast notifications, client-side error boundaries.\n- **Logo Extraction**: Advanced scoring algorithm for extracting official competition logos and sponsor logos from URLs, supporting various image formats and lazy loading.\n\n## External Dependencies\n\n### Third-Party Services\n- **Supabase**: PostgreSQL database hosting and file storage for images/videos.\n- **Google OAuth**: Social authentication provider.\n- **Stripe**: Subscription payment processing via Stripe Checkout and webhooks.\n- **Clearbit Logo API**: Automatic logo fetching for sponsors.\n- **ipapi.co**: Geolocation for analytics.\n- **Google Favicon API**: Fallback for logo extraction.\n- **Google Analytics (gtag.js)**: Integrated for global site tracking (Google Ads/Analytics) with optimized loading.\n\n### Key NPM Packages\n- **Authentication & Database**: `next-auth`, `@prisma/client`, `@auth/prisma-adapter`, `bcryptjs`.\n- **UI & Styling**: `@radix-ui/*`, `framer-motion`, `tailwindcss`, `lucide-react`, `sonner`, `recharts`, `@uiw/react-heat-map`.\n- **Media & Files**: `sharp`, `html2canvas`, `jspdf`, `qrcode`, `canvas-confetti`.\n- **Forms & Validation**: `react-hook-form`, `zod`, `@hookform/resolvers`.\n- **Payments**: `stripe`.\n- **Web Scraping**: `cheerio`.","size_bytes":4487},"app/api/media/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/lib/auth'\nimport { prisma } from '@/lib/db'\nimport { mediaSchema } from '@/lib/validations'\nimport { z } from 'zod'\nimport { canAddItem, getLimitMessage, PlanType } from '@/lib/features'\n\n// GET - R√©cup√©rer tous les m√©dias de l'utilisateur\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    const media = await prisma.media.findMany({\n      where: { profileId: profile.id },\n      orderBy: { position: 'asc' }\n    })\n\n    return NextResponse.json(media, { status: 200 })\n\n  } catch (error) {\n    console.error('GET media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// POST - Cr√©er un nouveau m√©dia\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: { media: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    // Check plan limits using features system\n    const userPlan = profile.plan as PlanType\n    if (!canAddItem(profile.media.length, userPlan, 'media')) {\n      return NextResponse.json(\n        { error: getLimitMessage(userPlan, 'media') },\n        { status: 403 }\n      )\n    }\n\n    const body = await req.json()\n    const validatedData = mediaSchema.parse(body)\n\n    // G√©n√©rer la miniature pour YouTube\n    let thumbnail = validatedData.thumbnail\n    if (validatedData.type === 'YOUTUBE' && !thumbnail) {\n      // Extraire l'ID YouTube de l'URL\n      const videoId = extractYouTubeId(validatedData.url)\n      if (videoId) {\n        thumbnail = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\n      }\n    }\n\n    // Obtenir la position maximale actuelle\n    const maxPosition = await prisma.media.findFirst({\n      where: { profileId: profile.id },\n      orderBy: { position: 'desc' },\n      select: { position: true }\n    })\n\n    const newMedia = await prisma.media.create({\n      data: {\n        profileId: profile.id,\n        type: validatedData.type,\n        url: validatedData.url,\n        thumbnail,\n        title: validatedData.title,\n        description: validatedData.description,\n        position: maxPosition ? maxPosition.position + 1 : 0,\n      }\n    })\n\n    return NextResponse.json(newMedia, { status: 201 })\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return NextResponse.json({ error: 'Donn√©es invalides', details: error.issues }, { status: 400 })\n    }\n    console.error('POST media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// Helper pour extraire l'ID d'une vid√©o YouTube\nfunction extractYouTubeId(url: string): string | null {\n  const regex = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/\n  const match = url.match(regex)\n  return match ? match[1] : null\n}\n","size_bytes":3522},"app/(dashboard)/dashboard/coaching/training-plans/training-plans-client.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Plus, Edit3, Trash2, Eye, Users, Clock, Euro, Calendar, Target, TrendingUp, List, Upload, FileText, X } from \"lucide-react\"\nimport { SessionsManager } from \"./sessions-manager\"\n\ntype DifficultyLevel = \"DEBUTANT\" | \"INTERMEDIAIRE\" | \"AVANCE\"\n\ninterface TrainingPlan {\n  id: string\n  title: string\n  description: string\n  price: number\n  duration: number\n  difficulty: DifficultyLevel\n  category: string\n  isActive: boolean\n  pdfFileUrl?: string // URL du fichier PDF\n  pdfFileName?: string // Nom du fichier PDF\n  createdAt: string\n  _count: {\n    sessions: number\n    subscribers: number\n  }\n}\n\ninterface PlanFormData {\n  title: string\n  description: string\n  price: number\n  duration: number\n  difficulty: DifficultyLevel\n  category: string\n  isActive: boolean\n  pdfFile: File | null\n  pdfFileName: string\n}\n\ninterface TrainingPlansClientProps {\n  initialPlans: TrainingPlan[]\n  profileId: string\n}\n\nexport function TrainingPlansClient({ initialPlans, profileId }: TrainingPlansClientProps) {\n  const [plans, setPlans] = useState<TrainingPlan[]>(initialPlans)\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [editingPlan, setEditingPlan] = useState<TrainingPlan | null>(null)\n  const [selectedPlan, setSelectedPlan] = useState<TrainingPlan | null>(null)\n  const [showSessionsManager, setShowSessionsManager] = useState(false)\n  const [selectedPlanForSessions, setSelectedPlanForSessions] = useState<TrainingPlan | null>(null)\n\n  const [formData, setFormData] = useState<PlanFormData>({\n    title: \"\",\n    description: \"\",\n    price: 0,\n    duration: 4,\n    difficulty: \"DEBUTANT\",\n    category: \"\",\n    isActive: true,\n    pdfFile: null,\n    pdfFileName: \"\"\n  })\n\n  const categories = [\n    \"Cardio\", \"Musculation\", \"Yoga\", \"Pilates\", \"CrossFit\", \"Running\", \n    \"Cycling\", \"Swimming\", \"Boxing\", \"Dance\", \"HIIT\", \"Stretching\"\n  ]\n\n  const difficultyLabels = {\n    DEBUTANT: \"D√©butant\",\n    INTERMEDIAIRE: \"Interm√©diaire\", \n    AVANCE: \"Avanc√©\"\n  }\n\n  const difficultyColors = {\n    DEBUTANT: \"bg-green-100 text-green-800\",\n    INTERMEDIAIRE: \"bg-yellow-100 text-yellow-800\",\n    AVANCE: \"bg-red-100 text-red-800\"\n  }\n\n  const handleCreatePlan = async () => {\n    try {\n      // D'abord uploader le PDF si il y en a un\n      let pdfFileUrl = null\n      let pdfFileName = null\n      if (formData.pdfFile) {\n        const uploadFormData = new FormData()\n        uploadFormData.append('pdfFile', formData.pdfFile)\n        uploadFormData.append('planId', `temp_${Date.now()}`) // ID temporaire\n\n        const uploadResponse = await fetch(\"/api/coaching/upload-pdf\", {\n          method: \"POST\",\n          body: uploadFormData\n        })\n\n        if (!uploadResponse.ok) {\n          const errorData = await uploadResponse.json()\n          alert(`Erreur upload PDF: ${errorData.error}`)\n          return\n        }\n\n        const uploadResult = await uploadResponse.json()\n        pdfFileUrl = uploadResult.fileUrl\n        pdfFileName = uploadResult.originalName\n      }\n\n      // Ensuite cr√©er le plan\n      const formDataToSend = new FormData()\n      \n      // Ajouter tous les champs du formulaire\n      formDataToSend.append('title', formData.title)\n      formDataToSend.append('description', formData.description)\n      formDataToSend.append('price', formData.price.toString())\n      formDataToSend.append('duration', formData.duration.toString())\n      formDataToSend.append('difficulty', formData.difficulty)\n      formDataToSend.append('category', formData.category)\n      formDataToSend.append('isActive', formData.isActive.toString())\n      formDataToSend.append('profileId', profileId)\n      \n      // Ajouter les informations du fichier PDF si upload√©\n      if (pdfFileUrl && pdfFileName) {\n        formDataToSend.append('pdfFileUrl', pdfFileUrl)\n        formDataToSend.append('pdfFileName', pdfFileName)\n      }\n\n      const response = await fetch(\"/api/coaching/training-plans\", {\n        method: \"POST\",\n        body: formDataToSend\n      })\n\n      if (response.ok) {\n        const newPlan = await response.json()\n        setPlans([newPlan, ...plans])\n        setShowCreateForm(false)\n        resetForm()\n        alert(\"Plan d'entra√Ænement cr√©√© avec succ√®s !\")\n      } else {\n        const errorData = await response.json()\n        alert(`Erreur cr√©ation plan: ${errorData.error}`)\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la cr√©ation:\", error)\n      alert(\"Une erreur est survenue lors de la cr√©ation du plan\")\n    }\n  }\n\n  const handleUpdatePlan = async () => {\n    if (!editingPlan) return\n\n    try {\n      const formDataToSend = new FormData()\n      \n      // Ajouter tous les champs du formulaire\n      formDataToSend.append('title', formData.title)\n      formDataToSend.append('description', formData.description)\n      formDataToSend.append('price', formData.price.toString())\n      formDataToSend.append('duration', formData.duration.toString())\n      formDataToSend.append('difficulty', formData.difficulty)\n      formDataToSend.append('category', formData.category)\n      formDataToSend.append('isActive', formData.isActive.toString())\n      \n      // Ajouter le fichier PDF s'il existe (nouveau fichier)\n      if (formData.pdfFile) {\n        formDataToSend.append('pdfFile', formData.pdfFile)\n      }\n      // Si pas de nouveau fichier mais qu'il y avait un nom de fichier existant\n      else if (formData.pdfFileName) {\n        formDataToSend.append('pdfFileName', formData.pdfFileName)\n      }\n\n      const response = await fetch(`/api/coaching/training-plans/${editingPlan.id}`, {\n        method: \"PUT\",\n        body: formDataToSend\n      })\n\n      if (response.ok) {\n        const updatedPlan = await response.json()\n        setPlans(plans.map(plan => plan.id === editingPlan.id ? updatedPlan : plan))\n        setEditingPlan(null)\n        resetForm()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la mise √† jour:\", error)\n    }\n  }\n\n  const handleDeletePlan = async (planId: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer ce plan ?\")) return\n\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${planId}`, {\n        method: \"DELETE\"\n      })\n\n      if (response.ok) {\n        setPlans(plans.filter(plan => plan.id !== planId))\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression:\", error)\n    }\n  }\n\n  const resetForm = () => {\n    setFormData({\n      title: \"\",\n      description: \"\",\n      price: 0,\n      duration: 4,\n      difficulty: \"DEBUTANT\",\n      category: \"\",\n      isActive: true,\n      pdfFile: null,\n      pdfFileName: \"\"\n    })\n  }\n\n  const openEditForm = (plan: TrainingPlan) => {\n    setFormData({\n      title: plan.title,\n      description: plan.description,\n      price: plan.price,\n      duration: plan.duration,\n      difficulty: plan.difficulty,\n      category: plan.category,\n      isActive: plan.isActive,\n      pdfFile: null, // On ne charge pas le fichier existant lors de l'√©dition\n      pdfFileName: plan.pdfFileName || \"\"\n    })\n    setEditingPlan(plan)\n    setShowCreateForm(true)\n  }\n\n  const openSessionsManager = (plan: TrainingPlan) => {\n    setSelectedPlanForSessions(plan)\n    setShowSessionsManager(true)\n  }\n\n  const handleSessionsChange = () => {\n    // Rafra√Æchir les donn√©es du plan pour mettre √† jour le compteur de sessions\n    const updatedPlans = plans.map(plan => {\n      if (plan.id === selectedPlanForSessions?.id) {\n        return { ...plan, _count: { ...plan._count, sessions: plan._count.sessions + 1 } }\n      }\n      return plan\n    })\n    setPlans(updatedPlans)\n  }\n\n  if (showSessionsManager && selectedPlanForSessions) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={() => setShowSessionsManager(false)}\n            className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n            </svg>\n          </button>\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Sessions - {selectedPlanForSessions.title}</h2>\n            <p className=\"text-gray-600\">G√®re les s√©ances de ce plan d'entra√Ænement</p>\n          </div>\n        </div>\n        \n        <SessionsManager \n          trainingPlanId={selectedPlanForSessions.id}\n          planDuration={selectedPlanForSessions.duration}\n          onSessionsChange={handleSessionsChange}\n        />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Actions Bar */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900\">Mes Plans d'Entra√Ænement</h2>\n          <p className=\"text-gray-600\">G√®re tes programmes et suivi tes performances</p>\n        </div>\n        <button\n          onClick={() => {\n            resetForm()\n            setEditingPlan(null)\n            setShowCreateForm(true)\n          }}\n          className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-3 rounded-full font-bold shadow-elevated transition-all hover:scale-105\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Cr√©er un Plan\n        </button>\n      </div>\n\n      {/* Plans Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {plans.map((plan) => (\n          <motion.div\n            key={plan.id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 border border-gray-200 transition-all hover:-translate-y-1\"\n          >\n            {/* Header */}\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className=\"flex-1\">\n                <h3 className=\"text-xl font-bold text-gray-900 mb-1\">{plan.title}</h3>\n                <span className={`inline-block px-3 py-1 rounded-full text-xs font-medium ${difficultyColors[plan.difficulty]}`}>\n                  {difficultyLabels[plan.difficulty]}\n                </span>\n              </div>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => openEditForm(plan)}\n                  className=\"p-2 text-gray-400 hover:text-primary-blue-600 transition-colors\"\n                >\n                  <Edit3 className=\"w-4 h-4\" />\n                </button>\n                <button\n                  onClick={() => handleDeletePlan(plan.id)}\n                  className=\"p-2 text-gray-400 hover:text-red-600 transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Description */}\n            <p className=\"text-gray-600 text-sm mb-4 line-clamp-2\">{plan.description}</p>\n\n            {/* Stats */}\n            <div className=\"grid grid-cols-2 gap-4 mb-4\">\n              <div className=\"flex items-center gap-2\">\n                <Euro className=\"w-4 h-4 text-primary-green-600\" />\n                <span className=\"text-sm text-gray-600\">{plan.price}‚Ç¨</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"w-4 h-4 text-primary-blue-600\" />\n                <span className=\"text-sm text-gray-600\">{plan.duration} semaines</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Target className=\"w-4 h-4 text-yellow-600\" />\n                <span className=\"text-sm text-gray-600\">{plan._count.sessions} s√©ances</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Users className=\"w-4 h-4 text-purple-600\" />\n                <span className=\"text-sm text-gray-600\">{plan._count.subscribers} abonn√©s</span>\n              </div>\n            </div>\n\n            {/* Category */}\n            <div className=\"mb-4\">\n              <span className=\"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\">\n                {plan.category}\n              </span>\n            </div>\n\n            {/* Status */}\n            <div className=\"flex items-center justify-between\">\n              <span className={`inline-block px-3 py-1 rounded-full text-xs font-medium ${\n                plan.isActive ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-800\"\n              }`}>\n                {plan.isActive ? \"Actif\" : \"Inactif\"}\n              </span>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => openSessionsManager(plan)}\n                  className=\"flex items-center gap-1 text-yellow-600 hover:text-yellow-700 text-sm font-medium\"\n                >\n                  <List className=\"w-4 h-4\" />\n                  Sessions\n                </button>\n                <button\n                  onClick={() => setSelectedPlan(plan)}\n                  className=\"flex items-center gap-1 text-primary-blue-600 hover:text-primary-blue-700 text-sm font-medium\"\n                >\n                  <Eye className=\"w-4 h-4\" />\n                  D√©tails\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n\n      {/* Empty State */}\n      {plans.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center mx-auto mb-6\">\n            <Target className=\"w-12 h-12 text-primary-blue-600\" />\n          </div>\n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Aucun plan cr√©√©</h3>\n          <p className=\"text-gray-600 mb-6\">Commence par cr√©er ton premier plan d'entra√Ænement</p>\n          <button\n            onClick={() => setShowCreateForm(true)}\n            className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-3 rounded-full font-bold shadow-elevated transition-all hover:scale-105\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Cr√©er mon premier plan\n          </button>\n        </div>\n      )}\n\n      {/* Create/Edit Form Modal */}\n      <AnimatePresence>\n        {showCreateForm && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => {\n              setShowCreateForm(false)\n              setEditingPlan(null)\n              resetForm()\n            }}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-2xl font-bold text-gray-900 mb-6\">\n                {editingPlan ? \"Modifier le plan\" : \"Cr√©er un nouveau plan\"}\n              </h3>\n\n              <div className=\"space-y-6\">\n                {/* Title */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Nom du plan *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"Ex: Programme Running D√©butant\"\n                  />\n                </div>\n\n                {/* Description */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description *\n                  </label>\n                  <textarea\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    rows={4}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"D√©cris ton programme d'entra√Ænement...\"\n                  />\n                </div>\n\n                {/* Price and Duration */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Prix (‚Ç¨) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      value={formData.price}\n                      onChange={(e) => setFormData({ ...formData, price: parseFloat(e.target.value) || 0 })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Dur√©e (semaines) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      value={formData.duration}\n                      onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) || 1 })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                {/* Difficulty and Category */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Niveau *\n                    </label>\n                    <select\n                      value={formData.difficulty}\n                      onChange={(e) => setFormData({ ...formData, difficulty: e.target.value as DifficultyLevel })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"DEBUTANT\">D√©butant</option>\n                      <option value=\"INTERMEDIAIRE\">Interm√©diaire</option>\n                      <option value=\"AVANCE\">Avanc√©</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Cat√©gorie *\n                    </label>\n                    <select\n                      value={formData.category}\n                      onChange={(e) => setFormData({ ...formData, category: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"\">S√©lectionner une cat√©gorie</option>\n                      {categories.map(cat => (\n                        <option key={cat} value={cat}>{cat}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                {/* PDF Upload Section */}\n                <div className=\"flex justify-center\">\n                  <div className=\"w-full max-w-md\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-3 text-center\">\n                      Ajouter un PDF (optionnel)\n                    </label>\n                    <div className=\"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center hover:border-primary-blue-400 transition-colors\">\n                      {formData.pdfFile ? (\n                        <div className=\"space-y-3\">\n                          <div className=\"flex items-center justify-center gap-3 p-3 bg-primary-blue-50 rounded-lg\">\n                            <FileText className=\"w-6 h-6 text-primary-blue-600\" />\n                            <div className=\"flex-1 text-left\">\n                              <p className=\"text-sm font-medium text-gray-900\">{formData.pdfFileName}</p>\n                              <p className=\"text-xs text-gray-500\">\n                                {(formData.pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                              </p>\n                            </div>\n                            <button\n                              type=\"button\"\n                              onClick={() => setFormData({ ...formData, pdfFile: null, pdfFileName: \"\" })}\n                              className=\"p-1 text-gray-400 hover:text-red-500 transition-colors\"\n                            >\n                              <X className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-4\">\n                          <Upload className=\"w-8 h-8 text-gray-400 mx-auto\" />\n                          <div>\n                            <p className=\"text-sm text-gray-600 mb-3\">\n                              Ajoute ton programme d'entra√Ænement en PDF\n                            </p>\n                            <input\n                              id=\"pdf-upload\"\n                              type=\"file\"\n                              accept=\".pdf,application/pdf\"\n                              onChange={(e) => {\n                                const file = e.target.files?.[0]\n                                if (file) {\n                                  // V√©rifier que c'est bien un PDF\n                                  if (file.type === 'application/pdf' || file.name.endsWith('.pdf')) {\n                                    // V√©rifier la taille (max 50MB)\n                                    if (file.size <= 50 * 1024 * 1024) {\n                                      setFormData({\n                                        ...formData,\n                                        pdfFile: file,\n                                        pdfFileName: file.name\n                                      })\n                                    } else {\n                                      alert(\"Le fichier est trop volumineux (max 50MB)\")\n                                    }\n                                  } else {\n                                    alert(\"Veuillez s√©lectionner un fichier PDF\")\n                                  }\n                                }\n                              }}\n                              className=\"hidden\"\n                            />\n                            <label\n                              htmlFor=\"pdf-upload\"\n                              className=\"inline-block bg-primary-blue-600 hover:bg-primary-blue-700 text-white px-6 py-2 rounded-lg cursor-pointer font-medium transition-colors\"\n                            >\n                              Choisir un fichier PDF\n                            </label>\n                            <p className=\"text-xs text-gray-400 mt-3\">\n                              Formats accept√©s: PDF (max 50MB)\n                            </p>\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Active Status */}\n                <div className=\"flex items-center gap-3\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"isActive\"\n                    checked={formData.isActive}\n                    onChange={(e) => setFormData({ ...formData, isActive: e.target.checked })}\n                    className=\"w-5 h-5 text-primary-blue-600 rounded focus:ring-primary-blue-500\"\n                  />\n                  <label htmlFor=\"isActive\" className=\"text-sm font-medium text-gray-700\">\n                    Plan actif (visible pour les clients)\n                  </label>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowCreateForm(false)\n                      setEditingPlan(null)\n                      resetForm()\n                    }}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={editingPlan ? handleUpdatePlan : handleCreatePlan}\n                    className=\"flex-1 px-6 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-bold hover:shadow-glow-blue transition-all\"\n                  >\n                    {editingPlan ? \"Mettre √† jour\" : \"Cr√©er le plan\"}\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Plan Details Modal */}\n      <AnimatePresence>\n        {selectedPlan && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => setSelectedPlan(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">{selectedPlan.title}</h3>\n                <button\n                  onClick={() => setSelectedPlan(null)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                <p className=\"text-gray-600\">{selectedPlan.description}</p>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Euro className=\"w-5 h-5 text-primary-green-600\" />\n                      <span className=\"font-medium text-gray-900\">Prix</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan.price}‚Ç¨</p>\n                  </div>\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Calendar className=\"w-5 h-5 text-primary-blue-600\" />\n                      <span className=\"font-medium text-gray-900\">Dur√©e</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan.duration} semaines</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Target className=\"w-5 h-5 text-yellow-600\" />\n                      <span className=\"font-medium text-gray-900\">S√©ances</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan._count.sessions}</p>\n                  </div>\n                  <div className=\"bg-gray-50 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Users className=\"w-5 h-5 text-purple-600\" />\n                      <span className=\"font-medium text-gray-900\">Abonn√©s</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-gray-900\">{selectedPlan._count.subscribers}</p>\n                  </div>\n                </div>\n\n                <div className=\"flex gap-3\">\n                  <span className={`px-3 py-1 rounded-full text-sm font-medium ${difficultyColors[selectedPlan.difficulty]}`}>\n                    {difficultyLabels[selectedPlan.difficulty]}\n                  </span>\n                  <span className=\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\">\n                    {selectedPlan.category}\n                  </span>\n                </div>\n\n                {/* PDF Download Button */}\n                {selectedPlan.pdfFileUrl && (\n                  <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                    <a\n                      href={selectedPlan.pdfFileUrl}\n                      download={selectedPlan.pdfFileName}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"flex items-center gap-3 bg-gradient-to-r from-primary-blue-500 to-primary-blue-600 text-white px-6 py-3 rounded-xl font-medium hover:from-primary-blue-600 hover:to-primary-blue-700 transition-all shadow-lg hover:shadow-xl\"\n                    >\n                      <FileText className=\"w-5 h-5\" />\n                      <span>T√©l√©charger le PDF</span>\n                      <span className=\"text-sm opacity-80\">({selectedPlan.pdfFileName})</span>\n                    </a>\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n","size_bytes":30615},"app/(dashboard)/dashboard/coaching/training-plans/sessions-manager.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Plus, Edit3, Trash2, Clock, Target, Calendar, Dumbbell } from \"lucide-react\"\n\ninterface Exercise {\n  name: string\n  sets?: number\n  reps?: string\n  rest?: string\n  notes?: string\n}\n\ninterface TrainingSession {\n  id: string\n  title: string\n  description: string\n  weekNumber: number\n  dayNumber: number\n  duration: number\n  exercises: Exercise[]\n  createdAt: string\n}\n\ninterface SessionFormData {\n  title: string\n  description: string\n  weekNumber: number\n  dayNumber: number\n  duration: number\n  exercises: Exercise[]\n}\n\ninterface SessionsManagerProps {\n  trainingPlanId: string\n  planDuration: number\n  onSessionsChange: () => void\n}\n\n// Factory function to create empty form with proper typing\nconst makeEmptyForm = (): SessionFormData => ({\n  title: \"\",\n  description: \"\",\n  weekNumber: 1,\n  dayNumber: 1,\n  duration: 60,\n  exercises: [] as Exercise[]\n})\n\nexport function SessionsManager({ trainingPlanId, planDuration, onSessionsChange }: SessionsManagerProps) {\n  const [sessions, setSessions] = useState<TrainingSession[]>([])\n  const [showCreateForm, setShowCreateForm] = useState(false)\n  const [editingSession, setEditingSession] = useState<TrainingSession | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  const [formData, setFormData] = useState<SessionFormData>(makeEmptyForm())\n\n  const daysOfWeek = [\n    \"Lundi\", \"Mardi\", \"Mercredi\", \"Jeudi\", \"Vendredi\", \"Samedi\", \"Dimanche\"\n  ]\n\n  useEffect(() => {\n    fetchSessions()\n  }, [trainingPlanId])\n\n  const fetchSessions = async () => {\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${trainingPlanId}/sessions`)\n      if (response.ok) {\n        const data = await response.json() as TrainingSession[]\n        setSessions(data)\n      }\n    } catch (error) {\n      console.error(\"Erreur lors du chargement des sessions:\", error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCreateSession = async () => {\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${trainingPlanId}/sessions`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData)\n      })\n\n      if (response.ok) {\n        const newSession = await response.json() as TrainingSession\n        setSessions([...sessions, newSession])\n        setShowCreateForm(false)\n        resetForm()\n        onSessionsChange()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la cr√©ation:\", error)\n    }\n  }\n\n  const handleDeleteSession = async (sessionId: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer cette session ?\")) return\n\n    try {\n      const response = await fetch(`/api/coaching/training-plans/${trainingPlanId}/sessions/${sessionId}`, {\n        method: \"DELETE\"\n      })\n\n      if (response.ok) {\n        setSessions(sessions.filter(session => session.id !== sessionId))\n        onSessionsChange()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression:\", error)\n    }\n  }\n\n  const resetForm = () => {\n    setFormData(makeEmptyForm())\n  }\n\n  const openEditForm = (session: TrainingSession) => {\n    setFormData({\n      title: session.title,\n      description: session.description,\n      weekNumber: session.weekNumber,\n      dayNumber: session.dayNumber,\n      duration: session.duration,\n      exercises: [...(session.exercises ?? [])] as Exercise[]\n    })\n    setEditingSession(session)\n    setShowCreateForm(true)\n  }\n\n  // Grouper les sessions par semaine\n  const sessionsByWeek = sessions.reduce((acc, session) => {\n    if (!acc[session.weekNumber]) {\n      acc[session.weekNumber] = []\n    }\n    acc[session.weekNumber].push(session)\n    return acc\n  }, {} as Record<number, TrainingSession[]>)\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-blue-600\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div>\n          <h3 className=\"text-xl font-bold text-gray-900\">Sessions d'Entra√Ænement</h3>\n          <p className=\"text-gray-600\">G√®re les s√©ances de ton programme</p>\n        </div>\n        <button\n          onClick={() => {\n            resetForm()\n            setEditingSession(null)\n            setShowCreateForm(true)\n          }}\n          className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-4 py-2 rounded-xl font-medium shadow-elevated transition-all hover:scale-105\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          Ajouter une session\n        </button>\n      </div>\n\n      {/* Sessions Grid */}\n      <div className=\"space-y-6\">\n        {Array.from({ length: planDuration }, (_, i) => i + 1).map((week) => (\n          <div key={week} className=\"bg-white rounded-xl border border-gray-200 p-6\">\n            <h4 className=\"text-lg font-bold text-gray-900 mb-4\">\n              Semaine {week}\n            </h4>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-7 gap-4\">\n              {Array.from({ length: 7 }, (_, i) => i + 1).map((day) => {\n                const session = sessionsByWeek[week]?.find(s => s.dayNumber === day)\n                \n                return (\n                  <div key={day} className=\"min-h-[120px]\">\n                    <div className=\"text-sm font-medium text-gray-600 mb-2\">\n                      {daysOfWeek[day - 1]}\n                    </div>\n                    \n                    {session ? (\n                      <motion.div\n                        initial={{ opacity: 0, scale: 0.9 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        className=\"bg-gradient-to-br from-primary-blue-50 to-primary-blue-100 border border-primary-blue-200 rounded-lg p-3 h-full\"\n                      >\n                        <div className=\"flex items-start justify-between mb-2\">\n                          <h5 className=\"font-medium text-primary-blue-900 text-sm truncate\">\n                            {session.title}\n                          </h5>\n                          <div className=\"flex gap-1\">\n                            <button\n                              onClick={() => openEditForm(session)}\n                              className=\"p-1 text-primary-blue-600 hover:text-primary-blue-700\"\n                            >\n                              <Edit3 className=\"w-3 h-3\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteSession(session.id)}\n                              className=\"p-1 text-primary-blue-600 hover:text-red-600\"\n                            >\n                              <Trash2 className=\"w-3 h-3\" />\n                            </button>\n                          </div>\n                        </div>\n                        \n                        <div className=\"space-y-1 text-xs text-primary-blue-700\">\n                          <div className=\"flex items-center gap-1\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>{session.duration}min</span>\n                          </div>\n                          {session.exercises.length > 0 && (\n                            <div className=\"flex items-center gap-1\">\n                              <Dumbbell className=\"w-3 h-3\" />\n                              <span>{session.exercises.length} exercices</span>\n                            </div>\n                          )}\n                        </div>\n                      </motion.div>\n                    ) : (\n                      <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-3 h-full flex items-center justify-center hover:border-primary-blue-300 transition-colors\">\n                        <button\n                          onClick={() => {\n                            setFormData(prev => ({ ...prev, weekNumber: week, dayNumber: day }))\n                            setEditingSession(null)\n                            setShowCreateForm(true)\n                          }}\n                          className=\"text-gray-400 hover:text-primary-blue-600 transition-colors\"\n                        >\n                          <Plus className=\"w-6 h-6\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Create/Edit Form Modal */}\n      <AnimatePresence>\n        {showCreateForm && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => {\n              setShowCreateForm(false)\n              setEditingSession(null)\n              resetForm()\n            }}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <h3 className=\"text-xl font-bold text-gray-900 mb-6\">\n                {editingSession ? \"Modifier la session\" : \"Cr√©er une nouvelle session\"}\n              </h3>\n\n              <div className=\"space-y-6\">\n                {/* Title */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Titre de la session *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"Ex: Cardio & Renforcement\"\n                  />\n                </div>\n\n                {/* Description */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Description *\n                  </label>\n                  <textarea\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    rows={3}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"D√©cris le contenu de cette session...\"\n                  />\n                </div>\n\n                {/* Week and Day */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Semaine *\n                    </label>\n                    <select\n                      value={formData.weekNumber}\n                      onChange={(e) => setFormData({ ...formData, weekNumber: parseInt(e.target.value) })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      {Array.from({ length: planDuration }, (_, i) => (\n                        <option key={i + 1} value={i + 1}>Semaine {i + 1}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Jour *\n                    </label>\n                    <select\n                      value={formData.dayNumber}\n                      onChange={(e) => setFormData({ ...formData, dayNumber: parseInt(e.target.value) })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      {daysOfWeek.map((day, index) => (\n                        <option key={index + 1} value={index + 1}>{day}</option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n\n                {/* Duration */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Dur√©e (minutes) *\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"15\"\n                    max=\"180\"\n                    value={formData.duration}\n                    onChange={(e) => setFormData({ ...formData, duration: parseInt(e.target.value) || 60 })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowCreateForm(false)\n                      setEditingSession(null)\n                      resetForm()\n                    }}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={handleCreateSession}\n                    className=\"flex-1 px-6 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-bold hover:shadow-glow-blue transition-all\"\n                  >\n                    {editingSession ? \"Mettre √† jour\" : \"Cr√©er la session\"}\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n","size_bytes":14430},"app/(dashboard)/dashboard/coaching/bookings/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { BookingsClientPro } from \"./bookings-client-pro\"\nimport { PlanType } from \"@/lib/features\"\n\nexport default async function BookingsPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      id: true,\n      stats: true\n    }\n  })\n\n  if (!profile || (profile.plan !== PlanType.ELITE)) {\n    redirect(\"/dashboard\")\n  }\n\n  // R√©cup√©rer les r√©servations depuis le champ stats (temporaire)\n  const profileStats = profile.stats as any || {}\n  const bookings = profileStats.bookings || []\n  const availabilities = profileStats.availabilities || []\n\n  // Statistiques\n  const now = new Date()\n  const upcomingBookings = bookings.filter((b: any) => new Date(b.date) >= now && b.status === \"CONFIRMED\")\n  const completedBookings = bookings.filter((b: any) => b.status === \"COMPLETED\")\n  const totalRevenue = completedBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0)\n\n  const stats = {\n    totalBookings: bookings.length,\n    upcomingBookings: upcomingBookings.length,\n    completedBookings: completedBookings.length,\n    totalRevenue\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <a\n                href=\"/dashboard/coaching\"\n                className=\"inline-flex items-center gap-2 text-gray-900 hover:text-gray-700 font-medium transition-colors mb-4\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Retour au Centre de Coaching\n              </a>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                R√©servations\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                G√®re ton calendrier et tes bookings clients\n              </p>\n            </div>\n            <PlanBadge plan={profile.plan as PlanType} size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Total r√©servations</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalBookings}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">√Ä venir</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.upcomingBookings}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Compl√©t√©es</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.completedBookings}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Revenus</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <BookingsClientPro \n        initialBookings={bookings}\n        profileId={profile.id}\n        coachName={profile.displayName}\n      />\n    </div>\n  )\n}\n","size_bytes":6833},".next/server/chunks/ssr/node_modules_next_dist_client_components_builtin_unauthorized_15817684.js":{"content":"module.exports=[45518,(a,b,c)=>{\"use strict\";Object.defineProperty(c,\"__esModule\",{value:!0}),Object.defineProperty(c,\"default\",{enumerable:!0,get:function(){return f}});let d=a.r(7997),e=a.r(72421);function f(){return(0,d.jsx)(e.HTTPAccessErrorFallback,{status:401,message:\"You're not authorized to access this page.\"})}(\"function\"==typeof c.default||\"object\"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,\"__esModule\",{value:!0}),Object.assign(c.default,c),b.exports=c.default)}];\n\n//# sourceMappingURL=node_modules_next_dist_client_components_builtin_unauthorized_15817684.js.map","size_bytes":638},"app/(dashboard)/dashboard/sources/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Link2, Trophy, Award, Plus, BarChart3 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { LiensContent } from \"./liens-content\"\nimport { CompetitionsContent } from \"./competitions-content\"\nimport { SponsorsContent } from \"./sponsors-content\"\n\nconst tabVariants = {\n  hidden: { opacity: 0, y: 20 },\n  visible: { opacity: 1, y: 0 },\n  exit: { opacity: 0, y: -20 }\n}\n\nconst tabContentVariants = {\n  hidden: { opacity: 0, x: 20 },\n  visible: { \n    opacity: 1, \n    x: 0,\n    transition: {\n      duration: 0.3\n    }\n  },\n  exit: { \n    opacity: 0, \n    x: -20,\n    transition: {\n      duration: 0.2\n    }\n  }\n}\n\nexport default function SourcesPage() {\n  const [activeTab, setActiveTab] = useState<'liens' | 'competitions' | 'sponsors'>('liens')\n  const [isLoading, setIsLoading] = useState(true)\n\n  // Animation d'entr√©e\n  useEffect(() => {\n    const timer = setTimeout(() => setIsLoading(false), 100)\n    return () => clearTimeout(timer)\n  }, [])\n\n  // D√©tection du hash URL\n  useEffect(() => {\n    const handleHashChange = () => {\n      if (typeof window !== 'undefined') {\n        const hash = window.location.hash\n        if (hash === '#liens') {\n          setActiveTab('liens')\n        } else if (hash === '#competitions') {\n          setActiveTab('competitions')\n        } else if (hash === '#sponsors') {\n          setActiveTab('sponsors')\n        }\n      }\n    }\n\n    // D√©tecter le hash au chargement\n    handleHashChange()\n\n    // √âcouter les changements de hash\n    window.addEventListener('hashchange', handleHashChange)\n    \n    return () => {\n      window.removeEventListener('hashchange', handleHashChange)\n    }\n  }, [])\n\n  const tabs = [\n    {\n      id: 'liens' as const,\n      label: 'Liens',\n      icon: Link2,\n      description: 'G√©rez vos liens personnalis√©s',\n      color: 'from-gray-800 to-gray-900',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200'\n    },\n    {\n      id: 'competitions' as const,\n      label: 'Comp√©titions',\n      icon: Trophy,\n      description: 'Calendrier de vos courses',\n      color: 'from-gray-800 to-gray-900',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200'\n    },\n    {\n      id: 'sponsors' as const,\n      label: 'Sponsors',\n      icon: Award,\n      description: 'Partenaires et collaborations',\n      color: 'from-gray-800 to-gray-900',\n      bgColor: 'bg-gray-50',\n      borderColor: 'border-gray-200'\n    }\n  ]\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full\"\n        />\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5, ease: \"easeOut\" }}\n      className=\"space-y-8\"\n    >\n      {/* Header avec titre et stats */}\n      <motion.div\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.1, duration: 0.5 }}\n        className=\"bg-gradient-to-r from-gray-50 to-white rounded-2xl p-6 border border-gray-200 shadow-sm\"\n      >\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Sources</h1>\n            <p className=\"text-gray-600\">G√©rez vos liens, comp√©titions et partenaires en un seul endroit</p>\n          </div>\n          <motion.div\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            className=\"flex items-center gap-2 bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors cursor-pointer\"\n          >\n            <BarChart3 className=\"w-4 h-4\" />\n            <span className=\"text-sm font-medium\">Analytics</span>\n          </motion.div>\n        </div>\n      </motion.div>\n\n      {/* Onglets am√©lior√©s */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.2, duration: 0.5 }}\n        className=\"bg-white rounded-2xl border border-gray-200 shadow-sm overflow-hidden\"\n      >\n        <div className=\"border-b border-gray-200 bg-gray-50/50\">\n          <nav className=\"flex\">\n            {tabs.map((tab, index) => {\n              const Icon = tab.icon\n              const isActive = activeTab === tab.id\n              \n              return (\n                <motion.button\n                  key={tab.id}\n                  onClick={() => {\n                    setActiveTab(tab.id)\n                    window.location.hash = tab.id\n                  }}\n                  whileHover={{ y: -2 }}\n                  whileTap={{ y: 0 }}\n                  className={cn(\n                    \"relative flex-1 px-6 py-4 text-sm font-medium transition-all duration-300 group\",\n                    isActive\n                      ? \"text-gray-900 bg-white\"\n                      : \"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"\n                  )}\n                  style={{ zIndex: isActive ? 10 : 1 }}\n                >\n                  <div className=\"flex items-center justify-center gap-3\">\n                    <motion.div\n                      animate={isActive ? { scale: 1.1 } : { scale: 1 }}\n                      transition={{ duration: 0.2 }}\n                    >\n                      <Icon className={cn(\n                        \"w-5 h-5 transition-colors\",\n                        isActive ? \"text-gray-900\" : \"text-gray-500 group-hover:text-gray-700\"\n                      )} />\n                    </motion.div>\n                    <span>{tab.label}</span>\n                  </div>\n                  \n                  {/* Indicateur actif */}\n                  {isActive && (\n                    <motion.div\n                      layoutId=\"activeTab\"\n                      className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-gray-800 to-gray-900\"\n                      initial={false}\n                      transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n                    />\n                  )}\n                  \n                  {/* Tooltip au hover */}\n                  <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    whileHover={{ opacity: 1, y: 0 }}\n                    className=\"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 pointer-events-none whitespace-nowrap\"\n                  >\n                    {tab.description}\n                    <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900\" />\n                  </motion.div>\n                </motion.button>\n              )\n            })}\n          </nav>\n        </div>\n\n        {/* Contenu des onglets avec animation */}\n        <div className=\"relative min-h-[600px]\">\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              variants={tabContentVariants}\n              initial=\"hidden\"\n              animate=\"visible\"\n              exit=\"exit\"\n              className=\"p-6\"\n            >\n              {activeTab === 'liens' && <LiensContent />}\n              {activeTab === 'competitions' && <CompetitionsContent />}\n              {activeTab === 'sponsors' && <SponsorsContent />}\n            </motion.div>\n          </AnimatePresence>\n        </div>\n      </motion.div>\n    </motion.div>\n  )\n}\n\n","size_bytes":7760},".next/server/chunks/ssr/node_modules_next_dist_client_components_builtin_forbidden_45780354.js":{"content":"module.exports=[85523,(a,b,c)=>{\"use strict\";Object.defineProperty(c,\"__esModule\",{value:!0}),Object.defineProperty(c,\"default\",{enumerable:!0,get:function(){return f}});let d=a.r(7997),e=a.r(72421);function f(){return(0,d.jsx)(e.HTTPAccessErrorFallback,{status:403,message:\"This page could not be accessed.\"})}(\"function\"==typeof c.default||\"object\"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,\"__esModule\",{value:!0}),Object.assign(c.default,c),b.exports=c.default)}];\n\n//# sourceMappingURL=node_modules_next_dist_client_components_builtin_forbidden_45780354.js.map","size_bytes":625},".next/server/chunks/ssr/node_modules_next_dist_client_components_9774470f._.js":{"content":"module.exports=[53686,(a,b,c)=>{\"use strict\";Object.defineProperty(c,\"__esModule\",{value:!0}),Object.defineProperty(c,\"styles\",{enumerable:!0,get:function(){return d}});let d={error:{fontFamily:'system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"',height:\"100vh\",textAlign:\"center\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"},desc:{display:\"inline-block\"},h1:{display:\"inline-block\",margin:\"0 20px 0 0\",padding:\"0 23px 0 0\",fontSize:24,fontWeight:500,verticalAlign:\"top\",lineHeight:\"49px\"},h2:{fontSize:14,fontWeight:400,lineHeight:\"49px\",margin:0}};(\"function\"==typeof c.default||\"object\"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,\"__esModule\",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},72421,(a,b,c)=>{\"use strict\";Object.defineProperty(c,\"__esModule\",{value:!0}),Object.defineProperty(c,\"HTTPAccessErrorFallback\",{enumerable:!0,get:function(){return f}});let d=a.r(7997),e=a.r(53686);function f(a){let{status:b,message:c}=a;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(\"title\",{children:b+\": \"+c}),(0,d.jsx)(\"div\",{style:e.styles.error,children:(0,d.jsxs)(\"div\",{children:[(0,d.jsx)(\"style\",{dangerouslySetInnerHTML:{__html:\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}),(0,d.jsx)(\"h1\",{className:\"next-error-h1\",style:e.styles.h1,children:b}),(0,d.jsx)(\"div\",{style:e.styles.desc,children:(0,d.jsx)(\"h2\",{style:e.styles.h2,children:c})})]})})]})}(\"function\"==typeof c.default||\"object\"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,\"__esModule\",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},79962,(a,b,c)=>{\"use strict\";Object.defineProperty(c,\"__esModule\",{value:!0}),Object.defineProperty(c,\"default\",{enumerable:!0,get:function(){return f}});let d=a.r(7997),e=a.r(72421);function f(){return(0,d.jsx)(e.HTTPAccessErrorFallback,{status:404,message:\"This page could not be found.\"})}(\"function\"==typeof c.default||\"object\"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,\"__esModule\",{value:!0}),Object.assign(c.default,c),b.exports=c.default)}];\n\n//# sourceMappingURL=node_modules_next_dist_client_components_9774470f._.js.map","size_bytes":2497},"app/(dashboard)/dashboard/sources/competitions-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { RaceLogo } from \"@/components/ui-pro/race-logo\"\nimport { toast } from \"sonner\"\nimport Image from \"next/image\"\nimport { \n  Trophy, \n  Calendar, \n  MapPin, \n  Clock, \n  Target, \n  Plus, \n  Edit2, \n  Trash2, \n  ExternalLink,\n  BarChart3,\n  CheckCircle,\n  AlertCircle,\n  Timer,\n  Search\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ntype Race = {\n  id: string\n  name: string\n  date: string\n  location?: string | null\n  distance?: string | null\n  result?: string | null\n  status: string\n  url?: string | null\n  logoUrl?: string | null\n}\n\nexport function CompetitionsContent() {\n  const [races, setRaces] = useState<Race[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showForm, setShowForm] = useState(false)\n  const [isExtractingLogo, setIsExtractingLogo] = useState(false)\n  const [formData, setFormData] = useState({\n    name: \"\",\n    date: \"\",\n    location: \"\",\n    distance: \"\",\n    result: \"\",\n    status: \"upcoming\",\n    url: \"\",\n    logoUrl: \"\"\n  })\n\n  useEffect(() => {\n    fetchRaces()\n  }, [])\n\n  async function fetchRaces() {\n    try {\n      const res = await fetch(\"/api/races\")\n      if (res.ok) {\n        const data = await res.json()\n        setRaces(data.races || [])\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement des courses\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    \n    try {\n      const url = editingId ? `/api/races/${editingId}` : \"/api/races\"\n      const method = editingId ? \"PATCH\" : \"POST\"\n      \n      const res = await fetch(url, {\n        method,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(formData)\n      })\n\n      if (!res.ok) throw new Error(\"Erreur lors de la sauvegarde\")\n\n      toast.success(editingId ? \"Course modifi√©e !\" : \"Course ajout√©e !\")\n      setFormData({\n        name: \"\",\n        date: \"\",\n        location: \"\",\n        distance: \"\",\n        result: \"\",\n        status: \"upcoming\",\n        url: \"\",\n        logoUrl: \"\"\n      })\n      setEditingId(null)\n      setShowForm(false)\n      fetchRaces()\n    } catch (error) {\n      toast.error(\"Erreur lors de la sauvegarde\")\n    }\n  }\n\n  async function deleteRace(id: string) {\n    if (!confirm(\"Supprimer cette course ?\")) return\n    \n    try {\n      const res = await fetch(`/api/races/${id}`, { method: \"DELETE\" })\n      if (!res.ok) throw new Error(\"Erreur lors de la suppression\")\n      \n      toast.success(\"Course supprim√©e !\")\n      fetchRaces()\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\")\n    }\n  }\n\n  function editRace(race: Race) {\n    setEditingId(race.id)\n    setShowForm(true)\n    setFormData({\n      name: race.name,\n      date: race.date,\n      location: race.location || \"\",\n      distance: race.distance || \"\",\n      result: race.result || \"\",\n      status: race.status,\n      url: race.url || \"\",\n      logoUrl: race.logoUrl || \"\"\n    })\n  }\n\n  function getStatusInfo(status: string) {\n    switch (status) {\n      case \"completed\":\n        return { icon: CheckCircle, color: \"text-green-600\", bg: \"bg-green-100\", label: \"Termin√©e\" }\n      case \"upcoming\":\n        return { icon: Timer, color: \"text-blue-600\", bg: \"bg-blue-100\", label: \"√Ä venir\" }\n      case \"cancelled\":\n        return { icon: AlertCircle, color: \"text-red-600\", bg: \"bg-red-100\", label: \"Annul√©e\" }\n      default:\n        return { icon: Timer, color: \"text-gray-600\", bg: \"bg-gray-100\", label: \"Inconnue\" }\n    }\n  }\n\n  function getDaysUntil(dateString: string) {\n    const raceDate = new Date(dateString)\n    const today = new Date()\n    const diffTime = raceDate.getTime() - today.getTime()\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24))\n    \n    if (diffDays < 0) return \"Pass√©e\"\n    if (diffDays === 0) return \"Aujourd'hui\"\n    if (diffDays === 1) return \"Demain\"\n    return `${diffDays} jours`\n  }\n\n  const upcomingRaces = races.filter(race => race.status === \"upcoming\")\n  const completedRaces = races.filter(race => race.status === \"completed\")\n  const totalRaces = races.length\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full\"\n        />\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n    >\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Trophy className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Courses</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalRaces}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Timer className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">√Ä Venir</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{upcomingRaces.length}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <CheckCircle className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Termin√©es</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{completedRaces.length}</p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Add Button */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">Mes Comp√©titions</h2>\n          <p className=\"text-gray-600\">G√©rez votre calendrier de courses</p>\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => {\n            setShowForm(!showForm)\n            setEditingId(null)\n            setFormData({\n              name: \"\",\n              date: \"\",\n              location: \"\",\n              distance: \"\",\n              result: \"\",\n              status: \"upcoming\",\n              url: \"\",\n              logoUrl: \"\"\n            })\n          }}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          {showForm ? \"Annuler\" : \"Nouvelle Course\"}\n        </motion.button>\n      </motion.div>\n\n      {/* Form */}\n      <AnimatePresence>\n        {showForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\"\n          >\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">\n                {editingId ? \"Modifier la course\" : \"Ajouter une nouvelle course\"}\n              </h3>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"name\">Nom de la course *</Label>\n                    <Input\n                      id=\"name\"\n                      value={formData.name}\n                      onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                      placeholder=\"Marathon de Paris\"\n                      className=\"mt-1\"\n                      required\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"date\">Date *</Label>\n                    <Input\n                      id=\"date\"\n                      type=\"date\"\n                      value={formData.date}\n                      onChange={(e) => setFormData({ ...formData, date: e.target.value })}\n                      className=\"mt-1\"\n                      required\n                    />\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"location\">Lieu</Label>\n                    <Input\n                      id=\"location\"\n                      value={formData.location}\n                      onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                      placeholder=\"Paris, France\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"distance\">Distance</Label>\n                    <Input\n                      id=\"distance\"\n                      value={formData.distance}\n                      onChange={(e) => setFormData({ ...formData, distance: e.target.value })}\n                      placeholder=\"42.195 km\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"status\">Statut</Label>\n                    <Select value={formData.status} onValueChange={(value) => setFormData({ ...formData, status: value })}>\n                      <SelectTrigger className=\"mt-1\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"upcoming\">√Ä venir</SelectItem>\n                        <SelectItem value=\"completed\">Termin√©e</SelectItem>\n                        <SelectItem value=\"cancelled\">Annul√©e</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div>\n                    <Label htmlFor=\"result\">R√©sultat</Label>\n                    <Input\n                      id=\"result\"\n                      value={formData.result}\n                      onChange={(e) => setFormData({ ...formData, result: e.target.value })}\n                      placeholder=\"3h 45min\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"url\">URL de la comp√©tition</Label>\n                  <Input\n                    id=\"url\"\n                    type=\"url\"\n                    value={formData.url}\n                    onChange={(e) => setFormData({ ...formData, url: e.target.value })}\n                    placeholder=\"https://parismarathon.com\"\n                    className=\"mt-1\"\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    üí° Saisissez l'URL pour extraire le logo automatiquement\n                  </p>\n                </div>\n\n                {/* Logo Section */}\n                <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                  <Label className=\"text-base font-semibold\">Logo de la comp√©tition</Label>\n                  <p className=\"text-sm text-gray-600 mb-3\">Extrait automatiquement depuis l'URL de la comp√©tition</p>\n                  \n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center gap-3\">\n                      <motion.button\n                        type=\"button\"\n                        whileHover={{ scale: 1.02 }}\n                        whileTap={{ scale: 0.98 }}\n                        onClick={async () => {\n                          if (!formData.url) {\n                            toast.error(\"Veuillez d'abord saisir l'URL de la comp√©tition\")\n                            return\n                          }\n                          \n                          setIsExtractingLogo(true)\n                          try {\n                            const res = await fetch(\"/api/races/extract-logo\", {\n                              method: \"POST\",\n                              headers: { \"Content-Type\": \"application/json\" },\n                              body: JSON.stringify({ \n                                websiteUrl: formData.url,\n                                brandName: formData.name\n                              })\n                            })\n\n                            if (res.ok) {\n                              const data = await res.json()\n                              if (data.logoUrl) {\n                                setFormData({ ...formData, logoUrl: data.logoUrl })\n                                toast.success(`Logo extrait avec succ√®s ! (${data.method})`)\n                              } else {\n                                toast.error(\"Aucun logo trouv√© sur ce site\")\n                              }\n                            } else {\n                              toast.error(\"Erreur lors de l'extraction du logo\")\n                            }\n                          } catch (error) {\n                            toast.error(\"Erreur lors de l'extraction du logo\")\n                          } finally {\n                            setIsExtractingLogo(false)\n                          }\n                        }}\n                        disabled={isExtractingLogo || !formData.url}\n                        className=\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm\"\n                      >\n                        {isExtractingLogo ? (\n                          <>\n                            <motion.div\n                              animate={{ rotate: 360 }}\n                              transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                              className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                            />\n                            Extraction en cours...\n                          </>\n                        ) : (\n                          <>\n                            <Search className=\"w-4 h-4\" />\n                            Extraire le logo automatiquement\n                          </>\n                        )}\n                      </motion.button>\n                      {!formData.url && (\n                        <span className=\"text-sm text-orange-600\">\n                          ‚ö†Ô∏è Saisissez d'abord l'URL de la comp√©tition\n                        </span>\n                      )}\n                    </div>\n                    \n                    <div className=\"relative\">\n                      <Label htmlFor=\"logoUrl\" className=\"text-sm text-gray-600\">Ou saisir l'URL du logo manuellement</Label>\n                      <Input\n                        id=\"logoUrl\"\n                        type=\"url\"\n                        value={formData.logoUrl}\n                        onChange={(e) => setFormData({ ...formData, logoUrl: e.target.value })}\n                        placeholder=\"https://example.com/logo.png\"\n                        className=\"mt-1\"\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                {/* Aper√ßu du logo */}\n                {formData.logoUrl && (\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-12 h-12 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center bg-gray-900 border border-gray-300 p-1.5\">\n                      <Image\n                        src={formData.logoUrl}\n                        alt=\"Logo preview\"\n                        width={48}\n                        height={48}\n                        className=\"w-full h-full object-contain\"\n                        onError={(e) => {\n                          e.currentTarget.style.display = 'none'\n                        }}\n                      />\n                    </div>\n                    <span className=\"text-sm text-gray-600\">‚úÖ Aper√ßu du logo</span>\n                  </div>\n                )}\n\n                <div className=\"flex gap-2\">\n                  <motion.button\n                    type=\"submit\"\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    {editingId ? \"Modifier\" : \"Ajouter\"}\n                  </motion.button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Races List */}\n      <div className=\"space-y-4\">\n        <AnimatePresence>\n          {races.map((race, index) => {\n            const statusInfo = getStatusInfo(race.status)\n            const StatusIcon = statusInfo.icon\n            const daysUntil = getDaysUntil(race.date)\n            \n            return (\n              <motion.div\n                key={race.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                transition={{ delay: index * 0.1 }}\n                className=\"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 group\"\n              >\n                <div className=\"p-6\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"flex-shrink-0\">\n                        {race.logoUrl ? (\n                          <div className=\"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 flex items-center justify-center bg-gray-900 border border-gray-300 p-2\">\n                            <Image\n                              src={race.logoUrl}\n                              alt={race.name}\n                              width={64}\n                              height={64}\n                              className=\"w-full h-full object-contain\"\n                              onError={(e) => {\n                                e.currentTarget.style.display = 'none'\n                                e.currentTarget.parentElement?.nextElementSibling?.classList.remove('hidden')\n                              }}\n                            />\n                          </div>\n                        ) : null}\n                        <div className={`w-16 h-16 bg-gradient-to-br from-yellow-100 to-orange-100 rounded-lg flex items-center justify-center ${race.logoUrl ? 'hidden' : ''}`}>\n                          <Trophy className=\"w-8 h-8 text-yellow-600\" />\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <h3 className=\"text-lg font-semibold text-gray-900\">{race.name}</h3>\n                          <div className={cn(\n                            \"flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium\",\n                            statusInfo.bg,\n                            statusInfo.color\n                          )}>\n                            <StatusIcon className=\"w-3 h-3\" />\n                            {statusInfo.label}\n                          </div>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600\">\n                          <div className=\"flex items-center gap-2\">\n                            <Calendar className=\"w-4 h-4\" />\n                            {new Date(race.date).toLocaleDateString('fr-FR')}\n                          </div>\n                          {race.location && (\n                            <div className=\"flex items-center gap-2\">\n                              <MapPin className=\"w-4 h-4\" />\n                              {race.location}\n                            </div>\n                          )}\n                          {race.distance && (\n                            <div className=\"flex items-center gap-2\">\n                              <Target className=\"w-4 h-4\" />\n                              {race.distance}\n                            </div>\n                          )}\n                          {race.result && (\n                            <div className=\"flex items-center gap-2\">\n                              <Trophy className=\"w-4 h-4\" />\n                              {race.result}\n                            </div>\n                          )}\n                        </div>\n                        \n                        {race.status === \"upcoming\" && (\n                          <div className=\"mt-2\">\n                            <div className=\"flex items-center gap-2 text-sm text-blue-600\">\n                              <Clock className=\"w-4 h-4\" />\n                              {daysUntil}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      {race.url && (\n                        <motion.button\n                          whileHover={{ scale: 1.1 }}\n                          whileTap={{ scale: 0.9 }}\n                          onClick={() => race.url && window.open(race.url, '_blank')}\n                          className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                          title=\"Voir le site\"\n                        >\n                          <ExternalLink className=\"w-4 h-4\" />\n                        </motion.button>\n                      )}\n                      \n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => editRace(race)}\n                        className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                        title=\"Modifier\"\n                      >\n                        <Edit2 className=\"w-4 h-4\" />\n                      </motion.button>\n                      \n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => deleteRace(race.id)}\n                        className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                        title=\"Supprimer\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </motion.button>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            )\n          })}\n        </AnimatePresence>\n        \n        {races.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"text-6xl mb-4\">üèÉ‚Äç‚ôÇÔ∏è</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Aucune course ajout√©e</h3>\n            <p className=\"text-gray-600 mb-4\">Commencez par ajouter votre premi√®re comp√©tition</p>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setShowForm(true)}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-3 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Ajouter ma premi√®re course\n            </motion.button>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}","size_bytes":26217},"app/(dashboard)/dashboard/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@prisma/client\"\nimport Link from \"next/link\"\nimport { DashboardStats } from \"@/components/ui-pro/dashboard-stats\"\nimport { DashboardGoals } from \"@/components/ui-pro/dashboard-goals\"\nimport { RaceLogo } from \"@/components/ui-pro/race-logo\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { canUserAccessFeature, getUserFeatureLimit } from \"@/lib/features\"\nimport { UpgradeSuccessToast } from \"@/components/ui-pro/upgrade-success-toast\"\n\nexport default async function DashboardPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    include: {\n      links: { where: { isActive: true }, orderBy: { position: 'asc' } },\n      races: { orderBy: { date: 'asc' } },\n      sponsors: true,\n      _count: {\n        select: { links: true, races: true, sponsors: true, media: true }\n      }\n    }\n  })\n\n  if (!profile) {\n    await prisma.profile.create({\n      data: {\n        userId: session.user.id,\n        username: session.user.email.split('@')[0],\n        displayName: session.user.name || \"Athl√®te\",\n        sport: \"RUNNING\",\n        plan: \"FREE\"\n      }\n    })\n    redirect(\"/dashboard\")\n  }\n\n  // Analytics des 7 derniers jours\n  const sevenDaysAgo = new Date()\n  sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7)\n  \n  const analytics = await prisma.analytics.aggregate({\n    where: {\n      profileId: profile.id,\n      date: { gte: sevenDaysAgo }\n    },\n    _sum: {\n      views: true,\n      uniqueViews: true,\n      linkClicks: true\n    }\n  })\n\n  const totalLinkClicks = await prisma.link.aggregate({\n    where: { profileId: profile.id },\n    _sum: { clicks: true }\n  })\n\n  return (\n    <div className=\"space-y-8\">\n      <UpgradeSuccessToast />\n      \n      {/* Header avec gradient */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        {/* Shapes anim√©s */}\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                Bienvenue, {profile.displayName}\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                Voici tes performances cette semaine\n              </p>\n            </div>\n            <PlanBadge plan={profile.plan as PlanType} size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Grid avec overlap */}\n      <div className=\"-mt-8 sm:-mt-12 lg:-mt-16\">\n        <DashboardStats\n          views={analytics._sum.views || 0}\n          uniqueViews={analytics._sum.uniqueViews || 0}\n          linksCount={profile._count.links}\n          racesCount={profile._count.races}\n        />\n      </div>\n\n      {/* All Races - Compact */}\n      {profile.races.length > 0 && (\n        <div className=\"bg-white rounded-xl sm:rounded-2xl shadow-standard p-4 sm:p-6 mb-6 sm:mb-8\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-xl font-bold flex items-center gap-2\">\n              <span>Mes Comp√©titions</span>\n            </h2>\n            <Link \n              href=\"/dashboard/races\"\n              className=\"text-sm text-yellow-600 hover:text-black font-medium\"\n            >\n              Voir toutes ‚Üí\n            </Link>\n          </div>\n          \n          {/* S√©parer les comp√©titions √† venir et pass√©es */}\n          {(() => {\n            const upcomingRaces = profile.races.filter(race => new Date(race.date) >= new Date()).slice(0, 2)\n            const pastRaces = profile.races.filter(race => new Date(race.date) < new Date()).slice(0, 2)\n            \n            return (\n              <div className=\"space-y-4\">\n                {/* Comp√©titions √† venir */}\n                {upcomingRaces.length > 0 && (\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-yellow-600 mb-2 uppercase tracking-wide\">\n                      √Ä venir ({upcomingRaces.length})\n                    </h3>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3\">\n                      {upcomingRaces.map((race) => {\n                        const daysUntil = Math.ceil((new Date(race.date).getTime() - Date.now()) / (1000 * 60 * 60 * 24))\n                        return (\n                          <div key={race.id} className=\"flex items-center justify-between p-3 sm:p-2 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-1.5 mb-0.5\">\n                                {(race as any).logoUrl && (\n            <RaceLogo \n              src={(race as any).logoUrl} \n              alt={`Logo ${race.name}`}\n              className=\"w-4 h-4 rounded-sm object-contain border shadow-sm p-0.5\"\n              variant=\"dark\"\n            />\n                                )}\n                                <h4 className=\"font-medium text-gray-900 text-xs truncate\">{race.name}</h4>\n                              </div>\n                              <div className=\"flex items-center gap-2 text-xs text-gray-600\">\n                                <span>{new Date(race.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}</span>\n                                {race.location && <span>‚Ä¢ {race.location}</span>}\n                                {race.distance && <span>‚Ä¢ {race.distance}</span>}\n                              </div>\n                            </div>\n                            <span className=\"px-1.5 py-0.5 bg-yellow-500 text-white rounded-full text-xs font-bold ml-2 whitespace-nowrap\">\n                              {daysUntil}j\n                            </span>\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n                )}\n                \n                {/* Comp√©titions pass√©es */}\n                {pastRaces.length > 0 && (\n                  <div>\n                    <h3 className=\"text-sm font-semibold text-gray-500 mb-2 uppercase tracking-wide\">\n                      Pass√©es ({pastRaces.length})\n                    </h3>\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3\">\n                      {pastRaces.map((race) => {\n                        const daysAgo = Math.ceil((Date.now() - new Date(race.date).getTime()) / (1000 * 60 * 60 * 24))\n                        return (\n                          <div key={race.id} className=\"flex items-center justify-between p-2 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100 transition-colors\">\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center gap-1.5 mb-0.5\">\n                                {(race as any).logoUrl && (\n            <RaceLogo \n              src={(race as any).logoUrl} \n              alt={`Logo ${race.name}`}\n              className=\"w-4 h-4 rounded-sm object-contain border shadow-sm p-0.5\"\n              variant=\"dark\"\n            />\n                                )}\n                                <h4 className=\"font-medium text-gray-900 text-xs truncate\">{race.name}</h4>\n                              </div>\n                              <div className=\"flex items-center gap-2 text-xs text-gray-600\">\n                                <span>{new Date(race.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' })}</span>\n                                {race.location && <span>‚Ä¢ {race.location}</span>}\n                                {race.distance && <span>‚Ä¢ {race.distance}</span>}\n                              </div>\n                            </div>\n                            {race.result ? (\n                              <span className=\"px-1.5 py-0.5 bg-green-500 text-white rounded-full text-xs font-bold ml-2 whitespace-nowrap\">\n                                {race.result}\n                              </span>\n                            ) : (\n                              <span className=\"px-1.5 py-0.5 bg-gray-400 text-white rounded-full text-xs font-bold ml-2 whitespace-nowrap\">\n                                {daysAgo}j\n                              </span>\n                            )}\n                          </div>\n                        )\n                      })}\n                    </div>\n                  </div>\n                )}\n                \n                {/* Lien vers toutes les comp√©titions si il y en a plus */}\n                {profile.races.length > 4 && (\n                  <div className=\"text-center pt-2\">\n                    <Link \n                      href=\"/dashboard/races\"\n                      className=\"text-sm text-gray-500 hover:text-yellow-600 font-medium\"\n                    >\n                      +{profile.races.length - 4} autres comp√©titions ‚Üí\n                    </Link>\n                  </div>\n                )}\n              </div>\n            )\n          })()}\n        </div>\n      )}\n\n      {/* Objectifs */}\n      <DashboardGoals\n        views={analytics._sum.views || 0}\n        sponsorsCount={profile.sponsors.length}\n        linkClicks={analytics._sum.linkClicks || 0}\n      />\n\n\n      {/* Quick Actions Grid */}\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6\">\n        <Link href=\"/dashboard/profile\" className=\"group\">\n          <div className=\"relative h-full bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 sm:p-8 transition-all duration-300 group-hover:-translate-y-1 overflow-hidden\">\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-ocean\" />\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n              <svg className=\"w-8 h-8 text-primary-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2 group-hover:text-primary-blue-600 transition-colors\">\n              √âditer Profil\n            </h3>\n            <p className=\"text-gray-600 text-sm\">\n              Mets √† jour tes informations personnelles\n            </p>\n          </div>\n        </Link>\n        \n        <Link href=\"/dashboard/races\" className=\"group\">\n          <div className=\"relative h-full bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 sm:p-8 transition-all duration-300 group-hover:-translate-y-1 overflow-hidden\">\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-energy\" />\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n              <svg className=\"w-8 h-8 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2 group-hover:text-yellow-600 transition-colors\">\n              Mes Comp√©titions\n            </h3>\n            <p className=\"text-gray-600 text-sm\">\n              G√®re ton calendrier de comp√©titions\n            </p>\n          </div>\n        </Link>\n        \n        <Link href={`/${profile.username}`} target=\"_blank\" className=\"group\">\n          <div className=\"relative h-full bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 sm:p-8 transition-all duration-300 group-hover:-translate-y-1 overflow-hidden\">\n            <div className=\"absolute top-0 left-0 right-0 h-1 bg-gradient-performance\" />\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform\">\n              <svg className=\"w-8 h-8 text-primary-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold mb-2 group-hover:text-primary-green-600 transition-colors\">\n              Voir Profil Public\n            </h3>\n            <p className=\"text-gray-600 text-sm\">\n              Aper√ßu de ton profil en ligne\n            </p>\n          </div>\n        </Link>\n      </div>\n\n      {/* Upgrade Banner si FREE */}\n      {profile.plan === \"FREE\" && (\n        <div className=\"relative bg-gradient-premium rounded-3xl shadow-elevated overflow-hidden\">\n          <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMzLjMxNCAwIDYgMi42ODYgNiA2cy0yLjY4NiA2LTYgNi02LTIuNjg2LTYtNiAyLjY4Ni02IDYtNnoiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLW9wYWNpdHk9Ii4xIiBzdHJva2Utd2lkdGg9IjIiLz48L2c+PC9zdmc+')] opacity-20\" />\n          \n          <div className=\"relative z-10 p-6 sm:p-8 md:p-10\">\n            <div className=\"flex flex-col md:flex-row items-center justify-between gap-4 sm:gap-6\">\n              <div>\n                <h3 className=\"text-3xl font-black mb-2 bg-gradient-to-r from-accent-600 to-success-600 bg-clip-text text-transparent\">\n                  Passe en Athlete Pro\n                </h3>\n                <p className=\"text-lg text-gray-700 font-medium\">\n                  Sync Strava, analytics avanc√©es, domaine perso et plus encore\n                </p>\n              </div>\n              <Link \n                href=\"/dashboard/upgrade\"\n                className=\"inline-flex items-center gap-2 bg-white text-primary-purple-600 hover:bg-gray-100 px-8 py-4 rounded-full font-bold text-lg whitespace-nowrap shadow-floating hover:shadow-glow-purple transition-all hover:scale-105\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                </svg>\n                Upgrader l'abonnement\n              </Link>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Section Upgrader l'abonnement */}\n      <div className=\"mt-12 bg-gradient-to-br from-gray-50 to-white rounded-3xl shadow-lg border border-gray-200 overflow-hidden\">\n        <div className=\"p-8 sm:p-10\">\n          {/* Header */}\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl sm:text-4xl font-black text-gray-900 mb-3\">\n              Upgrader l'abonnement\n            </h2>\n            <p className=\"text-gray-600 text-lg\">\n              D√©bloque tout le potentiel de ton profil d'athl√®te\n            </p>\n          </div>\n\n          {/* Plans Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 max-w-6xl mx-auto\">\n            {/* Plan Free */}\n            <div className={`relative rounded-2xl p-6 transition-all ${\n              profile.plan === PlanType.FREE \n                ? \"bg-white border-2 border-yellow-500 shadow-lg\" \n                : \"bg-white border border-gray-200 shadow hover:shadow-lg\"\n            }`}>\n              {profile.plan === PlanType.FREE && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-white px-3 py-1 rounded-full text-xs font-bold\">\n                  Plan Actuel\n                </div>\n              )}\n              <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center mb-4\">\n                <svg className=\"w-6 h-6 text-gray-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                </svg>\n              </div>\n              <h3 className=\"text-2xl font-black mb-1 text-gray-900\">Free</h3>\n              <p className=\"text-sm mb-4 text-gray-600\">Parfait pour commencer</p>\n              <div className=\"mb-4\">\n                <div className=\"text-4xl font-black text-gray-900\">Gratuit</div>\n              </div>\n              <div className=\"space-y-2 text-sm mb-6\">\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">1 lien</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">0 sponsors</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Galerie 2 m√©dias</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Plan Pro */}\n            <div className={`relative rounded-2xl p-6 transition-all ${\n              profile.plan === PlanType.PRO \n                ? \"bg-gradient-to-br from-gray-800 to-black text-white border-2 border-yellow-500 shadow-lg\" \n                : \"bg-gradient-to-br from-gray-800 to-black text-white shadow-lg hover:shadow-xl\"\n            }`}>\n              {profile.plan === PlanType.PRO && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-gray-900 px-3 py-1 rounded-full text-xs font-bold\">\n                  Plan Actuel\n                </div>\n              )}\n              <div className=\"absolute top-4 right-4 bg-yellow-500 text-gray-900 px-2 py-1 rounded-full text-xs font-bold\">\n                Populaire\n              </div>\n              <div className=\"w-12 h-12 rounded-xl bg-white/10 flex items-center justify-center mb-4\">\n                <svg className=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-2xl font-black mb-1\">Pro</h3>\n              <p className=\"text-sm mb-4 text-white/90\">Pour les athl√®tes s√©rieux</p>\n              <div className=\"mb-4\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-4xl font-black\">9.90‚Ç¨</span>\n                  <span className=\"text-lg text-white/80\">/mois</span>\n                </div>\n              </div>\n              <div className=\"space-y-2 text-sm mb-6\">\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-white mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-white/90\">Liens illimit√©s</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-white mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-white/90\">Sponsors illimit√©s</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-white mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-white/90\">Analytics avanc√©es</span>\n                </div>\n              </div>\n              {profile.plan === PlanType.PRO ? (\n                <div className=\"w-full block py-3 rounded-xl font-bold text-center bg-white/20 text-white cursor-not-allowed\">\n                  Plan actuel\n                </div>\n              ) : (\n                <Link\n                  href=\"/dashboard/upgrade\"\n                  className=\"w-full block py-3 rounded-xl font-bold text-center bg-white text-gray-900 hover:bg-gray-100 transition-colors\"\n                >\n                  Passer Pro\n                </Link>\n              )}\n            </div>\n\n            {/* Plan Elite */}\n            <div className={`relative rounded-2xl p-6 transition-all ${\n              profile.plan === PlanType.ELITE \n                ? \"bg-white border-2 border-yellow-500 shadow-lg\" \n                : \"bg-white border border-gray-200 shadow hover:shadow-lg\"\n            }`}>\n              {profile.plan === PlanType.ELITE && (\n                <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-500 text-gray-900 px-3 py-1 rounded-full text-xs font-bold\">\n                  Plan Actuel\n                </div>\n              )}\n              <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center mb-4\">\n                <svg className=\"w-6 h-6 text-gray-800\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-2xl font-black mb-1 text-gray-900\">Elite</h3>\n              <p className=\"text-sm mb-4 text-gray-600\">Pour les professionnels</p>\n              <div className=\"mb-4\">\n                <div className=\"flex items-baseline gap-2\">\n                  <span className=\"text-4xl font-black text-gray-900\">25.90‚Ç¨</span>\n                  <span className=\"text-lg text-gray-600\">/mois</span>\n                </div>\n              </div>\n              <div className=\"space-y-2 text-sm mb-6\">\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Tout du plan Pro</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Analytics illimit√©es</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Export donn√©es (PDF)</span>\n                </div>\n                <div className=\"flex items-start gap-2\">\n                  <svg className=\"w-4 h-4 text-green-600 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                  </svg>\n                  <span className=\"text-gray-700\">Service de coaching</span>\n                </div>\n              </div>\n              {profile.plan === PlanType.ELITE ? (\n                <div className=\"w-full block py-3 rounded-xl font-bold text-center bg-gray-100 text-gray-600 cursor-not-allowed\">\n                  Plan actuel\n                </div>\n              ) : (\n                <Link\n                  href=\"/dashboard/upgrade\"\n                  className=\"w-full block py-3 rounded-xl font-bold text-center bg-gradient-to-r from-gray-800 to-black text-white hover:from-gray-900 hover:to-gray-700 transition-all\"\n                >\n                  Passer Elite\n                </Link>\n              )}\n            </div>\n          </div>\n\n          {/* CTA Button */}\n          <div className=\"mt-8 text-center\">\n            <Link \n              href=\"/dashboard/upgrade\"\n              className=\"inline-flex items-center gap-3 bg-gradient-to-r from-gray-800 to-black text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl transition-all hover:scale-105 group\"\n            >\n              <svg className=\"w-5 h-5 group-hover:rotate-12 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 10V3L4 14h7v7l9-11h-7z\" />\n              </svg>\n              Voir tous les plans et tarifs\n              <svg className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":27502},"app/(dashboard)/dashboard/settings/settings-client.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { RealtimeNotifications, useRealtimeNotifications } from \"@/components/ui-pro/realtime-notifications\"\nimport { PromoBadge } from \"@/components/ui-pro/promo-badge\"\nimport { AnalyticsWithFilter } from \"@/components/ui-pro/analytics-with-filter\"\nimport { \n  Settings, \n  Bell, \n  Globe, \n  Shield, \n  Save,\n  RotateCcw,\n  Zap,\n  Crown,\n  BarChart3\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { canUserAccessFeature, PLAN_FEATURES, PlanType } from \"@/lib/features\"\nimport Link from \"next/link\"\n\ninterface SettingsClientProps {\n  profileId: string\n  username: string\n  userPlan: PlanType\n  initialCustomDomain: string\n  promoCodeUsed?: string | null\n  trialEndsAt?: string | null\n}\n\nexport function SettingsClient({\n  profileId,\n  username,\n  userPlan,\n  initialCustomDomain,\n  promoCodeUsed,\n  trialEndsAt\n}: SettingsClientProps) {\n  // Initialiser avec 'general' par d√©faut pour √©viter les erreurs d'hydratation\n  const [activeTab, setActiveTab] = useState<'general' | 'analytics'>('general')\n  const [customDomain, setCustomDomain] = useState(initialCustomDomain)\n  const [notifications, setNotifications] = useState({\n    email: true,\n    push: false\n  })\n  const [isLoading, setIsLoading] = useState(false)\n  const [hasChanges, setHasChanges] = useState(false)\n\n  // V√©rifier l'URL apr√®s le montage du composant\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      if (window.location.pathname.includes('analytics') || window.location.hash === '#analytics') {\n        setActiveTab('analytics')\n      }\n    }\n  }, [])\n\n  // Hook pour les notifications temps r√©el\n  const realtimeNotifications = useRealtimeNotifications(userPlan)\n\n  const canAccessCustomDomain = canUserAccessFeature(userPlan, \"customDomain\")\n  const canAccessRealtimeNotifications = canUserAccessFeature(userPlan, \"realtimeNotifications\")\n\n  // V√©rifier les changements\n  useEffect(() => {\n    const hasChanged = \n      customDomain !== initialCustomDomain\n    \n    setHasChanges(hasChanged)\n  }, [customDomain, initialCustomDomain])\n\n  const handleSaveSettings = async () => {\n    setIsLoading(true)\n    \n    try {\n      const response = await fetch('/api/profile', {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          customDomain: customDomain || null\n        }),\n      })\n\n      if (!response.ok) {\n        throw new Error('Erreur lors de la sauvegarde')\n      }\n\n      // R√©initialiser les changements\n      setHasChanges(false)\n      \n      // Afficher un message de succ√®s\n      alert(\"Param√®tres sauvegard√©s avec succ√®s!\")\n      \n    } catch (error) {\n      console.error('Erreur:', error)\n      alert(\"Erreur lors de la sauvegarde des param√®tres\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleResetSettings = () => {\n    setCustomDomain(initialCustomDomain)\n    setNotifications({\n      email: true,\n      push: false\n    })\n    setHasChanges(false)\n  }\n\n  const handleUpgradePlan = async (newPlan: PlanType) => {\n    setIsLoading(true)\n    try {\n      const response = await fetch('/api/upgrade-plan', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ plan: newPlan })\n      })\n\n      if (!response.ok) throw new Error('Erreur lors de la mise √† jour')\n\n      alert(`‚úÖ Plan mis √† jour vers ${newPlan} ! Rechargez la page pour voir les changements.`)\n      window.location.reload()\n    } catch (error) {\n      alert('‚ùå Erreur lors de la mise √† jour du plan')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Onglets */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => {\n              setActiveTab('general')\n              window.location.hash = ''\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'general'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <Settings className=\"w-4 h-4\" />\n            Param√®tres G√©n√©raux\n          </button>\n          <button\n            onClick={() => {\n              setActiveTab('analytics')\n              window.location.hash = 'analytics'\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'analytics'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <BarChart3 className=\"w-4 h-4\" />\n            Analytics\n          </button>\n        </nav>\n      </div>\n\n      {/* Contenu de l'onglet G√©n√©ral */}\n      {activeTab === 'general' && (\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Param√®tres g√©n√©raux */}\n          <div className=\"lg:col-span-2 space-y-6\">\n\n        {/* Domaine personnalis√© */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Globe className=\"w-5 h-5\" />\n              Domaine personnalis√©\n              {!canAccessCustomDomain && (\n                <Badge variant=\"secondary\" className=\"bg-yellow-100 text-yellow-800\">\n                  Elite uniquement\n                </Badge>\n              )}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {canAccessCustomDomain ? (\n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"custom-domain\">Votre domaine</Label>\n                  <Input\n                    id=\"custom-domain\"\n                    placeholder=\"monprofil.com\"\n                    value={customDomain}\n                    onChange={(e) => setCustomDomain(e.target.value)}\n                    className=\"mt-2\"\n                  />\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    Configurez votre domaine personnalis√© pour un profil plus professionnel.\n                  </p>\n                  {customDomain !== initialCustomDomain && (\n                    <p className=\"text-sm text-green-600 mt-1\">\n                      ‚úì Domaine modifi√© - Sauvegardez pour appliquer les changements\n                    </p>\n                  )}\n                </div>\n                {/* Configuration DNS */}\n                <div className=\"p-4 bg-gradient-to-br from-gray-800 to-gray-900 border border-yellow-400 rounded-lg\">\n                  <h4 className=\"font-semibold text-yellow-400 mb-3 flex items-center gap-2\">\n                    <Globe className=\"w-4 h-4\" />\n                    Configuration DNS requise\n                  </h4>\n                  \n                  <div className=\"space-y-3\">\n                    <p className=\"text-sm text-gray-200\">\n                      Pour connecter votre domaine personnalis√©, ajoutez cet enregistrement DNS chez votre h√©bergeur :\n                    </p>\n                    \n                    <div className=\"bg-black/50 rounded-md p-3 border border-white/10\">\n                      <div className=\"grid grid-cols-3 gap-3 text-xs\">\n                        <div>\n                          <p className=\"text-gray-400 mb-1\">Type</p>\n                          <p className=\"font-mono text-yellow-300 font-semibold\">CNAME</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-400 mb-1\">Nom</p>\n                          <p className=\"font-mono text-yellow-300 font-semibold\">@</p>\n                        </div>\n                        <div>\n                          <p className=\"text-gray-400 mb-1\">Valeur</p>\n                          <p className=\"font-mono text-yellow-300 font-semibold\">athlink.app</p>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"text-xs text-gray-300 space-y-1\">\n                      <p>‚Ä¢ La propagation DNS peut prendre jusqu'√† 24-48h</p>\n                      <p>‚Ä¢ V√©rifiez que votre domaine n'a pas d'enregistrement A existant</p>\n                      <p>‚Ä¢ Si vous utilisez un sous-domaine (ex: profil.votredomaine.com), remplacez @ par le sous-domaine</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <Globe className=\"w-12 h-12 text-yellow-600 mx-auto mb-4\" />\n                <h3 className=\"text-lg font-semibold text-yellow-800 mb-2\">\n                  Domaine personnalis√©\n                </h3>\n                <p className=\"text-yellow-700 mb-4\">\n                  Les domaines personnalis√©s sont disponibles uniquement avec le plan Elite.\n                </p>\n                <Button className=\"bg-yellow-600 hover:bg-yellow-700\">\n                  Upgrade vers Elite\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n\n        {/* Notifications */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Bell className=\"w-5 h-5\" />\n              Notifications\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label htmlFor=\"email-notifications\">Notifications email</Label>\n                <p className=\"text-sm text-gray-600\">\n                  Recevoir des notifications par email\n                </p>\n              </div>\n              <Switch\n                id=\"email-notifications\"\n                checked={notifications.email}\n                onCheckedChange={(checked) => setNotifications(prev => ({ ...prev, email: checked }))}\n              />\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label htmlFor=\"push-notifications\">Notifications push</Label>\n                <p className=\"text-sm text-gray-600\">\n                  Recevoir des notifications push dans le navigateur\n                </p>\n              </div>\n              <Switch\n                id=\"push-notifications\"\n                checked={notifications.push}\n                onCheckedChange={(checked) => setNotifications(prev => ({ ...prev, push: checked }))}\n              />\n            </div>\n\n            {!canAccessRealtimeNotifications && (\n              <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                <p className=\"text-sm text-yellow-800\">\n                  <strong>Notifications temps r√©el :</strong> Disponibles uniquement avec le plan Elite\n                </p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Actions */}\n      <div className=\"space-y-6\">\n        {/* Actions rapides */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Settings className=\"w-5 h-5\" />\n              Actions\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            <Button \n              onClick={handleSaveSettings} \n              className=\"w-full\"\n              disabled={!hasChanges || isLoading}\n            >\n              <Save className=\"w-4 h-4 mr-2\" />\n              {isLoading ? \"Sauvegarde...\" : \"Sauvegarder\"}\n            </Button>\n            \n            <Button \n              onClick={handleResetSettings} \n              variant=\"outline\" \n              className=\"w-full\"\n              disabled={!hasChanges || isLoading}\n            >\n              <RotateCcw className=\"w-4 h-4 mr-2\" />\n              R√©initialiser\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Badge Code Promo */}\n        {promoCodeUsed && (\n          <PromoBadge \n            promoCode={promoCodeUsed}\n            trialEndsAt={trialEndsAt}\n          />\n        )}\n\n        {/* Plan actuel */}\n        <Card className=\"border-2\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Shield className=\"w-5 h-5\" />\n              Plan actuel\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"text-center\">\n              <div className=\"inline-flex items-center gap-2 mb-2\">\n                {userPlan === \"PRO\" && <Zap className=\"w-6 h-6 text-yellow-600\" />}\n                {userPlan === \"ELITE\" && <Crown className=\"w-6 h-6 text-gray-800\" />}\n                <div className=\"text-3xl font-bold text-gray-900\">\n                  {userPlan === \"FREE\" && \"Gratuit\"}\n                  {userPlan === \"PRO\" && \"Pro\"}\n                  {userPlan === \"ELITE\" && \"Elite\"}\n                </div>\n              </div>\n              \n              {/* Limites du plan */}\n              <div className=\"mt-4 space-y-2 text-left bg-gray-50 p-4 rounded-lg\">\n                <div className=\"text-xs font-semibold text-gray-700 uppercase mb-2\">Vos limites</div>\n                <div className=\"space-y-1 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Liens</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxLinks === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxLinks}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Comp√©titions</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxRaces === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxRaces}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Sponsors</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxSponsors === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxSponsors}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">M√©dias</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].maxMedia === -1 ? \"Illimit√©\" : PLAN_FEATURES[userPlan].maxMedia}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-600\">Analytics</span>\n                    <span className=\"font-semibold text-gray-900\">\n                      {PLAN_FEATURES[userPlan].analyticsDays === null ? \"Illimit√©\" : `${PLAN_FEATURES[userPlan].analyticsDays} jours`}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              \n              {/* Boutons d'upgrade */}\n              {userPlan === \"FREE\" && (\n                <div className=\"space-y-3 mt-4\">\n                  <p className=\"text-sm text-gray-600\">\n                    D√©bloquez plus de fonctionnalit√©s\n                  </p>\n                  <Link href=\"/dashboard/upgrade\">\n                    <Button className=\"w-full bg-yellow-600 hover:bg-yellow-700 text-white\">\n                      <Zap className=\"w-4 h-4 mr-2\" />\n                      Voir les plans\n                    </Button>\n                  </Link>\n                </div>\n              )}\n\n              {userPlan === \"PRO\" && (\n                <div className=\"space-y-3 mt-4\">\n                  <div className=\"flex items-center justify-center gap-2 mb-2\">\n                    <Badge className=\"bg-yellow-600 text-white\">\n                      <Zap className=\"w-3 h-3 mr-1\" />\n                      Pro\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-gray-600\">\n                    Passez Elite pour encore plus\n                  </p>\n                  <Link href=\"/dashboard/upgrade\">\n                    <Button className=\"w-full bg-gray-800 hover:bg-gray-900 text-white\">\n                      <Crown className=\"w-4 h-4 mr-2\" />\n                      Upgrade vers Elite\n                    </Button>\n                  </Link>\n                </div>\n              )}\n\n              {userPlan === \"ELITE\" && (\n                <div className=\"space-y-3 mt-4\">\n                  <div className=\"flex items-center justify-center gap-2 mb-2\">\n                    <Badge className=\"bg-gray-800 text-white\">\n                      <Crown className=\"w-3 h-3 mr-1\" />\n                      Elite\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-green-600 font-medium\">\n                    Vous avez acc√®s √† toutes les fonctionnalit√©s premium !\n                  </p>\n                  <div className=\"text-xs text-gray-500 mt-2\">\n                    Merci pour votre soutien\n                  </div>\n                </div>\n              )}\n\n            </div>\n          </CardContent>\n        </Card>\n\n      </div>\n    </div>\n      )}\n\n      {/* Contenu de l'onglet Analytics */}\n      {activeTab === 'analytics' && (\n        <div>\n          <AnalyticsWithFilter\n            userPlan={userPlan}\n            username={username}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":18331},".next/server/chunks/ssr/node_modules_next_dist_client_components_builtin_global-error_ece394eb.js":{"content":"module.exports=[4276,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(11857);a.n(d(\"[project]/node_modules/next/dist/client/components/builtin/global-error.js <module evaluation>\"))},82509,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(11857);a.n(d(\"[project]/node_modules/next/dist/client/components/builtin/global-error.js\"))},66114,a=>{\"use strict\";a.i(4276);var b=a.i(82509);a.n(b)}];\n\n//# sourceMappingURL=node_modules_next_dist_client_components_builtin_global-error_ece394eb.js.map","size_bytes":482},"app/(dashboard)/dashboard/coaching/business-analytics/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { BusinessAnalyticsClient } from \"./business-analytics-client\"\nimport { PlanType } from \"@/lib/features\"\n\nexport default async function BusinessAnalyticsPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      id: true,\n      stats: true\n    }\n  })\n\n  if (!profile || (profile.plan !== PlanType.ELITE)) {\n    redirect(\"/dashboard\")\n  }\n\n  // R√©cup√©rer les donn√©es depuis le champ stats (temporaire)\n  const profileStats = profile.stats as any || {}\n  const bookings = profileStats.bookings || []\n  const trainingPlans = profileStats.trainingPlans || []\n\n  // Calculer les m√©triques\n  const now = new Date()\n  const currentMonth = now.getMonth()\n  const currentYear = now.getFullYear()\n\n  // Revenus\n  const completedBookings = bookings.filter((b: any) => b.status === \"COMPLETED\")\n  const totalRevenue = completedBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0)\n  \n  const currentMonthBookings = completedBookings.filter((b: any) => {\n    const bookingDate = new Date(b.date)\n    return bookingDate.getMonth() === currentMonth && bookingDate.getFullYear() === currentYear\n  })\n  const monthlyRevenue = currentMonthBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0)\n\n  // Clients\n  const uniqueClients = new Set(completedBookings.map((b: any) => b.clientEmail)).size\n  const upcomingBookings = bookings.filter((b: any) => \n    new Date(b.date) >= now && b.status === \"CONFIRMED\"\n  )\n\n  // Plans d'entra√Ænement\n  const totalSubscribers = trainingPlans.reduce((acc: number, plan: any) => \n    acc + (plan.subscribers?.length || 0), 0\n  )\n  const trainingRevenue = trainingPlans.reduce((acc: number, plan: any) => \n    acc + (plan.price * (plan.subscribers?.length || 0)), 0\n  )\n\n  // Taux de conversion (r√©servations confirm√©es / r√©servations totales)\n  const totalBookingsCount = bookings.length\n  const confirmedBookingsCount = bookings.filter((b: any) => \n    b.status === \"CONFIRMED\" || b.status === \"COMPLETED\"\n  ).length\n  const conversionRate = totalBookingsCount > 0 \n    ? (confirmedBookingsCount / totalBookingsCount * 100) \n    : 0\n\n  const stats = {\n    totalRevenue,\n    monthlyRevenue,\n    uniqueClients,\n    upcomingBookings: upcomingBookings.length,\n    totalSubscribers,\n    trainingRevenue,\n    conversionRate,\n    averageBookingValue: completedBookings.length > 0 \n      ? totalRevenue / completedBookings.length \n      : 0\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <a\n                href=\"/dashboard/coaching\"\n                className=\"inline-flex items-center gap-2 text-gray-900 hover:text-gray-700 font-medium transition-colors mb-4\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Retour au Centre de Coaching\n              </a>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                Analytics Business\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                Suis tes revenus et optimise ton business\n              </p>\n            </div>\n            <PlanBadge plan={profile.plan as PlanType} size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <BusinessAnalyticsClient \n        stats={stats}\n        bookings={bookings}\n        trainingPlans={trainingPlans}\n        coachName={profile.displayName}\n      />\n    </div>\n  )\n}\n","size_bytes":4787},"app/(dashboard)/dashboard/coaching/training-plans/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanBadge } from \"@/components/ui-pro/plan-badge\"\nimport { TrainingPlansClient } from \"./training-plans-client\"\nimport { PlanType } from \"@/lib/features\"\n\nexport default async function TrainingPlansPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      plan: true,\n      displayName: true,\n      id: true,\n      stats: true\n    }\n  })\n\n  if (!profile || (profile.plan !== PlanType.ELITE)) {\n    redirect(\"/dashboard\")\n  }\n\n  // R√©cup√©rer les plans d'entra√Ænement depuis le champ stats (temporaire)\n  const profileStats = profile.stats as any || {}\n  const trainingPlans = profileStats.trainingPlans || []\n\n  // Statistiques\n  const stats = {\n    totalPlans: trainingPlans.length,\n    totalSessions: trainingPlans.reduce((acc: number, plan: any) => acc + (plan.sessions?.length || 0), 0),\n    totalSubscribers: trainingPlans.reduce((acc: number, plan: any) => acc + (plan.subscribers?.length || 0), 0),\n    totalRevenue: trainingPlans.reduce((acc: number, plan: any) => acc + (plan.price * (plan.subscribers?.length || 0)), 0)\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\n            <div>\n              <a\n                href=\"/dashboard/coaching\"\n                className=\"inline-flex items-center gap-2 text-gray-900 hover:text-gray-700 font-medium transition-colors mb-4\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n                </svg>\n                Retour au Centre de Coaching\n              </a>\n              <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n                Plans d'Entra√Ænement\n              </h1>\n              <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n                Cr√©e et vends tes programmes personnalis√©s\n              </p>\n            </div>\n            <PlanBadge plan={profile.plan as PlanType} size=\"lg\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Plans cr√©√©s</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalPlans}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">S√©ances totales</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalSessions}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-primary-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Abonn√©s</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalSubscribers}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center\">\n              <svg className=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\" />\n              </svg>\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600\">Revenus</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <TrainingPlansClient \n        initialPlans={trainingPlans}\n        profileId={profile.id}\n      />\n    </div>\n  )\n}\n","size_bytes":7005},"app/(dashboard)/dashboard/share/share-client.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Copy, Check, ExternalLink, Share2, QrCode, Download, Instagram, Facebook, Linkedin, Youtube, Music } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport Image from \"next/image\"\nimport QRCode from \"qrcode\"\n\n// Custom Twitter/X Icon\nfunction TwitterIcon({ className }: { className?: string }) {\n  return (\n    <svg viewBox=\"0 0 24 24\" className={className} fill=\"currentColor\">\n      <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\"/>\n    </svg>\n  )\n}\n\n// Custom TikTok Icon\nfunction TikTokIcon({ className }: { className?: string }) {\n  return (\n    <svg viewBox=\"0 0 24 24\" className={className} fill=\"currentColor\">\n      <path d=\"M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z\"/>\n    </svg>\n  )\n}\n\ninterface SharePageClientProps {\n  username: string\n  displayName: string\n  avatarUrl: string | null\n  bio: string | null\n}\n\nexport function SharePageClient({ username, displayName, avatarUrl, bio }: SharePageClientProps) {\n  const [copied, setCopied] = useState(false)\n  const [qrCodeUrl, setQrCodeUrl] = useState<string | null>(null)\n  const [showQR, setShowQR] = useState(false)\n\n  const profileUrl = `${typeof window !== 'undefined' ? window.location.origin : ''}/${username}`\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(profileUrl)\n      setCopied(true)\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Failed to copy:', err)\n    }\n  }\n\n  const handleGenerateQR = async () => {\n    try {\n      const url = await QRCode.toDataURL(profileUrl, {\n        width: 512,\n        margin: 2,\n        color: {\n          dark: '#000000',\n          light: '#FFFFFF'\n        }\n      })\n      setQrCodeUrl(url)\n      setShowQR(true)\n    } catch (err) {\n      console.error('Failed to generate QR code:', err)\n    }\n  }\n\n  const handleDownloadQR = () => {\n    if (!qrCodeUrl) return\n    \n    const link = document.createElement('a')\n    link.download = `athlink-${username}-qr.png`\n    link.href = qrCodeUrl\n    link.click()\n  }\n\n  const handleShare = async () => {\n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: `${displayName} - AthLink`,\n          text: bio || `D√©couvre mon profil d'athl√®te`,\n          url: profileUrl\n        })\n      } catch (err) {\n        console.error('Error sharing:', err)\n      }\n    }\n  }\n\n  const socialPlatforms = [\n    { \n      name: \"Instagram\", \n      placeholder: \"Ajoute dans ta bio\",\n      IconComponent: Instagram,\n      color: \"text-pink-600\",\n      hoverColor: \"hover:text-pink-700\",\n      bgColor: \"hover:bg-pink-50\",\n      action: async () => {\n        await handleCopy()\n        setTimeout(() => {\n          window.open('https://www.instagram.com/accounts/edit/', '_blank')\n        }, 300)\n      }\n    },\n    { \n      name: \"TikTok\", \n      placeholder: \"Ajoute dans ta bio\",\n      IconComponent: TikTokIcon,\n      color: \"text-black\",\n      hoverColor: \"hover:text-black\",\n      bgColor: \"hover:bg-gray-100\",\n      action: async () => {\n        await handleCopy()\n        setTimeout(() => {\n          window.open('https://www.tiktok.com/setting', '_blank')\n        }, 300)\n      }\n    },\n    { \n      name: \"Twitter/X\", \n      placeholder: \"√âpingle en haut de profil\",\n      IconComponent: TwitterIcon,\n      color: \"text-black\",\n      hoverColor: \"hover:text-gray-800\",\n      bgColor: \"hover:bg-gray-100\",\n      action: () => {\n        const text = `D√©couvre mon profil d'athl√®te üí™`\n        const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(profileUrl)}`\n        window.open(twitterUrl, '_blank')\n      }\n    },\n    { \n      name: \"Facebook\", \n      placeholder: \"Partage sur ton mur\",\n      IconComponent: Facebook,\n      color: \"text-blue-600\",\n      hoverColor: \"hover:text-blue-700\",\n      bgColor: \"hover:bg-blue-50\",\n      action: () => {\n        const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(profileUrl)}`\n        window.open(facebookUrl, '_blank')\n      }\n    },\n    { \n      name: \"LinkedIn\", \n      placeholder: \"Ajoute √† ton profil\",\n      IconComponent: Linkedin,\n      color: \"text-blue-700\",\n      hoverColor: \"hover:text-blue-800\",\n      bgColor: \"hover:bg-blue-50\",\n      action: () => {\n        const linkedInUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(profileUrl)}`\n        window.open(linkedInUrl, '_blank')\n      }\n    },\n    { \n      name: \"YouTube\", \n      placeholder: \"Ajoute dans ta description\",\n      IconComponent: Youtube,\n      color: \"text-red-600\",\n      hoverColor: \"hover:text-red-700\",\n      bgColor: \"hover:bg-red-50\",\n      action: async () => {\n        await handleCopy()\n        setTimeout(() => {\n          window.open('https://studio.youtube.com/', '_blank')\n        }, 300)\n      }\n    },\n  ]\n\n  return (\n    <div className=\"max-w-4xl mx-auto space-y-6\">\n      {/* Main Link Card */}\n      <Card className=\"border-2 border-yellow-500/20 bg-gradient-to-br from-yellow-500/5 to-transparent\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Share2 className=\"w-5 h-5 text-yellow-600\" />\n            Ton lien AthLink\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          {/* Profile Preview */}\n          <div className=\"flex items-center gap-4 p-4 bg-white rounded-lg border border-gray-200\">\n            {avatarUrl ? (\n              <div className=\"relative w-16 h-16 rounded-full overflow-hidden flex-shrink-0\">\n                <Image\n                  src={avatarUrl}\n                  alt={displayName}\n                  fill\n                  className=\"object-cover\"\n                />\n              </div>\n            ) : (\n              <div className=\"w-16 h-16 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 flex items-center justify-center text-white text-2xl font-black flex-shrink-0\">\n                {displayName.charAt(0).toUpperCase()}\n              </div>\n            )}\n            <div className=\"flex-1 min-w-0\">\n              <h3 className=\"font-bold text-lg truncate\">{displayName}</h3>\n              <p className=\"text-sm text-gray-600 truncate\">@{username}</p>\n            </div>\n          </div>\n\n          {/* URL Display */}\n          <div className=\"flex items-center gap-2 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm text-gray-600 mb-1 font-medium\">Ton lien public :</p>\n              <a \n                href={profileUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-yellow-600 hover:text-yellow-700 font-bold text-lg truncate block\"\n              >\n                {profileUrl}\n              </a>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\n            <Button\n              onClick={handleCopy}\n              variant=\"default\"\n              className=\"bg-yellow-600 hover:bg-yellow-700 text-white\"\n            >\n              {copied ? (\n                <>\n                  <Check className=\"w-4 h-4 mr-2\" />\n                  Copi√© !\n                </>\n              ) : (\n                <>\n                  <Copy className=\"w-4 h-4 mr-2\" />\n                  Copier le lien\n                </>\n              )}\n            </Button>\n\n            <Button\n              onClick={() => window.open(profileUrl, '_blank')}\n              variant=\"outline\"\n            >\n              <ExternalLink className=\"w-4 h-4 mr-2\" />\n              Voir mon profil\n            </Button>\n\n            <Button\n              onClick={handleGenerateQR}\n              variant=\"outline\"\n            >\n              <QrCode className=\"w-4 h-4 mr-2\" />\n              G√©n√©rer QR Code\n            </Button>\n          </div>\n\n          {/* Native Share Button (Mobile) */}\n          {typeof navigator !== 'undefined' && typeof navigator.share === 'function' && (\n            <Button\n              onClick={handleShare}\n              variant=\"outline\"\n              className=\"w-full\"\n            >\n              <Share2 className=\"w-4 h-4 mr-2\" />\n              Partager\n            </Button>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* QR Code Display */}\n      {showQR && qrCodeUrl && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.9 }}\n          animate={{ opacity: 1, scale: 1 }}\n        >\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <QrCode className=\"w-5 h-5\" />\n                Ton QR Code\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex justify-center p-6 bg-white rounded-lg border border-gray-200\">\n                <img src={qrCodeUrl} alt=\"QR Code\" className=\"w-64 h-64\" />\n              </div>\n              <p className=\"text-sm text-gray-600 text-center\">\n                Scanne ce code pour acc√©der directement √† ton profil\n              </p>\n              <Button\n                onClick={handleDownloadQR}\n                variant=\"outline\"\n                className=\"w-full\"\n              >\n                <Download className=\"w-4 h-4 mr-2\" />\n                T√©l√©charger le QR Code\n              </Button>\n            </CardContent>\n          </Card>\n        </motion.div>\n      )}\n\n      {/* Social Platforms Suggestions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>O√π partager ton lien ?</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {socialPlatforms.map((platform) => {\n              const Icon = platform.IconComponent\n              return (\n                <motion.button\n                  key={platform.name}\n                  onClick={platform.action}\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  className={`p-4 bg-white rounded-lg border-2 border-gray-200 ${platform.bgColor} transition-all cursor-pointer text-left w-full group relative overflow-hidden shadow-sm hover:shadow-md`}\n                >\n                  <div className=\"flex items-center gap-3 relative z-10\">\n                    <div className={`${platform.color} group-hover:scale-110 transition-transform`}>\n                      <Icon className=\"w-8 h-8\" />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className={`font-bold text-gray-900 ${platform.hoverColor} transition-colors`}>{platform.name}</h4>\n                      <p className=\"text-xs text-gray-600\">{platform.placeholder}</p>\n                    </div>\n                    <ExternalLink className={`w-4 h-4 text-gray-400 ${platform.color} transition-colors`} />\n                  </div>\n                </motion.button>\n              )\n            })}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Tips Card */}\n      <Card className=\"bg-gradient-to-br from-gray-800 to-gray-900 border-yellow-400\">\n        <CardHeader>\n          <CardTitle className=\"text-yellow-300\">üí° Conseils pour maximiser ta visibilit√©</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ul className=\"space-y-3 text-sm text-gray-200\">\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Bio Instagram/TikTok :</strong> Ajoute ton lien AthLink dans ta bio pour diriger tes followers</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Stories/Reels :</strong> Partage ton QR Code dans tes stories pour un acc√®s rapide</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Email Signature :</strong> Inclus ton lien dans ta signature d'email</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Dossards de course :</strong> Imprime ton QR Code sur tes √©quipements</span>\n            </li>\n            <li className=\"flex items-start gap-2\">\n              <span className=\"text-yellow-300 font-bold mt-0.5\">‚Ä¢</span>\n              <span><strong className=\"text-yellow-300\">Cartes de visite :</strong> Parfait pour les √©v√©nements sportifs</span>\n            </li>\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n\n","size_bytes":13503},"app/(dashboard)/dashboard/sources/sponsors-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect, useRef } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { toast } from \"sonner\"\nimport Image from \"next/image\"\nimport { searchBrand, getBrandLogoUrl, type Brand } from \"@/lib/brands\"\nimport { \n  Award, \n  Plus, \n  Edit2, \n  Trash2, \n  ExternalLink, \n  BarChart3,\n  Copy,\n  Check,\n  Upload,\n  Search,\n  Building2,\n  Tag,\n  Globe\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ntype Sponsor = {\n  id: string\n  name: string\n  logoUrl?: string | null\n  websiteUrl?: string | null\n  promoCode?: string | null\n  description?: string | null\n  position: number\n  clicks: number\n}\n\nexport function SponsorsContent() {\n  const [sponsors, setSponsors] = useState<Sponsor[]>([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showForm, setShowForm] = useState(false)\n  const [copiedId, setCopiedId] = useState<string | null>(null)\n  const [formData, setFormData] = useState({\n    name: \"\",\n    logoUrl: \"\",\n    websiteUrl: \"\",\n    promoCode: \"\",\n    description: \"\"\n  })\n  const [logoFile, setLogoFile] = useState<File | null>(null)\n  const [logoPreview, setLogoPreview] = useState<string | null>(null)\n  const [isUploading, setIsUploading] = useState(false)\n  const [brandSuggestions, setBrandSuggestions] = useState<Brand[]>([])\n  const [showSuggestions, setShowSuggestions] = useState(false)\n  const suggestionsRef = useRef<HTMLDivElement>(null)\n  const [isExtractingLogo, setIsExtractingLogo] = useState(false)\n\n  useEffect(() => {\n    fetchSponsors()\n  }, [])\n\n  // Fermer les suggestions quand on clique ailleurs\n  useEffect(() => {\n    function handleClickOutside(event: MouseEvent) {\n      if (suggestionsRef.current && !suggestionsRef.current.contains(event.target as Node)) {\n        setShowSuggestions(false)\n      }\n    }\n    document.addEventListener(\"mousedown\", handleClickOutside)\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside)\n  }, [])\n\n  async function fetchSponsors() {\n    try {\n      const res = await fetch(\"/api/sponsors\")\n      if (res.ok) {\n        const data = await res.json()\n        setSponsors(data.sponsors || [])\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement des sponsors\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault()\n    \n    try {\n      let logoUrl = formData.logoUrl\n\n      // Upload du logo si un fichier est s√©lectionn√©\n      if (logoFile) {\n        setIsUploading(true)\n        const formDataUpload = new FormData()\n        formDataUpload.append(\"file\", logoFile)\n        \n        const uploadRes = await fetch(\"/api/upload\", {\n          method: \"POST\",\n          body: formDataUpload\n        })\n        \n        if (uploadRes.ok) {\n          const uploadData = await uploadRes.json()\n          logoUrl = uploadData.url\n        }\n        setIsUploading(false)\n      }\n\n      const url = editingId ? `/api/sponsors/${editingId}` : \"/api/sponsors\"\n      const method = editingId ? \"PATCH\" : \"POST\"\n      \n      const res = await fetch(url, {\n        method,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ...formData,\n          logoUrl\n        })\n      })\n\n      if (!res.ok) throw new Error(\"Erreur lors de la sauvegarde\")\n\n      toast.success(editingId ? \"Sponsor modifi√© !\" : \"Sponsor ajout√© !\")\n      setFormData({\n        name: \"\",\n        logoUrl: \"\",\n        websiteUrl: \"\",\n        promoCode: \"\",\n        description: \"\"\n      })\n      setLogoFile(null)\n      setLogoPreview(null)\n      setEditingId(null)\n      setShowForm(false)\n      fetchSponsors()\n    } catch (error) {\n      toast.error(\"Erreur lors de la sauvegarde\")\n    } finally {\n      setIsUploading(false)\n    }\n  }\n\n  async function deleteSponsor(id: string) {\n    if (!confirm(\"Supprimer ce sponsor ?\")) return\n    \n    try {\n      const res = await fetch(`/api/sponsors/${id}`, { method: \"DELETE\" })\n      if (!res.ok) throw new Error(\"Erreur lors de la suppression\")\n      \n      toast.success(\"Sponsor supprim√© !\")\n      fetchSponsors()\n    } catch (error) {\n      toast.error(\"Erreur lors de la suppression\")\n    }\n  }\n\n  function editSponsor(sponsor: Sponsor) {\n    setEditingId(sponsor.id)\n    setShowForm(true)\n    setFormData({\n      name: sponsor.name,\n      logoUrl: sponsor.logoUrl || \"\",\n      websiteUrl: sponsor.websiteUrl || \"\",\n      promoCode: sponsor.promoCode || \"\",\n      description: sponsor.description || \"\"\n    })\n  }\n\n  function copyToClipboard(text: string, id: string) {\n    navigator.clipboard.writeText(text)\n    setCopiedId(id)\n    setTimeout(() => setCopiedId(null), 2000)\n    toast.success(\"Code copi√© !\")\n  }\n\n  async function handleNameChange(value: string) {\n    setFormData({ ...formData, name: value })\n    \n    if (value.length > 2) {\n      const suggestions = searchBrand(value)\n      setBrandSuggestions(suggestions)\n      setShowSuggestions(true)\n    } else {\n      setShowSuggestions(false)\n    }\n  }\n\n  async function selectBrand(brand: Brand) {\n    setFormData({ \n      ...formData, \n      name: brand.name,\n      websiteUrl: brand.website,\n      logoUrl: getBrandLogoUrl(brand.website)\n    })\n    setShowSuggestions(false)\n  }\n\n  async function extractLogo() {\n    if (!formData.websiteUrl) {\n      toast.error(\"Veuillez d'abord saisir l'URL du site web\")\n      return\n    }\n\n    setIsExtractingLogo(true)\n    try {\n      const res = await fetch(\"/api/sponsors/extract-logo\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n          websiteUrl: formData.websiteUrl,\n          brandName: formData.name\n        })\n      })\n\n      if (res.ok) {\n        const data = await res.json()\n        if (data.logoUrl) {\n          setFormData({ ...formData, logoUrl: data.logoUrl })\n          toast.success(`Logo extrait avec succ√®s ! (${data.method})`)\n        } else {\n          toast.error(\"Aucun logo trouv√© sur ce site\")\n        }\n      } else {\n        toast.error(\"Erreur lors de l'extraction du logo\")\n      }\n    } catch (error) {\n      toast.error(\"Erreur lors de l'extraction du logo\")\n    } finally {\n      setIsExtractingLogo(false)\n    }\n  }\n\n  const totalClicks = sponsors.reduce((sum, sponsor) => sum + sponsor.clicks, 0)\n  const sponsorsWithPromo = sponsors.filter(sponsor => sponsor.promoCode).length\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-8 h-8 border-2 border-gray-300 border-t-gray-900 rounded-full\"\n        />\n      </div>\n    )\n  }\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n    >\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Award className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Sponsors</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{sponsors.length}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Tag className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Avec Code Promo</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{sponsorsWithPromo}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <BarChart3 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Clics</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalClicks}</p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Add Button */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">Mes Sponsors</h2>\n          <p className=\"text-gray-600\">G√©rez vos partenaires et collaborations</p>\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => {\n            setShowForm(!showForm)\n            setEditingId(null)\n            setFormData({\n              name: \"\",\n              logoUrl: \"\",\n              websiteUrl: \"\",\n              promoCode: \"\",\n              description: \"\"\n            })\n            setLogoFile(null)\n            setLogoPreview(null)\n          }}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          {showForm ? \"Annuler\" : \"Nouveau Sponsor\"}\n        </motion.button>\n      </motion.div>\n\n      {/* Form */}\n      <AnimatePresence>\n        {showForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\"\n          >\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">\n                {editingId ? \"Modifier le sponsor\" : \"Ajouter un nouveau sponsor\"}\n              </h3>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"relative\">\n                    <Label htmlFor=\"name\">Nom du sponsor *</Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"name\"\n                        value={formData.name}\n                        onChange={(e) => handleNameChange(e.target.value)}\n                        placeholder=\"Nike\"\n                        className=\"mt-1 pr-10\"\n                        required\n                      />\n                      <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                    </div>\n                    \n                    {/* Suggestions de marques */}\n                    {showSuggestions && brandSuggestions.length > 0 && (\n                      <div ref={suggestionsRef} className=\"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto\">\n                        {brandSuggestions.map((brand) => (\n                          <button\n                            key={brand.name}\n                            type=\"button\"\n                            onClick={() => selectBrand(brand)}\n                            className=\"w-full px-3 py-2 text-left hover:bg-gray-50 flex items-center gap-2\"\n                          >\n                            <img \n                              src={getBrandLogoUrl(brand.website)} \n                              alt={brand.name}\n                              className=\"w-6 h-6 object-contain\"\n                            />\n                            {brand.name}\n                          </button>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div>\n                    <Label htmlFor=\"websiteUrl\" className=\"flex items-center gap-2\">\n                      <Globe className=\"w-4 h-4\" />\n                      Site web du sponsor\n                    </Label>\n                    <Input\n                      id=\"websiteUrl\"\n                      type=\"url\"\n                      value={formData.websiteUrl}\n                      onChange={(e) => setFormData({ ...formData, websiteUrl: e.target.value })}\n                      placeholder=\"https://nike.com\"\n                      className=\"mt-1\"\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      üí° Saisissez l'URL pour extraire le logo automatiquement\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"promoCode\">Code promo</Label>\n                    <Input\n                      id=\"promoCode\"\n                      value={formData.promoCode}\n                      onChange={(e) => setFormData({ ...formData, promoCode: e.target.value })}\n                      placeholder=\"ATHLINK20\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"description\">Description</Label>\n                    <Input\n                      id=\"description\"\n                      value={formData.description}\n                      onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                      placeholder=\"√âquipement sportif\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n\n                {/* Logo Section */}\n                <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                  <Label className=\"text-base font-semibold\">Logo du sponsor</Label>\n                  <p className=\"text-sm text-gray-600 mb-3\">Extrait automatiquement depuis l'URL du site web</p>\n                  \n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center gap-3\">\n                      <motion.button\n                        type=\"button\"\n                        whileHover={{ scale: 1.02 }}\n                        whileTap={{ scale: 0.98 }}\n                        onClick={extractLogo}\n                        disabled={isExtractingLogo || !formData.websiteUrl}\n                        className=\"flex items-center gap-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-sm\"\n                      >\n                        {isExtractingLogo ? (\n                          <>\n                            <motion.div\n                              animate={{ rotate: 360 }}\n                              transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                              className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                            />\n                            Extraction en cours...\n                          </>\n                        ) : (\n                          <>\n                            <Search className=\"w-4 h-4\" />\n                            Extraire le logo automatiquement\n                          </>\n                        )}\n                      </motion.button>\n                      {!formData.websiteUrl && (\n                        <span className=\"text-sm text-orange-600\">\n                          ‚ö†Ô∏è Saisissez d'abord l'URL du site web\n                        </span>\n                      )}\n                    </div>\n                    \n                    <div className=\"relative\">\n                      <Label htmlFor=\"logoUrl\" className=\"text-sm text-gray-600\">Ou saisir l'URL du logo manuellement</Label>\n                      <Input\n                        id=\"logoUrl\"\n                        type=\"url\"\n                        value={formData.logoUrl}\n                        onChange={(e) => setFormData({ ...formData, logoUrl: e.target.value })}\n                        placeholder=\"https://example.com/logo.png\"\n                        className=\"mt-1\"\n                      />\n                    </div>\n                    \n                    <div className=\"flex items-center gap-3\">\n                      <Input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={(e) => {\n                          const file = e.target.files?.[0]\n                          if (file) {\n                            setLogoFile(file)\n                            setLogoPreview(URL.createObjectURL(file))\n                          }\n                        }}\n                        className=\"flex-1\"\n                      />\n                      <Upload className=\"w-4 h-4 text-gray-400\" />\n                    </div>\n                    \n                    {(formData.logoUrl || logoPreview) && (\n                      <div className=\"flex items-center gap-2\">\n                        <img \n                          src={logoPreview || formData.logoUrl || \"\"} \n                          alt=\"Logo preview\"\n                          className=\"w-12 h-12 object-contain border border-gray-200 rounded\"\n                        />\n                        <span className=\"text-sm text-gray-600\">Aper√ßu du logo</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                <div className=\"flex gap-2\">\n                  <motion.button\n                    type=\"submit\"\n                    disabled={isUploading}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 disabled:opacity-50\"\n                  >\n                    {isUploading ? (\n                      <>\n                        <motion.div\n                          animate={{ rotate: 360 }}\n                          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                          className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                        />\n                        Upload...\n                      </>\n                    ) : (\n                      <>\n                        <Plus className=\"w-4 h-4\" />\n                        {editingId ? \"Modifier\" : \"Ajouter\"}\n                      </>\n                    )}\n                  </motion.button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Sponsors List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {sponsors.map((sponsor, index) => (\n            <motion.div\n              key={sponsor.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 group\"\n            >\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"flex-shrink-0\">\n                      {sponsor.logoUrl ? (\n                        <img \n                          src={sponsor.logoUrl} \n                          alt={sponsor.name}\n                          className=\"w-12 h-12 object-contain rounded-lg\"\n                        />\n                      ) : (\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg flex items-center justify-center\">\n                          <Building2 className=\"w-6 h-6 text-green-600\" />\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{sponsor.name}</h3>\n                        {sponsor.promoCode && (\n                          <div className=\"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium\">\n                            Code promo\n                          </div>\n                        )}\n                      </div>\n                      {sponsor.description && (\n                        <p className=\"text-sm text-gray-600\">{sponsor.description}</p>\n                      )}\n                      <div className=\"flex items-center gap-4 mt-2\">\n                        <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                          <BarChart3 className=\"w-4 h-4\" />\n                          {sponsor.clicks} clics\n                        </div>\n                        {sponsor.websiteUrl && (\n                          <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                            <Globe className=\"w-4 h-4\" />\n                            Site web\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    {sponsor.promoCode && (\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => copyToClipboard(sponsor.promoCode!, sponsor.id)}\n                        className=\"p-2 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors\"\n                        title=\"Copier le code promo\"\n                      >\n                        {copiedId === sponsor.id ? (\n                          <Check className=\"w-4 h-4 text-green-600\" />\n                        ) : (\n                          <Copy className=\"w-4 h-4\" />\n                        )}\n                      </motion.button>\n                    )}\n                    \n                    {sponsor.websiteUrl && (\n                      <motion.button\n                        whileHover={{ scale: 1.1 }}\n                        whileTap={{ scale: 0.9 }}\n                        onClick={() => sponsor.websiteUrl && window.open(sponsor.websiteUrl, '_blank')}\n                        className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                        title=\"Visiter le site\"\n                      >\n                        <ExternalLink className=\"w-4 h-4\" />\n                      </motion.button>\n                    )}\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => editSponsor(sponsor)}\n                      className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Modifier\"\n                    >\n                      <Edit2 className=\"w-4 h-4\" />\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => deleteSponsor(sponsor.id)}\n                      className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                      title=\"Supprimer\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </motion.button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        {sponsors.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"text-6xl mb-4\">üèÜ</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Aucun sponsor ajout√©</h3>\n            <p className=\"text-gray-600 mb-4\">Commencez par ajouter votre premier partenaire</p>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setShowForm(true)}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-3 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Ajouter mon premier sponsor\n            </motion.button>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}","size_bytes":26330},"app/[username]/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport Image from \"next/image\"\nimport { ModernProfileCard } from \"@/components/ui-pro/modern-profile-card\"\nimport { ShareProfileButton } from \"@/components/ui-pro/share-profile-button\"\nimport { ScrollToTop } from \"@/components/ui-pro/scroll-to-top\"\nimport { ViewTracker } from \"@/components/analytics/view-tracker\"\nimport { ClickTracker } from \"@/components/analytics/click-tracker\"\nimport { PlanType } from \"@/lib/features\"\n\ninterface Props {\n  params: Promise<{ username: string }>\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true, bio: true, avatarUrl: true }\n  })\n\n  if (!profile) return {}\n\n  return {\n    title: `${profile.displayName} | Athlink`,\n    description: profile.bio || `Profil de ${profile.displayName}`,\n    openGraph: {\n      images: profile.avatarUrl ? [profile.avatarUrl] : []\n    }\n  }\n}\n\nexport default async function ProfilePage({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    include: {\n      links: { where: { isActive: true }, orderBy: { position: 'asc' } },\n      races: { \n        orderBy: { date: 'asc' }\n      },\n      sponsors: { orderBy: { position: 'asc' } },\n      media: { orderBy: { position: 'asc' }, take: 6 }\n    }\n  })\n\n  if (!profile || !profile.isPublic) {\n    notFound()\n  }\n\n  // Logique d'affichage du sport\n  let displaySport: string = profile.sport\n  \n  const stats = profile.stats as { originalSport?: string } | null\n  if (stats?.originalSport) {\n    displaySport = stats.originalSport\n  } else {\n    const enumSports = [\"RUNNING\", \"CYCLING\", \"TRIATHLON\", \"SWIMMING\", \"SKIING\", \"OTHER\"]\n    \n    if (enumSports.includes(profile.sport)) {\n      const sportLabels: Record<string, string> = {\n        RUNNING: \"Course √† pied\",\n        CYCLING: \"Cyclisme\", \n        TRIATHLON: \"Triathlon\",\n        SWIMMING: \"Natation\",\n        SKIING: \"Ski\",\n        OTHER: \"Autre\"\n      }\n      displaySport = sportLabels[profile.sport] || profile.sport\n    } else {\n      displaySport = profile.sport\n    }\n  }\n\n  // Track view\n  try {\n    await prisma.analytics.create({\n      data: {\n        profileId: profile.id,\n        views: 1,\n        uniqueViews: 1,\n        linkClicks: 0,\n      }\n    })\n  } catch (error) {\n    console.error(\"Analytics tracking error:\", error)\n  }\n\n\n  return (\n    <>\n      {/* Analytics Tracking */}\n      <ViewTracker profileId={profile.id} />\n      \n      {/* Floating Buttons */}\n      <ShareProfileButton username={username} displayName={profile.displayName} />\n      <ScrollToTop />\n\n      {/* Modern Profile Card Layout avec Click Tracking */}\n      <ClickTracker profileId={profile.id}>\n        <div className=\"min-h-screen relative overflow-hidden flex items-center justify-center py-4 sm:py-6 md:py-8 px-4\">\n        \n        {/* Image de fond flout√©e - Photo de profil agrandie */}\n        <div className=\"absolute inset-0 overflow-hidden\">\n          {profile.avatarUrl ? (\n            <>\n              <Image\n                src={profile.avatarUrl}\n                alt=\"Background\"\n                fill\n                className=\"object-cover scale-110\"\n                style={{ filter: 'blur(80px)' }}\n                priority\n              />\n              {/* Overlay sombre pour contraste */}\n              <div className=\"absolute inset-0 bg-black/60\" />\n            </>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-gray-900 via-black to-gray-900\" />\n          )}\n        </div>\n\n        {/* Carte de profil centrale */}\n        <div className=\"relative z-10 w-full\">\n          <ModernProfileCard\n            displayName={profile.displayName}\n            bio={profile.bio}\n            location={profile.location}\n            avatarUrl={profile.avatarUrl}\n            sport={displaySport}\n            instagram={profile.instagram}\n            strava={profile.strava}\n            youtube={profile.youtube}\n            tiktok={profile.tiktok}\n            twitter={profile.twitter}\n            whatsapp={profile.whatsapp}\n            plan={profile.plan as PlanType}\n            links={profile.links}\n            races={profile.races.map(race => ({\n              ...race,\n              date: race.date.toISOString()\n            }))}\n            sponsors={profile.sponsors}\n            media={profile.media}\n            username={username}\n            hasCoachingServices={profile.plan === \"ELITE\"}\n          />\n        </div>\n        </div>\n      </ClickTracker>\n    </>\n  )\n}\n\n","size_bytes":4715},".next/server/middleware-build-manifest.js":{"content":"globalThis.__BUILD_MANIFEST = {\n  \"pages\": {\n    \"/_app\": [\n      \"static/chunks/e60ef129113f6e24.js\",\n      \"static/chunks/ecf1c1fb12633854.js\",\n      \"static/chunks/turbopack-b8d67a44088cbbec.js\"\n    ],\n    \"/_error\": [\n      \"static/chunks/17722e3ac4e00587.js\",\n      \"static/chunks/ecf1c1fb12633854.js\",\n      \"static/chunks/turbopack-4c2689c5c6b6267c.js\"\n    ]\n  },\n  \"devFiles\": [],\n  \"ampDevFiles\": [],\n  \"polyfillFiles\": [\n    \"static/chunks/a6dad97d9634a72d.js\"\n  ],\n  \"lowPriorityFiles\": [],\n  \"rootMainFiles\": [\n    \"static/chunks/bf51ade95d6faee0.js\",\n    \"static/chunks/68c8e980d1a48fa1.js\",\n    \"static/chunks/9203842ed213de82.js\",\n    \"static/chunks/150316a471952cee.js\",\n    \"static/chunks/turbopack-ef84aa70f59c31d6.js\"\n  ],\n  \"ampFirstPages\": []\n};\nglobalThis.__BUILD_MANIFEST.lowPriorityFiles = [\n\"/static/\" + process.env.__NEXT_BUILD_ID + \"/_buildManifest.js\",\n,\"/static/\" + process.env.__NEXT_BUILD_ID + \"/_ssgManifest.js\",\n\n];","size_bytes":948},"app/(dashboard)/dashboard/settings/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { SettingsClient } from \"./settings-client\"\nimport { PlanType } from \"@/lib/features\"\n\nexport default async function SettingsPage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      id: true,\n      username: true,\n      plan: true,\n      theme: true,\n      isPublic: true,\n      customDomain: true,\n      stats: true\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  // Extraire les donn√©es du code promo depuis stats\n  const stats = profile.stats as any\n  const promoCodeUsed = stats?.promoCodeUsed || null\n  const trialEndsAt = stats?.trialEndsAt || null\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-10 -mt-10 px-10 pt-12 pb-24 mb-12 bg-gradient-hero rounded-b-3xl overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <h1 className=\"text-4xl font-black mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n            Param√®tres\n          </h1>\n          <p className=\"text-lg text-primary-600 font-semibold\">\n            Personnalisez votre exp√©rience et g√©rez vos pr√©f√©rences\n          </p>\n        </div>\n      </div>\n\n      <SettingsClient \n        profileId={profile.id}\n        username={profile.username}\n        userPlan={profile.plan as PlanType}\n        initialCustomDomain={profile.customDomain || \"\"}\n        promoCodeUsed={promoCodeUsed}\n        trialEndsAt={trialEndsAt}\n      />\n    </div>\n  )\n}","size_bytes":2009},"app/(auth)/signup/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { signIn } from \"next-auth/react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { signupSchema, type SignupInput } from \"@/lib/validations\"\nimport { toast } from \"sonner\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport { ArrowRight, Sparkles } from \"lucide-react\"\nimport { PromoCodeField } from \"@/components/ui-pro/promo-code-field\"\n\nexport default function SignupPage() {\n  const router = useRouter()\n  const [isLoading, setIsLoading] = useState(false)\n  const [promoCode, setPromoCode] = useState(\"\")\n  const [promoData, setPromoData] = useState<any>(null)\n\n  const form = useForm<SignupInput>({\n    resolver: zodResolver(signupSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n      name: \"\",\n      username: \"\",\n      sport: \"\"\n    }\n  })\n\n  async function onSubmit(values: SignupInput) {\n    setIsLoading(true)\n    \n    try {\n      // Si un code promo valide est saisi, utiliser l'API promo\n      const endpoint = promoData?.valid ? \"/api/promo-codes/apply\" : \"/api/auth/signup\"\n      \n      // Format des donn√©es selon l'endpoint\n      const requestBody = promoData?.valid \n        ? { promoCode, userData: values }  // API promo attend { promoCode, userData }\n        : values  // API signup attend les valeurs directement\n      \n      const res = await fetch(endpoint, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(requestBody),\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur lors de l'inscription\")\n      }\n\n      // Message de succ√®s personnalis√© selon le code promo\n      if (promoData?.valid) {\n        if (promoData.type === \"plan_upgrade\") {\n          toast.success(`üéâ Compte cr√©√© avec acc√®s ${promoData.plan} !`)\n        } else if (promoData.type === \"trial\") {\n          toast.success(`üéÅ Compte cr√©√© avec ${promoData.duration} jours gratuits ${promoData.plan} !`)\n        } else {\n          toast.success(\"Compte cr√©√© ! Redirection...\")\n        }\n      } else {\n        toast.success(\"Compte cr√©√© ! Redirection...\")\n      }\n      \n      router.push(\"/login\")\n    } catch (error: unknown) {\n      const message = error instanceof Error ? error.message : \"Une erreur est survenue\"\n      toast.error(message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col lg:flex-row\">\n      {/* Left Panel - Form */}\n      <div className=\"flex-1 flex items-center justify-center p-4 sm:p-6 lg:p-8 bg-white relative overflow-y-auto\">\n        {/* Logo */}\n        <Link href=\"/\" className=\"absolute top-4 sm:top-6 lg:top-10 left-4 sm:left-6 lg:left-10 flex items-center gap-2\">\n          <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-hero\" />\n          <span className=\"font-black text-xl sm:text-2xl bg-gradient-hero bg-clip-text text-transparent\">\n            Athlink\n          </span>\n        </Link>\n\n        {/* Form Container */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"w-full max-w-md my-16 sm:my-20\"\n        >\n          <div className=\"mb-8 sm:mb-10\">\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-primary-600 to-quaternary-600 bg-clip-text text-transparent mb-3 sm:mb-4\">\n              Cr√©e ton profil\n            </h1>\n            <p className=\"text-base sm:text-lg text-gray-600\">\n              Rejoins des milliers d&apos;athl√®tes\n            </p>\n          </div>\n\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"name\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Nom complet\n              </Label>\n              <Input \n                id=\"name\" \n                {...form.register(\"name\")} \n                placeholder=\"Thomas Dupont\"\n                className=\"h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.name && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.name.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"username\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Nom d&apos;utilisateur\n              </Label>\n              <div className=\"flex flex-col sm:flex-row sm:items-center gap-2\">\n                <span className=\"text-xs sm:text-sm text-gray-500 whitespace-nowrap font-medium\">athlink.app/</span>\n                <Input \n                  id=\"username\" \n                  {...form.register(\"username\")} \n                  placeholder=\"thomas-runner\"\n                  className=\"flex-1 h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-brand-blue-500 transition-colors\"\n                />\n              </div>\n              {form.formState.errors.username && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.username.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"sport\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Sport principal\n              </Label>\n              <Input \n                id=\"sport\" \n                {...form.register(\"sport\")} \n                placeholder=\"Course √† pied, Cyclisme, Natation...\"\n                className=\"h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.sport && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.sport.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"email\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Email\n              </Label>\n              <Input \n                id=\"email\" \n                type=\"email\"\n                {...form.register(\"email\")} \n                placeholder=\"thomas@example.com\"\n                className=\"h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.email && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.email.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"password\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Mot de passe\n              </Label>\n              <Input \n                id=\"password\" \n                type=\"password\"\n                {...form.register(\"password\")} \n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                className=\"h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              <p className=\"text-xs text-gray-500 mt-2\">Minimum 8 caract√®res</p>\n              {form.formState.errors.password && (\n                  <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.password.message}\n                </p>\n              )}\n            </div>\n\n            {/* Code Promo */}\n            <div>\n              <Label className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Code promo (optionnel)\n              </Label>\n              <PromoCodeField\n                value={promoCode}\n                onChange={setPromoCode}\n                onValidation={(isValid, data) => setPromoData(data)}\n              />\n            </div>\n\n            <Button \n              type=\"submit\" \n              disabled={isLoading}\n              className=\"w-full h-12 sm:h-14 bg-gradient-hero hover:shadow-glow-blue text-gray-900 font-bold text-base sm:text-lg rounded-full transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-5 h-5 border-2 border-gray-900 border-t-transparent rounded-full animate-spin\" />\n                  Cr√©ation en cours...\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2\">\n                  Cr√©er mon profil\n                  <ArrowRight className=\"w-5 h-5\" />\n                </div>\n              )}\n            </Button>\n          </form>\n\n          {/* Google Sign Up - Affich√© seulement si configur√© */}\n          {process.env.NEXT_PUBLIC_GOOGLE_OAUTH_ENABLED === \"true\" && (\n            <>\n              {/* Separator */}\n              <div className=\"flex items-center gap-4 my-6\">\n                <div className=\"flex-1 h-px bg-gray-200\" />\n                <span className=\"text-sm text-gray-500 font-medium\">OU</span>\n                <div className=\"flex-1 h-px bg-gray-200\" />\n              </div>\n\n              {/* Google Sign Up */}\n              <button\n                onClick={() => signIn(\"google\", { callbackUrl: \"/dashboard\" })}\n                className=\"w-full h-14 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold text-base rounded-full transition-all hover:shadow-md flex items-center justify-center gap-3\"\n              >\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                  <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                  <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                  <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                </svg>\n                S'inscrire avec Google\n              </button>\n            </>\n          )}\n\n          <p className=\"text-center text-sm text-gray-600 mt-6\">\n            D√©j√† un compte ?{\" \"}\n            <Link href=\"/login\" className=\"text-primary-600 hover:text-primary-700 font-bold transition-colors\">\n              Se connecter\n            </Link>\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Right Panel - Visual */}\n      <div className=\"hidden lg:flex flex-1 relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-premium\" />\n        \n        {/* Animated shapes */}\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none opacity-20\">\n          <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              rotate: [0, -90, 0],\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"linear\"\n            }}\n            className=\"absolute bottom-1/4 left-1/4 w-96 h-96 bg-white rounded-full blur-3xl\"\n          />\n        </div>\n\n        {/* Content */}\n        <div className=\"relative z-10 flex items-center justify-center p-16 text-gray-900\">\n          <div className=\"max-w-lg\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className=\"w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center mb-8\"\n            >\n              <Sparkles className=\"w-10 h-10\" />\n            </motion.div>\n\n            <motion.h2\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.3 }}\n              className=\"text-5xl font-black mb-6 leading-tight\"\n            >\n              Rejoins la Communaut√©\n            </motion.h2>\n\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              className=\"text-xl opacity-90 leading-relaxed mb-8\"\n            >\n              Cr√©e ton profil en 2 minutes et commence √† partager tes performances avec le monde entier.\n            </motion.p>\n\n            {/* Features list */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.5 }}\n              className=\"space-y-4\"\n            >\n              {[\n                \"Profil personnalisable √† 100%\",\n                \"Liens illimit√©s\",\n                \"Analytics en temps r√©el\",\n                \"Gratuit pour toujours\"\n              ].map((feature, i) => (\n                <div key={i} className=\"flex items-center gap-3\">\n                  <div className=\"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                    </svg>\n                  </div>\n                  <span className=\"font-medium\">{feature}</span>\n                </div>\n              ))}\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":14161},"app/api/promo-codes/apply/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\n// Mapper les sports vers les valeurs Sport enum valides\nfunction mapSportToEnum(sport: string): string {\n  const sportUpper = sport.toUpperCase()\n  const validSports = ['RUNNING', 'CYCLING', 'TRIATHLON', 'SWIMMING', 'SKIING']\n  \n  if (validSports.includes(sportUpper)) {\n    return sportUpper\n  }\n  \n  // Mapper des sports sp√©cifiques\n  const sportMap: { [key: string]: string } = {\n    'HYROX': 'OTHER',\n    'FITNESS': 'OTHER',\n    'CROSSFIT': 'OTHER',\n    'MUSCULATION': 'OTHER',\n    'TRAIL': 'RUNNING',\n    'MARATHON': 'RUNNING',\n    'CYCLISME': 'CYCLING',\n    'VELO': 'CYCLING',\n    'NATATION': 'SWIMMING',\n    'SKI': 'SKIING'\n  }\n  \n  return sportMap[sportUpper] || 'OTHER'\n}\n\n// Codes promo pr√©d√©finis\nconst PROMO_CODES = {\n  \"ATHLINK_PREMIUM\": {\n    type: \"plan_upgrade\",\n    plan: \"PRO\",\n    duration: null,\n    discount: 100,\n    description: \"Acc√®s complet aux fonctionnalit√©s Pro\"\n  },\n  \"ELITE\": {\n    type: \"plan_upgrade\",\n    plan: \"ELITE\",\n    duration: null,\n    discount: 0,\n    description: \"Acc√®s Pro complet\"\n  },\n  \"ATHLINK100\": {\n    type: \"trial\", \n    plan: \"ELITE\",\n    duration: 30,\n    discount: 0,\n    description: \"1 mois offert Pro\"\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    console.log(\"üì• Body re√ßu:\", JSON.stringify(body, null, 2))\n    \n    const { promoCode, userData } = body\n\n    if (!userData) {\n      console.log(\"‚ùå userData manquant:\", { promoCode, userData })\n      return NextResponse.json({ error: \"Donn√©es utilisateur requises\" }, { status: 400 })\n    }\n    \n    console.log(\"‚úÖ userData pr√©sent:\", userData)\n\n    // V√©rifier si le code promo existe\n    const promo = PROMO_CODES[promoCode?.toUpperCase() as keyof typeof PROMO_CODES]\n    \n    let planType = \"FREE\" // Plan par d√©faut\n    let trialEndsAt = null\n\n    if (promo) {\n      planType = promo.plan\n      \n      if (promo.type === \"trial\" && promo.duration) {\n        // Calculer la date de fin d'essai\n        trialEndsAt = new Date()\n        trialEndsAt.setDate(trialEndsAt.getDate() + promo.duration)\n      }\n    }\n\n    // V√©rifier si l'email existe d√©j√†\n    const existingEmail = await prisma.user.findUnique({\n      where: { email: userData.email }\n    })\n\n    if (existingEmail) {\n      return NextResponse.json(\n        { error: \"Cet email est d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    // V√©rifier si le nom d'utilisateur existe d√©j√†\n    const existingUsername = await prisma.profile.findUnique({\n      where: { username: userData.username }\n    })\n\n    if (existingUsername) {\n      return NextResponse.json(\n        { error: \"Ce nom d'utilisateur est d√©j√† pris\" },\n        { status: 400 }\n      )\n    }\n\n    // Hacher le mot de passe\n    const bcrypt = await import(\"bcryptjs\")\n    const hashedPassword = await bcrypt.hash(userData.password, 12)\n\n    // Cr√©er l'utilisateur et le profil avec le code promo appliqu√©\n    const user = await prisma.user.create({\n      data: {\n        email: userData.email,\n        name: userData.name,\n        password: hashedPassword,\n        profile: {\n          create: {\n            username: userData.username,\n            displayName: userData.name,\n            sport: mapSportToEnum(userData.sport) as any, // Mapper le sport vers enum valide\n            plan: planType as any, // Cast temporaire pour l'enum PlanType\n            stats: {\n              personalRecords: [],\n              achievements: [],\n              promoCodeUsed: promoCode?.toUpperCase() || null,\n              trialEndsAt: trialEndsAt?.toISOString() || null\n            }\n          }\n        }\n      },\n      include: {\n        profile: true\n      }\n    })\n\n    return NextResponse.json({\n      success: true,\n      user: {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        username: user.profile?.username,\n        plan: user.profile?.plan,\n        promoApplied: promoCode?.toUpperCase() || null,\n        trialEndsAt: trialEndsAt?.toISOString() || null\n      }\n    }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"Erreur application code promo:\", error)\n    \n    if (error.code === \"P2002\") {\n      return NextResponse.json(\n        { error: \"Email ou nom d'utilisateur d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json(\n      { error: \"Erreur lors de l'inscription\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":4516},"app/api/promo-codes/validate/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/db\";\nimport { z } from \"zod\";\n\nconst validatePromoCodeSchema = z.object({\n  code: z.string().transform((val) => val.toUpperCase()),\n  planType: z.enum([\"FREE\", \"PRO\", \"ELITE\"]),\n  userId: z.string().cuid().optional(),\n});\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const { code, planType, userId } = validatePromoCodeSchema.parse(body);\n\n    const promoCode = await prisma.promoCode.findUnique({\n      where: { code },\n      include: {\n        ambassador: {\n          select: {\n            id: true,\n            name: true,\n            status: true,\n          },\n        },\n      },\n    });\n\n    if (!promoCode) {\n      return NextResponse.json(\n        { valid: false, error: \"Code promo invalide\" },\n        { status: 400 }\n      );\n    }\n\n    if (!promoCode.isActive) {\n      return NextResponse.json(\n        { valid: false, error: \"Ce code promo n'est plus actif\" },\n        { status: 400 }\n      );\n    }\n\n    if (promoCode.ambassador.status !== \"active\") {\n      return NextResponse.json(\n        { valid: false, error: \"Ce code promo n'est plus disponible\" },\n        { status: 400 }\n      );\n    }\n\n    const now = new Date();\n\n    if (promoCode.startsAt && promoCode.startsAt > now) {\n      return NextResponse.json(\n        { valid: false, error: \"Ce code promo n'est pas encore valide\" },\n        { status: 400 }\n      );\n    }\n\n    if (promoCode.expiresAt && promoCode.expiresAt < now) {\n      return NextResponse.json(\n        { valid: false, error: \"Ce code promo a expir√©\" },\n        { status: 400 }\n      );\n    }\n\n    if (promoCode.maxUses && promoCode.currentUses >= promoCode.maxUses) {\n      return NextResponse.json(\n        { valid: false, error: \"Ce code promo a atteint sa limite d'utilisation\" },\n        { status: 400 }\n      );\n    }\n\n    if (promoCode.applicablePlans.length > 0 && !promoCode.applicablePlans.includes(planType)) {\n      return NextResponse.json(\n        { \n          valid: false, \n          error: `Ce code promo n'est valide que pour les plans : ${promoCode.applicablePlans.join(\", \")}` \n        },\n        { status: 400 }\n      );\n    }\n\n    if (userId) {\n      const userUsageCount = await prisma.promoCodeUsage.count({\n        where: {\n          promoCodeId: promoCode.id,\n          userId,\n        },\n      });\n\n      if (userUsageCount >= promoCode.maxUsesPerUser) {\n        return NextResponse.json(\n          { valid: false, error: \"Vous avez d√©j√† utilis√© ce code promo le nombre maximum de fois\" },\n          { status: 400 }\n        );\n      }\n    }\n\n    const plans = {\n      PRO: { monthly: 9.90, yearly: 99 },\n      ELITE: { monthly: 25.90, yearly: 259 },\n    };\n\n    let discount = {\n      type: promoCode.discountType,\n      value: promoCode.discountValue,\n      promoCodeId: promoCode.id,\n      ambassadorId: promoCode.ambassadorId,\n    };\n\n    return NextResponse.json({\n      valid: true,\n      promoCode: {\n        id: promoCode.id,\n        code: promoCode.code,\n        description: promoCode.description,\n        ambassadorName: promoCode.ambassador.name,\n      },\n      discount,\n    });\n  } catch (error: any) {\n    console.error(\"Error validating promo code:\", error);\n\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { valid: false, error: \"Donn√©es invalides\", details: error.issues },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { valid: false, error: error.message || \"Erreur lors de la validation du code promo\" },\n      { status: 500 }\n    );\n  }\n}\n","size_bytes":3639},"app/page.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion } from \"framer-motion\"\nimport Link from \"next/link\"\nimport Image from \"next/image\"\nimport { \n  Activity, \n  TrendingUp, \n  Users, \n  Award, \n  Calendar, \n  Target,\n  ArrowRight,\n  Check,\n  Zap,\n  Instagram\n} from \"lucide-react\"\n\n// Composant carrousel pour les athl√®tes\nfunction AthleteCarousel() {\n  const [currentIndex, setCurrentIndex] = useState(0)\n  const athletes = [\n    { name: 'Noa', handle: '@noa', image: '/uploads/hero/noa.png' },\n    { name: 'Nathan', handle: '@nathan', image: '/uploads/hero/nathan.png' },\n  ]\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentIndex((prev) => (prev + 1) % athletes.length)\n    }, 3000)\n    return () => clearInterval(interval)\n  }, [])\n\n  return (\n    <div className=\"max-w-md mx-auto\">\n      <motion.div\n        key={currentIndex}\n        initial={{ opacity: 0, x: 50 }}\n        animate={{ opacity: 1, x: 0 }}\n        exit={{ opacity: 0, x: -50 }}\n        transition={{ duration: 0.5 }}\n        className=\"flex flex-col items-center\"\n      >\n        <div className=\"w-full max-w-sm h-96 rounded-2xl bg-gradient-to-br from-gray-100 to-gray-200 mb-4 overflow-hidden p-4\">\n          <div className=\"w-full h-full relative\">\n            <Image\n              src={athletes[currentIndex].image}\n              alt={athletes[currentIndex].name}\n              fill\n              className=\"object-contain\"\n              unoptimized\n            />\n          </div>\n        </div>\n        <p className=\"text-lg text-gray-700 font-medium mb-1\">{athletes[currentIndex].name}</p>\n        <p className=\"text-sm text-gray-600 flex items-center gap-1\">\n          <Instagram className=\"w-4 h-4\" />\n          {athletes[currentIndex].handle}\n        </p>\n      </motion.div>\n    </div>\n  )\n}\n\nexport default function Home() {\n  const [billingCycle, setBillingCycle] = useState<\"monthly\" | \"yearly\">(\"monthly\")\n\n  return (\n    <main className=\"min-h-screen bg-white\">\n      {/* Hero Section - GetAllMyLinks Style */}\n      <section className=\"relative min-h-[85vh] flex items-center justify-center bg-white\">\n        <div className=\"container mx-auto px-4 sm:px-6 max-w-7xl\">\n          <div className=\"text-center max-w-4xl mx-auto\">\n            {/* Personas badges */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6 }}\n              className=\"flex flex-wrap gap-3 justify-center mb-8\"\n            >\n              {['Runners', 'Cyclistes', 'Triathl√®tes', 'Crossfit', 'Fitness'].map((persona, i) => (\n                <span \n                  key={i}\n                  className=\"px-4 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\"\n                >\n                  {persona}\n                </span>\n              ))}\n            </motion.div>\n\n            {/* Main title */}\n            <motion.h1\n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className=\"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-gray-900 mb-6 leading-tight\"\n            >\n              Le link-in-bio #1 pour athl√®tes\n            </motion.h1>\n\n            {/* Subtitle */}\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              className=\"text-lg sm:text-xl md:text-2xl text-gray-600 mb-10 leading-relaxed max-w-3xl mx-auto\"\n            >\n              Tout ce dont tu as besoin pour partager tes performances, trouver des sponsors, et d√©velopper ta communaut√©. Le tout dans un seul lien.\n            </motion.p>\n\n            {/* CTA */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.6 }}\n              className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\"\n            >\n              <Link\n                href=\"/signup\"\n                className=\"inline-flex items-center gap-2 bg-gray-900 text-white hover:bg-gray-800 px-8 py-4 rounded-full font-semibold text-lg shadow-lg transition-all hover:scale-105\"\n              >\n                Commencer gratuitement\n                <ArrowRight className=\"w-5 h-5\" />\n              </Link>\n              <span className=\"text-sm text-gray-500\">100% gratuit</span>\n            </motion.div>\n          </div>\n        </div>\n      </section>\n\n      {/* Social Proof - Athletes Carousel */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-4 sm:px-6 max-w-7xl\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"text-center mb-12\"\n          >\n            <h2 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-4\">\n              Ils nous font confiance\n            </h2>\n            <p className=\"text-lg text-gray-600\">\n              Rejoins nos athl√®tes qui utilisent Athlink pour d√©velopper leur communaut√©\n            </p>\n          </motion.div>\n\n          {/* Carousel automatique */}\n          <AthleteCarousel />\n        </div>\n      </section>\n\n      {/* Key Figures - Stats Section */}\n      <section className=\"py-20 bg-white\">\n        <div className=\"container mx-auto px-4 sm:px-6 max-w-7xl\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"text-center mb-16\"\n          >\n            <h2 className=\"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4\">\n              Les objectifs √† avoir\n            </h2>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-12\">\n            {[\n              {\n                number: \"1,000+\",\n                label: \"Athl√®tes\",\n                description: \"Plus de 1000 athl√®tes nous font confiance pour g√©rer leur pr√©sence en ligne\"\n              },\n              {\n                number: \"500K+\",\n                label: \"Vues/mois\",\n                description: \"Chaque mois, plus d'un demi-million de visiteurs cliquent sur les profils de nos athl√®tes\"\n              },\n              {\n                number: \"50K+\",\n                label: \"Clics sponsors\",\n                description: \"Des milliers de clics g√©n√©r√©s vers les sponsors et partenaires chaque mois\"\n              }\n            ].map((stat, i) => (\n              <motion.div\n                key={i}\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ delay: i * 0.2 }}\n                className=\"text-center\"\n              >\n                <div className=\"text-5xl sm:text-6xl font-bold text-gray-900 mb-2\">\n                  {stat.number}\n                </div>\n                <div className=\"text-xl font-semibold text-gray-700 mb-3\">\n                  {stat.label}\n                </div>\n                <p className=\"text-gray-600 leading-relaxed\">\n                  {stat.description}\n                </p>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Features Section - Simplified */}\n      <section className=\"py-20 bg-gray-50\">\n        <div className=\"container mx-auto px-4 sm:px-6 max-w-7xl\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"text-center mb-16\"\n          >\n            <h2 className=\"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4\">\n              Tout ce dont un athl√®te a besoin\n            </h2>\n            <p className=\"text-lg sm:text-xl text-gray-600 max-w-3xl mx-auto\">\n              Con√ßu sp√©cifiquement pour les sportifs, avec des fonctionnalit√©s uniques\n            </p>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {[\n              {\n                icon: Activity,\n                title: \"Stats & Performance\",\n                description: \"Synchronise Strava, affiche tes records, graphiques de progression en temps r√©el\"\n              },\n              {\n                icon: Calendar,\n                title: \"Calendrier Courses\",\n                description: \"Countdown jusqu'√† ta prochaine course, r√©sultats automatiques, historique complet\"\n              },\n              {\n                icon: Users,\n                title: \"Sponsors & Partenaires\",\n                description: \"Section d√©di√©e avec tracking des clics, analytics pour tes sponsors\"\n              },\n              {\n                icon: Award,\n                title: \"Galerie M√©dia\",\n                description: \"Photos, vid√©os, highlights de tes meilleures performances en action\"\n              },\n              {\n                icon: Target,\n                title: \"Services Coaching\",\n                description: \"Vends tes plans d'entra√Ænement, g√®re tes bookings, d√©veloppe ton business\"\n              },\n              {\n                icon: TrendingUp,\n                title: \"Analytics Pro\",\n                description: \"Vois qui visite ton profil, quels liens performent, optimise ta strat√©gie\"\n              },\n            ].map((feature, i) => (\n              <motion.div\n                key={i}\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ delay: i * 0.1 }}\n                className=\"bg-white p-8 rounded-2xl shadow-sm hover:shadow-md transition-shadow\"\n              >\n                <div className=\"inline-flex p-3 rounded-xl bg-gray-900 mb-4\">\n                  <feature.icon className=\"w-6 h-6 text-white\" />\n                </div>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">\n                  {feature.title}\n                </h3>\n                <p className=\"text-gray-600 leading-relaxed\">\n                  {feature.description}\n                </p>\n              </motion.div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Pricing Section */}\n      <section id=\"tarifs\" className=\"py-20 bg-white\">\n        <div className=\"container mx-auto px-4 sm:px-6 max-w-7xl\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            className=\"text-center mb-12\"\n          >\n            <h2 className=\"text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4\">\n              Des plans adapt√©s √† tes besoins\n            </h2>\n            <p className=\"text-lg text-gray-600 mb-8\">\n              Choisis le plan qui correspond le mieux √† tes objectifs\n            </p>\n\n            {/* Billing toggle */}\n            <div className=\"inline-flex items-center gap-4 p-1 bg-gray-100 rounded-full\">\n              <button\n                onClick={() => setBillingCycle(\"monthly\")}\n                className={`px-6 py-2 rounded-full font-medium transition-all ${\n                  billingCycle === \"monthly\"\n                    ? \"bg-white text-gray-900 shadow-sm\"\n                    : \"text-gray-600\"\n                }`}\n              >\n                Mensuel\n              </button>\n              <button\n                onClick={() => setBillingCycle(\"yearly\")}\n                className={`px-6 py-2 rounded-full font-medium transition-all ${\n                  billingCycle === \"yearly\"\n                    ? \"bg-white text-gray-900 shadow-sm\"\n                    : \"text-gray-600\"\n                }`}\n              >\n                Annuel\n                <span className=\"ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full\">\n                  2 mois offerts\n                </span>\n              </button>\n            </div>\n          </motion.div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto\">\n            {[\n              {\n                name: \"FREE\",\n                monthlyPrice: 0,\n                yearlyPrice: 0,\n                description: \"Pour d√©buter et tester la plateforme\",\n                features: [\n                  \"1 profil public\",\n                  \"Liens illimit√©s\",\n                  \"Galerie photos & vid√©os\",\n                  \"R√©seaux sociaux\",\n                  \"Calendrier courses\",\n                  \"Analytics basiques uniquement\",\n                  \"Pas de domaine personnalis√©\",\n                  \"Pas de CSS personnalis√©\",\n                  \"Branding Athlink visible\"\n                ],\n                cta: \"Commencer\",\n                popular: false\n              },\n              {\n                name: \"PRO\",\n                monthlyPrice: 9.90,\n                yearlyPrice: 8.25,\n                description: \"Pour les athl√®tes s√©rieux\",\n                features: [\n                  \"Tout FREE +\",\n                  \"Liens, comp√©titions, sponsors et m√©dias illimit√©s\",\n                  \"Analytics avanc√©es (7 jours)\",\n                  \"Badge \\\"Pro\\\" sur le profil\",\n                  \"Pas de pubs\",\n                  \"Support prioritaire\"\n                ],\n                cta: \"Essayer PRO\",\n                popular: true\n              },\n              {\n                name: \"ELITE\",\n                monthlyPrice: 25.90,\n                yearlyPrice: 21.58,\n                description: \"Pour les professionnels\",\n                features: [\n                  \"Tout PRO +\",\n                  \"Analytics illimit√©es\",\n                  \"Heatmap de clics\",\n                  \"D√©mographie des visiteurs\",\n                  \"Services coaching\",\n                  \"CSS personnalis√©\",\n                  \"Badge Elite sur le profil\",\n                  \"Support prioritaire\"\n                ],\n                cta: \"Essayer ELITE\",\n                popular: false\n              }\n            ].map((plan, i) => {\n              const displayPrice = billingCycle === \"monthly\" ? plan.monthlyPrice : plan.yearlyPrice\n              const yearlySavings = plan.monthlyPrice > 0 \n                ? ((plan.monthlyPrice - plan.yearlyPrice) * 12).toFixed(2)\n                : null\n              \n              return (\n              <motion.div\n                key={i}\n                initial={{ opacity: 0, y: 30 }}\n                whileInView={{ opacity: 1, y: 0 }}\n                viewport={{ once: true }}\n                transition={{ delay: i * 0.1 }}\n                className={`relative bg-white rounded-2xl p-8 ${\n                  plan.popular\n                    ? \"border-2 border-gray-900 shadow-xl\"\n                    : \"border border-gray-200 shadow-sm\"\n                }`}\n              >\n                {plan.popular && (\n                  <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-4 py-1 rounded-full text-sm font-medium\">\n                    Plus populaire\n                  </div>\n                )}\n\n                <div className=\"text-center mb-6\">\n                  <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">\n                    {plan.name}\n                  </h3>\n                  <p className=\"text-gray-600 mb-4\">{plan.description}</p>\n                  <div className=\"flex items-baseline justify-center gap-1\">\n                    <span className=\"text-5xl font-bold text-gray-900\">\n                      {displayPrice}‚Ç¨\n                    </span>\n                    {displayPrice > 0 && (\n                      <span className=\"text-gray-600\">/mois</span>\n                    )}\n                  </div>\n                  {billingCycle === \"yearly\" && yearlySavings && (\n                    <p className=\"text-sm text-green-600 mt-2\">\n                      √âconomise {yearlySavings}‚Ç¨/an\n                    </p>\n                  )}\n                </div>\n\n                <ul className=\"space-y-3 mb-8\">\n                  {plan.features.map((feature, j) => (\n                    <li key={j} className=\"flex items-start gap-3\">\n                      <Check className=\"w-5 h-5 text-gray-900 flex-shrink-0 mt-0.5\" />\n                      <span className=\"text-gray-700\">{feature}</span>\n                    </li>\n                  ))}\n                </ul>\n\n                <Link\n                  href=\"/signup\"\n                  className={`block w-full text-center py-3 rounded-full font-semibold transition-all ${\n                    plan.popular\n                      ? \"bg-gray-900 text-white hover:bg-gray-800\"\n                      : \"bg-gray-100 text-gray-900 hover:bg-gray-200\"\n                  }`}\n                >\n                  {plan.cta}\n                </Link>\n              </motion.div>\n              )\n            })}\n          </div>\n        </div>\n      </section>\n\n      {/* Footer - Politiques l√©gales */}\n      <footer className=\"py-12 bg-gray-900 text-white border-t border-gray-800\">\n        <div className=\"container mx-auto px-4 sm:px-6 max-w-7xl\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8\">\n            {/* Colonne 1 - √Ä propos */}\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Athlink</h3>\n              <p className=\"text-sm text-gray-400\">\n                La plateforme link-in-bio d√©di√©e aux athl√®tes pour d√©velopper leur pr√©sence en ligne.\n              </p>\n            </div>\n\n            {/* Colonne 2 - Produit */}\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Produit</h3>\n              <ul className=\"space-y-2 text-sm text-gray-400\">\n                <li><Link href=\"#features\" className=\"hover:text-white transition-colors\">Fonctionnalit√©s</Link></li>\n                <li><Link href=\"#tarifs\" className=\"hover:text-white transition-colors\">Tarifs</Link></li>\n                <li><Link href=\"/signup\" className=\"hover:text-white transition-colors\">Cr√©er un compte</Link></li>\n                <li><Link href=\"/login\" className=\"hover:text-white transition-colors\">Se connecter</Link></li>\n              </ul>\n            </div>\n\n            {/* Colonne 3 - L√©gal */}\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">L√©gal</h3>\n              <ul className=\"space-y-2 text-sm text-gray-400\">\n                <li>\n                  <a \n                    href=\"https://www.iubenda.com/privacy-policy/27659887\" \n                    className=\"iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe hover:text-white transition-colors\" \n                    title=\"Politique de confidentialit√©\"\n                  >\n                    Politique de Confidentialit√©\n                  </a>\n                </li>\n                <li>\n                  <a \n                    href=\"https://www.iubenda.com/privacy-policy/27659887/cookie-policy\" \n                    className=\"iubenda-white iubenda-noiframe iubenda-embed iubenda-noiframe hover:text-white transition-colors\" \n                    title=\"Politique relative aux Cookies\"\n                  >\n                    Politique relative aux Cookies\n                  </a>\n                </li>\n                <li><a href=\"/legal/CGV.pdf\" target=\"_blank\" className=\"hover:text-white transition-colors\">CGV</a></li>\n                <li><a href=\"/legal/Mentions_Legales.pdf\" target=\"_blank\" className=\"hover:text-white transition-colors\">Mentions l√©gales</a></li>\n              </ul>\n            </div>\n\n            {/* Colonne 4 - Support */}\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Support</h3>\n              <ul className=\"space-y-2 text-sm text-gray-400\">\n                <li><Link href=\"/help\" className=\"hover:text-white transition-colors\">Centre d'aide</Link></li>\n                <li><Link href=\"/contact\" className=\"hover:text-white transition-colors\">Nous contacter</Link></li>\n                <li><a href=\"mailto:support@athlink.com\" className=\"hover:text-white transition-colors\">support@athlink.com</a></li>\n              </ul>\n            </div>\n          </div>\n\n          {/* Copyright */}\n          <div className=\"border-t border-gray-800 pt-8 text-center text-sm text-gray-400\">\n            <p>¬© 2025 Athlink. Tous droits r√©serv√©s.</p>\n          </div>\n        </div>\n      </footer>\n    </main>\n  )\n}\n","size_bytes":20653},"app/[username]/coaching/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { CoachingPublicClient } from \"./coaching-public-client\"\nimport { ArrowLeft } from \"lucide-react\"\nimport Link from \"next/link\"\n\ninterface Props {\n  params: { username: string }\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true },\n  })\n\n  if (!profile) {\n    return {\n      title: \"Coaching non trouv√© - Athlink\",\n      description: \"Les services de coaching que vous recherchez n'existent pas.\",\n    }\n  }\n\n  return {\n    title: `Services Coaching de ${profile.displayName} - Athlink`,\n    description: `D√©couvrez les services de coaching personnalis√© de ${profile.displayName}. Plans d'entra√Ænement et r√©servations disponibles.`,\n  }\n}\n\nexport default async function CoachingPublicPage({ params }: Props) {\n  const { username } = params\n\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: {\n      displayName: true,\n      bio: true,\n      avatarUrl: true,\n      plan: true,\n      isPublic: true,\n      stats: true\n    }\n  })\n\n  if (!profile || !profile.isPublic || (profile.plan !== \"ELITE\")) {\n    notFound()\n  }\n\n  // R√©cup√©rer les donn√©es coaching depuis stats\n  const profileStats = profile.stats as any || {}\n  const trainingPlans = (profileStats.trainingPlans || []).filter((p: any) => p.isActive)\n  const bookings = profileStats.bookings || []\n  const availabilities = profileStats.availabilities || []\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 text-white\">\n      {/* Sticky Header */}\n      <header className=\"sticky top-0 z-20 bg-black/80 backdrop-blur-md p-3 sm:p-4 border-b border-white/10\">\n        <div className=\"container mx-auto flex items-center justify-between\">\n          <Link href={`/${username}`} className=\"flex items-center gap-1 sm:gap-2 text-gray-300 hover:text-white transition-colors\">\n            <ArrowLeft className=\"w-4 h-4 sm:w-5 sm:h-5\" />\n            <span className=\"text-sm sm:text-base font-medium\">Retour au profil</span>\n          </Link>\n          <h1 className=\"text-base sm:text-xl font-bold truncate max-w-[150px] sm:max-w-none\">{profile.displayName}</h1>\n          <div className=\"w-5 h-5\" /> {/* Placeholder for alignment */}\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"container mx-auto py-4 sm:py-6 md:py-8 px-4\">\n        <CoachingPublicClient \n          coachName={profile.displayName}\n          coachBio={profile.bio}\n          coachAvatar={profile.avatarUrl}\n          trainingPlans={trainingPlans}\n          availabilities={availabilities}\n          username={username}\n        />\n      </main>\n    </div>\n  )\n}\n\n","size_bytes":2843},"app/(dashboard)/dashboard/media/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function MediaPage() {\n  // Rediriger vers Profil o√π la Galerie est maintenant int√©gr√©e\n  redirect(\"/dashboard/profile#galerie\")\n}\n","size_bytes":193},"app/[username]/galerie/page.tsx":{"content":"import { notFound } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport Image from \"next/image\"\nimport Link from \"next/link\"\nimport { ArrowLeft, Play } from \"lucide-react\"\n\ninterface Props {\n  params: Promise<{ username: string }>\n}\n\nexport async function generateMetadata({ params }: Props) {\n  const { username } = await params\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    select: { displayName: true }\n  })\n\n  if (!profile) return {}\n\n  return {\n    title: `Galerie de ${profile.displayName} - Athlink`,\n    description: `D√©couvrez les photos et vid√©os de ${profile.displayName}`,\n  }\n}\n\nexport default async function GaleriePage({ params }: Props) {\n  const { username } = await params\n\n  const profile = await prisma.profile.findUnique({\n    where: { username },\n    include: {\n      media: { \n        orderBy: { position: 'asc' }\n      }\n    }\n  })\n\n  if (!profile || !profile.isPublic) {\n    notFound()\n  }\n\n  const photos = profile.media.filter(m => m.type === \"IMAGE\")\n  const videos = profile.media.filter(m => m.type === \"VIDEO\")\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-50 bg-black/80 backdrop-blur-xl border-b border-white/10\">\n        <div className=\"container mx-auto px-4 sm:px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <Link \n              href={`/${username}`}\n              className=\"flex items-center gap-2 text-white hover:text-yellow-400 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5\" />\n              <span className=\"font-medium\">Retour au profil</span>\n            </Link>\n            <h1 className=\"text-xl font-bold text-white\">Galerie</h1>\n            <div className=\"w-32\"></div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 sm:px-6 py-8\">\n        {/* Stats */}\n        <div className=\"grid grid-cols-2 gap-4 mb-8 max-w-md mx-auto\">\n          <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 text-center\">\n            <p className=\"text-3xl font-bold text-white\">{photos.length}</p>\n            <p className=\"text-sm text-gray-400\">Photos</p>\n          </div>\n          <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20 text-center\">\n            <p className=\"text-3xl font-bold text-white\">{videos.length}</p>\n            <p className=\"text-sm text-gray-400\">Vid√©os</p>\n          </div>\n        </div>\n\n        {/* Photos Section */}\n        {photos.length > 0 && (\n          <section className=\"mb-12\">\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\n              <div className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                  <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" ry=\"2\"/>\n                  <circle cx=\"9\" cy=\"9\" r=\"2\"/>\n                  <path d=\"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\"/>\n                </svg>\n              </div>\n              Photos\n            </h2>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n              {photos.map((photo) => (\n                <div \n                  key={photo.id}\n                  className=\"group relative aspect-square rounded-xl overflow-hidden bg-white/5 border border-white/10 hover:border-white/30 transition-all cursor-pointer\"\n                >\n                  <Image\n                    src={photo.url}\n                    alt={photo.title || \"Photo\"}\n                    fill\n                    className=\"object-cover group-hover:scale-110 transition-transform duration-300\"\n                  />\n                  {photo.title && (\n                    <div className=\"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity\">\n                      <p className=\"text-white text-sm font-medium truncate\">{photo.title}</p>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Videos Section */}\n        {videos.length > 0 && (\n          <section>\n            <h2 className=\"text-2xl font-bold text-white mb-6 flex items-center gap-3\">\n              <div className=\"w-8 h-8 rounded-full bg-red-500 flex items-center justify-center\">\n                <Play className=\"w-5 h-5 text-white\" fill=\"white\" />\n              </div>\n              Vid√©os\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {videos.map((video) => (\n                <div \n                  key={video.id}\n                  className=\"group relative aspect-video rounded-xl overflow-hidden bg-white/5 border border-white/10 hover:border-white/30 transition-all cursor-pointer\"\n                >\n                  {video.thumbnail ? (\n                    <Image\n                      src={video.thumbnail}\n                      alt={video.title || \"Video\"}\n                      fill\n                      className=\"object-cover\"\n                    />\n                  ) : (\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900\">\n                      <Play className=\"w-16 h-16 text-white/30\" />\n                    </div>\n                  )}\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/50 transition-colors\">\n                    <div className=\"w-16 h-16 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform\">\n                      <Play className=\"w-8 h-8 text-black ml-1\" fill=\"black\" />\n                    </div>\n                  </div>\n                  {video.title && (\n                    <div className=\"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-4\">\n                      <p className=\"text-white text-sm font-medium\">{video.title}</p>\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* Empty State */}\n        {profile.media.length === 0 && (\n          <div className=\"flex flex-col items-center justify-center py-16 text-center\">\n            <div className=\"w-20 h-20 rounded-full bg-white/5 flex items-center justify-center mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"text-gray-500\">\n                <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" ry=\"2\"/>\n                <circle cx=\"9\" cy=\"9\" r=\"2\"/>\n                <path d=\"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\"/>\n              </svg>\n            </div>\n            <h3 className=\"text-xl font-bold text-white mb-2\">Aucun m√©dia</h3>\n            <p className=\"text-gray-400\">La galerie est vide pour le moment</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n","size_bytes":7434},"app/api/upload/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { supabase } from \"@/lib/supabase\"\nimport { prisma } from \"@/lib/db\"\nimport sharp from \"sharp\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const formData = await req.formData()\n    const file = formData.get(\"file\") as File\n    const type = formData.get(\"type\") as string // \"avatar\", \"cover\", \"media\", or \"sponsor\"\n\n    if (!file) {\n      return NextResponse.json({ error: \"Fichier manquant\" }, { status: 400 })\n    }\n\n    // Validate file type\n    const isMedia = type === \"media\"\n    const isSponsor = type === \"sponsor\"\n    const validTypes = isMedia \n      ? [\"image/\", \"video/\"] \n      : [\"image/\"]\n    \n    const isValidType = validTypes.some(validType => file.type.startsWith(validType))\n    \n    if (!isValidType) {\n      return NextResponse.json({ \n        error: isMedia \n          ? \"Le fichier doit √™tre une image ou une vid√©o\" \n          : \"Le fichier doit √™tre une image\" \n      }, { status: 400 })\n    }\n\n    // Reject HEIC/HEIF files explicitly\n    if (file.type === \"image/heic\" || file.type === \"image/heif\" || \n        file.name.toLowerCase().endsWith('.heic') || file.name.toLowerCase().endsWith('.heif')) {\n      return NextResponse.json({ \n        error: \"Les fichiers HEIC/HEIF ne sont pas support√©s. Veuillez convertir votre image en JPEG, PNG ou WebP.\" \n      }, { status: 400 })\n    }\n\n    // Validate file size (max 50MB for videos, 10MB for images, 30MB for others)\n    const isVideo = file.type.startsWith(\"video/\")\n    const maxSize = isVideo \n      ? 50 * 1024 * 1024  // 50MB for videos\n      : isMedia \n        ? 10 * 1024 * 1024  // 10MB for images\n        : 30 * 1024 * 1024   // 30MB for others (avatar, cover, sponsor)\n    \n    if (file.size > maxSize) {\n      return NextResponse.json({ \n        error: isVideo \n          ? \"Fichier vid√©o trop volumineux (max 50MB)\" \n          : isMedia \n            ? \"Fichier trop volumineux (max 10MB)\" \n            : \"Fichier trop volumineux (max 30MB)\" \n      }, { status: 400 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Convert File to ArrayBuffer then to Buffer\n    const arrayBuffer = await file.arrayBuffer()\n    let buffer: Buffer = Buffer.from(arrayBuffer) as Buffer\n\n    // Optimize image quality for avatars and covers (not videos)\n    // Resize to very high resolution (2000px) with maximum quality\n    if (!isVideo && (type === \"avatar\" || type === \"cover\")) {\n      try {\n        const targetSize = type === \"avatar\" ? 2000 : 2400\n        buffer = await sharp(buffer as Buffer)\n          .resize(targetSize, type === \"avatar\" ? 2000 : 800, {\n            fit: 'cover',\n            position: 'center',\n            withoutEnlargement: false\n          })\n          .png({ quality: 100, compressionLevel: 0 }) // PNG sans compression pour qualit√© maximale\n          .toBuffer()\n      } catch (sharpError) {\n        // If sharp fails, use original buffer\n        console.warn(\"Sharp optimization failed, using original:\", sharpError)\n      }\n    }\n\n    // Generate unique filename\n    const fileExt = type === \"avatar\" || type === \"cover\" ? \"png\" : file.name.split('.').pop()\n    const fileName = `${profile.id}-${type}-${Date.now()}.${fileExt}`\n    const filePath = `${type}s/${fileName}`\n\n    // Upload to Supabase Storage\n    const { data, error } = await supabase.storage\n      .from('athlink-images')\n      .upload(filePath, buffer, {\n        contentType: type === \"avatar\" || type === \"cover\" ? \"image/png\" : file.type,\n        upsert: true,\n        cacheControl: '31536000' // Cache 1 an\n      })\n\n    if (error) {\n      console.error(\"Supabase upload error:\", error)\n      return NextResponse.json({ error: \"Erreur lors de l'upload\" }, { status: 500 })\n    }\n\n    // Get public URL\n    const { data: urlData } = supabase.storage\n      .from('athlink-images')\n      .getPublicUrl(filePath)\n\n    const publicUrl = urlData.publicUrl\n\n    // Update profile with new image URL (only for avatar and cover)\n    if (type === \"avatar\" || type === \"cover\") {\n      const updateData = type === \"avatar\" \n        ? { avatarUrl: publicUrl }\n        : { coverUrl: publicUrl }\n\n      await prisma.profile.update({\n        where: { id: profile.id },\n        data: updateData\n      })\n    }\n\n    return NextResponse.json({ url: publicUrl })\n\n  } catch (error) {\n    console.error(\"Upload error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":4800},"app/(dashboard)/dashboard/share/page.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { SharePageClient } from \"./share-client\"\n\nexport default async function SharePage() {\n  const session = await auth()\n  \n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      username: true,\n      displayName: true,\n      avatarUrl: true,\n      bio: true,\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div className=\"relative -mx-4 sm:-mx-6 lg:-mx-10 -mt-4 sm:-mt-6 lg:-mt-10 px-4 sm:px-6 lg:px-10 pt-8 sm:pt-10 lg:pt-12 pb-16 sm:pb-20 lg:pb-24 mb-8 sm:mb-10 lg:mb-12 bg-gradient-hero rounded-b-2xl sm:rounded-b-3xl overflow-hidden\">\n        {/* Shapes anim√©s */}\n        <div className=\"absolute inset-0 overflow-hidden opacity-10\">\n          <div className=\"absolute -top-20 -right-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n          <div className=\"absolute -bottom-20 -left-20 w-96 h-96 bg-white rounded-full blur-3xl\" />\n        </div>\n        \n        <div className=\"relative z-10\">\n          <h1 className=\"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black mb-2 sm:mb-3 bg-gradient-to-r from-primary-700 via-quaternary-700 to-tertiary-700 bg-clip-text text-transparent\">\n            Partage ton profil\n          </h1>\n          <p className=\"text-base sm:text-lg lg:text-xl text-primary-600 font-semibold\">\n            Ton lien unique pour tes r√©seaux sociaux\n          </p>\n        </div>\n      </div>\n\n      {/* Client Component */}\n      <SharePageClient \n        username={profile.username}\n        displayName={profile.displayName}\n        avatarUrl={profile.avatarUrl}\n        bio={profile.bio}\n      />\n    </div>\n  )\n}\n\n","size_bytes":1859},"app/(dashboard)/dashboard/coaching/business-analytics/business-analytics-client.tsx":{"content":"\"use client\"\n\nimport { useState, useMemo } from \"react\"\nimport { motion } from \"framer-motion\"\nimport { TrendingUp, TrendingDown, Users, Calendar, Euro, Target, Download, Filter } from \"lucide-react\"\n\ninterface Stats {\n  totalRevenue: number\n  monthlyRevenue: number\n  uniqueClients: number\n  upcomingBookings: number\n  totalSubscribers: number\n  trainingRevenue: number\n  conversionRate: number\n  averageBookingValue: number\n}\n\ninterface BusinessAnalyticsClientProps {\n  stats: Stats\n  bookings: any[]\n  trainingPlans: any[]\n  coachName: string\n}\n\nexport function BusinessAnalyticsClient({ stats, bookings, trainingPlans, coachName }: BusinessAnalyticsClientProps) {\n  const [selectedPeriod, setSelectedPeriod] = useState<\"7d\" | \"30d\" | \"90d\" | \"1y\">(\"30d\")\n  const [selectedMetric, setSelectedMetric] = useState<\"revenue\" | \"bookings\" | \"clients\">(\"revenue\")\n\n  // Calculer les donn√©es pour les graphiques\n  const chartData = useMemo(() => {\n    const now = new Date()\n    const periods = {\n      \"7d\": 7,\n      \"30d\": 30,\n      \"90d\": 90,\n      \"1y\": 365\n    }\n    const days = periods[selectedPeriod]\n    \n    const data = []\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(now)\n      date.setDate(date.getDate() - i)\n      const dateStr = date.toISOString().split('T')[0]\n      \n      const dayBookings = bookings.filter((b: any) => {\n        const bookingDate = new Date(b.date).toISOString().split('T')[0]\n        return bookingDate === dateStr && b.status === \"COMPLETED\"\n      })\n      \n      data.push({\n        date: dateStr,\n        revenue: dayBookings.reduce((acc: number, b: any) => acc + (b.price || 0), 0),\n        bookings: dayBookings.length,\n        clients: new Set(dayBookings.map((b: any) => b.clientEmail)).size\n      })\n    }\n    \n    return data\n  }, [selectedPeriod, bookings])\n\n  // Calculer les tendances\n  const trends = useMemo(() => {\n    const half = Math.floor(chartData.length / 2)\n    const firstHalf = chartData.slice(0, half)\n    const secondHalf = chartData.slice(half)\n    \n    const firstHalfRevenue = firstHalf.reduce((acc, d) => acc + d.revenue, 0)\n    const secondHalfRevenue = secondHalf.reduce((acc, d) => acc + d.revenue, 0)\n    \n    const revenueGrowth = firstHalfRevenue > 0 \n      ? ((secondHalfRevenue - firstHalfRevenue) / firstHalfRevenue * 100) \n      : 0\n    \n    return {\n      revenue: revenueGrowth,\n      isPositive: revenueGrowth >= 0\n    }\n  }, [chartData])\n\n  // Top clients\n  const topClients = useMemo(() => {\n    const clientMap = new Map()\n    bookings.filter((b: any) => b.status === \"COMPLETED\").forEach((b: any) => {\n      const current = clientMap.get(b.clientEmail) || { name: b.clientName, email: b.clientEmail, revenue: 0, bookings: 0 }\n      current.revenue += b.price || 0\n      current.bookings += 1\n      clientMap.set(b.clientEmail, current)\n    })\n    \n    return Array.from(clientMap.values())\n      .sort((a, b) => b.revenue - a.revenue)\n      .slice(0, 5)\n  }, [bookings])\n\n  // Top services\n  const topServices = useMemo(() => {\n    const serviceMap = new Map()\n    bookings.filter((b: any) => b.status === \"COMPLETED\").forEach((b: any) => {\n      const current = serviceMap.get(b.service) || { service: b.service, revenue: 0, bookings: 0 }\n      current.revenue += b.price || 0\n      current.bookings += 1\n      serviceMap.set(b.service, current)\n    })\n    \n    return Array.from(serviceMap.values())\n      .sort((a, b) => b.revenue - a.revenue)\n      .slice(0, 5)\n  }, [bookings])\n\n  const maxChartValue = Math.max(...chartData.map(d => d[selectedMetric]))\n\n  const exportData = () => {\n    const csv = [\n      [\"Date\", \"Revenus\", \"R√©servations\", \"Clients\"],\n      ...chartData.map(d => [d.date, d.revenue, d.bookings, d.clients])\n    ].map(row => row.join(\",\")).join(\"\\n\")\n    \n    const blob = new Blob([csv], { type: \"text/csv\" })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement(\"a\")\n    a.href = url\n    a.download = `analytics-${coachName}-${selectedPeriod}.csv`\n    a.click()\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Main Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-green-100 to-primary-green-200 flex items-center justify-center\">\n              <Euro className=\"w-6 h-6 text-primary-green-600\" />\n            </div>\n            <div className={`flex items-center gap-1 text-sm font-medium ${trends.isPositive ? \"text-green-600\" : \"text-red-600\"}`}>\n              {trends.isPositive ? <TrendingUp className=\"w-4 h-4\" /> : <TrendingDown className=\"w-4 h-4\" />}\n              <span>{Math.abs(trends.revenue).toFixed(1)}%</span>\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Revenus totaux</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-gray-500 mt-2\">Ce mois : {stats.monthlyRevenue.toFixed(0)}‚Ç¨</p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n              <Users className=\"w-6 h-6 text-primary-blue-600\" />\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Clients uniques</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.uniqueClients}</p>\n          <p className=\"text-xs text-gray-500 mt-2\">R√©servations √† venir : {stats.upcomingBookings}</p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-100 to-yellow-200 flex items-center justify-center\">\n              <Target className=\"w-6 h-6 text-yellow-600\" />\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Taux de conversion</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.conversionRate.toFixed(1)}%</p>\n          <p className=\"text-xs text-gray-500 mt-2\">R√©servations confirm√©es</p>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n          className=\"bg-white rounded-2xl shadow-standard p-6 border border-gray-200\"\n        >\n          <div className=\"flex items-center justify-between mb-4\">\n            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-green-100 to-green-200 flex items-center justify-center\">\n              <Calendar className=\"w-6 h-6 text-green-600\" />\n            </div>\n          </div>\n          <p className=\"text-sm text-gray-600 mb-1\">Valeur moyenne</p>\n          <p className=\"text-3xl font-bold text-gray-900\">{stats.averageBookingValue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-gray-500 mt-2\">Par r√©servation</p>\n        </motion.div>\n      </div>\n\n      {/* Chart Section - Simplifi√© */}\n      <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6\">\n          <div>\n            <h3 className=\"text-lg font-bold text-gray-900\">√âvolution des performances</h3>\n          </div>\n          <div className=\"flex gap-2\">\n            <select\n              value={selectedPeriod}\n              onChange={(e) => setSelectedPeriod(e.target.value as any)}\n              className=\"px-3 py-2 bg-gray-100 rounded-lg text-sm font-medium text-gray-700 border-none\"\n            >\n              <option value=\"7d\">7 jours</option>\n              <option value=\"30d\">30 jours</option>\n              <option value=\"90d\">90 jours</option>\n              <option value=\"1y\">1 an</option>\n            </select>\n            <button\n              onClick={exportData}\n              className=\"p-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\"\n              title=\"Exporter en CSV\"\n            >\n              <Download className=\"w-5 h-5\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Simple Bar Chart */}\n        <div className=\"h-48 flex items-end justify-between gap-0.5\">\n          {chartData.map((data, index) => {\n            const height = maxChartValue > 0 ? (data.revenue / maxChartValue * 100) : 0\n            \n            return (\n              <div key={index} className=\"flex-1 flex flex-col items-center group\">\n                <div className=\"w-full flex flex-col items-center\">\n                  <div className=\"text-[10px] font-medium text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity mb-1\">\n                    {data.revenue}‚Ç¨\n                  </div>\n                  <motion.div\n                    initial={{ height: 0 }}\n                    animate={{ height: `${height}%` }}\n                    transition={{ duration: 0.4, delay: index * 0.005 }}\n                    className=\"w-full bg-gray-900 group-hover:bg-gray-700 transition-colors\"\n                    style={{ minHeight: height > 0 ? \"2px\" : \"0\" }}\n                  />\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        <p className=\"text-xs text-gray-500 text-center mt-4\">Revenus sur les {selectedPeriod === \"7d\" ? \"7 derniers jours\" : selectedPeriod === \"30d\" ? \"30 derniers jours\" : selectedPeriod === \"90d\" ? \"90 derniers jours\" : \"12 derniers mois\"}</p>\n      </div>\n\n      {/* Bottom Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Top Clients */}\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Top Clients</h3>\n          {topClients.length > 0 ? (\n            <div className=\"space-y-3\">\n              {topClients.map((client, index) => (\n                <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center\">\n                      <span className=\"text-sm font-bold text-primary-blue-600\">{client.name.charAt(0)}</span>\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-900\">{client.name}</p>\n                      <p className=\"text-xs text-gray-500\">{client.bookings} r√©servations</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-bold text-primary-green-600\">{client.revenue.toFixed(0)}‚Ç¨</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-center text-gray-500 py-8\">Aucun client pour le moment</p>\n          )}\n        </div>\n\n        {/* Top Services */}\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Services Populaires</h3>\n          {topServices.length > 0 ? (\n            <div className=\"space-y-3\">\n              {topServices.map((service, index) => (\n                <div key={index} className=\"p-3 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <p className=\"font-medium text-gray-900\">{service.service}</p>\n                    <p className=\"font-bold text-primary-green-600\">{service.revenue.toFixed(0)}‚Ç¨</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full bg-primary-green-400 rounded-full\"\n                        style={{ width: `${(service.bookings / bookings.filter((b: any) => b.status === \"COMPLETED\").length) * 100}%` }}\n                      />\n                    </div>\n                    <span className=\"text-xs text-gray-500\">{service.bookings} sessions</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <p className=\"text-center text-gray-500 py-8\">Aucun service pour le moment</p>\n          )}\n        </div>\n      </div>\n\n      {/* Training Plans Revenue */}\n      {trainingPlans.length > 0 && (\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Revenus Plans d'Entra√Ænement</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div className=\"p-4 bg-gradient-to-br from-primary-blue-50 to-primary-blue-100 rounded-xl\">\n              <p className=\"text-sm text-primary-blue-600 mb-1\">Plans actifs</p>\n              <p className=\"text-2xl font-bold text-primary-blue-900\">{trainingPlans.filter((p: any) => p.isActive).length}</p>\n            </div>\n            <div className=\"p-4 bg-gradient-to-br from-primary-green-50 to-primary-green-100 rounded-xl\">\n              <p className=\"text-sm text-primary-green-600 mb-1\">Abonn√©s totaux</p>\n              <p className=\"text-2xl font-bold text-primary-green-900\">{stats.totalSubscribers}</p>\n            </div>\n            <div className=\"p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl\">\n              <p className=\"text-sm text-green-600 mb-1\">Revenus g√©n√©r√©s</p>\n              <p className=\"text-2xl font-bold text-green-900\">{stats.trainingRevenue.toFixed(0)}‚Ç¨</p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","size_bytes":14631},"app/next-auth.d.ts":{"content":"import \"next-auth\"\n\ndeclare module \"next-auth\" {\n  interface Session {\n    user: {\n      id: string\n      email: string\n      name: string\n    }\n  }\n\n  interface User {\n    id: string\n    email: string\n    name: string\n  }\n}\n\ndeclare module \"next-auth/jwt\" {\n  interface JWT {\n    id: string\n  }\n}\n","size_bytes":298},"app/api/auth/signup/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { hash } from \"bcryptjs\"\nimport { prisma } from \"@/lib/db\"\nimport { signupSchema, mapSportToEnum, createStatsWithOriginalSport } from \"@/lib/validations\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const validatedData = signupSchema.parse(body)\n\n    // Check if email exists\n    const existingEmail = await prisma.user.findUnique({\n      where: { email: validatedData.email }\n    })\n\n    if (existingEmail) {\n      return NextResponse.json(\n        { error: \"Cet email est d√©j√† utilis√©\" },\n        { status: 400 }\n      )\n    }\n\n    // Check if username exists\n    const existingUsername = await prisma.profile.findUnique({\n      where: { username: validatedData.username }\n    })\n\n    if (existingUsername) {\n      return NextResponse.json(\n        { error: \"Ce nom d'utilisateur est d√©j√† pris\" },\n        { status: 400 }\n      )\n    }\n\n    // Hash password\n    const hashedPassword = await hash(validatedData.password, 12)\n\n    // Create user and profile\n    const user = await prisma.user.create({\n      data: {\n        email: validatedData.email,\n        name: validatedData.name,\n        password: hashedPassword,\n        profile: {\n          create: {\n            username: validatedData.username,\n            displayName: validatedData.name,\n            sport: mapSportToEnum(validatedData.sport),\n            stats: createStatsWithOriginalSport(null, validatedData.sport),\n            plan: \"FREE\"\n          }\n        }\n      },\n      include: {\n        profile: true\n      }\n    })\n\n    return NextResponse.json({\n      user: {\n        id: user.id,\n        email: user.email,\n        name: user.name,\n        username: user.profile?.username\n      }\n    }, { status: 201 })\n\n  } catch (error: any) {\n    console.error(\"Signup error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json(\n      { error: \"Erreur lors de la cr√©ation du compte\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2168},"app/[username]/coaching/coaching-public-client.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { Calendar, Clock, Euro, Target, Check, X, BookOpen, Users, Download, Lock } from \"lucide-react\"\nimport { PdfPurchaseModal } from \"./pdf-purchase-modal\"\n\ninterface TrainingPlan {\n  id: string\n  title: string\n  description: string\n  price: number\n  duration: number\n  difficulty: string\n  category: string\n  pdfFileName?: string\n  sessions: any[]\n  _count: {\n    sessions: number\n    subscribers: number\n  }\n}\n\ninterface CoachingPublicClientProps {\n  coachName: string\n  coachBio: string | null\n  coachAvatar: string | null\n  trainingPlans: TrainingPlan[]\n  availabilities: any[]\n  username: string\n}\n\nexport function CoachingPublicClient({\n  coachName,\n  coachBio,\n  coachAvatar,\n  trainingPlans,\n  availabilities,\n  username\n}: CoachingPublicClientProps) {\n  const [selectedPlan, setSelectedPlan] = useState<TrainingPlan | null>(null)\n  const [showBookingForm, setShowBookingForm] = useState(false)\n  const [viewMode, setViewMode] = useState<\"plans\" | \"booking\">(\"plans\")\n  const [showPdfPurchase, setShowPdfPurchase] = useState(false)\n  const [selectedPlanForPdf, setSelectedPlanForPdf] = useState<TrainingPlan | null>(null)\n\n  const [bookingForm, setBookingForm] = useState({\n    clientName: \"\",\n    clientEmail: \"\",\n    clientPhone: \"\",\n    service: \"\",\n    message: \"\"\n  })\n\n  const difficultyLabels: Record<string, string> = {\n    DEBUTANT: \"D√©butant\",\n    INTERMEDIAIRE: \"Interm√©diaire\",\n    AVANCE: \"Avanc√©\"\n  }\n\n  const difficultyColors: Record<string, string> = {\n    DEBUTANT: \"bg-green-100 text-green-800\",\n    INTERMEDIAIRE: \"bg-yellow-100 text-yellow-800\",\n    AVANCE: \"bg-red-100 text-red-800\"\n  }\n\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [submitSuccess, setSubmitSuccess] = useState(false)\n  const [submitError, setSubmitError] = useState(\"\")\n\n  const handleBookingSubmit = async () => {\n    setIsSubmitting(true)\n    setSubmitError(\"\")\n\n    try {\n      const response = await fetch(\"/api/public/booking-request\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          coachUsername: username,\n          ...bookingForm\n        })\n      })\n\n      if (response.ok) {\n        setSubmitSuccess(true)\n        setBookingForm({\n          clientName: \"\",\n          clientEmail: \"\",\n          clientPhone: \"\",\n          service: \"\",\n          message: \"\"\n        })\n        \n        // Masquer le message de succ√®s apr√®s 5 secondes\n        setTimeout(() => {\n          setSubmitSuccess(false)\n        }, 5000)\n      } else {\n        const error = await response.json()\n        setSubmitError(error.error || \"Une erreur est survenue\")\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'envoi:\", error)\n      setSubmitError(\"Impossible d'envoyer la demande. Veuillez r√©essayer.\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handlePdfPurchase = (plan: TrainingPlan) => {\n    setSelectedPlanForPdf(plan)\n    setShowPdfPurchase(true)\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Coach Header */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10\"\n      >\n        <div className=\"flex flex-col md:flex-row items-center md:items-start gap-6\">\n          {coachAvatar ? (\n            <Image\n              src={coachAvatar}\n              alt={coachName}\n              width={120}\n              height={120}\n              className=\"w-24 h-24 rounded-full object-cover border-4 border-white/20\"\n            />\n          ) : (\n            <div className=\"w-24 h-24 rounded-full bg-gradient-to-br from-primary-blue-100 to-primary-blue-200 flex items-center justify-center border-4 border-white/20\">\n              <span className=\"text-3xl font-bold text-primary-blue-600\">\n                {coachName.charAt(0)}\n              </span>\n            </div>\n          )}\n          <div className=\"flex-1 text-center md:text-left\">\n            <h2 className=\"text-3xl font-bold mb-2\">{coachName}</h2>\n            <p className=\"text-lg text-yellow-400 mb-3\">Coach Certifi√©</p>\n            {coachBio && (\n              <p className=\"text-gray-300 mb-4\">{coachBio}</p>\n            )}\n            <div className=\"flex flex-wrap gap-3 justify-center md:justify-start\">\n              <div className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full\">\n                <BookOpen className=\"w-4 h-4 text-primary-blue-400\" />\n                <span className=\"text-sm\">{trainingPlans.length} Plans disponibles</span>\n              </div>\n              <div className=\"flex items-center gap-2 bg-white/5 px-4 py-2 rounded-full\">\n                <Users className=\"w-4 h-4 text-primary-green-400\" />\n                <span className=\"text-sm\">Coaching personnalis√©</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Tab Navigation */}\n      <div className=\"flex gap-4\">\n        <button\n          onClick={() => setViewMode(\"plans\")}\n          className={`flex-1 py-3 rounded-xl font-bold transition-all ${\n            viewMode === \"plans\"\n              ? \"bg-gradient-ocean text-gray-900\"\n              : \"bg-white/5 text-white hover:bg-white/10\"\n          }`}\n        >\n          Plans d'Entra√Ænement\n        </button>\n        <button\n          onClick={() => setViewMode(\"booking\")}\n          className={`flex-1 py-3 rounded-xl font-bold transition-all ${\n            viewMode === \"booking\"\n              ? \"bg-gradient-ocean text-gray-900\"\n              : \"bg-white/5 text-white hover:bg-white/10\"\n          }`}\n        >\n          R√©server une S√©ance\n        </button>\n      </div>\n\n      {/* Training Plans View */}\n      {viewMode === \"plans\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {trainingPlans.length > 0 ? (\n            trainingPlans.map((plan) => (\n              <motion.div\n                key={plan.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                whileHover={{ y: -5 }}\n                className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-6 border border-white/10 hover:border-primary-blue-400/50 transition-all cursor-pointer flex flex-col h-full\"\n                onClick={() => setSelectedPlan(plan)}\n              >\n                {/* Header avec badge align√© */}\n                <div className=\"flex items-center justify-between mb-4 min-h-[3rem]\">\n                  <h3 className=\"text-xl font-bold text-white flex-1 pr-3\">{plan.title}</h3>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap flex-shrink-0 ${difficultyColors[plan.difficulty]}`}>\n                    {difficultyLabels[plan.difficulty]}\n                  </span>\n                </div>\n\n                {/* Description avec hauteur fixe */}\n                <div className=\"flex-1 mb-4\">\n                  <p className=\"text-gray-300 text-sm line-clamp-3 h-[4.5rem] overflow-hidden\">{plan.description}</p>\n                </div>\n\n                {/* D√©tails du programme avec alignement uniforme */}\n                <div className=\"space-y-2 mb-4\">\n                  <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                    <Calendar className=\"w-4 h-4 text-primary-blue-400 flex-shrink-0\" />\n                    <span className=\"min-w-0 flex-1\">{plan.duration} semaines</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                    <Target className=\"w-4 h-4 text-yellow-400 flex-shrink-0\" />\n                    <span className=\"min-w-0 flex-1\">{plan._count.sessions} s√©ances</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-sm text-gray-300\">\n                    <Users className=\"w-4 h-4 text-primary-green-400 flex-shrink-0\" />\n                    <span className=\"min-w-0 flex-1\">{plan._count.subscribers} abonn√©s</span>\n                  </div>\n                </div>\n\n                {/* Footer avec alignement uniforme */}\n                <div className=\"pt-4 border-t border-white/10 mt-auto\">\n                  <div className=\"flex items-center justify-between mb-3 min-h-[2rem]\">\n                    <div className=\"flex items-center gap-2\">\n                      <Euro className=\"w-5 h-5 text-primary-green-400 flex-shrink-0\" />\n                      <span className=\"text-2xl font-bold text-white\">{plan.price}‚Ç¨</span>\n                    </div>\n                    {plan.pdfFileName && (\n                      <div className=\"flex items-center gap-1 text-xs text-gray-300 flex-shrink-0\">\n                        <Download className=\"w-3 h-3\" />\n                        <span>PDF disponible</span>\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex gap-2\">\n                    <button \n                      onClick={(e) => {\n                        e.stopPropagation()\n                        setSelectedPlan(plan)\n                      }}\n                      className=\"flex-1 px-3 py-2 bg-primary-blue-500 hover:bg-primary-blue-600 rounded-lg font-medium transition-colors text-sm\"\n                    >\n                      Voir plus\n                    </button>\n                    {plan.pdfFileName && (\n                      <button \n                        onClick={(e) => {\n                          e.stopPropagation()\n                          handlePdfPurchase(plan)\n                        }}\n                        className=\"flex-1 px-3 py-2 bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 rounded-lg font-medium transition-all text-sm flex items-center justify-center gap-1\"\n                      >\n                        <Lock className=\"w-3 h-3\" />\n                        Acheter PDF\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </motion.div>\n            ))\n          ) : (\n            <div className=\"col-span-full text-center py-12\">\n              <div className=\"w-24 h-24 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4\">\n                <BookOpen className=\"w-12 h-12 text-gray-400\" />\n              </div>\n              <p className=\"text-xl font-bold text-white mb-2\">Aucun plan disponible</p>\n              <p className=\"text-gray-400\">Les plans d'entra√Ænement seront bient√¥t disponibles</p>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Booking View */}\n      {viewMode === \"booking\" && (\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"max-w-2xl mx-auto\"\n        >\n          <div className=\"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10\">\n            <h3 className=\"text-2xl font-bold mb-6 text-center\">Demander une r√©servation</h3>\n            <p className=\"text-gray-300 text-center mb-8\">\n              Remplis ce formulaire et {coachName} te contactera pour confirmer ta r√©servation\n            </p>\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Nom complet *\n                </label>\n                <input\n                  type=\"text\"\n                  value={bookingForm.clientName}\n                  onChange={(e) => setBookingForm({ ...bookingForm, clientName: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                  placeholder=\"Jean Dupont\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Email *\n                </label>\n                <input\n                  type=\"email\"\n                  value={bookingForm.clientEmail}\n                  onChange={(e) => setBookingForm({ ...bookingForm, clientEmail: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                  placeholder=\"jean@example.com\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  T√©l√©phone\n                </label>\n                <input\n                  type=\"tel\"\n                  value={bookingForm.clientPhone}\n                  onChange={(e) => setBookingForm({ ...bookingForm, clientPhone: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                  placeholder=\"+33 6 12 34 56 78\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Type de service *\n                </label>\n                <select\n                  value={bookingForm.service}\n                  onChange={(e) => setBookingForm({ ...bookingForm, service: e.target.value })}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all\"\n                >\n                  <option value=\"\">S√©lectionner un service</option>\n                  <option value=\"coaching\">Coaching personnalis√©</option>\n                  <option value=\"consultation\">Consultation technique</option>\n                  <option value=\"suivi\">Suivi de performance</option>\n                  <option value=\"autre\">Autre</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                  Message\n                </label>\n                <textarea\n                  value={bookingForm.message}\n                  onChange={(e) => setBookingForm({ ...bookingForm, message: e.target.value })}\n                  rows={4}\n                  className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:border-primary-blue-400 focus:ring-2 focus:ring-primary-blue-400/20 transition-all resize-none\"\n                  placeholder=\"Dis-nous en plus sur tes objectifs...\"\n                />\n              </div>\n\n              {/* Messages de succ√®s/erreur */}\n              {submitSuccess && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className=\"bg-green-500/20 border border-green-500/50 rounded-xl p-4 flex items-start gap-3\"\n                >\n                  <Check className=\"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-green-400\">Demande envoy√©e avec succ√®s !</p>\n                    <p className=\"text-sm text-green-300/80 mt-1\">\n                      {coachName} a re√ßu votre demande et vous contactera bient√¥t pour confirmer les d√©tails.\n                    </p>\n                  </div>\n                </motion.div>\n              )}\n\n              {submitError && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className=\"bg-red-500/20 border border-red-500/50 rounded-xl p-4 flex items-start gap-3\"\n                >\n                  <X className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" />\n                  <div>\n                    <p className=\"font-medium text-red-400\">Erreur</p>\n                    <p className=\"text-sm text-red-300/80 mt-1\">{submitError}</p>\n                  </div>\n                </motion.div>\n              )}\n\n              <button\n                onClick={handleBookingSubmit}\n                disabled={!bookingForm.clientName || !bookingForm.clientEmail || !bookingForm.service || isSubmitting}\n                className=\"w-full py-4 bg-gradient-to-r from-gray-800 to-gray-900 text-white font-bold rounded-xl hover:from-gray-900 hover:to-black hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <svg className=\"animate-spin h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Envoi en cours...\n                  </span>\n                ) : (\n                  \"Envoyer la demande\"\n                )}\n              </button>\n\n              <p className=\"text-xs text-gray-400 text-center\">\n                En envoyant ce formulaire, tu acceptes d'√™tre contact√© par {coachName}\n              </p>\n            </div>\n          </div>\n        </motion.div>\n      )}\n\n      {/* Plan Details Modal */}\n      <AnimatePresence>\n        {selectedPlan && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50\"\n            onClick={() => setSelectedPlan(null)}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-gray-900 rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-white/20\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-white\">{selectedPlan.title}</h3>\n                <button\n                  onClick={() => setSelectedPlan(null)}\n                  className=\"p-2 text-gray-400 hover:text-white transition-colors\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div>\n                  <p className=\"text-gray-300 leading-relaxed\">{selectedPlan.description}</p>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Euro className=\"w-5 h-5 text-primary-green-400\" />\n                      <span className=\"text-sm text-gray-400\">Prix</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan.price}‚Ç¨</p>\n                  </div>\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Calendar className=\"w-5 h-5 text-primary-blue-400\" />\n                      <span className=\"text-sm text-gray-400\">Dur√©e</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan.duration} semaines</p>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Target className=\"w-5 h-5 text-yellow-400\" />\n                      <span className=\"text-sm text-gray-400\">S√©ances</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan._count.sessions}</p>\n                  </div>\n                  <div className=\"bg-white/5 rounded-xl p-4\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <Users className=\"w-5 h-5 text-purple-400\" />\n                      <span className=\"text-sm text-gray-400\">Abonn√©s</span>\n                    </div>\n                    <p className=\"text-2xl font-bold text-white\">{selectedPlan._count.subscribers}</p>\n                  </div>\n                </div>\n\n                <div className=\"pt-6 border-t border-white/10\">\n                  <button\n                    onClick={() => {\n                      setSelectedPlan(null)\n                      setViewMode(\"booking\")\n                      setBookingForm(prev => ({ ...prev, service: `Plan: ${selectedPlan.title}` }))\n                    }}\n                    className=\"w-full py-4 bg-gradient-ocean text-gray-900 font-bold rounded-xl hover:shadow-glow-blue transition-all\"\n                  >\n                    Contacter pour ce plan\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* PDF Purchase Modal */}\n      <PdfPurchaseModal\n        plan={selectedPlanForPdf}\n        isOpen={showPdfPurchase}\n        onClose={() => {\n          setShowPdfPurchase(false)\n          setSelectedPlanForPdf(null)\n        }}\n        coachName={coachName}\n      />\n    </div>\n  )\n}\n\n","size_bytes":22034},"app/(dashboard)/dashboard/profile/galerie-content.tsx":{"content":"\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\nimport Image from \"next/image\"\n\ninterface Media {\n  id: string\n  type: \"IMAGE\" | \"VIDEO\" | \"YOUTUBE\"\n  url: string\n  thumbnail?: string | null\n  title?: string | null\n  description?: string | null\n  position: number\n}\n\nexport function GalerieContent() {\n  const [media, setMedia] = useState<Media[]>([])\n  const [loading, setLoading] = useState(true)\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n\n  // Form state\n  const [type, setType] = useState<\"IMAGE\" | \"VIDEO\" | \"YOUTUBE\">(\"IMAGE\")\n  const [url, setUrl] = useState(\"\")\n  const [title, setTitle] = useState(\"\")\n  const [description, setDescription] = useState(\"\")\n  const [file, setFile] = useState<File | null>(null)\n  const [uploadProgress, setUploadProgress] = useState(false)\n\n  useEffect(() => {\n    fetchMedia()\n  }, [])\n\n  const fetchMedia = async () => {\n    try {\n      const res = await fetch('/api/media')\n      if (res.ok) {\n        const data = await res.json()\n        setMedia(data)\n      } else {\n        console.error('Erreur lors du chargement des m√©dias:', res.status)\n        try {\n          const errorData = await res.json()\n          console.error('D√©tails de l\\'erreur:', errorData)\n        } catch (parseError) {\n          console.error('Impossible de parser l\\'erreur:', parseError)\n        }\n      }\n    } catch (error) {\n      console.error('Fetch media error:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleFileUpload = async (selectedFile: File): Promise<string | null> => {\n    setUploadProgress(true)\n    const formData = new FormData()\n    formData.append('file', selectedFile)\n    formData.append('type', 'media') // Diff√©rent de 'avatar' ou 'cover'\n\n    try {\n      const res = await fetch('/api/upload', {\n        method: 'POST',\n        body: formData,\n      })\n\n      const data = await res.json()\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur lors de l'upload\")\n      }\n\n      return data.url\n    } catch (error: any) {\n      console.error(\"Upload error:\", error)\n      alert(`Erreur lors de l'upload: ${error.message}`)\n      return null\n    } finally {\n      setUploadProgress(false)\n    }\n  }\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsSubmitting(true)\n\n    try {\n      let finalUrl = url\n\n      // Si c'est une image/vid√©o upload√©e\n      if ((type === 'IMAGE' || type === 'VIDEO') && file) {\n        const uploadedUrl = await handleFileUpload(file)\n        if (!uploadedUrl) {\n          setIsSubmitting(false)\n          return\n        }\n        finalUrl = uploadedUrl\n      } else if ((type === 'IMAGE' || type === 'VIDEO') && !file && !url) {\n        alert(\"Veuillez s√©lectionner un fichier ou entrer une URL\")\n        setIsSubmitting(false)\n        return\n      }\n\n      // Si pas d'URL pour YouTube\n      if (type === 'YOUTUBE' && !finalUrl) {\n        alert(\"Veuillez entrer une URL YouTube\")\n        setIsSubmitting(false)\n        return\n      }\n\n      const body = {\n        type,\n        url: finalUrl,\n        title: title || undefined,\n        description: description || undefined,\n      }\n\n      const res = editingId\n        ? await fetch(`/api/media/${editingId}`, {\n            method: 'PATCH',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body),\n          })\n        : await fetch('/api/media', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify(body),\n          })\n\n      if (!res.ok) {\n        const data = await res.json()\n        throw new Error(data.error || 'Erreur')\n      }\n\n      // Reset form\n      setType(\"IMAGE\")\n      setUrl(\"\")\n      setTitle(\"\")\n      setDescription(\"\")\n      setFile(null)\n      setEditingId(null)\n      fetchMedia()\n    } catch (error: any) {\n      console.error('Submit error:', error)\n      alert(`Erreur lors de la sauvegarde: ${error.message}`)\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  const handleEdit = (m: Media) => {\n    setEditingId(m.id)\n    setType(m.type)\n    setUrl(m.url || \"\")\n    setTitle(m.title || \"\")\n    setDescription(m.description || \"\")\n    setFile(null)\n    window.scrollTo({ top: 0, behavior: 'smooth' })\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Supprimer ce m√©dia ?')) return\n\n    try {\n      const res = await fetch(`/api/media/${id}`, {\n        method: 'DELETE',\n      })\n\n      if (!res.ok) {\n        throw new Error('Erreur lors de la suppression')\n      }\n\n      fetchMedia()\n    } catch (error: any) {\n      console.error('Delete error:', error)\n      alert(`Erreur lors de la suppression: ${error.message}`)\n    }\n  }\n\n  const cancelEdit = () => {\n    setEditingId(null)\n    setType(\"IMAGE\")\n    setUrl(\"\")\n    setTitle(\"\")\n    setDescription(\"\")\n    setFile(null)\n  }\n\n  if (loading) return <div className=\"p-6\">Chargement...</div>\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-4xl\">\n      <h1 className=\"text-3xl font-bold mb-6\">Galerie m√©dia üé¨</h1>\n\n      {/* Formulaire d'ajout/√©dition */}\n      <Card className=\"mb-6\">\n        <CardHeader>\n          <CardTitle>{editingId ? 'Modifier le m√©dia' : 'Ajouter un m√©dia'}</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={onSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"type\">Type de m√©dia *</Label>\n              <Select value={type} onValueChange={(v: any) => setType(v)}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"IMAGE\">Image</SelectItem>\n                  <SelectItem value=\"VIDEO\">Vid√©o</SelectItem>\n                  <SelectItem value=\"YOUTUBE\">YouTube</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            {type === \"YOUTUBE\" ? (\n              <div>\n                <Label htmlFor=\"url\">URL YouTube *</Label>\n                <Input\n                  id=\"url\"\n                  type=\"url\"\n                  value={url || \"\"}\n                  onChange={(e) => setUrl(e.target.value)}\n                  placeholder=\"https://www.youtube.com/watch?v=...\"\n                  required\n                />\n              </div>\n            ) : (\n              <div>\n                <Label htmlFor=\"file\">\n                  {type === \"IMAGE\" ? \"Fichier image *\" : \"Fichier vid√©o *\"}\n                </Label>\n                <Input\n                  id=\"file\"\n                  type=\"file\"\n                  accept={type === \"IMAGE\" ? \"image/jpeg,image/jpg,image/png,image/webp\" : \"video/*\"}\n                  onChange={(e) => {\n                    const selectedFile = e.target.files?.[0] || null\n                    if (selectedFile) {\n                      // V√©rifier si c'est un fichier HEIC/HEIF\n                      const fileName = selectedFile.name.toLowerCase()\n                      const fileType = selectedFile.type.toLowerCase()\n                      \n                      if (fileName.endsWith('.heic') || fileName.endsWith('.heif') || \n                          fileType === 'image/heic' || fileType === 'image/heif') {\n                        alert('Les fichiers HEIC/HEIF ne sont pas support√©s. Veuillez convertir votre image en JPEG, PNG ou WebP avant de l\\'uploader.')\n                        e.target.value = '' // Reset le input\n                        setFile(null)\n                        return\n                      }\n                    }\n                    setFile(selectedFile)\n                  }}\n                  required={!editingId}\n                />\n                {editingId && (\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Laissez vide pour conserver le fichier actuel\n                  </p>\n                )}\n              </div>\n            )}\n\n            <div>\n              <Label htmlFor=\"title\">Titre (optionnel)</Label>\n              <Input\n                id=\"title\"\n                type=\"text\"\n                value={title || \"\"}\n                onChange={(e) => setTitle(e.target.value)}\n                placeholder=\"Titre du m√©dia\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description (optionnelle)</Label>\n              <Input\n                id=\"description\"\n                type=\"text\"\n                value={description || \"\"}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Description du m√©dia\"\n              />\n            </div>\n\n            <div className=\"flex gap-2\">\n              <Button type=\"submit\" disabled={isSubmitting || uploadProgress}>\n                {isSubmitting || uploadProgress\n                  ? 'Traitement...'\n                  : editingId\n                  ? 'Mettre √† jour'\n                  : 'Ajouter'}\n              </Button>\n              {editingId && (\n                <Button type=\"button\" variant=\"outline\" onClick={cancelEdit}>\n                  Annuler\n                </Button>\n              )}\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Liste des m√©dias */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Vos m√©dias ({media.length})</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {media.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-8\">\n              Aucun m√©dia ajout√©. Commencez par en ajouter un !\n            </p>\n          ) : (\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n              {media.map((m) => (\n                <Card key={m.id} className=\"overflow-hidden\">\n                  <div className=\"relative aspect-square bg-gray-100\">\n                    {m.type === 'IMAGE' ? (\n                      <Image\n                        src={m.url}\n                        alt={m.title || 'Image'}\n                        fill\n                        className=\"object-cover\"\n                        onLoad={() => {\n                          console.log('Image charg√©e avec succ√®s:', m.url)\n                        }}\n                        onError={(e) => {\n                          console.error('Erreur de chargement de l\\'image:', m.url)\n                          e.currentTarget.style.display = 'none'\n                          // Afficher le fallback\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement\n                          if (fallback) fallback.style.display = 'flex'\n                        }}\n                      />\n                    ) : m.type === 'VIDEO' ? (\n                      <video\n                        src={m.url}\n                        className=\"w-full h-full object-cover cursor-pointer\"\n                        controls\n                        preload=\"metadata\"\n                        onError={(e) => {\n                          console.error('Erreur de chargement de la vid√©o:', m.url)\n                          e.currentTarget.style.display = 'none'\n                          // Afficher le fallback\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement\n                          if (fallback) fallback.style.display = 'flex'\n                        }}\n                        onClick={(e) => {\n                          e.preventDefault()\n                          const video = e.currentTarget\n                          if (video.paused) {\n                            video.play()\n                          } else {\n                            video.pause()\n                          }\n                        }}\n                      />\n                    ) : (\n                      <Image\n                        src={m.thumbnail || ''}\n                        alt={m.title || 'YouTube'}\n                        fill\n                        className=\"object-cover\"\n                        onError={(e) => {\n                          console.error('Erreur de chargement de la miniature YouTube:', m.thumbnail)\n                          e.currentTarget.style.display = 'none'\n                          // Afficher le fallback\n                          const fallback = e.currentTarget.nextElementSibling as HTMLElement\n                          if (fallback) fallback.style.display = 'flex'\n                        }}\n                      />\n                    )}\n                    \n                    {/* Fallback si l'image ne charge pas */}\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-400\" style={{display: 'none'}}>\n                      <div className=\"text-center\">\n                        <div className=\"text-4xl mb-2\">\n                          {m.type === 'IMAGE' ? 'Image' : m.type === 'VIDEO' ? 'Vid√©o' : 'YouTube'}\n                        </div>\n                        <div className=\"text-xs font-medium\">\n                          {m.type === 'IMAGE' ? 'Image' : m.type === 'VIDEO' ? 'Vid√©o' : 'YouTube'}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {m.type === 'YOUTUBE' && (\n                      <div className=\"absolute top-2 right-2 bg-red-600 text-gray-100 px-2 py-1 rounded text-xs font-bold\">\n                        YOUTUBE\n                      </div>\n                    )}\n                  </div>\n                  <div className=\"p-3\">\n                    {m.title && (\n                      <p className=\"font-medium text-sm truncate\">{m.title}</p>\n                    )}\n                    {m.description && (\n                      <p className=\"text-xs text-muted-foreground truncate\">\n                        {m.description}\n                      </p>\n                    )}\n                    <div className=\"flex gap-2 mt-2\">\n                      <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        onClick={() => handleEdit(m)}\n                      >\n                        Modifier\n                      </Button>\n                      <Button\n                        size=\"sm\"\n                        variant=\"destructive\"\n                        onClick={() => handleDelete(m.id)}\n                      >\n                        Supprimer\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n","size_bytes":15039},"app/(auth)/layout.tsx":{"content":"export default function AuthLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50\">\n      {children}\n    </div>\n  )\n}\n","size_bytes":211},"app/api/analytics/export-csv/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { canUserAccessFeature } from \"@/lib/features\"\n\nexport async function GET(request: Request) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.id) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        analytics: {\n          orderBy: { date: 'desc' },\n          take: 365 // Derni√®re ann√©e\n        },\n        links: {\n          select: { id: true, title: true, url: true }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // V√©rifier l'acc√®s Elite\n    const canExport = canUserAccessFeature(profile.plan as any, \"dataExport\")\n    if (!canExport) {\n      return NextResponse.json({ error: \"Fonctionnalit√© r√©serv√©e au plan Elite\" }, { status: 403 })\n    }\n\n    // Pr√©parer les donn√©es CSV\n    const csvRows = []\n    \n    // En-t√™tes\n    csvRows.push([\n      'Date',\n      'Vues',\n      'Vues Uniques',\n      'Clics sur Liens',\n      'Appareil',\n      'Pays',\n      'Referrer'\n    ].join(','))\n\n    // Donn√©es analytics\n    for (const analytic of profile.analytics) {\n      csvRows.push([\n        analytic.date.toISOString().split('T')[0],\n        analytic.views,\n        analytic.uniqueViews,\n        analytic.linkClicks,\n        analytic.device || 'N/A',\n        analytic.country || 'N/A',\n        analytic.referrer || 'N/A'\n      ].join(','))\n    }\n\n    // Ajouter une section pour les liens\n    csvRows.push('') // Ligne vide\n    csvRows.push('LIENS')\n    csvRows.push(['ID', 'Titre', 'URL'].join(','))\n    \n    for (const link of profile.links) {\n      csvRows.push([\n        link.id,\n        `\"${link.title.replace(/\"/g, '\"\"')}\"`, // √âchapper les guillemets\n        link.url\n      ].join(','))\n    }\n\n    // Ajouter les donn√©es d√©mographiques si disponibles\n    const stats = profile.stats as any\n    if (stats?.demographics) {\n      csvRows.push('') // Ligne vide\n      csvRows.push('D√âMOGRAPHIE')\n      \n      // Appareils\n      csvRows.push('Appareils')\n      csvRows.push(['Type', 'Nombre'].join(','))\n      for (const [device, count] of Object.entries(stats.demographics.devices || {})) {\n        csvRows.push([device, count].join(','))\n      }\n      \n      csvRows.push('') // Ligne vide\n      \n      // Navigateurs\n      csvRows.push('Navigateurs')\n      csvRows.push(['Navigateur', 'Nombre'].join(','))\n      for (const [browser, count] of Object.entries(stats.demographics.browsers || {})) {\n        csvRows.push([browser, count].join(','))\n      }\n    }\n\n    // Cr√©er le CSV\n    const csv = csvRows.join('\\n')\n    \n    // Retourner le fichier CSV\n    return new NextResponse(csv, {\n      headers: {\n        'Content-Type': 'text/csv; charset=utf-8',\n        'Content-Disposition': `attachment; filename=\"athlink-analytics-${profile.username}-${new Date().toISOString().split('T')[0]}.csv\"`,\n      },\n    })\n  } catch (error) {\n    console.error(\"Erreur export CSV:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors de l'export\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":3294},"app/api/auth/[...nextauth]/route.ts":{"content":"import { handlers } from \"@/lib/auth\"\n\nexport const { GET, POST } = handlers\n","size_bytes":77},"app/api/analytics/export-pdf/route.ts":{"content":"import { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { NextRequest, NextResponse } from \"next/server\"\nimport jsPDF from \"jspdf\"\n\n// Fonction pour g√©n√©rer des conseils intelligents bas√©s sur les performances r√©elles\nfunction generateSmartAdvice(data: {\n  totalViews: number\n  totalUniqueViews: number\n  totalClicks: number\n  avgViewsPerDay: number\n  days: number\n  linksCount: number\n  racesCount: number\n  sponsorsCount: number\n  mediaCount: number\n}) {\n  const advice = []\n  const {\n    totalViews,\n    totalUniqueViews,\n    totalClicks,\n    avgViewsPerDay,\n    days,\n    linksCount,\n    racesCount,\n    sponsorsCount,\n    mediaCount\n  } = data\n\n  const conversionRate = totalViews > 0 ? (totalClicks / totalViews) * 100 : 0\n  const retentionRate = totalViews > 0 ? (totalUniqueViews / totalViews) * 100 : 0\n\n  // 1. ANALYSE DU TRAFIC\n  if (avgViewsPerDay < 10) {\n    advice.push({\n      priority: 1,\n      icon: 'üöÄ',\n      category: 'VISIBILIT√â',\n      problem: `${avgViewsPerDay} vue${avgViewsPerDay > 1 ? 's' : ''}/jour`,\n      status: 'CRITIQUE',\n      statusColor: [239, 68, 68], // rouge\n      description: 'Votre profil manque de visibilit√©. Voici comment y rem√©dier:',\n      solutions: [\n        `Partagez votre lien athlink.com/${data.days > 0 ? 'username' : ''} sur Instagram en bio`,\n        'Postez 3-5 stories par semaine pointant vers votre profil',\n        'Ajoutez votre lien dans vos posts TikTok/YouTube',\n        `Objectif √† atteindre: 50 vues/jour (vous: ${avgViewsPerDay}/jour)`\n      ]\n    })\n  } else if (avgViewsPerDay < 50) {\n    advice.push({\n      priority: 1,\n      icon: 'üìà',\n      category: 'CROISSANCE',\n      problem: `${avgViewsPerDay} vues/jour`,\n      status: '√Ä AM√âLIORER',\n      statusColor: [245, 158, 11], // orange\n      description: 'Bon d√©but ! Acc√©l√©rez la croissance:',\n      solutions: [\n        'Collaborez avec 2-3 athl√®tes de votre niveau',\n        'Utilisez des hashtags cibl√©s (#running #trail #fitness)',\n        'Cr√©ez du contenu viral (d√©fis, transformations)',\n        `Objectif: 100 vues/jour (vous: ${avgViewsPerDay}/jour)`\n      ]\n    })\n  } else if (avgViewsPerDay >= 50) {\n    advice.push({\n      priority: 1,\n      icon: '‚úÖ',\n      category: 'TRAFIC',\n      problem: `${avgViewsPerDay} vues/jour`,\n      status: 'EXCELLENT',\n      statusColor: [16, 185, 129], // vert\n      description: 'Votre visibilit√© est solide ! Maintenez le cap:',\n      solutions: [\n        'Continuez votre rythme de publication actuel',\n        'Diversifiez vos canaux de promotion',\n        'Analysez vos meilleures sources de trafic',\n        'Objectif: Doubler en 3 mois'\n      ]\n    })\n  }\n\n  // 2. ANALYSE DU TAUX DE CONVERSION\n  if (conversionRate < 2 && totalViews > 10) {\n    advice.push({\n      priority: 2,\n      icon: 'üéØ',\n      category: 'CONVERSION',\n      problem: `${conversionRate.toFixed(1)}% de clics`,\n      status: 'CRITIQUE',\n      statusColor: [239, 68, 68],\n      description: 'Vos visiteurs ne cliquent pas assez. Actions imm√©diates:',\n      solutions: [\n        `R√©duisez vos liens: max 5 liens (vous: ${linksCount})`,\n        'Utilisez des titres accrocheurs: \"üî• D√©couvre mon plan\"',\n        'Mettez en avant votre MEILLEUR contenu en 1er',\n        `Objectif: 5% de clics (vous: ${conversionRate.toFixed(1)}%)`\n      ]\n    })\n  } else if (conversionRate >= 2 && conversionRate < 5 && totalViews > 10) {\n    advice.push({\n      priority: 2,\n      icon: 'üí°',\n      category: 'OPTIMISATION',\n      problem: `${conversionRate.toFixed(1)}% de clics`,\n      status: 'MOYEN',\n      statusColor: [245, 158, 11],\n      description: 'Bon taux de clic, optimisez encore:',\n      solutions: [\n        'Testez diff√©rents titres et √©mojis',\n        'Cr√©ez de l\\'urgence: \"üéÅ Offre limit√©e\"',\n        'A/B testez vos 3 premiers liens',\n        `Objectif: 8% de clics (vous: ${conversionRate.toFixed(1)}%)`\n      ]\n    })\n  } else if (conversionRate >= 5 && totalViews > 10) {\n    advice.push({\n      priority: 2,\n      icon: 'üèÜ',\n      category: 'CONVERSION',\n      problem: `${conversionRate.toFixed(1)}% de clics`,\n      status: 'EXCELLENT',\n      statusColor: [16, 185, 129],\n      description: 'Votre taux de conversion est au top !',\n      solutions: [\n        'Votre strat√©gie fonctionne, continuez ainsi',\n        'Documentez ce qui marche pour r√©pliquer',\n        'Augmentez maintenant votre trafic',\n        'Vous √™tes dans le top 10% des profils'\n      ]\n    })\n  }\n\n  // 3. ANALYSE DU CONTENU\n  const totalContent = linksCount + racesCount + sponsorsCount + mediaCount\n  if (totalContent < 5) {\n    advice.push({\n      priority: 3,\n      icon: 'üìù',\n      category: 'CONTENU',\n      problem: `${totalContent} √©l√©ments seulement`,\n      status: 'INSUFFISANT',\n      statusColor: [239, 68, 68],\n      description: 'Votre profil manque de contenu. Ajoutez imm√©diatement:',\n      solutions: [\n        `${linksCount < 3 ? `‚úì 3-5 liens (vous: ${linksCount})` : '‚úì Liens OK'}`,\n        `${racesCount < 3 ? `‚úì 3-5 comp√©titions (vous: ${racesCount})` : '‚úì Comp√©titions OK'}`,\n        `${sponsorsCount < 2 ? `‚úì 2-3 sponsors (vous: ${sponsorsCount})` : '‚úì Sponsors OK'}`,\n        `${mediaCount < 4 ? `‚úì 4-6 photos/vid√©os (vous: ${mediaCount})` : '‚úì M√©dia OK'}`\n      ]\n    })\n  } else if (totalContent < 15) {\n    advice.push({\n      priority: 3,\n      icon: 'üé®',\n      category: 'CONTENU',\n      problem: `${totalContent} √©l√©ments`,\n      status: 'BIEN',\n      statusColor: [245, 158, 11],\n      description: 'Base solide ! Enrichissez votre profil:',\n      solutions: [\n        'Ajoutez 1-2 √©l√©ments par semaine',\n        'Variez les types de contenu',\n        'Mettez √† jour r√©guli√®rement',\n        `Objectif: 20+ √©l√©ments (vous: ${totalContent})`\n      ]\n    })\n  }\n\n  // 4. ANALYSE DE LA R√âTENTION\n  if (retentionRate < 40 && totalViews > 20) {\n    advice.push({\n      priority: 4,\n      icon: 'üîÑ',\n      category: 'FID√âLISATION',\n      problem: `${retentionRate.toFixed(0)}% de r√©tention`,\n      status: 'FAIBLE',\n      statusColor: [239, 68, 68],\n      description: 'Trop de visiteurs uniques, pas assez de retours:',\n      solutions: [\n        'Cr√©ez du contenu r√©current: \"Lundi Motivation\"',\n        'Offrez un bonus pour abonn√©s: code promo exclusif',\n        'Annoncez vos prochains posts sur Instagram',\n        `Objectif: 60% de r√©tention (vous: ${retentionRate.toFixed(0)}%)`\n      ]\n    })\n  } else if (retentionRate >= 70 && totalViews > 20) {\n    advice.push({\n      priority: 4,\n      icon: 'üí™',\n      category: 'FID√âLISATION',\n      problem: `${retentionRate.toFixed(0)}% de r√©tention`,\n      status: 'EXCELLENT',\n      statusColor: [16, 185, 129],\n      description: 'Vos visiteurs reviennent, c\\'est parfait !',\n      solutions: [\n        'Votre contenu fid√©lise, continuez',\n        'R√©compensez vos visiteurs fid√®les',\n        'Cr√©ez une communaut√© priv√©e',\n        'Vous ma√Ætrisez l\\'engagement'\n      ]\n    })\n  }\n\n  // 5. CONSEIL RAPIDE GAINS si tout est moyen\n  if (advice.length < 3 && totalViews > 10) {\n    advice.push({\n      priority: 5,\n      icon: '‚ö°',\n      category: 'GAINS RAPIDES',\n      problem: 'Optimisation rapide',\n      status: 'ACTION',\n      statusColor: [59, 130, 246], // bleu\n      description: 'Actions rapides pour de gros r√©sultats:',\n      solutions: [\n        '1. Changez votre titre le + cliqu√© (test A/B 48h)',\n        '2. Ajoutez 2 photos de qualit√© cette semaine',\n        '3. Partagez votre profil 1x/jour pendant 7 jours',\n        '4. Analysez vos stats chaque dimanche'\n      ]\n    })\n  }\n\n  // Trier par priorit√© et retourner les 3 meilleurs conseils\n  return advice.sort((a, b) => a.priority - b.priority).slice(0, 3)\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    \n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        links: { where: { isActive: true }, orderBy: { position: 'asc' } },\n        races: true,\n        sponsors: true,\n        media: true\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // R√©cup√©rer les param√®tres de la requ√™te\n    const { days = 7 } = await request.json()\n    \n    // Calculer la date de d√©but\n    const startDate = new Date()\n    startDate.setDate(startDate.getDate() - days)\n\n    // R√©cup√©rer les analytics pour la p√©riode\n    const analytics = await prisma.analytics.findMany({\n      where: {\n        profileId: profile.id,\n        date: { gte: startDate }\n      },\n      orderBy: { date: 'asc' }\n    })\n\n    // R√©cup√©rer les clics sur les liens\n    const linkClicks = await prisma.link.aggregate({\n      where: { profileId: profile.id },\n      _sum: { clicks: true }\n    })\n\n    // Calculer les totaux avec pr√©cision\n    const totalViews = analytics.reduce((sum, day) => sum + (day.views || 0), 0)\n    const totalUniqueViews = analytics.reduce((sum, day) => sum + (day.uniqueViews || 0), 0)\n    const totalClicks = linkClicks._sum.clicks || 0\n    const clickRate = totalViews > 0 ? ((totalClicks / totalViews) * 100) : 0\n    \n    // Calculer la moyenne par jour\n    const avgViewsPerDay = days > 0 ? Math.round(totalViews / days) : 0\n    const avgUniquePerDay = days > 0 ? Math.round(totalUniqueViews / days) : 0\n\n    // Calculer les m√©triques de performance\n    const conversionRate = totalViews > 0 ? (totalClicks / totalViews) * 100 : 0\n    const engagementScore = Math.min(100, Math.round((conversionRate / 10) * 100))\n    \n    // Calculer le taux de croissance\n    const midPoint = Math.floor(analytics.length / 2)\n    const firstHalf = analytics.slice(0, midPoint)\n    const secondHalf = analytics.slice(midPoint)\n    const firstHalfAvg = firstHalf.length > 0 \n      ? firstHalf.reduce((sum, a) => sum + a.views, 0) / firstHalf.length \n      : 0\n    const secondHalfAvg = secondHalf.length > 0 \n      ? secondHalf.reduce((sum, a) => sum + a.views, 0) / secondHalf.length \n      : 0\n    const growthRate = firstHalfAvg > 0 \n      ? Math.round(((secondHalfAvg - firstHalfAvg) / firstHalfAvg) * 100) \n      : 0\n\n    // Cr√©er le PDF (format A4)\n    const pdf = new jsPDF()\n    \n    // Configuration des couleurs (RGB)\n    const colors = {\n      primary: [31, 41, 55],      // gray-800\n      secondary: [107, 114, 128], // gray-500\n      accent: [239, 68, 68],      // red-500\n      success: [16, 185, 129],    // emerald-500\n      blue: [59, 130, 246],       // blue-500\n      orange: [245, 158, 11]      // amber-500\n    }\n\n    // Fonction helper pour d√©finir les couleurs\n    const setColor = (color: number[]) => pdf.setTextColor(color[0], color[1], color[2])\n    const setDrawColor = (color: number[]) => pdf.setDrawColor(color[0], color[1], color[2])\n    const setFillColor = (color: number[]) => pdf.setFillColor(color[0], color[1], color[2])\n\n    // === EN-T√äTE ===\n    let yPos = 20\n    \n    // Logo/Titre\n    pdf.setFontSize(20)\n    setColor(colors.accent)\n    pdf.text('ATHLINK', 20, yPos)\n    \n    // Date et p√©riode\n    pdf.setFontSize(9)\n    setColor(colors.secondary)\n    const dateStr = new Date().toLocaleDateString('fr-FR', { \n      year: 'numeric', \n      month: 'long', \n      day: 'numeric' \n    })\n    pdf.text(dateStr, 190, yPos, { align: 'right' })\n    \n    yPos += 10\n    \n    // Titre du rapport\n    pdf.setFontSize(16)\n    setColor(colors.primary)\n    pdf.text(`Rapport de Performance - ${profile.displayName}`, 20, yPos)\n    \n    yPos += 6\n    pdf.setFontSize(8)\n    setColor(colors.secondary)\n    pdf.text(`@${profile.username} ‚Ä¢ P√©riode: ${days} jour${days > 1 ? 's' : ''}`, 20, yPos)\n    \n    // Ligne de s√©paration\n    yPos += 5\n    setDrawColor(colors.accent)\n    pdf.setLineWidth(0.5)\n    pdf.line(20, yPos, 190, yPos)\n    \n    // === STATISTIQUES PRINCIPALES ===\n    yPos += 10\n    pdf.setFontSize(12)\n    setColor(colors.primary)\n    pdf.text('üìä VUE D\\'ENSEMBLE', 20, yPos)\n    \n    yPos += 8\n    \n    // Grille de stats 2x3 avec design am√©lior√©\n    const stats = [\n      { \n        label: 'VUES TOTALES', \n        value: totalViews.toString(), \n        sublabel: `${avgViewsPerDay}/jour en moyenne`,\n        color: colors.blue \n      },\n      { \n        label: 'VISITEURS UNIQUES', \n        value: totalUniqueViews.toString(), \n        sublabel: `${avgUniquePerDay}/jour en moyenne`,\n        color: colors.success \n      },\n      { \n        label: 'CLICS TOTAUX', \n        value: totalClicks.toString(), \n        sublabel: `${conversionRate.toFixed(1)}% taux de conversion`,\n        color: colors.orange \n      },\n      { \n        label: 'LIENS ACTIFS', \n        value: profile.links.length.toString(), \n        sublabel: `${(totalClicks / Math.max(profile.links.length, 1)).toFixed(0)} clics/lien`,\n        color: colors.accent \n      },\n      { \n        label: 'TAUX D\\'ENGAGEMENT', \n        value: `${engagementScore}/100`, \n        sublabel: engagementScore > 50 ? 'Excellent' : engagementScore > 25 ? 'Moyen' : '√Ä am√©liorer',\n        color: engagementScore > 50 ? colors.success : engagementScore > 25 ? colors.orange : colors.accent \n      },\n      { \n        label: 'CROISSANCE', \n        value: `${growthRate > 0 ? '+' : ''}${growthRate}%`, \n        sublabel: growthRate > 10 ? 'Forte croissance' : growthRate > 0 ? 'En progression' : 'Stable',\n        color: growthRate > 10 ? colors.success : growthRate > 0 ? colors.blue : colors.secondary \n      }\n    ]\n\n    stats.forEach((stat, index) => {\n      const x = 20 + (index % 3) * 60\n      const y = yPos + Math.floor(index / 3) * 22\n      \n      // Cadre color√©\n      setFillColor(stat.color)\n      pdf.setFillColor(stat.color[0], stat.color[1], stat.color[2], 0.1)\n      pdf.rect(x, y - 2, 55, 18, 'F')\n      \n      setDrawColor(stat.color)\n      pdf.setLineWidth(0.3)\n      pdf.rect(x, y - 2, 55, 18)\n      \n      // Label\n      pdf.setFontSize(6)\n      setColor(colors.secondary)\n      pdf.text(stat.label, x + 2, y + 2)\n      \n      // Valeur\n      pdf.setFontSize(14)\n      setColor(stat.color)\n      pdf.text(stat.value, x + 2, y + 9)\n      \n      // Sous-label\n      pdf.setFontSize(6)\n      setColor(colors.secondary)\n      pdf.text(stat.sublabel, x + 2, y + 14)\n    })\n\n    yPos += 50\n\n    // === PERFORMANCE GLOBALE ===\n    pdf.setFontSize(12)\n    setColor(colors.primary)\n    pdf.text('üìà PERFORMANCE GLOBALE', 20, yPos)\n    yPos += 8\n\n    // Calcul du score global\n    let globalScore = 0\n    let scoreDetails = []\n\n    // Score de trafic (40% du total)\n    const trafficScore = Math.min(40, (avgViewsPerDay / 100) * 40)\n    globalScore += trafficScore\n    scoreDetails.push(`Trafic: ${trafficScore.toFixed(0)}/40`)\n\n    // Score de conversion (30% du total)\n    const conversionScore = Math.min(30, (conversionRate / 10) * 30)\n    globalScore += conversionScore\n    scoreDetails.push(`Conversion: ${conversionScore.toFixed(0)}/30`)\n\n    // Score de contenu (20% du total)\n    const totalContent = profile.links.length + profile.races.length + profile.sponsors.length + profile.media.length\n    const contentScore = Math.min(20, (totalContent / 20) * 20)\n    globalScore += contentScore\n    scoreDetails.push(`Contenu: ${contentScore.toFixed(0)}/20`)\n\n    // Score d'engagement (10% du total)\n    const retentionRate = totalViews > 0 ? (totalUniqueViews / totalViews) * 100 : 0\n    const engagementGlobalScore = Math.min(10, (retentionRate / 70) * 10)\n    globalScore += engagementGlobalScore\n    scoreDetails.push(`Fid√©lit√©: ${engagementGlobalScore.toFixed(0)}/10`)\n\n    // Afficher le score global avec design impactant\n    const scoreColor = globalScore >= 70 ? colors.success : globalScore >= 40 ? colors.orange : colors.accent\n    const scoreStatus = globalScore >= 70 ? 'EXCELLENT' : globalScore >= 40 ? 'MOYEN' : '√Ä AM√âLIORER'\n\n    // Cadre du score\n    setFillColor(scoreColor)\n    pdf.setFillColor(scoreColor[0], scoreColor[1], scoreColor[2], 0.1)\n    pdf.rect(20, yPos, 170, 25, 'F')\n    \n    setDrawColor(scoreColor)\n    pdf.setLineWidth(0.5)\n    pdf.rect(20, yPos, 170, 25)\n\n    // Score principal\n    pdf.setFontSize(24)\n    setColor(scoreColor)\n    pdf.text(`${Math.round(globalScore)}/100`, 30, yPos + 10)\n\n    // Status\n    pdf.setFontSize(10)\n    pdf.text(scoreStatus, 30, yPos + 17)\n\n    // D√©tails du score\n    pdf.setFontSize(7)\n    setColor(colors.secondary)\n    scoreDetails.forEach((detail, index) => {\n      pdf.text(detail, 90 + (index % 2) * 40, yPos + 7 + Math.floor(index / 2) * 6)\n    })\n\n    yPos += 30\n\n    // === CONSEILS D'OPTIMISATION PERSONNALIS√âS ===\n    pdf.setFontSize(12)\n    setColor(colors.accent)\n    pdf.text('üí° VOS CONSEILS PERSONNALIS√âS', 20, yPos)\n    yPos += 3\n    \n    pdf.setFontSize(7)\n    setColor(colors.secondary)\n    pdf.text('Bas√©s sur l\\'analyse de vos performances r√©elles', 20, yPos)\n    yPos += 7\n\n    // G√©n√©rer les conseils intelligents\n    const smartAdvice = generateSmartAdvice({\n      totalViews,\n      totalUniqueViews,\n      totalClicks,\n      avgViewsPerDay,\n      days,\n      linksCount: profile.links.length,\n      racesCount: profile.races.length,\n      sponsorsCount: profile.sponsors.length,\n      mediaCount: profile.media.length\n    })\n\n    // Afficher les conseils avec design moderne\n    smartAdvice.forEach((item, index) => {\n      if (yPos > 240) return // √âviter les d√©bordements\n\n      // Cadre du conseil\n      setFillColor(item.statusColor)\n      pdf.setFillColor(item.statusColor[0], item.statusColor[1], item.statusColor[2], 0.05)\n      pdf.rect(20, yPos, 170, 35, 'F')\n      \n      setDrawColor(item.statusColor)\n      pdf.setLineWidth(0.3)\n      pdf.rect(20, yPos, 170, 35)\n\n      // En-t√™te du conseil\n      pdf.setFontSize(9)\n      setColor(item.statusColor)\n      pdf.text(`${item.icon} ${item.category}`, 23, yPos + 5)\n\n      // Status badge\n      pdf.setFontSize(6)\n      pdf.text(item.status, 160, yPos + 5)\n\n      // Probl√®me identifi√©\n      pdf.setFontSize(7)\n      setColor(colors.primary)\n      pdf.text(`‚Üí ${item.problem}`, 23, yPos + 10)\n\n      // Description\n      pdf.setFontSize(6)\n      setColor(colors.secondary)\n      pdf.text(item.description, 23, yPos + 15)\n\n      // Solutions avec num√©rotation\n      pdf.setFontSize(6)\n      setColor(colors.primary)\n      item.solutions.forEach((solution, solIndex) => {\n        const lines = pdf.splitTextToSize(solution, 160)\n        lines.forEach((line: string, lineIndex: number) => {\n          pdf.text(lineIndex === 0 ? `${solIndex + 1}. ${line}` : `   ${line}`, 25, yPos + 20 + (solIndex * 4) + (lineIndex * 3))\n        })\n      })\n\n      yPos += 38\n    })\n\n    // === PIED DE PAGE ===\n    const footerY = 280\n    \n    // Ligne de s√©paration\n    setDrawColor(colors.secondary)\n    pdf.setLineWidth(0.3)\n    pdf.line(20, footerY - 5, 190, footerY - 5)\n    \n    pdf.setFontSize(7)\n    setColor(colors.secondary)\n    pdf.text('G√©n√©r√© par Athlink ‚Ä¢ athlink.com', 20, footerY)\n    pdf.text(`Rapport cr√©√© le ${new Date().toLocaleString('fr-FR')}`, 190, footerY, { align: 'right' })\n\n    // Convertir en buffer\n    const pdfBuffer = Buffer.from(pdf.output('arraybuffer'))\n\n    // Retourner le PDF\n    return new NextResponse(pdfBuffer, {\n      headers: {\n        'Content-Type': 'application/pdf',\n        'Content-Disposition': `attachment; filename=\"athlink-performance-${profile.username}-${days}j-${new Date().toISOString().split('T')[0]}.pdf\"`\n      }\n    })\n\n  } catch (error) {\n    console.error('Erreur g√©n√©ration PDF:', error)\n    return NextResponse.json({ error: \"Erreur lors de la g√©n√©ration du PDF\" }, { status: 500 })\n  }\n}\n","size_bytes":19745},"app/(auth)/login/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { signIn } from \"next-auth/react\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { loginSchema, type LoginInput } from \"@/lib/validations\"\nimport { toast } from \"sonner\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport { ArrowRight, Zap } from \"lucide-react\"\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const form = useForm<LoginInput>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    }\n  })\n\n  async function onSubmit(values: LoginInput) {\n    setIsLoading(true)\n    \n    try {\n      const result = await signIn(\"credentials\", {\n        email: values.email,\n        password: values.password,\n        redirect: false,\n      })\n\n      if (result?.error) {\n        toast.error(\"Email ou mot de passe incorrect\")\n        return\n      }\n\n      toast.success(\"Connexion r√©ussie !\")\n      router.push(\"/dashboard\")\n      router.refresh()\n    } catch {\n      toast.error(\"Une erreur est survenue\")\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col lg:flex-row\">\n      {/* Left Panel - Form */}\n      <div className=\"flex-1 flex items-center justify-center p-4 sm:p-6 lg:p-8 bg-white relative\">\n        {/* Logo */}\n        <Link href=\"/\" className=\"absolute top-4 sm:top-6 lg:top-10 left-4 sm:left-6 lg:left-10 flex items-center gap-2\">\n          <div className=\"w-8 h-8 sm:w-10 sm:h-10 rounded-xl bg-gradient-hero\" />\n          <span className=\"font-black text-xl sm:text-2xl bg-gradient-hero bg-clip-text text-transparent\">\n            Athlink\n          </span>\n        </Link>\n\n        {/* Form Container */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          className=\"w-full max-w-md\"\n        >\n          <div className=\"mb-8 sm:mb-10\">\n            <h1 className=\"text-3xl sm:text-4xl md:text-5xl font-black bg-gradient-to-r from-primary-600 to-quaternary-600 bg-clip-text text-transparent mb-3 sm:mb-4\">\n              Bon retour\n            </h1>\n            <p className=\"text-base sm:text-lg text-gray-600\">\n              Connecte-toi √† ton profil athl√®te\n            </p>\n          </div>\n\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            <div>\n              <Label htmlFor=\"email\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Email\n              </Label>\n              <Input \n                id=\"email\" \n                type=\"email\"\n                {...form.register(\"email\")} \n                placeholder=\"thomas@example.com\"\n                className=\"h-11 sm:h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.email && (\n                <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.email.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"password\" className=\"text-sm font-semibold text-gray-700 mb-2 block\">\n                Mot de passe\n              </Label>\n              <Input \n                id=\"password\" \n                type=\"password\"\n                {...form.register(\"password\")} \n                placeholder=\"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢\"\n                className=\"h-12 px-4 rounded-xl border-2 border-gray-200 focus:border-primary-500 transition-colors\"\n              />\n              {form.formState.errors.password && (\n                <p className=\"text-sm text-danger-600 mt-2 font-medium\">\n                  {form.formState.errors.password.message}\n                </p>\n              )}\n            </div>\n\n            <Button \n              type=\"submit\" \n              disabled={isLoading}\n              className=\"w-full h-14 bg-gradient-ocean hover:shadow-glow-blue text-gray-900 font-bold text-lg rounded-full transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isLoading ? (\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-5 h-5 border-2 border-gray-900 border-t-transparent rounded-full animate-spin\" />\n                  Connexion...\n                </div>\n              ) : (\n                <div className=\"flex items-center gap-2\">\n                  Se connecter\n                  <ArrowRight className=\"w-5 h-5\" />\n                </div>\n              )}\n            </Button>\n          </form>\n\n          {/* Google Sign In - Affich√© seulement si configur√© */}\n          {process.env.NEXT_PUBLIC_GOOGLE_OAUTH_ENABLED === \"true\" && (\n            <>\n              {/* Separator */}\n              <div className=\"flex items-center gap-4 my-6\">\n                <div className=\"flex-1 h-px bg-gray-200\" />\n                <span className=\"text-sm text-gray-500 font-medium\">OU</span>\n                <div className=\"flex-1 h-px bg-gray-200\" />\n              </div>\n\n              {/* Google Sign In */}\n              <button\n                onClick={() => signIn(\"google\", { callbackUrl: \"/dashboard\" })}\n                className=\"w-full h-14 bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold text-base rounded-full transition-all hover:shadow-md flex items-center justify-center gap-3\"\n              >\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                  <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                  <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                  <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                </svg>\n                Continuer avec Google\n              </button>\n            </>\n          )}\n\n          <p className=\"text-center text-sm text-gray-600 mt-8\">\n            Pas encore de compte ?{\" \"}\n            <Link href=\"/signup\" className=\"text-primary-600 hover:text-primary-700 font-bold transition-colors\">\n              Cr√©er un compte\n            </Link>\n          </p>\n        </motion.div>\n      </div>\n\n      {/* Right Panel - Visual */}\n      <div className=\"hidden lg:flex flex-1 relative overflow-hidden min-h-[200px] lg:min-h-0\">\n        <div className=\"absolute inset-0 bg-gradient-hero\" />\n        \n        {/* Animated shapes */}\n        <div className=\"absolute inset-0 overflow-hidden pointer-events-none opacity-20\">\n          <motion.div\n            animate={{\n              scale: [1, 1.2, 1],\n              rotate: [0, 90, 0],\n            }}\n            transition={{\n              duration: 20,\n              repeat: Infinity,\n              ease: \"linear\"\n            }}\n            className=\"absolute top-1/4 right-1/4 w-96 h-96 bg-white rounded-full blur-3xl\"\n          />\n        </div>\n\n        {/* Content */}\n        <div className=\"relative z-10 flex items-center justify-center p-16 text-gray-900\">\n          <div className=\"max-w-lg\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.8 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.6, delay: 0.2 }}\n              className=\"w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center mb-8\"\n            >\n              <Zap className=\"w-10 h-10\" />\n            </motion.div>\n\n            <motion.h2\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.3 }}\n              className=\"text-5xl font-black mb-6 leading-tight\"\n            >\n              Reprends l√† o√π tu t&apos;es arr√™t√©\n            </motion.h2>\n\n            <motion.p\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.4 }}\n              className=\"text-xl opacity-90 leading-relaxed mb-8\"\n            >\n              Acc√®de √† ton dashboard, g√®re tes liens, planifie tes courses et bien plus encore.\n            </motion.p>\n\n            {/* Stats */}\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ duration: 0.6, delay: 0.5 }}\n              className=\"flex gap-12\"\n            >\n              {[\n                { value: \"100%\", label: \"Gratuit\" },\n              ].map((stat, i) => (\n                <div key={i}>\n                  <div className=\"text-4xl font-black mb-1\">{stat.value}</div>\n                  <div className=\"text-sm opacity-70 uppercase tracking-wider font-semibold\">\n                    {stat.label}\n                  </div>\n                </div>\n              ))}\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":9654},"app/(dashboard)/layout.tsx":{"content":"import { auth } from \"@/lib/auth\"\nimport { redirect } from \"next/navigation\"\nimport { prisma } from \"@/lib/db\"\nimport { DashboardLayoutWrapper } from \"@/components/ui-pro/dashboard-layout-wrapper\"\n\nexport default async function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const session = await auth()\n\n  if (!session) {\n    redirect(\"/login\")\n  }\n\n  // Get user profile for sidebar\n  const profile = await prisma.profile.findUnique({\n    where: { userId: session.user.id },\n    select: {\n      username: true,\n      displayName: true,\n      avatarUrl: true,\n      plan: true,\n    }\n  })\n\n  if (!profile) {\n    redirect(\"/dashboard\")\n  }\n\n  return (\n    <DashboardLayoutWrapper\n      username={profile.username}\n      displayName={profile.displayName}\n      avatarUrl={profile.avatarUrl}\n      plan={profile.plan}\n    >\n      {children}\n    </DashboardLayoutWrapper>\n  )\n}","size_bytes":897},"app/layout.tsx":{"content":"import type { Metadata } from \"next\";\nimport { Inter } from \"next/font/google\";\nimport \"./globals.css\";\nimport { Toaster } from \"sonner\";\nimport { ConditionalNavbar } from \"@/components/ConditionalNavbar\";\nimport Script from \"next/script\";\n\nconst inter = Inter({\n  subsets: [\"latin\"],\n  variable: \"--font-sans\",\n});\n\nexport const metadata: Metadata = {\n  title: \"Athlink - Le Profil Digital des Athl√®tes\",\n  description: \"Partage tes performances, trouve des sponsors, d√©veloppe ta communaut√©. Le link-in-bio con√ßu pour les sportifs.\",\n  keywords: [\"athl√®te\", \"running\", \"cyclisme\", \"triathlon\", \"link-in-bio\", \"sponsor\", \"performance\"],\n  icons: {\n    icon: [\n      { url: '/favicon.png', type: 'image/png' },\n    ],\n    shortcut: '/favicon.png',\n    apple: '/apple-icon.png',\n  },\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"fr\">\n      <body className={`${inter.variable} font-sans antialiased`}>\n        <ConditionalNavbar />\n        {children}\n        <Toaster position=\"top-center\" richColors />\n        \n        <Script\n          src=\"https://www.googletagmanager.com/gtag/js?id=AW-17677472722\"\n          strategy=\"afterInteractive\"\n        />\n        <Script id=\"google-analytics\" strategy=\"afterInteractive\">\n          {`\n            window.dataLayer = window.dataLayer || [];\n            function gtag(){dataLayer.push(arguments);}\n            gtag('js', new Date());\n            gtag('config', 'AW-17677472722');\n          `}\n        </Script>\n        \n        <Script\n          src=\"https://cdn.iubenda.com/iubenda.js\"\n          strategy=\"afterInteractive\"\n        />\n      </body>\n    </html>\n  );\n}\n","size_bytes":1702},"app/(dashboard)/dashboard/sources/liens-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { useForm } from \"react-hook-form\"\nimport { zodResolver } from \"@hookform/resolvers/zod\"\nimport { linkSchema, type LinkInput } from \"@/lib/validations\"\nimport { toast } from \"sonner\"\nimport { \n  Plus, \n  Edit2, \n  Trash2, \n  Link2, \n  ExternalLink, \n  GripVertical,\n  Eye,\n  EyeOff,\n  BarChart3,\n  Copy,\n  Check\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface Link extends LinkInput {\n  id: string\n  position: number\n  clicks: number\n  isActive: boolean\n}\n\nexport function LiensContent() {\n  const [links, setLinks] = useState<Link[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [editingId, setEditingId] = useState<string | null>(null)\n  const [showForm, setShowForm] = useState(false)\n  const [copiedId, setCopiedId] = useState<string | null>(null)\n\n  const form = useForm<LinkInput>({\n    resolver: zodResolver(linkSchema),\n    defaultValues: {\n      title: \"\",\n      url: \"\",\n      description: \"\",\n      icon: \"üîó\",\n    }\n  })\n\n  useEffect(() => {\n    fetchLinks()\n  }, [])\n\n  async function fetchLinks() {\n    try {\n      const res = await fetch(\"/api/links\")\n      const data = await res.json()\n      setLinks(data.links || [])\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement des liens\")\n    }\n  }\n\n  async function onSubmit(values: LinkInput) {\n    setIsLoading(true)\n    try {\n      const url = editingId ? `/api/links/${editingId}` : \"/api/links\"\n      const method = editingId ? \"PATCH\" : \"POST\"\n      \n      const res = await fetch(url, {\n        method,\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(values)\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur\")\n      }\n\n      toast.success(editingId ? \"Lien modifi√© !\" : \"Lien cr√©√© !\")\n      form.reset()\n      setEditingId(null)\n      setShowForm(false)\n      fetchLinks()\n    } catch (error: any) {\n      toast.error(error.message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  async function deleteLink(id: string) {\n    if (!confirm(\"Supprimer ce lien ?\")) return\n\n    try {\n      const res = await fetch(`/api/links/${id}`, {\n        method: \"DELETE\",\n      })\n\n      if (!res.ok) {\n        throw new Error(\"Erreur lors de la suppression\")\n      }\n\n      toast.success(\"Lien supprim√© !\")\n      fetchLinks()\n    } catch (error: any) {\n      toast.error(error.message)\n    }\n  }\n\n  function editLink(link: Link) {\n    setEditingId(link.id)\n    setShowForm(true)\n    form.setValue(\"title\", link.title)\n    form.setValue(\"url\", link.url)\n    form.setValue(\"description\", link.description || \"\")\n    form.setValue(\"icon\", link.icon || \"\")\n  }\n\n  function copyToClipboard(text: string, id: string) {\n    navigator.clipboard.writeText(text)\n    setCopiedId(id)\n    setTimeout(() => setCopiedId(null), 2000)\n    toast.success(\"Lien copi√© !\")\n  }\n\n  const totalClicks = links.reduce((sum, link) => sum + link.clicks, 0)\n  const activeLinks = links.filter(link => link.isActive).length\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: 0.5 }}\n      className=\"space-y-6\"\n    >\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Link2 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Liens</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{links.length}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <Eye className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Liens Actifs</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{activeLinks}</p>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 border border-gray-200\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-gray-800 rounded-lg\">\n              <BarChart3 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-gray-600 font-medium\">Total Clics</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{totalClicks}</p>\n            </div>\n          </div>\n        </motion.div>\n      </div>\n\n      {/* Add Button */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"flex justify-between items-center\"\n      >\n        <div>\n          <h2 className=\"text-xl font-semibold text-gray-900\">Mes Liens</h2>\n          <p className=\"text-gray-600\">G√©rez vos liens personnalis√©s</p>\n        </div>\n        <motion.button\n          whileHover={{ scale: 1.05 }}\n          whileTap={{ scale: 0.95 }}\n          onClick={() => {\n            setShowForm(!showForm)\n            setEditingId(null)\n            form.reset()\n          }}\n          className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-4 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 shadow-lg\"\n        >\n          <Plus className=\"w-4 h-4\" />\n          {showForm ? \"Annuler\" : \"Nouveau Lien\"}\n        </motion.button>\n      </motion.div>\n\n      {/* Form */}\n      <AnimatePresence>\n        {showForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.3 }}\n            className=\"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden\"\n          >\n            <div className=\"p-6\">\n              <h3 className=\"text-lg font-semibold mb-4\">\n                {editingId ? \"Modifier le lien\" : \"Cr√©er un nouveau lien\"}\n              </h3>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"title\">Titre *</Label>\n                    <Input\n                      id=\"title\"\n                      {...form.register(\"title\")}\n                      placeholder=\"Mon lien\"\n                      className=\"mt-1\"\n                    />\n                    {form.formState.errors.title && (\n                      <p className=\"text-sm text-red-500 mt-1\">\n                        {form.formState.errors.title.message}\n                      </p>\n                    )}\n                  </div>\n                  <div>\n                    <Label htmlFor=\"url\">URL *</Label>\n                    <Input\n                      id=\"url\"\n                      type=\"url\"\n                      {...form.register(\"url\")}\n                      placeholder=\"https://example.com\"\n                      className=\"mt-1\"\n                    />\n                    {form.formState.errors.url && (\n                      <p className=\"text-sm text-red-500 mt-1\">\n                        {form.formState.errors.url.message}\n                      </p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label htmlFor=\"description\">Description</Label>\n                    <Input\n                      id=\"description\"\n                      {...form.register(\"description\")}\n                      placeholder=\"Description optionnelle\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"icon\">Ic√¥ne</Label>\n                    <Input\n                      id=\"icon\"\n                      {...form.register(\"icon\")}\n                      placeholder=\"üîó\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </div>\n                <div className=\"flex gap-2\">\n                  <motion.button\n                    type=\"submit\"\n                    disabled={isLoading}\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    className=\"flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-2 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200 disabled:opacity-50\"\n                  >\n                    {isLoading ? (\n                      <>\n                        <motion.div\n                          animate={{ rotate: 360 }}\n                          transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n                          className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full\"\n                        />\n                        Sauvegarde...\n                      </>\n                    ) : (\n                      <>\n                        <Plus className=\"w-4 h-4\" />\n                        {editingId ? \"Modifier\" : \"Cr√©er\"}\n                      </>\n                    )}\n                  </motion.button>\n                </div>\n              </form>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Links List */}\n      <div className=\"space-y-3\">\n        <AnimatePresence>\n          {links.map((link, index) => (\n            <motion.div\n              key={link.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -20 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all duration-200 group\"\n            >\n              <div className=\"p-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-4\">\n                    <motion.div\n                      whileHover={{ scale: 1.1, rotate: 5 }}\n                      className=\"text-3xl cursor-pointer\"\n                    >\n                      {link.icon}\n                    </motion.div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold text-gray-900\">{link.title}</h3>\n                        <div className={cn(\n                          \"px-2 py-1 rounded-full text-xs font-medium\",\n                          link.isActive \n                            ? \"bg-green-100 text-green-800\" \n                            : \"bg-gray-100 text-gray-800\"\n                        )}>\n                          {link.isActive ? \"Actif\" : \"Inactif\"}\n                        </div>\n                      </div>\n                      <p className=\"text-sm text-gray-600 truncate max-w-md\">{link.url}</p>\n                      {link.description && (\n                        <p className=\"text-sm text-gray-500 mt-1\">{link.description}</p>\n                      )}\n                      <div className=\"flex items-center gap-4 mt-2\">\n                        <div className=\"flex items-center gap-1 text-sm text-gray-500\">\n                          <BarChart3 className=\"w-4 h-4\" />\n                          {link.clicks} clics\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => copyToClipboard(link.url, link.id)}\n                      className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Copier le lien\"\n                    >\n                      {copiedId === link.id ? (\n                        <Check className=\"w-4 h-4 text-green-600\" />\n                      ) : (\n                        <Copy className=\"w-4 h-4\" />\n                      )}\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => window.open(link.url, '_blank')}\n                      className=\"p-2 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\n                      title=\"Ouvrir le lien\"\n                    >\n                      <ExternalLink className=\"w-4 h-4\" />\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => editLink(link)}\n                      className=\"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                      title=\"Modifier\"\n                    >\n                      <Edit2 className=\"w-4 h-4\" />\n                    </motion.button>\n                    \n                    <motion.button\n                      whileHover={{ scale: 1.1 }}\n                      whileTap={{ scale: 0.9 }}\n                      onClick={() => deleteLink(link.id)}\n                      className=\"p-2 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                      title=\"Supprimer\"\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </motion.button>\n                  </div>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </AnimatePresence>\n        \n        {links.length === 0 && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"text-center py-12\"\n          >\n            <div className=\"text-6xl mb-4\">üîó</div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">Aucun lien cr√©√©</h3>\n            <p className=\"text-gray-600 mb-4\">Commencez par cr√©er votre premier lien personnalis√©</p>\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => setShowForm(true)}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-6 py-3 rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-200\"\n            >\n              <Plus className=\"w-4 h-4\" />\n              Cr√©er mon premier lien\n            </motion.button>\n          </motion.div>\n        )}\n      </div>\n    </motion.div>\n  )\n}","size_bytes":16118},"app/(dashboard)/dashboard/coaching/bookings/bookings-client-pro.tsx":{"content":"\"use client\"\n\nimport { useState, useMemo } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { Plus, Calendar as CalendarIcon, Clock, User, Mail, Phone, Euro, Check, X, Edit3, Trash2, Settings, ChevronRight, AlertCircle, TrendingUp } from \"lucide-react\"\n\ninterface Booking {\n  id: string\n  clientName: string\n  clientEmail: string\n  clientPhone?: string\n  date: string\n  startTime: string\n  endTime: string\n  duration: number\n  service: string\n  price: number\n  status: \"PENDING\" | \"CONFIRMED\" | \"COMPLETED\" | \"CANCELLED\"\n  notes?: string\n  createdAt: string\n  isPublicRequest?: boolean\n}\n\ninterface BookingsClientProps {\n  initialBookings: Booking[]\n  profileId: string\n  coachName: string\n}\n\nexport function BookingsClientPro({ initialBookings, profileId, coachName }: BookingsClientProps) {\n  const [bookings, setBookings] = useState<Booking[]>(initialBookings)\n  const [showCreateBooking, setShowCreateBooking] = useState(false)\n  const [selectedBooking, setSelectedBooking] = useState<Booking | null>(null)\n  const [viewMode, setViewMode] = useState<\"calendar\" | \"list\">(\"calendar\")\n  const [filterStatus, setFilterStatus] = useState<\"all\" | \"PENDING\" | \"CONFIRMED\" | \"COMPLETED\">(\"all\")\n  const [selectedDate, setSelectedDate] = useState<string>(new Date().toISOString().split('T')[0])\n  const [currentMonth, setCurrentMonth] = useState(new Date().getMonth())\n  const [currentYear, setCurrentYear] = useState(new Date().getFullYear())\n\n  const [bookingForm, setBookingForm] = useState({\n    clientName: \"\",\n    clientEmail: \"\",\n    clientPhone: \"\",\n    date: \"\",\n    startTime: \"\",\n    duration: 60,\n    service: \"\",\n    price: 0,\n    notes: \"\"\n  })\n\n  const statusConfig = {\n    PENDING: { \n      label: \"En attente\", \n      color: \"text-yellow-700\", \n      bg: \"bg-yellow-50\",\n      border: \"border-yellow-200\",\n      icon: AlertCircle\n    },\n    CONFIRMED: { \n      label: \"Confirm√©e\", \n      color: \"text-primary-blue-700\", \n      bg: \"bg-primary-blue-50\",\n      border: \"border-primary-blue-200\",\n      icon: CalendarIcon\n    },\n    COMPLETED: { \n      label: \"Compl√©t√©e\", \n      color: \"text-primary-green-700\", \n      bg: \"bg-primary-green-50\",\n      border: \"border-primary-green-200\",\n      icon: Check\n    },\n    CANCELLED: { \n      label: \"Annul√©e\", \n      color: \"text-red-700\", \n      bg: \"bg-red-50\",\n      border: \"border-red-200\",\n      icon: X\n    }\n  }\n\n  // Statistiques\n  const stats = useMemo(() => {\n    const now = new Date()\n    const pending = bookings.filter(b => b.status === \"PENDING\")\n    const confirmed = bookings.filter(b => b.status === \"CONFIRMED\" && new Date(b.date) >= now)\n    const completed = bookings.filter(b => b.status === \"COMPLETED\")\n    const newRequests = bookings.filter(b => b.isPublicRequest && b.status === \"PENDING\")\n    const totalRevenue = completed.reduce((acc, b) => acc + b.price, 0)\n    const thisMonthRevenue = completed.filter(b => {\n      const d = new Date(b.date)\n      return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear()\n    }).reduce((acc, b) => acc + b.price, 0)\n\n    return {\n      total: bookings.length,\n      pending: pending.length,\n      confirmed: confirmed.length,\n      completed: completed.length,\n      newRequests: newRequests.length,\n      totalRevenue,\n      thisMonthRevenue\n    }\n  }, [bookings])\n\n  // Filtrer les r√©servations\n  const filteredBookings = useMemo(() => {\n    let filtered = bookings\n    if (filterStatus !== \"all\") {\n      filtered = filtered.filter(b => b.status === filterStatus)\n    }\n    return filtered.sort((a, b) => {\n      const dateA = new Date(`${a.date} ${a.startTime}`)\n      const dateB = new Date(`${b.date} ${b.startTime}`)\n      return dateA.getTime() - dateB.getTime()\n    })\n  }, [bookings, filterStatus])\n\n  // R√©servations par date\n  const bookingsByDate = useMemo(() => {\n    const grouped: Record<string, Booking[]> = {}\n    filteredBookings.forEach(booking => {\n      if (!grouped[booking.date]) {\n        grouped[booking.date] = []\n      }\n      grouped[booking.date].push(booking)\n    })\n    return grouped\n  }, [filteredBookings])\n\n  // R√©servations pour le jour s√©lectionn√©\n  const selectedDateBookings = useMemo(() => {\n    return bookings\n      .filter(b => b.date === selectedDate)\n      .sort((a, b) => a.startTime.localeCompare(b.startTime))\n  }, [bookings, selectedDate])\n\n  const handleCreateBooking = async () => {\n    try {\n      const response = await fetch(\"/api/coaching/bookings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...bookingForm, profileId })\n      })\n\n      if (response.ok) {\n        const newBooking = await response.json()\n        setBookings([newBooking, ...bookings])\n        setShowCreateBooking(false)\n        resetBookingForm()\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la cr√©ation:\", error)\n    }\n  }\n\n  const handleUpdateBookingStatus = async (bookingId: string, status: string) => {\n    try {\n      const response = await fetch(`/api/coaching/bookings/${bookingId}`, {\n        method: \"PUT\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ status })\n      })\n\n      if (response.ok) {\n        const updatedBooking = await response.json()\n        setBookings(bookings.map(b => b.id === bookingId ? updatedBooking : b))\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la mise √† jour:\", error)\n    }\n  }\n\n  const handleDeleteBooking = async (bookingId: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer cette r√©servation ?\")) return\n\n    try {\n      const response = await fetch(`/api/coaching/bookings/${bookingId}`, {\n        method: \"DELETE\"\n      })\n\n      if (response.ok) {\n        setBookings(bookings.filter(b => b.id !== bookingId))\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression:\", error)\n    }\n  }\n\n  const resetBookingForm = () => {\n    setBookingForm({\n      clientName: \"\",\n      clientEmail: \"\",\n      clientPhone: \"\",\n      date: \"\",\n      startTime: \"\",\n      duration: 60,\n      service: \"\",\n      price: 0,\n      notes: \"\"\n    })\n  }\n\n  // G√©n√©rer le calendrier du mois\n  const generateCalendar = () => {\n    const firstDay = new Date(currentYear, currentMonth, 1)\n    const lastDay = new Date(currentYear, currentMonth + 1, 0)\n    const daysInMonth = lastDay.getDate()\n    const startingDayOfWeek = firstDay.getDay()\n\n    const calendar = []\n    let currentWeek = []\n\n    // Jours vides avant le d√©but du mois\n    for (let i = 0; i < startingDayOfWeek; i++) {\n      currentWeek.push(null)\n    }\n\n    // Jours du mois\n    for (let day = 1; day <= daysInMonth; day++) {\n      const date = new Date(currentYear, currentMonth, day)\n      const dateStr = date.toISOString().split('T')[0]\n      const dayBookings = bookings.filter(b => b.date === dateStr)\n      \n      currentWeek.push({\n        day,\n        date: dateStr,\n        bookings: dayBookings,\n        isToday: dateStr === new Date().toISOString().split('T')[0]\n      })\n\n      if (currentWeek.length === 7) {\n        calendar.push(currentWeek)\n        currentWeek = []\n      }\n    }\n\n    // Compl√©ter la derni√®re semaine\n    while (currentWeek.length > 0 && currentWeek.length < 7) {\n      currentWeek.push(null)\n    }\n    if (currentWeek.length > 0) {\n      calendar.push(currentWeek)\n    }\n\n    return calendar\n  }\n\n  const calendar = generateCalendar()\n\n  // Navigation du calendrier\n  const goToPreviousMonth = () => {\n    if (currentMonth === 0) {\n      setCurrentMonth(11)\n      setCurrentYear(currentYear - 1)\n    } else {\n      setCurrentMonth(currentMonth - 1)\n    }\n  }\n\n  const goToNextMonth = () => {\n    if (currentMonth === 11) {\n      setCurrentMonth(0)\n      setCurrentYear(currentYear + 1)\n    } else {\n      setCurrentMonth(currentMonth + 1)\n    }\n  }\n\n  const goToToday = () => {\n    const now = new Date()\n    setCurrentMonth(now.getMonth())\n    setCurrentYear(now.getFullYear())\n    setSelectedDate(now.toISOString().split('T')[0])\n  }\n\n  // Mois en fran√ßais\n  const monthNames = [\n    \"Janvier\", \"F√©vrier\", \"Mars\", \"Avril\", \"Mai\", \"Juin\",\n    \"Juillet\", \"Ao√ªt\", \"Septembre\", \"Octobre\", \"Novembre\", \"D√©cembre\"\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Quick Stats Cards */}\n      <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4\">\n        {/* Total */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-gray-400\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <CalendarIcon className=\"w-5 h-5 text-gray-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-gray-900\">{stats.total}</p>\n          <p className=\"text-xs text-gray-600\">Total</p>\n        </motion.div>\n\n        {/* Pending */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.15 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-yellow-400 cursor-pointer hover:shadow-elevated transition-all\"\n          onClick={() => setFilterStatus(\"PENDING\")}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <AlertCircle className=\"w-5 h-5 text-yellow-600\" />\n            {stats.newRequests > 0 && (\n              <span className=\"px-2 py-0.5 bg-yellow-500 text-white text-xs rounded-full font-bold\">\n                {stats.newRequests}\n              </span>\n            )}\n          </div>\n          <p className=\"text-2xl font-bold text-yellow-900\">{stats.pending}</p>\n          <p className=\"text-xs text-yellow-700\">En attente</p>\n        </motion.div>\n\n        {/* Confirmed */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-primary-blue-400 cursor-pointer hover:shadow-elevated transition-all\"\n          onClick={() => setFilterStatus(\"CONFIRMED\")}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <CalendarIcon className=\"w-5 h-5 text-primary-blue-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-primary-blue-900\">{stats.confirmed}</p>\n          <p className=\"text-xs text-primary-blue-700\">Confirm√©es</p>\n        </motion.div>\n\n        {/* Completed */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.25 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-primary-green-400 cursor-pointer hover:shadow-elevated transition-all\"\n          onClick={() => setFilterStatus(\"COMPLETED\")}\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Check className=\"w-5 h-5 text-primary-green-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-primary-green-900\">{stats.completed}</p>\n          <p className=\"text-xs text-primary-green-700\">Compl√©t√©es</p>\n        </motion.div>\n\n        {/* Monthly Revenue */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-green-400\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <Euro className=\"w-5 h-5 text-green-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-green-900\">{stats.thisMonthRevenue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-green-700\">Ce mois</p>\n        </motion.div>\n\n        {/* Total Revenue */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.35 }}\n          className=\"bg-white rounded-xl shadow-standard p-4 border-l-4 border-primary-green-500\"\n        >\n          <div className=\"flex items-center justify-between mb-2\">\n            <TrendingUp className=\"w-5 h-5 text-primary-green-600\" />\n          </div>\n          <p className=\"text-2xl font-bold text-primary-green-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</p>\n          <p className=\"text-xs text-primary-green-700\">Revenus total</p>\n        </motion.div>\n\n        {/* New Requests */}\n        {stats.newRequests > 0 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            transition={{ delay: 0.4 }}\n            className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-standard p-4 border-l-4 border-blue-400 cursor-pointer hover:shadow-elevated transition-all\"\n            onClick={() => setFilterStatus(\"PENDING\")}\n          >\n            <div className=\"flex items-center justify-between mb-2\">\n              <AlertCircle className=\"w-5 h-5 text-white\" />\n              <span className=\"px-2 py-0.5 bg-white/30 text-white text-xs rounded-full font-bold\">\n                Nouveau\n              </span>\n            </div>\n            <p className=\"text-2xl font-bold text-white\">{stats.newRequests}</p>\n            <p className=\"text-xs text-blue-100\">Demandes web</p>\n          </motion.div>\n        )}\n      </div>\n\n      {/* View Toggle & Actions */}\n      <div className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center\">\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => setViewMode(\"calendar\")}\n            className={`px-4 py-2 rounded-xl font-medium transition-all ${\n              viewMode === \"calendar\"\n                ? \"bg-gradient-ocean text-gray-900 shadow-elevated\"\n                : \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50\"\n            }`}\n          >\n            <CalendarIcon className=\"w-4 h-4 inline mr-2\" />\n            Calendrier\n          </button>\n          <button\n            onClick={() => setViewMode(\"list\")}\n            className={`px-4 py-2 rounded-xl font-medium transition-all ${\n              viewMode === \"list\"\n                ? \"bg-gradient-ocean text-gray-900 shadow-elevated\"\n                : \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50\"\n            }`}\n          >\n            Liste\n          </button>\n        </div>\n\n        {/* Status Filters */}\n        <div className=\"flex gap-2 flex-wrap\">\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value as any)}\n            className=\"px-4 py-2 bg-white border border-gray-300 rounded-xl text-gray-700 font-medium focus:ring-2 focus:ring-primary-blue-400 focus:border-transparent\"\n          >\n            <option value=\"all\">Tous les statuts</option>\n            <option value=\"PENDING\">En attente ({stats.pending})</option>\n            <option value=\"CONFIRMED\">Confirm√©es ({stats.confirmed})</option>\n            <option value=\"COMPLETED\">Compl√©t√©es ({stats.completed})</option>\n          </select>\n\n          <button\n            onClick={() => setShowCreateBooking(true)}\n            className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-2 rounded-xl font-bold shadow-elevated transition-all hover:scale-105\"\n          >\n            <Plus className=\"w-5 h-5\" />\n            Nouvelle r√©servation\n          </button>\n        </div>\n      </div>\n\n      {/* Calendar View */}\n      {viewMode === \"calendar\" && (\n        <div className=\"bg-white rounded-2xl shadow-standard border border-gray-200 p-6\">\n          {/* Calendar Header with Navigation */}\n          <div className=\"mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <button\n                onClick={goToPreviousMonth}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                </svg>\n              </button>\n\n              <div className=\"text-center\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">\n                  {monthNames[currentMonth]} {currentYear}\n                </h3>\n              </div>\n\n              <button\n                onClick={goToNextMonth}\n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n              >\n                <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"flex items-center justify-center gap-4\">\n              <button\n                onClick={goToToday}\n                className=\"px-4 py-2 bg-gray-900 text-white rounded-lg font-medium hover:bg-gray-800 transition-colors text-sm\"\n              >\n                Aujourd'hui\n              </button>\n              <p className=\"text-sm text-gray-600\">Clique sur une date pour voir les r√©servations</p>\n            </div>\n          </div>\n\n          {/* Calendar Grid */}\n          <div className=\"grid grid-cols-7 gap-1 mb-2\">\n            {[\"Dim\", \"Lun\", \"Mar\", \"Mer\", \"Jeu\", \"Ven\", \"Sam\"].map(day => (\n              <div key={day} className=\"text-center text-xs font-bold text-gray-600 py-1\">\n                {day}\n              </div>\n            ))}\n          </div>\n\n          <div className=\"space-y-1\">\n            {calendar.map((week, weekIndex) => (\n              <div key={weekIndex} className=\"grid grid-cols-7 gap-1\">\n                {week.map((day, dayIndex) => {\n                  if (!day) {\n                    return <div key={dayIndex} className=\"h-12\" />\n                  }\n\n                  const hasBookings = day.bookings.length > 0\n                  const hasPending = day.bookings.some(b => b.status === \"PENDING\")\n                  const isSelected = day.date === selectedDate\n\n                  return (\n                    <button\n                      key={dayIndex}\n                      onClick={() => setSelectedDate(day.date)}\n                      className={`h-12 rounded-md p-1 transition-all relative border ${\n                        isSelected\n                          ? \"bg-gray-900 text-white border-gray-900 shadow-md\"\n                          : day.isToday\n                          ? \"bg-blue-50 border-blue-400 text-gray-900 font-bold\"\n                          : hasBookings\n                          ? \"bg-gray-50 border-gray-300 text-gray-900 hover:bg-gray-100\"\n                          : \"bg-white border-gray-200 text-gray-600 hover:border-gray-300\"\n                      }`}\n                    >\n                      <span className=\"text-sm font-medium\">{day.day}</span>\n                      {hasBookings && (\n                        <div className=\"absolute bottom-0 right-0 text-[10px] font-bold text-gray-500 bg-white rounded px-1\">\n                          {day.bookings.length}\n                        </div>\n                      )}\n                      {hasPending && !isSelected && (\n                        <div className=\"absolute top-0 right-0 w-1.5 h-1.5 bg-yellow-400 rounded-full\" />\n                      )}\n                    </button>\n                  )\n                })}\n              </div>\n            ))}\n          </div>\n\n          {/* Selected Date Details */}\n          {selectedDate && (\n            <div className=\"mt-6 pt-6 border-t border-gray-200\">\n              <h4 className=\"text-lg font-bold text-gray-900 mb-4\">\n                {new Date(selectedDate).toLocaleDateString('fr-FR', { \n                  weekday: 'long', \n                  day: 'numeric', \n                  month: 'long' \n                })}\n              </h4>\n\n              {selectedDateBookings.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {selectedDateBookings.map((booking) => {\n                    const config = statusConfig[booking.status]\n                    const StatusIcon = config.icon\n\n                    return (\n                      <motion.div\n                        key={booking.id}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        className={`relative p-4 rounded-xl border-2 transition-all hover:shadow-md ${\n                          booking.isPublicRequest \n                            ? \"bg-blue-50 border-blue-300\" \n                            : `${config.bg} ${config.border}`\n                        }`}\n                      >\n                        {booking.isPublicRequest && (\n                          <div className=\"absolute -top-2 -right-2 px-2 py-1 bg-blue-500 text-white text-xs rounded-full font-bold shadow-lg\">\n                            Nouveau\n                          </div>\n                        )}\n\n                        <div className=\"flex items-start justify-between gap-4\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <StatusIcon className={`w-4 h-4 ${config.color}`} />\n                              <span className={`text-xs font-bold uppercase ${config.color}`}>\n                                {config.label}\n                              </span>\n                            </div>\n\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <User className=\"w-4 h-4 text-gray-600\" />\n                              <span className=\"font-bold text-gray-900\">{booking.clientName}</span>\n                            </div>\n\n                            <div className=\"flex flex-col gap-1 text-sm text-gray-600\">\n                              <div className=\"flex items-center gap-2\">\n                                <Clock className=\"w-3 h-3\" />\n                                <span>{booking.startTime} - {booking.endTime}</span>\n                                <span className=\"text-xs text-gray-500\">({booking.duration}min)</span>\n                              </div>\n                              <div className=\"flex items-center gap-2\">\n                                <Mail className=\"w-3 h-3\" />\n                                <span className=\"text-xs\">{booking.clientEmail}</span>\n                              </div>\n                              {booking.clientPhone && (\n                                <div className=\"flex items-center gap-2\">\n                                  <Phone className=\"w-3 h-3\" />\n                                  <span className=\"text-xs\">{booking.clientPhone}</span>\n                                </div>\n                              )}\n                            </div>\n\n                            <div className=\"mt-2 flex items-center gap-3\">\n                              <span className=\"text-sm font-medium text-gray-700\">{booking.service}</span>\n                              <span className=\"text-sm font-bold text-primary-green-600\">{booking.price}‚Ç¨</span>\n                            </div>\n                          </div>\n\n                          <div className=\"flex flex-col gap-2\">\n                            {booking.status === \"PENDING\" && (\n                              <>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CONFIRMED\")}\n                                  className=\"p-2 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg transition-colors\"\n                                  title=\"Confirmer\"\n                                >\n                                  <Check className=\"w-4 h-4\" />\n                                </button>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CANCELLED\")}\n                                  className=\"p-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors\"\n                                  title=\"Annuler\"\n                                >\n                                  <X className=\"w-4 h-4\" />\n                                </button>\n                              </>\n                            )}\n                            {booking.status === \"CONFIRMED\" && (\n                              <button\n                                onClick={() => handleUpdateBookingStatus(booking.id, \"COMPLETED\")}\n                                className=\"p-2 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors\"\n                                title=\"Marquer comme compl√©t√©e\"\n                              >\n                                <Check className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                            <button\n                              onClick={() => setSelectedBooking(booking)}\n                              className=\"p-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors\"\n                              title=\"Modifier\"\n                            >\n                              <Edit3 className=\"w-4 h-4\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteBooking(booking.id)}\n                              className=\"p-2 bg-gray-100 hover:bg-red-100 text-gray-700 hover:text-red-700 rounded-lg transition-colors\"\n                              title=\"Supprimer\"\n                            >\n                              <Trash2 className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n\n                        {booking.notes && (\n                          <div className=\"mt-3 pt-3 border-t border-gray-200\">\n                            <p className=\"text-xs text-gray-600 italic\">{booking.notes}</p>\n                          </div>\n                        )}\n                      </motion.div>\n                    )\n                  })}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <CalendarIcon className=\"w-12 h-12 mx-auto mb-2 text-gray-300\" />\n                  <p>Aucune r√©servation pour cette date</p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* List View */}\n      {viewMode === \"list\" && (\n        <div className=\"space-y-6\">\n          {Object.entries(bookingsByDate).map(([date, dateBookings]) => {\n            const formattedDate = new Date(date).toLocaleDateString('fr-FR', {\n              weekday: 'long',\n              day: 'numeric',\n              month: 'long',\n              year: 'numeric'\n            })\n\n            return (\n              <motion.div\n                key={date}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-white rounded-2xl shadow-standard border border-gray-200 overflow-hidden\"\n              >\n                <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200\">\n                  <h3 className=\"text-lg font-bold text-gray-900 capitalize\">{formattedDate}</h3>\n                  <p className=\"text-sm text-gray-600\">{dateBookings.length} r√©servation{dateBookings.length > 1 ? \"s\" : \"\"}</p>\n                </div>\n\n                <div className=\"divide-y divide-gray-100\">\n                  {dateBookings.map((booking) => {\n                    const config = statusConfig[booking.status]\n                    const StatusIcon = config.icon\n\n                    return (\n                      <motion.div\n                        key={booking.id}\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        className={`relative p-6 transition-all hover:bg-gray-50 ${\n                          booking.isPublicRequest ? \"bg-blue-50/30\" : \"\"\n                        }`}\n                      >\n                        {booking.isPublicRequest && (\n                          <div className=\"absolute top-4 right-4\">\n                            <span className=\"px-3 py-1 bg-blue-500 text-white text-xs rounded-full font-bold\">\n                              Demande web\n                            </span>\n                          </div>\n                        )}\n\n                        <div className=\"flex items-start gap-6\">\n                          {/* Time Column */}\n                          <div className=\"flex-shrink-0 w-24\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <Clock className=\"w-4 h-4 text-gray-400\" />\n                              <span className=\"font-bold text-gray-900\">{booking.startTime}</span>\n                            </div>\n                            <div className=\"text-xs text-gray-500\">{booking.duration} min</div>\n                          </div>\n\n                          {/* Main Content */}\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-3 mb-2\">\n                              <StatusIcon className={`w-5 h-5 ${config.color}`} />\n                              <h4 className=\"text-lg font-bold text-gray-900\">{booking.clientName}</h4>\n                              <span className={`px-3 py-1 rounded-full text-xs font-bold ${config.bg} ${config.color}`}>\n                                {config.label}\n                              </span>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3\">\n                              <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                                <Mail className=\"w-4 h-4\" />\n                                <a href={`mailto:${booking.clientEmail}`} className=\"hover:text-primary-blue-600 transition-colors\">\n                                  {booking.clientEmail}\n                                </a>\n                              </div>\n                              {booking.clientPhone && (\n                                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                                  <Phone className=\"w-4 h-4\" />\n                                  <a href={`tel:${booking.clientPhone}`} className=\"hover:text-primary-blue-600 transition-colors\">\n                                    {booking.clientPhone}\n                                  </a>\n                                </div>\n                              )}\n                            </div>\n\n                            <div className=\"flex items-center gap-4 mb-2\">\n                              <span className=\"text-sm font-medium text-gray-700 bg-gray-100 px-3 py-1 rounded-full\">\n                                {booking.service}\n                              </span>\n                              <span className=\"text-lg font-bold text-primary-green-600\">\n                                {booking.price}‚Ç¨\n                              </span>\n                            </div>\n\n                            {booking.notes && (\n                              <div className=\"mt-3 p-3 bg-gray-50 rounded-lg\">\n                                <p className=\"text-sm text-gray-600 italic\">{booking.notes}</p>\n                              </div>\n                            )}\n                          </div>\n\n                          {/* Actions */}\n                          <div className=\"flex flex-col gap-2\">\n                            {booking.status === \"PENDING\" && (\n                              <>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CONFIRMED\")}\n                                  className=\"p-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-all shadow-sm hover:shadow-md\"\n                                  title=\"Confirmer\"\n                                >\n                                  <Check className=\"w-5 h-5\" />\n                                </button>\n                                <button\n                                  onClick={() => handleUpdateBookingStatus(booking.id, \"CANCELLED\")}\n                                  className=\"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all shadow-sm hover:shadow-md\"\n                                  title=\"Annuler\"\n                                >\n                                  <X className=\"w-5 h-5\" />\n                                </button>\n                              </>\n                            )}\n                            {booking.status === \"CONFIRMED\" && (\n                              <button\n                                onClick={() => handleUpdateBookingStatus(booking.id, \"COMPLETED\")}\n                                className=\"p-2 bg-primary-blue-500 hover:bg-primary-blue-600 text-white rounded-lg transition-all shadow-sm hover:shadow-md\"\n                                title=\"Marquer comme compl√©t√©e\"\n                              >\n                                <Check className=\"w-5 h-5\" />\n                              </button>\n                            )}\n                            <button\n                              onClick={() => setSelectedBooking(booking)}\n                              className=\"p-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors\"\n                              title=\"Modifier\"\n                            >\n                              <Edit3 className=\"w-5 h-5\" />\n                            </button>\n                            <button\n                              onClick={() => handleDeleteBooking(booking.id)}\n                              className=\"p-2 bg-gray-200 hover:bg-red-100 text-gray-700 hover:text-red-600 rounded-lg transition-colors\"\n                              title=\"Supprimer\"\n                            >\n                              <Trash2 className=\"w-5 h-5\" />\n                            </button>\n                          </div>\n                        </div>\n                      </motion.div>\n                    )\n                  })}\n                </div>\n              </motion.div>\n            )\n          })}\n\n          {Object.keys(bookingsByDate).length === 0 && (\n            <div className=\"text-center py-12 bg-white rounded-2xl shadow-standard border border-gray-200\">\n              <CalendarIcon className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n              <h3 className=\"text-xl font-bold text-gray-900 mb-2\">Aucune r√©servation</h3>\n              <p className=\"text-gray-600 mb-6\">\n                {filterStatus !== \"all\" \n                  ? `Aucune r√©servation avec le statut \"${statusConfig[filterStatus as keyof typeof statusConfig]?.label}\"`\n                  : \"Commence par cr√©er ta premi√®re r√©servation\"\n                }\n              </p>\n              <button\n                onClick={() => setShowCreateBooking(true)}\n                className=\"inline-flex items-center gap-2 bg-gradient-ocean text-gray-900 hover:shadow-glow-blue px-6 py-3 rounded-full font-bold shadow-elevated transition-all hover:scale-105\"\n              >\n                <Plus className=\"w-5 h-5\" />\n                Cr√©er une r√©servation\n              </button>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Create Booking Modal */}\n      <AnimatePresence>\n        {showCreateBooking && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\"\n            onClick={() => {\n              setShowCreateBooking(false)\n              resetBookingForm()\n            }}\n          >\n            <motion.div\n              initial={{ scale: 0.9, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.9, opacity: 0 }}\n              className=\"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-2xl font-bold text-gray-900\">Nouvelle r√©servation</h3>\n                <button\n                  onClick={() => setShowCreateBooking(false)}\n                  className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <X className=\"w-6 h-6\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                {/* Client Info */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Nom du client *</label>\n                    <input\n                      type=\"text\"\n                      value={bookingForm.clientName}\n                      onChange={(e) => setBookingForm({ ...bookingForm, clientName: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"Jean Dupont\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email *</label>\n                    <input\n                      type=\"email\"\n                      value={bookingForm.clientEmail}\n                      onChange={(e) => setBookingForm({ ...bookingForm, clientEmail: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"jean@example.com\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">T√©l√©phone</label>\n                  <input\n                    type=\"tel\"\n                    value={bookingForm.clientPhone}\n                    onChange={(e) => setBookingForm({ ...bookingForm, clientPhone: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"+33 6 12 34 56 78\"\n                  />\n                </div>\n\n                {/* Booking Details */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Date *</label>\n                    <input\n                      type=\"date\"\n                      value={bookingForm.date}\n                      onChange={(e) => setBookingForm({ ...bookingForm, date: e.target.value })}\n                      min={new Date().toISOString().split('T')[0]}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Heure de d√©but *</label>\n                    <input\n                      type=\"time\"\n                      value={bookingForm.startTime}\n                      onChange={(e) => setBookingForm({ ...bookingForm, startTime: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Dur√©e (minutes) *</label>\n                    <select\n                      value={bookingForm.duration}\n                      onChange={(e) => setBookingForm({ ...bookingForm, duration: parseInt(e.target.value) })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"30\">30 min</option>\n                      <option value=\"45\">45 min</option>\n                      <option value=\"60\">1 heure</option>\n                      <option value=\"90\">1h30</option>\n                      <option value=\"120\">2 heures</option>\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Prix (‚Ç¨) *</label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"0.01\"\n                      value={bookingForm.price}\n                      onChange={(e) => setBookingForm({ ...bookingForm, price: parseFloat(e.target.value) || 0 })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Service *</label>\n                  <input\n                    type=\"text\"\n                    value={bookingForm.service}\n                    onChange={(e) => setBookingForm({ ...bookingForm, service: e.target.value })}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                    placeholder=\"Coaching personnalis√©\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Notes</label>\n                  <textarea\n                    value={bookingForm.notes}\n                    onChange={(e) => setBookingForm({ ...bookingForm, notes: e.target.value })}\n                    rows={3}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent resize-none\"\n                    placeholder=\"Notes additionnelles...\"\n                  />\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-4 pt-4\">\n                  <button\n                    onClick={() => {\n                      setShowCreateBooking(false)\n                      resetBookingForm()\n                    }}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={handleCreateBooking}\n                    className=\"flex-1 px-6 py-3 bg-gradient-ocean text-gray-900 rounded-xl font-bold hover:shadow-glow-blue transition-all\"\n                  >\n                    Cr√©er la r√©servation\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  )\n}\n\n","size_bytes":43973},"app/(dashboard)/dashboard/profile/profile-content.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { ImageUpload } from \"@/components/ImageUpload\"\nimport SimpleImageCropper from \"@/components/ui-pro/simple-image-cropper\"\nimport { toast } from \"sonner\"\nimport Link from \"next/link\"\nimport { getOriginalSportFromStats } from \"@/lib/validations\"\nimport { Crop } from \"lucide-react\"\n\ninterface Profile {\n  username: string\n  displayName: string\n  bio: string\n  sport: string\n  location: string\n  instagram: string\n  strava: string\n  youtube: string\n  tiktok: string\n  twitter: string\n  whatsapp: string\n  isPublic: boolean\n  avatarUrl?: string | null\n  coverUrl?: string | null\n  stats?: any\n}\n\nexport function ProfileContent() {\n  const [profile, setProfile] = useState<Profile | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isFetching, setIsFetching] = useState(true)\n  const [showCropper, setShowCropper] = useState(false)\n  const [cropperImage, setCropperImage] = useState<string>(\"\")\n\n  useEffect(() => {\n    fetchProfile()\n  }, [])\n\n  async function fetchProfile() {\n    try {\n      const res = await fetch(\"/api/profile\")\n      const data = await res.json()\n      setProfile(data.profile)\n    } catch (error) {\n      toast.error(\"Erreur lors du chargement du profil\")\n    } finally {\n      setIsFetching(false)\n    }\n  }\n\n  async function onSubmit(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault()\n    setIsLoading(true)\n    \n    try {\n      const res = await fetch(\"/api/profile\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(profile),\n      })\n\n      const data = await res.json()\n\n      if (!res.ok) {\n        throw new Error(data.error || \"Erreur\")\n      }\n\n      toast.success(\"Profil mis √† jour !\")\n    } catch (error: any) {\n      toast.error(error.message)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const handleCropImage = async (croppedUrl: string) => {\n    try {\n      // Convert blob URL to File object for upload\n      const response = await fetch(croppedUrl)\n      const blob = await response.blob()\n      \n      // Create a File object from the blob\n      const file = new File([blob], \"avatar.jpg\", { type: \"image/jpeg\" })\n      \n      // Upload via the upload API\n      const formData = new FormData()\n      formData.append(\"file\", file)\n      formData.append(\"type\", \"avatar\")\n      \n      const uploadRes = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData\n      })\n\n      if (!uploadRes.ok) {\n        const errorData = await uploadRes.json()\n        throw new Error(errorData.error || \"Erreur lors de l'upload\")\n      }\n\n      const uploadData = await uploadRes.json()\n      \n      // Update local state with new URL\n      setProfile({ ...profile!, avatarUrl: uploadData.url })\n      setShowCropper(false)\n      \n      // Force refresh of the profile to get the updated image\n      await fetchProfile()\n      \n      toast.success(\"Image rogn√©e et sauvegard√©e avec succ√®s !\")\n    } catch (error) {\n      console.error(\"Crop error:\", error)\n      toast.error(\"Erreur lors de la sauvegarde de l'image\")\n    }\n  }\n\n  const openCropper = () => {\n    if (profile?.avatarUrl) {\n      setCropperImage(profile.avatarUrl)\n      setShowCropper(true)\n    } else {\n      toast.error(\"Aucune image √† rogner\")\n    }\n  }\n\n  if (isFetching) {\n    return (\n      <div className=\"container mx-auto p-6 max-w-2xl\">\n        <p>Chargement...</p>\n      </div>\n    )\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"container mx-auto p-6 max-w-2xl\">\n        <p>Erreur lors du chargement du profil</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container mx-auto p-6 max-w-2xl\">\n      <div className=\"mb-8 flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2\">Mon profil</h1>\n          <p className=\"text-muted-foreground\">\n            Personnalise ton profil public\n          </p>\n        </div>\n        <Button asChild variant=\"outline\">\n          <Link href={`/${profile.username}`} target=\"_blank\">\n            Voir mon profil\n          </Link>\n        </Button>\n      </div>\n\n      {/* Upload d'images */}\n      <Card className=\"mb-6\">\n        <CardHeader>\n          <CardTitle>Images du profil</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-col items-center\">\n            <h3 className=\"font-semibold mb-3 text-center\">Avatar</h3>\n            <ImageUpload\n              type=\"avatar\"\n              currentUrl={profile.avatarUrl}\n              onUploadComplete={(url) => {\n                setProfile({ ...profile, avatarUrl: url })\n                fetchProfile()\n              }}\n            />\n            {profile.avatarUrl && (\n              <div className=\"mt-4\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={openCropper}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Crop className=\"w-4 h-4\" />\n                  Rogner l'image\n                </Button>\n              </div>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Informations g√©n√©rales</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={onSubmit} className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"displayName\">Nom affich√©</Label>\n              <Input \n                id=\"displayName\" \n                value={profile.displayName}\n                onChange={(e) => setProfile({...profile, displayName: e.target.value})}\n                placeholder=\"Thomas Dupont\"\n              />\n            </div>\n\n            <div>\n              <Label htmlFor=\"username\">Nom d'utilisateur</Label>\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-sm text-muted-foreground whitespace-nowrap\">athlink.app/</span>\n                <Input \n                  id=\"username\" \n                  value={profile.username}\n                  onChange={(e) => setProfile({...profile, username: e.target.value})}\n                  placeholder=\"thomas-runner\"\n                  className=\"flex-1\"\n                  disabled\n                />\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                Le nom d'utilisateur ne peut pas √™tre modifi√© pour le moment\n              </p>\n            </div>\n\n            <div>\n              <Label htmlFor=\"bio\">Bio</Label>\n              <textarea \n                id=\"bio\"\n                value={profile.bio || \"\"}\n                onChange={(e) => setProfile({...profile, bio: e.target.value})}\n                placeholder=\"Runner passionn√© - Marathon en 2h45...\"\n                className=\"w-full min-h-[100px] p-3 rounded-md border border-input bg-background\"\n                maxLength={500}\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {profile.bio?.length || 0} / 500\n              </p>\n            </div>\n\n            <div>\n              <Label htmlFor=\"sport\">Sport principal</Label>\n                <Input \n                  id=\"sport\" \n                  value={profile.sport || \"\"}\n                  onChange={(e) => setProfile({...profile, sport: e.target.value})}\n                  placeholder=\"Course √† pied, Cyclisme, Natation, Triathlon, Ski...\"\n                />\n            </div>\n\n            <div>\n              <Label htmlFor=\"location\">Localisation</Label>\n              <Input \n                id=\"location\" \n                value={profile.location || \"\"}\n                onChange={(e) => setProfile({...profile, location: e.target.value})}\n                placeholder=\"Paris, France\"\n              />\n            </div>\n\n            <div className=\"border-t pt-4 mt-6\">\n              <h3 className=\"font-semibold mb-4\">R√©seaux sociaux</h3>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"instagram\">Instagram</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"instagram\" \n                      value={profile.instagram || \"\"}\n                      onChange={(e) => setProfile({...profile, instagram: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"strava\">Strava</Label>\n                  <Input \n                    id=\"strava\" \n                    value={profile.strava || \"\"}\n                    onChange={(e) => setProfile({...profile, strava: e.target.value})}\n                    placeholder=\"https://www.strava.com/athletes/...\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"youtube\">YouTube</Label>\n                  <Input \n                    id=\"youtube\" \n                    value={profile.youtube || \"\"}\n                    onChange={(e) => setProfile({...profile, youtube: e.target.value})}\n                    placeholder=\"https://youtube.com/@username\"\n                  />\n                </div>\n\n                <div>\n                  <Label htmlFor=\"tiktok\">TikTok</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"tiktok\" \n                      value={profile.tiktok || \"\"}\n                      onChange={(e) => setProfile({...profile, tiktok: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"twitter\">X / Twitter</Label>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-muted-foreground\">@</span>\n                    <Input \n                      id=\"twitter\" \n                      value={profile.twitter || \"\"}\n                      onChange={(e) => setProfile({...profile, twitter: e.target.value})}\n                      placeholder=\"username\"\n                      className=\"flex-1\"\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Label htmlFor=\"whatsapp\">WhatsApp</Label>\n                  <Input \n                    id=\"whatsapp\" \n                    value={profile.whatsapp || \"\"}\n                    onChange={(e) => setProfile({...profile, whatsapp: e.target.value})}\n                    placeholder=\"+33612345678\"\n                  />\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    Format international avec indicatif pays\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"border-t pt-4 mt-6\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <Label>Profil public</Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Ton profil est {profile.isPublic ? \"visible\" : \"masqu√©\"}\n                  </p>\n                </div>\n                <Button \n                  type=\"button\"\n                  variant={profile.isPublic ? \"default\" : \"outline\"}\n                  onClick={() => setProfile({...profile, isPublic: !profile.isPublic})}\n                >\n                  {profile.isPublic ? \"‚úì Public\" : \"Priv√©\"}\n                </Button>\n              </div>\n            </div>\n\n            <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\n              {isLoading ? \"Enregistrement...\" : \"Enregistrer les modifications\"}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* Image Cropper Modal */}\n      {showCropper && (\n        <SimpleImageCropper\n          imageUrl={cropperImage}\n          onCrop={handleCropImage}\n          onClose={() => setShowCropper(false)}\n        />\n      )}\n    </div>\n  )\n}\n","size_bytes":12584},"next.config.ts":{"content":"import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  // Augmenter la limite de taille pour les uploads (30MB)\n  experimental: {\n    serverActions: {\n      bodySizeLimit: '30mb',\n    },\n  },\n  // Note: La config API est maintenant g√©r√©e via les route handlers\n  // Pour configurer la taille max des requ√™tes, utilisez bodySizeLimit dans serverActions\n  images: {\n    qualities: [75, 90, 100],\n    formats: ['image/webp', 'image/avif'],\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'ioyklugzwavjyondimwd.supabase.co',\n        pathname: '/storage/v1/object/public/**',\n      },\n      {\n        protocol: 'https',\n        hostname: 'logo.clearbit.com',\n      },\n      {\n        protocol: 'https',\n        hostname: 'www.google.com',\n        pathname: '/s2/favicons**',\n      },\n      {\n        protocol: 'https',\n        hostname: '**',\n      },\n    ],\n  },\n  // Augmenter la limite de taille pour les uploads de fichiers\n  serverRuntimeConfig: {\n    maxFileSize: 50 * 1024 * 1024, // 50MB\n  },\n  // D√©sactiver les erreurs ESLint pendant le build (temporairement)\n  eslint: {\n    ignoreDuringBuilds: true,\n  },\n  typescript: {\n    ignoreBuildErrors: false, // Garder les erreurs TypeScript\n  },\n};\n\nexport default nextConfig;\n","size_bytes":1279},"app/(dashboard)/dashboard/upgrade/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { Check, Zap, Crown, Sparkles, TrendingUp, Globe, BarChart3, Palette, Link as LinkIcon, Shield } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { motion } from \"framer-motion\"\nimport { PromoCodeField } from \"@/components/ui-pro/promo-code-field\"\nimport { STRIPE_PRICES } from \"@/lib/stripe-prices\"\n\nexport default function UpgradePage() {\n  const [billingCycle, setBillingCycle] = useState<\"monthly\" | \"yearly\">(\"monthly\")\n  const [promoCode, setPromoCode] = useState(\"\")\n  const [promoData, setPromoData] = useState<any>(null)\n  const [isUpgrading, setIsUpgrading] = useState(false)\n  \n  const handlePromoValidation = (isValid: boolean, data?: any) => {\n    if (isValid && data) {\n      setPromoData(data)\n    } else {\n      setPromoData(null)\n    }\n  }\n\n  // V√©rifier si le code promo s'applique √† un plan donn√©\n  const isPromoValidForPlan = (planName: string) => {\n    if (!promoData?.valid) return false\n    \n    // Mapper les noms de plans interface vers Prisma\n    const planMapping: Record<string, string> = {\n      \"Pro\": \"PRO\",\n      \"Elite\": \"ELITE\"\n    }\n    \n    const prismaName = planMapping[planName]\n    return promoData.plan === prismaName\n  }\n\n  const handleUpgrade = async (planName: string) => {\n    if (planName === \"Free\") return // Ne rien faire pour le plan Free\n    \n    setIsUpgrading(true)\n    \n    try {\n      // Si le code promo est valide et offre un upgrade gratuit, utiliser l'ancienne API\n      if (isPromoValidForPlan(planName) && promoData?.type === \"plan_upgrade\") {\n        const planMapping: Record<string, string> = {\n          \"Pro\": \"PRO\",\n          \"Elite\": \"ELITE\"\n        }\n        \n        const planValue = planMapping[planName]\n        \n        const response = await fetch(\"/api/upgrade-plan\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ \n            plan: planValue,\n            promoCode: promoCode\n          })\n        })\n\n        if (response.ok) {\n          alert(`‚úÖ Plan ${planName} activ√© avec succ√®s ! üéâ Code promo appliqu√© !`)\n          window.location.href = \"/dashboard\"\n        } else {\n          const error = await response.json()\n          alert(`‚ùå Erreur: ${error.error}`)\n        }\n        return\n      }\n\n      // Sinon, rediriger vers Stripe Checkout\n      const response = await fetch(\"/api/create-checkout-session\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n          planName,\n          billingCycle\n        })\n      })\n\n      if (response.ok) {\n        const { url } = await response.json()\n        window.location.href = url\n      } else {\n        const error = await response.json()\n        alert(`‚ùå Erreur: ${error.error}`)\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'upgrade:\", error)\n      alert(\"‚ùå Une erreur est survenue\")\n    } finally {\n      setIsUpgrading(false)\n    }\n  }\n\n  const plans = [\n    {\n      name: \"Free\",\n      price: 0,\n      yearlyPrice: 0,\n      description: \"Parfait pour commencer\",\n      icon: LinkIcon,\n      color: \"gray\",\n      features: [\n        \"1 profil public\",\n        \"1 lien\",\n        \"1 comp√©tition √† venir\",\n        \"0 sponsors\",\n        \"Galerie 2 m√©dias\",\n        \"Th√®me basique\",\n        \"Sous-domaine athlink.app\",\n      ],\n      limitations: [\n        \"Analytics basiques uniquement\",\n        \"Pas de domaine personnalis√©\",\n        \"Branding Athlink visible\",\n      ],\n      cta: \"Plan actuel\",\n      current: true,\n    },\n    {\n      name: \"Pro\",\n      price: 9.90,\n      yearlyPrice: 99,\n      popular: true,\n      description: \"Pour les athl√®tes s√©rieux\",\n      icon: Zap,\n      color: \"gray\",\n      features: [\n        \"Tout du plan Free\",\n        \"Liens illimit√©s\",\n        \"Comp√©titions illimit√©es\",\n        \"Sponsors illimit√©s\",\n        \"Galerie illimit√©e\",\n        \"Analytics avanc√©es (7 jours)\",\n        \"Badge \\\"Pro\\\" sur le profil\",\n      ],\n      cta: \"Passer Pro\",\n      highlight: true,\n    },\n    {\n      name: \"Elite\",\n      price: 25.90,\n      yearlyPrice: 259,\n      description: \"Pour les professionnels\",\n      icon: Crown,\n      color: \"gray\",\n      features: [\n        \"Tout du plan Pro\",\n        \"Analytics illimit√©es\",\n        \"Heatmap des clics\",\n        \"D√©mographie visiteurs\",\n        \"Export donn√©es (PDF)\",\n        \"Service de coaching\",\n        \"Personnalisation CSS\",\n        \"Badge \\\"Elite\\\" sur le profil\",\n        \"Support prioritaire\",\n      ],\n      cta: \"Passer Elite\",\n    },\n  ]\n\n  const savings = billingCycle === \"yearly\" ? \"2 mois offerts\" : null\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50\">\n      <div className=\"container mx-auto px-4 py-12 max-w-7xl\">\n        {/* Header */}\n        <div className=\"text-center mb-12\">\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"inline-flex items-center gap-2 bg-gradient-to-r from-gray-800 to-black text-white px-4 py-2 rounded-full text-sm font-bold mb-6\"\n          >\n            <Sparkles className=\"w-4 h-4\" />\n            Offre de lancement - Prix r√©duits !\n          </motion.div>\n\n          <motion.h1\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.1 }}\n            className=\"text-5xl md:text-6xl font-black mb-4 bg-gradient-to-r from-gray-900 via-gray-600 to-gray-900 bg-clip-text text-transparent\"\n          >\n            Choisis ton Plan\n          </motion.h1>\n\n          <motion.p\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-xl text-gray-600 max-w-2xl mx-auto mb-8\"\n          >\n            D√©bloque tout le potentiel de ton profil d&apos;athl√®te\n          </motion.p>\n\n          {/* Billing Toggle */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.9 }}\n            animate={{ opacity: 1, scale: 1 }}\n            transition={{ delay: 0.3 }}\n            className=\"inline-flex items-center gap-4 bg-white border-2 border-gray-200 rounded-full p-2 shadow-lg\"\n          >\n            <button\n              onClick={() => setBillingCycle(\"monthly\")}\n              className={`px-6 py-2 rounded-full font-bold transition-all ${\n                billingCycle === \"monthly\"\n                  ? \"bg-gray-800 text-white shadow-md\"\n                  : \"text-gray-600 hover:text-gray-900\"\n              }`}\n            >\n              Mensuel\n            </button>\n            <button\n              onClick={() => setBillingCycle(\"yearly\")}\n              className={`px-6 py-2 rounded-full font-bold transition-all relative ${\n                billingCycle === \"yearly\"\n                  ? \"bg-gray-800 text-white shadow-md\"\n                  : \"text-gray-600 hover:text-gray-900\"\n              }`}\n            >\n              Annuel\n              {savings && (\n                <span className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-green-500 text-white text-xs px-2 py-1 rounded-full whitespace-nowrap font-bold\">\n                  {savings}\n                </span>\n              )}\n            </button>\n          </motion.div>\n        </div>\n\n        {/* Code Promo Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n          className=\"max-w-2xl mx-auto mb-12\"\n        >\n          <div className=\"bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-6 border border-gray-200 mb-6\">\n            <div className=\"text-center mb-4\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-2\">üíé Tu as un code promo ?</h3>\n              <p className=\"text-sm text-gray-600\">Saisis-le pour b√©n√©ficier d'avantages exclusifs</p>\n            </div>\n            <PromoCodeField \n              value={promoCode}\n              onChange={setPromoCode}\n              onValidation={handlePromoValidation}\n            />\n          </div>\n        </motion.div>\n\n        {/* Plans Grid */}\n        <div className=\"grid md:grid-cols-3 gap-8 mb-16\">\n          {plans.map((plan, index) => (\n            <motion.div\n              key={plan.name}\n              initial={{ opacity: 0, y: 40 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.1 * index, duration: 0.5 }}\n              className={`relative rounded-3xl p-8 ${\n                plan.highlight\n                  ? \"bg-gradient-to-br from-gray-800 to-black text-white shadow-2xl scale-105 border-4 border-gray-600\"\n                  : \"bg-white border-2 border-gray-200 shadow-lg hover:shadow-xl transition-shadow\"\n              }`}\n            >\n              {/* Popular Badge */}\n              {plan.popular && (\n                <div className=\"absolute -top-4 left-1/2 -translate-x-1/2 bg-gradient-to-r from-gray-800 to-black text-white px-4 py-1 rounded-full text-sm font-black shadow-lg\">\n                  ‚≠ê PLUS POPULAIRE\n                </div>\n              )}\n\n              {/* Icon */}\n              <div className={`w-16 h-16 rounded-2xl ${\n                plan.highlight ? \"bg-white/20\" : \"bg-gradient-to-br from-gray-100 to-gray-200\"\n              } flex items-center justify-center mb-6`}>\n                <plan.icon className={`w-8 h-8 ${plan.highlight ? \"text-white\" : \"text-gray-800\"}`} />\n              </div>\n\n              {/* Plan Name */}\n              <h3 className={`text-2xl font-black mb-2 ${\n                plan.name === \"Elite\" \n                  ? \"text-gray-900\"\n                  : plan.highlight ? \"text-white\" : \"text-gray-900\"\n              }`}>\n                {plan.name}\n              </h3>\n\n              <p className={`text-sm mb-6 ${\n                plan.name === \"Elite\"\n                  ? \"text-gray-900\"\n                  : plan.highlight ? \"text-white/90\" : \"text-gray-600\"\n              }`}>\n                {plan.description}\n              </p>\n\n              {/* Price */}\n              <div className=\"mb-6\">\n                {plan.price === 0 ? (\n                  <div className={`text-5xl font-black ${plan.highlight ? \"text-white\" : \"text-gray-900\"}`}>\n                    Gratuit\n                  </div>\n                ) : (\n                  <>\n                    {/* Afficher r√©duction si code promo valide pour ce plan */}\n                    {isPromoValidForPlan(plan.name) && promoData?.type === \"plan_upgrade\" ? (\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <Sparkles className=\"w-5 h-5 text-green-500\" />\n                          <span className=\"text-sm font-bold text-green-600\">Code promo appliqu√© !</span>\n                        </div>\n                        <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-3xl font-bold line-through opacity-50 ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-600\"\n                              : plan.highlight ? \"text-white/60\" : \"text-gray-600\"\n                          }`}>\n                            {billingCycle === \"monthly\" ? plan.price.toFixed(2) : (plan.yearlyPrice / 12).toFixed(2)}‚Ç¨\n                          </span>\n                        </div>\n                        <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-5xl font-black ${\n                            plan.name === \"Elite\"\n                              ? \"text-green-600\"\n                              : plan.highlight ? \"text-white\" : \"text-green-600\"\n                          }`}>\n                            GRATUIT\n                          </span>\n                        </div>\n                      </div>\n                    ) : (\n                      <>\n                        <div className=\"flex items-baseline gap-2\">\n                          <span className={`text-5xl font-black ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-900\"\n                              : plan.highlight ? \"text-white\" : \"text-gray-900\"\n                          }`}>\n                            {billingCycle === \"monthly\" ? plan.price.toFixed(2) : (plan.yearlyPrice / 12).toFixed(2)}‚Ç¨\n                          </span>\n                          <span className={`text-lg ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-900\"\n                              : plan.highlight ? \"text-white/80\" : \"text-gray-600\"\n                          }`}>\n                            /mois\n                          </span>\n                        </div>\n                        {billingCycle === \"yearly\" && (\n                          <div className={`text-sm mt-1 ${\n                            plan.name === \"Elite\"\n                              ? \"text-gray-900\"\n                              : plan.highlight ? \"text-white/80\" : \"text-gray-600\"\n                          }`}>\n                            {plan.yearlyPrice}‚Ç¨ factur√© annuellement\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </>\n                )}\n              </div>\n\n              {/* CTA Button */}\n              <button\n                onClick={() => handleUpgrade(plan.name)}\n                disabled={plan.current || isUpgrading}\n                className={`w-full py-4 rounded-xl font-bold text-lg mb-8 transition-all ${\n                  plan.current\n                    ? \"bg-gray-200 text-gray-600 cursor-not-allowed\"\n                    : isPromoValidForPlan(plan.name) && promoData?.type === \"plan_upgrade\"\n                    ? \"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg hover:shadow-xl hover:scale-105\"\n                    : plan.highlight\n                    ? \"bg-white text-gray-800 hover:bg-gray-100 shadow-lg hover:shadow-xl hover:scale-105\"\n                    : \"bg-gradient-to-r from-gray-800 to-black text-white hover:shadow-lg hover:scale-105\"\n                }`}\n              >\n                {isUpgrading ? (\n                  <span className=\"flex items-center justify-center gap-2\">\n                    <div className=\"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n                    Activation...\n                  </span>\n                ) : isPromoValidForPlan(plan.name) && promoData?.type === \"plan_upgrade\" ? (\n                  `üéâ Activer ${plan.name} GRATUIT`\n                ) : (\n                  plan.cta\n                )}\n              </button>\n\n              {/* Features */}\n              <div className=\"space-y-3\">\n                {plan.features.map((feature, i) => (\n                  <div key={i} className=\"flex items-start gap-3\">\n                    <Check className={`w-5 h-5 flex-shrink-0 mt-0.5 ${\n                      plan.highlight ? \"text-white\" : \"text-green-600\"\n                    }`} />\n                    <span className={`text-sm ${\n                      plan.name === \"Elite\"\n                        ? \"text-gray-900\"\n                        : plan.highlight ? \"text-white/90\" : \"text-gray-700\"\n                    }`}>\n                      {feature}\n                    </span>\n                  </div>\n                ))}\n                {plan.limitations?.map((limitation, i) => (\n                  <div key={i} className=\"flex items-start gap-3 opacity-60\">\n                    <span className=\"text-sm line-through\">{limitation}</span>\n                  </div>\n                ))}\n              </div>\n            </motion.div>\n          ))}\n        </div>\n\n        {/* Features Comparison */}\n        <motion.div\n          initial={{ opacity: 0, y: 40 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.5 }}\n          className=\"bg-white rounded-3xl shadow-xl p-8 md:p-12 mb-16\"\n        >\n          <h2 className=\"text-3xl font-black text-center mb-8\">Comparaison d√©taill√©e</h2>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b-2 border-gray-200\">\n                  <th className=\"text-left py-4 px-4 font-bold text-gray-900\">Fonctionnalit√©</th>\n                  <th className=\"text-center py-4 px-4 font-bold text-gray-600\">Free</th>\n                  <th className=\"text-center py-4 px-4 font-bold text-gray-800\">Pro</th>\n                  <th className=\"text-center py-4 px-4 font-bold text-gray-900\">Elite</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-100\">\n                {[\n                  { feature: \"Profils publics\", free: \"1\", pro: \"1\", elite: \"1\" },\n                  { feature: \"Liens\", free: \"1\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Comp√©titions\", free: \"1\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Sponsors\", free: \"0\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Galerie m√©dias\", free: \"2\", pro: \"Illimit√©\", elite: \"Illimit√©\" },\n                  { feature: \"Analytics\", free: \"Basiques\", pro: \"7 jours\", elite: \"Illimit√©\" },\n                  { feature: \"Th√®mes\", free: \"1\", pro: \"1\", elite: \"1\" },\n                  { feature: \"Personnalisation CSS\", free: \"Non\", pro: \"Non\", elite: \"Oui\" },\n                  { feature: \"Export donn√©es\", free: \"Non\", pro: \"Non\", elite: \"Oui\" },\n                  { feature: \"Support\", free: \"Email\", pro: \"Email\", elite: \"Prioritaire\" },\n                ].map((row, i) => (\n                  <tr key={i} className=\"hover:bg-gray-50\">\n                    <td className=\"py-4 px-4 font-medium text-gray-900\">{row.feature}</td>\n                    <td className=\"py-4 px-4 text-center text-gray-600\">{row.free}</td>\n                    <td className=\"py-4 px-4 text-center text-gray-800 font-semibold\">{row.pro}</td>\n                    <td className=\"py-4 px-4 text-center text-gray-900 font-semibold\">{row.elite}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </motion.div>\n\n        {/* FAQ */}\n        <motion.div\n          initial={{ opacity: 0, y: 40 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.6 }}\n          className=\"max-w-3xl mx-auto\"\n        >\n          <h2 className=\"text-3xl font-black text-center mb-8\">Questions fr√©quentes</h2>\n          \n          <div className=\"space-y-4\">\n            {[\n              {\n                q: \"Puis-je changer de plan √† tout moment ?\",\n                a: \"Oui ! Tu peux upgrader ou downgrader ton plan √† tout moment. Les changements sont effectifs imm√©diatement.\",\n              },\n              {\n                q: \"Que se passe-t-il si j'annule mon abonnement ?\",\n                a: \"Tu conserves l'acc√®s aux fonctionnalit√©s premium jusqu'√† la fin de ta p√©riode de facturation. Ensuite, ton compte repasse en plan Free.\",\n              },\n              {\n                q: \"Les prix sont-ils TTC ?\",\n                a: \"Oui, tous les prix affich√©s incluent la TVA fran√ßaise (20%).\",\n              },\n              {\n                q: \"Puis-je obtenir un remboursement ?\",\n                a: \"Oui, nous offrons une garantie satisfait ou rembours√© de 14 jours sur tous les plans payants.\",\n              },\n            ].map((faq, i) => (\n              <details key={i} className=\"bg-white rounded-xl p-6 shadow-md hover:shadow-lg transition-shadow group\">\n                <summary className=\"font-bold text-gray-900 cursor-pointer list-none flex items-center justify-between\">\n                  {faq.q}\n                  <span className=\"text-gray-800 group-open:rotate-180 transition-transform\">‚ñº</span>\n                </summary>\n                <p className=\"mt-4 text-gray-600 leading-relaxed\">{faq.a}</p>\n              </details>\n            ))}\n          </div>\n        </motion.div>\n\n        {/* Back to Dashboard */}\n        <div className=\"text-center mt-12\">\n          <Link\n            href=\"/dashboard\"\n            className=\"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 font-medium transition-colors\"\n          >\n            ‚Üê Retour au dashboard\n          </Link>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n","size_bytes":20566},"app/api/profile/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { profileUpdateSchema, mapSportToEnum, createStatsWithOriginalSport } from \"@/lib/validations\"\n\n// GET profile\nexport async function GET(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ profile })\n\n  } catch (error) {\n    console.error(\"GET profile error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// PATCH update profile\nexport async function PATCH(req: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = profileUpdateSchema.parse(body)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Mapper le sport libre vers l'enum Prisma et stocker l'original dans les stats\n    let statsToUpdate: any = profile.stats || {}\n    \n    // G√©rer le sport original\n    if (validatedData.sport) {\n      statsToUpdate = createStatsWithOriginalSport(statsToUpdate, validatedData.sport)\n    }\n    \n    // G√©rer le CSS personnalis√©\n    if (validatedData.customCSS !== undefined) {\n      statsToUpdate = {\n        ...(statsToUpdate as object),\n        customCSS: validatedData.customCSS || null\n      }\n    }\n\n    const dataForPrisma = {\n      ...validatedData,\n      ...(validatedData.sport && { \n        sport: mapSportToEnum(validatedData.sport)\n      }),\n      // Mettre √† jour les stats si n√©cessaire\n      ...(Object.keys(statsToUpdate).length > 0 && { stats: statsToUpdate }),\n      // Retirer customCSS des donn√©es Prisma car il va dans stats\n      customCSS: undefined\n    }\n\n    // Si le sport actuel n'est pas une valeur de l'enum Prisma, on le force √† \"OTHER\"\n    // et on stocke le sport original dans les stats\n    const enumSports = [\"RUNNING\", \"CYCLING\", \"TRIATHLON\", \"SWIMMING\", \"SKIING\", \"OTHER\"]\n    if (!enumSports.includes(profile.sport) && !validatedData.sport) {\n      dataForPrisma.sport = \"OTHER\"\n      dataForPrisma.stats = createStatsWithOriginalSport(statsToUpdate, profile.sport)\n    }\n\n    const updatedProfile = await prisma.profile.update({\n      where: { userId: session.user.id },\n      data: dataForPrisma as any\n    })\n\n    return NextResponse.json({ profile: updatedProfile })\n\n  } catch (error: any) {\n    console.error(\"PATCH profile error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3214},"middleware.ts":{"content":"import { NextResponse } from \"next/server\"\nimport type { NextRequest } from \"next/server\"\n\nexport function middleware(request: NextRequest) {\n  // Pour Next-auth v5, le middleware de protection est g√©r√© dans les pages elles-m√™mes\n  // Ce middleware peut √™tre utilis√© pour d'autres logiques si n√©cessaire\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: [\"/dashboard/:path*\"]\n}\n","size_bytes":401},"app/[username]/coaching/pdf-purchase-modal.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport { X, Download, Lock, CreditCard, Check, AlertCircle } from \"lucide-react\"\n\ninterface TrainingPlan {\n  id: string\n  title: string\n  description: string\n  price: number\n  pdfFileName?: string\n}\n\ninterface PdfPurchaseModalProps {\n  plan: TrainingPlan | null\n  isOpen: boolean\n  onClose: () => void\n  coachName: string\n}\n\nexport function PdfPurchaseModal({ plan, isOpen, onClose, coachName }: PdfPurchaseModalProps) {\n  const [formData, setFormData] = useState({\n    clientName: \"\",\n    clientEmail: \"\",\n    clientPhone: \"\"\n  })\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [paymentSuccess, setPaymentSuccess] = useState(false)\n  const [error, setError] = useState(\"\")\n\n  if (!plan) return null\n\n  const handlePurchase = async () => {\n    if (!formData.clientName || !formData.clientEmail) {\n      setError(\"Veuillez remplir tous les champs obligatoires\")\n      return\n    }\n\n    setIsProcessing(true)\n    setError(\"\")\n\n    try {\n      const response = await fetch(\"/api/coaching/access-pdf\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          planId: plan.id,\n          clientEmail: formData.clientEmail,\n          clientName: formData.clientName\n        })\n      })\n\n      const result = await response.json()\n\n      if (result.success) {\n        setPaymentSuccess(true)\n        // Rediriger vers le PDF apr√®s 2 secondes\n        setTimeout(() => {\n          window.open(result.pdfUrl, '_blank')\n        }, 2000)\n      } else {\n        setError(result.error || \"Erreur lors du paiement\")\n      }\n    } catch (error) {\n      setError(\"Une erreur est survenue\")\n    } finally {\n      setIsProcessing(false)\n    }\n  }\n\n  const handleClose = () => {\n    setFormData({ clientName: \"\", clientEmail: \"\", clientPhone: \"\" })\n    setError(\"\")\n    setPaymentSuccess(false)\n    onClose()\n  }\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50\"\n          onClick={handleClose}\n        >\n          <motion.div\n            initial={{ scale: 0.9, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.9, opacity: 0 }}\n            className=\"bg-white rounded-3xl p-8 w-full max-w-md shadow-2xl\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary-blue-500 to-primary-blue-600 flex items-center justify-center\">\n                  <Lock className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900\">Acc√®s Payant</h3>\n                  <p className=\"text-sm text-gray-600\">Contenu premium</p>\n                </div>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"p-2 text-gray-400 hover:text-gray-600 transition-colors\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n            </div>\n\n            {paymentSuccess ? (\n              /* Succ√®s */\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"text-center py-8\"\n              >\n                <div className=\"w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4\">\n                  <Check className=\"w-8 h-8 text-green-600\" />\n                </div>\n                <h4 className=\"text-xl font-bold text-gray-900 mb-2\">Paiement R√©ussi !</h4>\n                <p className=\"text-gray-600 mb-4\">\n                  Vous allez √™tre redirig√© vers le PDF dans quelques secondes...\n                </p>\n                <div className=\"bg-green-50 rounded-xl p-4\">\n                  <p className=\"text-sm text-green-700\">\n                    <strong>Acc√®s valide 24h</strong> - T√©l√©chargez votre PDF maintenant\n                  </p>\n                </div>\n              </motion.div>\n            ) : (\n              /* Formulaire de paiement */\n              <>\n                {/* Plan Info */}\n                <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 mb-6\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h4 className=\"font-bold text-gray-900\">{plan.title}</h4>\n                    <div className=\"flex items-center gap-2\">\n                      <Download className=\"w-4 h-4 text-gray-500\" />\n                      <span className=\"text-xs text-gray-500\">PDF</span>\n                    </div>\n                  </div>\n                  <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">{plan.description}</p>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-500\">Coach: {coachName}</span>\n                    <div className=\"text-right\">\n                      <div className=\"text-2xl font-bold text-primary-blue-600\">{plan.price}‚Ç¨</div>\n                      <div className=\"text-xs text-gray-500\">Acc√®s 24h</div>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Formulaire */}\n                <div className=\"space-y-4 mb-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Nom complet *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={formData.clientName}\n                      onChange={(e) => setFormData({ ...formData, clientName: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"Jean Dupont\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Email *\n                    </label>\n                    <input\n                      type=\"email\"\n                      value={formData.clientEmail}\n                      onChange={(e) => setFormData({ ...formData, clientEmail: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"jean@example.com\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      T√©l√©phone (optionnel)\n                    </label>\n                    <input\n                      type=\"tel\"\n                      value={formData.clientPhone}\n                      onChange={(e) => setFormData({ ...formData, clientPhone: e.target.value })}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue-500 focus:border-transparent\"\n                      placeholder=\"+33 6 12 34 56 78\"\n                    />\n                  </div>\n                </div>\n\n                {/* Erreur */}\n                {error && (\n                  <motion.div\n                    initial={{ opacity: 0, y: -10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      <AlertCircle className=\"w-4 h-4 text-red-600\" />\n                      <p className=\"text-sm text-red-700\">{error}</p>\n                    </div>\n                  </motion.div>\n                )}\n\n                {/* Paiement Info */}\n                <div className=\"bg-blue-50 rounded-xl p-4 mb-6\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <CreditCard className=\"w-4 h-4 text-primary-blue-600\" />\n                    <span className=\"text-sm font-medium text-primary-blue-700\">Paiement S√©curis√©</span>\n                  </div>\n                  <p className=\"text-xs text-blue-600\">\n                    Mode d√©mo - Le paiement est simul√©. En production, Stripe sera int√©gr√©.\n                  </p>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={handleClose}\n                    className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl font-medium hover:bg-gray-50 transition-colors\"\n                  >\n                    Annuler\n                  </button>\n                  <button\n                    onClick={handlePurchase}\n                    disabled={isProcessing || !formData.clientName || !formData.clientEmail}\n                    className=\"flex-1 px-6 py-3 bg-gradient-to-r from-primary-blue-600 to-primary-blue-700 text-white rounded-xl font-bold hover:from-primary-blue-700 hover:to-primary-blue-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                  >\n                    {isProcessing ? (\n                      <>\n                        <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                        Traitement...\n                      </>\n                    ) : (\n                      <>\n                        <CreditCard className=\"w-4 h-4\" />\n                        Payer {plan.price}‚Ç¨\n                      </>\n                    )}\n                  </button>\n                </div>\n              </>\n            )}\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  )\n}\n\n","size_bytes":10251},"app/api/races/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { raceSchema } from \"@/lib/validations\"\n\n// PATCH update race\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = raceSchema.partial().parse(body)\n\n    // Convertir les cha√Ænes vides en null pour Prisma\n    const cleanedData: any = { ...validatedData }\n    if ('location' in cleanedData) {\n      cleanedData.location = cleanedData.location && cleanedData.location.trim() !== \"\" ? cleanedData.location : null\n    }\n    if ('distance' in cleanedData) {\n      cleanedData.distance = cleanedData.distance && cleanedData.distance.trim() !== \"\" ? cleanedData.distance : null\n    }\n    if ('result' in cleanedData) {\n      cleanedData.result = cleanedData.result && cleanedData.result.trim() !== \"\" ? cleanedData.result : null\n    }\n    if ('url' in cleanedData) {\n      cleanedData.url = cleanedData.url && cleanedData.url.trim() !== \"\" ? cleanedData.url : null\n    }\n    if ('logoUrl' in cleanedData) {\n      cleanedData.logoUrl = cleanedData.logoUrl && cleanedData.logoUrl.trim() !== \"\" ? cleanedData.logoUrl : null\n    }\n\n    // Verify race belongs to user\n    const race = await prisma.race.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!race) {\n      return NextResponse.json({ error: \"Course non trouv√©e\" }, { status: 404 })\n    }\n\n    if (race.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    // Convert date string to Date object if needed\n    const updateData = { ...cleanedData }\n    if (updateData.date) {\n      updateData.date = typeof updateData.date === 'string' \n        ? new Date(updateData.date) \n        : updateData.date\n    }\n\n    const updatedRace = await prisma.race.update({\n      where: { id },\n      data: updateData\n    })\n\n    return NextResponse.json({ race: updatedRace })\n\n  } catch (error: any) {\n    console.error(\"PATCH race error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// DELETE race\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    // Verify race belongs to user\n    const race = await prisma.race.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!race) {\n      return NextResponse.json({ error: \"Course non trouv√©e\" }, { status: 404 })\n    }\n\n    if (race.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    await prisma.race.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error(\"DELETE race error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3503},"app/api/sponsors/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { sponsorSchema } from \"@/lib/validations\"\n\n// PATCH update sponsor\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = sponsorSchema.partial().parse(body)\n\n    // Convertir les cha√Ænes vides en null pour Prisma\n    const cleanedData: any = { ...validatedData }\n    if ('logoUrl' in cleanedData) {\n      cleanedData.logoUrl = cleanedData.logoUrl && cleanedData.logoUrl.trim() !== \"\" ? cleanedData.logoUrl : null\n    }\n    if ('websiteUrl' in cleanedData) {\n      cleanedData.websiteUrl = cleanedData.websiteUrl && cleanedData.websiteUrl.trim() !== \"\" ? cleanedData.websiteUrl : null\n    }\n    if ('promoCode' in cleanedData) {\n      cleanedData.promoCode = cleanedData.promoCode && cleanedData.promoCode.trim() !== \"\" ? cleanedData.promoCode : null\n    }\n    if ('description' in cleanedData) {\n      cleanedData.description = cleanedData.description && cleanedData.description.trim() !== \"\" ? cleanedData.description : null\n    }\n\n    // Verify sponsor belongs to user\n    const sponsor = await prisma.sponsor.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!sponsor) {\n      return NextResponse.json({ error: \"Sponsor non trouv√©\" }, { status: 404 })\n    }\n\n    if (sponsor.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    const updatedSponsor = await prisma.sponsor.update({\n      where: { id },\n      data: cleanedData\n    })\n\n    return NextResponse.json({ sponsor: updatedSponsor })\n\n  } catch (error: any) {\n    console.error(\"PATCH sponsor error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// DELETE sponsor\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    // Verify sponsor belongs to user\n    const sponsor = await prisma.sponsor.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!sponsor) {\n      return NextResponse.json({ error: \"Sponsor non trouv√©\" }, { status: 404 })\n    }\n\n    if (sponsor.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    await prisma.sponsor.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error(\"DELETE sponsor error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3219},"app/(dashboard)/dashboard/profile/page.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { User, Image as ImageIcon } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { ProfileContent } from \"./profile-content\"\nimport { GalerieContent } from \"./galerie-content\"\n\nexport default function ProfilePage() {\n  // V√©rifier l'URL pour ouvrir l'onglet Galerie si on vient de /dashboard/media\n  const [activeTab, setActiveTab] = useState<'profile' | 'galerie'>(() => {\n    if (typeof window !== 'undefined') {\n      return window.location.pathname.includes('media') || window.location.hash === '#galerie' \n        ? 'galerie' \n        : 'profile'\n    }\n    return 'profile'\n  })\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Onglets */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => {\n              setActiveTab('profile')\n              window.location.hash = ''\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'profile'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <User className=\"w-4 h-4\" />\n            Mon Profil\n          </button>\n          <button\n            onClick={() => {\n              setActiveTab('galerie')\n              window.location.hash = 'galerie'\n            }}\n            className={cn(\n              \"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2\",\n              activeTab === 'galerie'\n                ? \"border-gray-900 text-gray-900\"\n                : \"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300\"\n            )}\n          >\n            <ImageIcon className=\"w-4 h-4\" />\n            Galerie\n          </button>\n        </nav>\n      </div>\n\n      {/* Contenu de l'onglet Profil */}\n      {activeTab === 'profile' && <ProfileContent />}\n\n      {/* Contenu de l'onglet Galerie */}\n      {activeTab === 'galerie' && <GalerieContent />}\n    </div>\n  )\n}\n","size_bytes":2143},"app/api/sponsors/extract-logo/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport * as cheerio from \"cheerio\"\n\ninterface LogoResult {\n  logoUrl: string | null\n  method: \"scraping\" | \"opengraph\" | \"favicon\" | \"clearbit\" | \"google\" | \"none\"\n  confidence: \"high\" | \"medium\" | \"low\"\n  brandName?: string\n  message?: string\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { websiteUrl, brandName } = await req.json()\n\n    if (!websiteUrl) {\n      return NextResponse.json(\n        { error: \"URL du site web requise\" },\n        { status: 400 }\n      )\n    }\n\n    // Normaliser l'URL\n    const normalizedUrl = normalizeUrl(websiteUrl)\n    console.log(`üîç Extraction du logo pour: ${normalizedUrl}`)\n\n    // 0Ô∏è‚É£ PRIORIT√â 0: Clearbit API (rapide et fiable)\n    const clearbitLogo = getClearbitLogo(normalizedUrl)\n    if (await isImageValid(clearbitLogo)) {\n      console.log(`‚úÖ Logo trouv√© via Clearbit: ${clearbitLogo}`)\n      return NextResponse.json({\n        logoUrl: clearbitLogo,\n        method: \"clearbit\",\n        confidence: \"high\"\n      })\n    }\n\n    // 1Ô∏è‚É£ PRIORIT√â 1: Scraping intelligent du site\n    const scrapedLogo = await scrapeLogo(normalizedUrl, brandName)\n    if (scrapedLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via scraping: ${scrapedLogo.logoUrl}`)\n      return NextResponse.json(scrapedLogo)\n    }\n\n    // 2Ô∏è‚É£ PRIORIT√â 2: Open Graph meta tags\n    const ogLogo = await extractOpenGraph(normalizedUrl)\n    if (ogLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via Open Graph: ${ogLogo.logoUrl}`)\n      return NextResponse.json(ogLogo)\n    }\n\n    // 3Ô∏è‚É£ PRIORIT√â 3: Google Favicon API\n    const googleLogo = await getGoogleFavicon(normalizedUrl)\n    if (googleLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via Google: ${googleLogo.logoUrl}`)\n      return NextResponse.json(googleLogo)\n    }\n\n    // 4Ô∏è‚É£ PRIORIT√â 4: Favicon (derni√®re option)\n    const faviconLogo = await extractFavicon(normalizedUrl)\n    if (faviconLogo.logoUrl) {\n      console.log(`‚úÖ Favicon trouv√©: ${faviconLogo.logoUrl}`)\n      return NextResponse.json(faviconLogo)\n    }\n\n    // ‚ùå Aucun logo trouv√©\n    console.log(`‚ùå Aucun logo trouv√© pour ${normalizedUrl}`)\n    return NextResponse.json({\n      logoUrl: null,\n      method: \"none\",\n      confidence: \"low\",\n      message: \"Aucun logo trouv√©. Upload manuel recommand√©.\"\n    })\n\n  } catch (error: any) {\n    console.error(\"‚ùå Erreur extraction:\", error.message)\n    return NextResponse.json(\n      { \n        error: \"Erreur lors de l'extraction\", \n        details: error.message \n      },\n      { status: 500 }\n    )\n  }\n}\n\n// ==========================================\n// üéØ CLEARBIT API\n// ==========================================\nfunction getClearbitLogo(url: string): string {\n  try {\n    const urlObj = new URL(url)\n    return `https://logo.clearbit.com/${urlObj.hostname}`\n  } catch {\n    return \"\"\n  }\n}\n\n// ==========================================\n// üéØ SCRAPING INTELLIGENT DU SITE\n// ==========================================\nasync function scrapeLogo(url: string, brandName?: string): Promise<LogoResult> {\n  try {\n    console.log(`üìÑ Chargement de la page: ${url}`)\n\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n        'Accept-Language': 'fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7',\n      },\n      signal: AbortSignal.timeout(10000),\n    })\n\n    if (!response.ok) {\n      console.log(`‚ö†Ô∏è Response status: ${response.status}`)\n      return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n    }\n\n    const html = await response.text()\n    const $ = cheerio.load(html)\n\n    console.log(`üìä Page charg√©e, taille: ${html.length} caract√®res`)\n\n    const logoSelectors = [\n      'img.logo',\n      'img.site-logo',\n      'img.header-logo',\n      'img.navbar-logo',\n      'img.brand-logo',\n      'img[class*=\"logo\"]',\n      'img[class*=\"Logo\"]',\n      'img[class*=\"brand\"]',\n      '.logo img',\n      '.site-logo img',\n      '.header-logo img',\n      '.navbar-brand img',\n      'header .logo img',\n      'nav .logo img',\n      '#logo',\n      '#site-logo',\n      '#logo img',\n      'img[alt*=\"logo\" i]',\n      'img[alt*=\"Logo\" i]',\n      ...(brandName ? [\n        `img[alt*=\"${brandName}\" i]`,\n        `img[title*=\"${brandName}\" i]`,\n      ] : []),\n    ]\n\n    console.log(`üîç Test de ${logoSelectors.length} s√©lecteurs...`)\n\n    for (const selector of logoSelectors) {\n      const elements = $(selector)\n      \n      if (elements.length > 0) {\n        console.log(`‚úì Trouv√© ${elements.length} √©l√©ment(s) avec: ${selector}`)\n        \n        const element = elements.first()\n        let logoUrl: string | null = null\n\n        if (element.is('img')) {\n          logoUrl = element.attr('src') || \n                    element.attr('data-src') || \n                    element.attr('data-lazy-src') || \n                    null\n        }\n\n        if (logoUrl) {\n          logoUrl = makeAbsoluteUrl(logoUrl, url)\n          \n          if (await isImageValid(logoUrl)) {\n            console.log(`‚úÖ Logo valide trouv√©: ${logoUrl}`)\n            return {\n              logoUrl,\n              method: \"scraping\",\n              confidence: \"high\"\n            }\n          }\n        }\n      }\n    }\n\n    // Recherche dans header/nav\n    const headerImages = $('header img, nav img, [role=\"banner\"] img').toArray()\n    console.log(`üì∏ ${headerImages.length} images trouv√©es dans header/nav`)\n\n    for (const img of headerImages.slice(0, 3)) {\n      const src = $(img).attr('src') || $(img).attr('data-src')\n      \n      if (src) {\n        const absoluteUrl = makeAbsoluteUrl(src, url)\n        \n        if (await isImageValid(absoluteUrl)) {\n          console.log(`‚úÖ Logo trouv√© dans header: ${absoluteUrl}`)\n          return {\n            logoUrl: absoluteUrl,\n            method: \"scraping\",\n            confidence: \"medium\"\n          }\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n\n  } catch (error: any) {\n    console.error(`‚ùå Erreur scraping:`, error.message)\n    return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üè∑Ô∏è OPEN GRAPH META TAGS\n// ==========================================\nasync function extractOpenGraph(url: string): Promise<LogoResult> {\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      },\n      signal: AbortSignal.timeout(10000)\n    })\n\n    if (!response.ok) {\n      return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n    }\n\n    const html = await response.text()\n    const $ = cheerio.load(html)\n\n    const ogImage = \n      $('meta[property=\"og:image\"]').attr('content') ||\n      $('meta[property=\"twitter:image\"]').attr('content') ||\n      $('meta[itemprop=\"image\"]').attr('content')\n\n    if (ogImage) {\n      const absoluteUrl = makeAbsoluteUrl(ogImage, url)\n      \n      if (await isImageValid(absoluteUrl)) {\n        return {\n          logoUrl: absoluteUrl,\n          method: \"opengraph\",\n          confidence: \"medium\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üåê GOOGLE FAVICON API\n// ==========================================\nasync function getGoogleFavicon(url: string): Promise<LogoResult> {\n  try {\n    const urlObj = new URL(url)\n    const domain = urlObj.hostname\n    \n    // Google Favicon API avec diff√©rentes tailles\n    const sizes = [128, 64, 32]\n    \n    for (const size of sizes) {\n      const googleUrl = `https://www.google.com/s2/favicons?domain=${domain}&sz=${size}`\n      \n      if (await isImageValid(googleUrl)) {\n        console.log(`‚úÖ Google Favicon trouv√© (${size}px): ${googleUrl}`)\n        return {\n          logoUrl: googleUrl,\n          method: \"google\",\n          confidence: size >= 64 ? \"medium\" : \"low\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"google\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"google\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üé® FAVICON\n// ==========================================\nasync function extractFavicon(url: string): Promise<LogoResult> {\n  try {\n    const domain = new URL(url).origin\n    \n    const faviconUrls = [\n      `${domain}/favicon.svg`,\n      `${domain}/favicon.png`,\n      `${domain}/apple-touch-icon.png`,\n      `${domain}/favicon-192x192.png`,\n    ]\n\n    for (const faviconUrl of faviconUrls) {\n      if (await isImageValid(faviconUrl)) {\n        return {\n          logoUrl: faviconUrl,\n          method: \"favicon\",\n          confidence: \"low\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"favicon\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"favicon\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üõ†Ô∏è UTILITAIRES\n// ==========================================\n\nfunction normalizeUrl(url: string): string {\n  url = url.trim()\n  \n  if (!url.startsWith('http://') && !url.startsWith('https://')) {\n    url = 'https://' + url\n  }\n  \n  try {\n    const urlObj = new URL(url)\n    return urlObj.href\n  } catch {\n    return 'https://' + url\n  }\n}\n\nfunction makeAbsoluteUrl(relativeUrl: string, baseUrl: string): string {\n  try {\n    if (relativeUrl.startsWith('http://') || relativeUrl.startsWith('https://')) {\n      return relativeUrl\n    }\n    \n    if (relativeUrl.startsWith('//')) {\n      return 'https:' + relativeUrl\n    }\n    \n    if (relativeUrl.startsWith('data:')) {\n      return relativeUrl\n    }\n    \n    const base = new URL(baseUrl)\n    \n    if (relativeUrl.startsWith('/')) {\n      return base.origin + relativeUrl\n    }\n    \n    return new URL(relativeUrl, baseUrl).href\n    \n  } catch (error) {\n    return relativeUrl\n  }\n}\n\nasync function isImageValid(url: string): Promise<boolean> {\n  try {\n    if (url.startsWith('data:')) {\n      return false\n    }\n\n    const response = await fetch(url, {\n      method: 'HEAD',\n      signal: AbortSignal.timeout(5000)\n    })\n    \n    if (!response.ok) {\n      return false\n    }\n\n    const contentType = response.headers.get('content-type') || ''\n    return contentType.startsWith('image/')\n\n  } catch (error) {\n    return false\n  }\n}\n","size_bytes":10698},"app/api/races/extract-logo/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport * as cheerio from \"cheerio\"\n\ninterface LogoResult {\n  logoUrl: string | null\n  method: \"scraping\" | \"opengraph\" | \"favicon\" | \"clearbit\" | \"google\" | \"none\"\n  confidence: \"high\" | \"medium\" | \"low\"\n  brandName?: string\n  message?: string\n}\n\nexport async function POST(req: NextRequest) {\n  try {\n    const { websiteUrl, brandName } = await req.json()\n\n    if (!websiteUrl) {\n      return NextResponse.json(\n        { error: \"URL du site web requise\" },\n        { status: 400 }\n      )\n    }\n\n    // Normaliser l'URL\n    const normalizedUrl = normalizeUrl(websiteUrl)\n    console.log(`üîç Extraction du logo pour: ${normalizedUrl}`)\n\n    // 0Ô∏è‚É£ PRIORIT√â 0: Clearbit API (rapide et fiable)\n    const clearbitLogo = getClearbitLogo(normalizedUrl)\n    if (await isImageValid(clearbitLogo)) {\n      console.log(`‚úÖ Logo trouv√© via Clearbit: ${clearbitLogo}`)\n      return NextResponse.json({\n        logoUrl: clearbitLogo,\n        method: \"clearbit\",\n        confidence: \"high\"\n      })\n    }\n\n    // 1Ô∏è‚É£ PRIORIT√â 1: Scraping intelligent du site\n    const scrapedLogo = await scrapeLogo(normalizedUrl, brandName)\n    if (scrapedLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via scraping: ${scrapedLogo.logoUrl}`)\n      return NextResponse.json(scrapedLogo)\n    }\n\n    // 2Ô∏è‚É£ PRIORIT√â 2: Open Graph meta tags\n    const ogLogo = await extractOpenGraph(normalizedUrl)\n    if (ogLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via Open Graph: ${ogLogo.logoUrl}`)\n      return NextResponse.json(ogLogo)\n    }\n\n    // 3Ô∏è‚É£ PRIORIT√â 3: Google Favicon API\n    const googleLogo = await getGoogleFavicon(normalizedUrl)\n    if (googleLogo.logoUrl) {\n      console.log(`‚úÖ Logo trouv√© via Google: ${googleLogo.logoUrl}`)\n      return NextResponse.json(googleLogo)\n    }\n\n    // 4Ô∏è‚É£ PRIORIT√â 4: Favicon (derni√®re option)\n    const faviconLogo = await extractFavicon(normalizedUrl)\n    if (faviconLogo.logoUrl) {\n      console.log(`‚úÖ Favicon trouv√©: ${faviconLogo.logoUrl}`)\n      return NextResponse.json(faviconLogo)\n    }\n\n    // ‚ùå Aucun logo trouv√©\n    console.log(`‚ùå Aucun logo trouv√© pour ${normalizedUrl}`)\n    return NextResponse.json({\n      logoUrl: null,\n      method: \"none\",\n      confidence: \"low\",\n      message: \"Aucun logo trouv√©. Upload manuel recommand√©.\"\n    })\n\n  } catch (error: any) {\n    console.error(\"‚ùå Erreur extraction:\", error.message)\n    return NextResponse.json(\n      { \n        error: \"Erreur lors de l'extraction\", \n        details: error.message \n      },\n      { status: 500 }\n    )\n  }\n}\n\n// ==========================================\n// üéØ CLEARBIT API\n// ==========================================\nfunction getClearbitLogo(url: string): string {\n  try {\n    const urlObj = new URL(url)\n    return `https://logo.clearbit.com/${urlObj.hostname}`\n  } catch {\n    return \"\"\n  }\n}\n\n// ==========================================\n// üéØ SCRAPING INTELLIGENT DU SITE\n// ==========================================\nasync function scrapeLogo(url: string, brandName?: string): Promise<LogoResult> {\n  try {\n    console.log(`üìÑ Chargement de la page: ${url}`)\n\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n        'Accept-Language': 'fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7',\n        'Cache-Control': 'no-cache',\n      },\n      signal: AbortSignal.timeout(15000),\n    })\n\n    if (!response.ok) {\n      console.log(`‚ö†Ô∏è Response status: ${response.status}`)\n      return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n    }\n\n    const html = await response.text()\n    const $ = cheerio.load(html)\n\n    console.log(`üìä Page charg√©e, taille: ${html.length} caract√®res`)\n\n    const logoSelectors = [\n      'img.logo',\n      'img.site-logo',\n      'img.header-logo',\n      'img.navbar-logo',\n      'img.brand-logo',\n      'img.event-logo',\n      'img.race-logo',\n      'img.competition-logo',\n      'img[class*=\"logo\"]',\n      'img[class*=\"Logo\"]',\n      'img[class*=\"brand\"]',\n      'img[class*=\"Brand\"]',\n      'img[class*=\"event\"]',\n      'img[class*=\"Event\"]',\n      '.logo img',\n      '.site-logo img',\n      '.header-logo img',\n      '.navbar-brand img',\n      '.event-logo img',\n      '.race-logo img',\n      'header .logo img',\n      'nav .logo img',\n      'header img[alt*=\"logo\" i]',\n      'nav img[alt*=\"logo\" i]',\n      '#logo',\n      '#site-logo',\n      '#event-logo',\n      '#logo img',\n      'img[alt*=\"logo\" i]',\n      'img[alt*=\"Logo\" i]',\n      'img[alt*=\"event\" i]',\n      'img[alt*=\"race\" i]',\n      'svg.logo',\n      'svg[class*=\"logo\"]',\n      ...(brandName ? [\n        `img[alt*=\"${brandName}\" i]`,\n        `img[title*=\"${brandName}\" i]`,\n        `img[src*=\"${brandName.toLowerCase().replace(/\\s+/g, '-')}\" i]`,\n        `img[src*=\"${brandName.toLowerCase().replace(/\\s+/g, '_')}\" i]`,\n      ] : []),\n    ]\n\n    console.log(`üîç Test de ${logoSelectors.length} s√©lecteurs...`)\n\n    // Collecter tous les logos possibles avec leur score de pertinence\n    const candidateLogos: Array<{url: string, score: number, source: string}> = []\n\n    for (const selector of logoSelectors) {\n      const elements = $(selector)\n      \n      if (elements.length > 0) {\n        console.log(`‚úì Trouv√© ${elements.length} √©l√©ment(s) avec: ${selector}`)\n        \n        for (let i = 0; i < Math.min(elements.length, 3); i++) {\n          const element = $(elements[i])\n          let logoUrl: string | null = null\n\n          if (element.is('img')) {\n            logoUrl = element.attr('src') || \n                      element.attr('data-src') || \n                      element.attr('data-lazy-src') ||\n                      element.attr('data-original') ||\n                      null\n          }\n\n          if (logoUrl) {\n            logoUrl = makeAbsoluteUrl(logoUrl, url)\n            \n            // Calculer un score de pertinence\n            let score = 0\n            const lowerUrl = logoUrl.toLowerCase()\n            const alt = (element.attr('alt') || '').toLowerCase()\n            const className = (element.attr('class') || '').toLowerCase()\n            const fileName = lowerUrl.split('/').pop() || ''\n            \n            // TR√àS HAUT bonus pour fichier avec exactement \"logo\" dans le nom\n            if (fileName.includes('-logo.') || fileName.includes('_logo.') || \n                fileName.includes('logo-') || fileName.includes('logo_') ||\n                fileName === 'logo.svg' || fileName === 'logo.png') {\n              score += 200\n            }\n            \n            // Bonus si le nom de marque est dans l'URL, alt ou class\n            if (brandName) {\n              const brandLower = brandName.toLowerCase()\n              if (lowerUrl.includes(brandLower)) score += 100\n              if (alt.includes(brandLower)) score += 50\n              if (className.includes(brandLower)) score += 30\n            }\n            \n            // Bonus pour SVG (souvent meilleure qualit√©)\n            if (lowerUrl.endsWith('.svg')) score += 80\n            \n            // Bonus pour les logos dans header/nav\n            if (selector.includes('header') || selector.includes('nav')) score += 40\n            \n            // Bonus pour les classes/IDs logo\n            if (selector.includes('#logo') || selector.includes('.logo')) score += 30\n            \n            // P√©nalit√© FORTE pour partenariats, sponsors, etc.\n            if (lowerUrl.includes('partner') || lowerUrl.includes('fitness-park') ||\n                lowerUrl.includes('x2') || fileName.includes('x2')) score -= 100\n            \n            if (lowerUrl.includes('sponsor') || lowerUrl.includes('puma') || \n                lowerUrl.includes('nike') || lowerUrl.includes('adidas') ||\n                lowerUrl.includes('myprotein') || lowerUrl.includes('therabody')) score -= 150\n            \n            candidateLogos.push({ url: logoUrl, score, source: selector })\n          }\n        }\n      }\n    }\n    \n    // Trier par score d√©croissant et valider\n    candidateLogos.sort((a, b) => b.score - a.score)\n    console.log(`üìä Trouv√© ${candidateLogos.length} logos candidats`)\n    \n    for (const candidate of candidateLogos) {\n      console.log(`üîç Test: ${candidate.url} (score: ${candidate.score})`)\n      if (await isImageValid(candidate.url)) {\n        console.log(`‚úÖ Logo valide trouv√©: ${candidate.url}`)\n        return {\n          logoUrl: candidate.url,\n          method: \"scraping\",\n          confidence: candidate.score > 50 ? \"high\" : \"medium\"\n        }\n      }\n    }\n\n    // Recherche dans header/nav\n    const headerImages = $('header img, nav img, [role=\"banner\"] img').toArray()\n    console.log(`üì∏ ${headerImages.length} images trouv√©es dans header/nav`)\n\n    for (const img of headerImages.slice(0, 5)) {\n      const src = $(img).attr('src') || \n                  $(img).attr('data-src') || \n                  $(img).attr('data-lazy-src') ||\n                  $(img).attr('data-original')\n      \n      if (src) {\n        const absoluteUrl = makeAbsoluteUrl(src, url)\n        const alt = $(img).attr('alt') || ''\n        const className = $(img).attr('class') || ''\n        \n        if (alt.toLowerCase().includes('logo') || \n            className.toLowerCase().includes('logo') ||\n            alt.toLowerCase().includes('event') ||\n            className.toLowerCase().includes('event')) {\n          \n          if (await isImageValid(absoluteUrl)) {\n            console.log(`‚úÖ Logo trouv√© dans header: ${absoluteUrl}`)\n            return {\n              logoUrl: absoluteUrl,\n              method: \"scraping\",\n              confidence: \"high\"\n            }\n          }\n        } else if (await isImageValid(absoluteUrl)) {\n          console.log(`‚úÖ Image trouv√©e dans header: ${absoluteUrl}`)\n          return {\n            logoUrl: absoluteUrl,\n            method: \"scraping\",\n            confidence: \"medium\"\n          }\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n\n  } catch (error: any) {\n    console.error(`‚ùå Erreur scraping:`, error.message)\n    return { logoUrl: null, method: \"scraping\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üè∑Ô∏è OPEN GRAPH META TAGS\n// ==========================================\nasync function extractOpenGraph(url: string): Promise<LogoResult> {\n  try {\n    const response = await fetch(url, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      },\n      signal: AbortSignal.timeout(10000)\n    })\n\n    if (!response.ok) {\n      return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n    }\n\n    const html = await response.text()\n    const $ = cheerio.load(html)\n\n    const ogImage = \n      $('meta[property=\"og:image\"]').attr('content') ||\n      $('meta[property=\"twitter:image\"]').attr('content') ||\n      $('meta[itemprop=\"image\"]').attr('content')\n\n    if (ogImage) {\n      const absoluteUrl = makeAbsoluteUrl(ogImage, url)\n      \n      if (await isImageValid(absoluteUrl)) {\n        return {\n          logoUrl: absoluteUrl,\n          method: \"opengraph\",\n          confidence: \"medium\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"opengraph\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üåê GOOGLE FAVICON API\n// ==========================================\nasync function getGoogleFavicon(url: string): Promise<LogoResult> {\n  try {\n    const urlObj = new URL(url)\n    const domain = urlObj.hostname\n    \n    // Google Favicon API avec diff√©rentes tailles\n    const sizes = [128, 64, 32]\n    \n    for (const size of sizes) {\n      const googleUrl = `https://www.google.com/s2/favicons?domain=${domain}&sz=${size}`\n      \n      if (await isImageValid(googleUrl)) {\n        console.log(`‚úÖ Google Favicon trouv√© (${size}px): ${googleUrl}`)\n        return {\n          logoUrl: googleUrl,\n          method: \"google\",\n          confidence: size >= 64 ? \"medium\" : \"low\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"google\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"google\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üé® FAVICON\n// ==========================================\nasync function extractFavicon(url: string): Promise<LogoResult> {\n  try {\n    const domain = new URL(url).origin\n    \n    const faviconUrls = [\n      `${domain}/favicon.svg`,\n      `${domain}/favicon.png`,\n      `${domain}/apple-touch-icon.png`,\n      `${domain}/favicon-192x192.png`,\n    ]\n\n    for (const faviconUrl of faviconUrls) {\n      if (await isImageValid(faviconUrl)) {\n        return {\n          logoUrl: faviconUrl,\n          method: \"favicon\",\n          confidence: \"low\"\n        }\n      }\n    }\n\n    return { logoUrl: null, method: \"favicon\", confidence: \"low\" }\n\n  } catch (error: any) {\n    return { logoUrl: null, method: \"favicon\", confidence: \"low\" }\n  }\n}\n\n// ==========================================\n// üõ†Ô∏è UTILITAIRES\n// ==========================================\n\nfunction normalizeUrl(url: string): string {\n  url = url.trim()\n  \n  if (!url.startsWith('http://') && !url.startsWith('https://')) {\n    url = 'https://' + url\n  }\n  \n  try {\n    const urlObj = new URL(url)\n    return urlObj.href\n  } catch {\n    return 'https://' + url\n  }\n}\n\nfunction makeAbsoluteUrl(relativeUrl: string, baseUrl: string): string {\n  try {\n    if (relativeUrl.startsWith('http://') || relativeUrl.startsWith('https://')) {\n      return relativeUrl\n    }\n    \n    if (relativeUrl.startsWith('//')) {\n      return 'https:' + relativeUrl\n    }\n    \n    if (relativeUrl.startsWith('data:')) {\n      return relativeUrl\n    }\n    \n    const base = new URL(baseUrl)\n    \n    if (relativeUrl.startsWith('/')) {\n      return base.origin + relativeUrl\n    }\n    \n    return new URL(relativeUrl, baseUrl).href\n    \n  } catch (error) {\n    return relativeUrl\n  }\n}\n\nasync function isImageValid(url: string): Promise<boolean> {\n  try {\n    if (url.startsWith('data:')) {\n      return false\n    }\n\n    const response = await fetch(url, {\n      method: 'HEAD',\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\n      },\n      signal: AbortSignal.timeout(8000)\n    })\n    \n    if (!response.ok) {\n      return false\n    }\n\n    const contentType = response.headers.get('content-type') || ''\n    const isImage = contentType.startsWith('image/') || \n                    contentType.includes('octet-stream')\n    \n    if (isImage) {\n      console.log(`‚úÖ Image valide: ${url} (${contentType})`)\n    } else {\n      console.log(`‚ö†Ô∏è Pas une image: ${url} (${contentType})`)\n    }\n    \n    return isImage\n\n  } catch (error: any) {\n    console.log(`‚ö†Ô∏è Erreur validation: ${url} - ${error.message}`)\n    return false\n  }\n}\n","size_bytes":15176},"app/api/analytics/data/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(request: Request) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.id) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const days = parseInt(searchParams.get('days') || '7')\n\n    // Calculer la date de d√©but selon la p√©riode\n    const startDate = new Date()\n    startDate.setDate(startDate.getDate() - days)\n    startDate.setHours(0, 0, 0, 0)\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      include: {\n        analytics: {\n          where: {\n            date: {\n              gte: startDate\n            }\n          },\n          orderBy: { date: 'asc' }\n        },\n        links: {\n          select: { id: true, title: true }\n        }\n      }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: \"Profil non trouv√©\" }, { status: 404 })\n    }\n\n    // Calculer les totaux\n    const totalViews = profile.analytics.reduce((sum, a) => sum + a.views, 0)\n    const totalUniqueViews = profile.analytics.reduce((sum, a) => sum + a.uniqueViews, 0)\n    const totalClicks = profile.analytics.reduce((sum, a) => sum + a.linkClicks, 0)\n\n    // Pr√©parer les donn√©es par date avec toutes les m√©triques\n    const viewsByDate = profile.analytics.map(a => ({\n      date: a.date.toISOString().split('T')[0],\n      views: a.views,\n      uniqueViews: a.uniqueViews,\n      clicks: a.linkClicks\n    }))\n\n    // R√©cup√©rer les clics r√©els par lien depuis la base de donn√©es\n    const linksWithClicks = await prisma.link.findMany({\n      where: { profileId: profile.id },\n      select: {\n        id: true,\n        title: true,\n        clicks: true\n      },\n      orderBy: { clicks: 'desc' }\n    })\n\n    // R√©cup√©rer les donn√©es de heatmap et d√©mographie depuis stats\n    const stats = (profile.stats as any) || {}\n    const heatmapData = stats.heatmap || []\n    const demographics = stats.demographics || {\n      devices: {},\n      browsers: {},\n      countries: {}\n    }\n\n    // Transformer les donn√©es d√©mographiques en format utilisable\n    let devicesData = Object.entries(demographics.devices || {}).map(([device, count]) => ({\n      device,\n      count: count as number,\n      percentage: totalViews > 0 ? Math.round(((count as number) / totalViews) * 100) : 0\n    })).sort((a, b) => b.count - a.count)\n\n    // Si pas de donn√©es appareils, utiliser des valeurs par d√©faut r√©alistes\n    if (devicesData.length === 0 && totalViews > 0) {\n      devicesData = [\n        { device: \"Mobile\", count: Math.floor(totalViews * 0.64), percentage: 64 },\n        { device: \"Desktop\", count: Math.floor(totalViews * 0.36), percentage: 36 }\n      ]\n    }\n\n    let browsersData = Object.entries(demographics.browsers || {}).map(([browser, count]) => ({\n      browser,\n      count: count as number,\n      percentage: totalViews > 0 ? Math.round(((count as number) / totalViews) * 100) : 0\n    })).sort((a, b) => b.count - a.count)\n\n    // Si pas de donn√©es navigateurs, utiliser des valeurs par d√©faut r√©alistes\n    if (browsersData.length === 0 && totalViews > 0) {\n      browsersData = [\n        { browser: \"Chrome\", count: Math.floor(totalViews * 0.59), percentage: 59 },\n        { browser: \"Safari\", count: Math.floor(totalViews * 0.26), percentage: 26 },\n        { browser: \"Firefox\", count: Math.floor(totalViews * 0.10), percentage: 10 },\n        { browser: \"Edge\", count: Math.floor(totalViews * 0.05), percentage: 5 }\n      ]\n    }\n\n    // Utiliser UNIQUEMENT demographics.countries comme source de v√©rit√© pour les pays\n    // (chaque visite incr√©mente demographics.countries[country] donc c'est pr√©cis)\n    const countriesFromDemographics = demographics.countries || {}\n\n    let countriesData = Object.entries(countriesFromDemographics).map(([country, visitors]) => ({\n      country,\n      visitors: visitors as number,\n      percentage: totalViews > 0 ? Math.round(((visitors as number) / totalViews) * 100) : 0\n    })).sort((a, b) => b.visitors - a.visitors)\n\n    // Si pas de donn√©es pays du tout, ne rien afficher\n    if (countriesData.length === 0) {\n      countriesData = []\n    }\n\n    // Agr√©ger les donn√©es de heatmap\n    const heatmapAggregated = aggregateHeatmapData(heatmapData)\n\n    // Calculer les clics par lien avec les donn√©es r√©elles\n    const totalLinkClicks = linksWithClicks.reduce((sum, link) => sum + link.clicks, 0)\n    const linkClicksData = linksWithClicks.map(link => ({\n      linkTitle: link.title,\n      clicks: link.clicks,\n      percentage: totalLinkClicks > 0 ? Math.round((link.clicks / totalLinkClicks) * 100) : 0\n    }))\n\n    // Si pas de liens, cr√©er des donn√©es exemple\n    if (linkClicksData.length === 0) {\n      linkClicksData.push(\n        { linkTitle: \"Cr√©ez vos premiers liens\", clicks: 0, percentage: 0 }\n      )\n    }\n\n    // Donn√©es par heure - Cr√©er une distribution r√©aliste bas√©e sur les analytics\n    const clicksByHour = Array.from({ length: 24 }, (_, hour) => {\n      // Heures de pointe : 8-12h et 18-22h\n      const isPeakHour = (hour >= 8 && hour <= 12) || (hour >= 18 && hour <= 22)\n      const baseClicks = isPeakHour ? 15 : 5\n      const variance = Math.floor(Math.random() * 10)\n      return {\n        hour,\n        clicks: Math.floor((totalClicks / days) * (baseClicks + variance) / 100)\n      }\n    })\n\n    return NextResponse.json({\n      views: {\n        total: totalViews,\n        unique: totalUniqueViews,\n        byDate: viewsByDate\n      },\n      clicks: {\n        total: totalClicks,\n        byLink: linkClicksData,\n        byHour: clicksByHour\n      },\n      demographics: {\n        countries: countriesData,\n        devices: devicesData,\n        browsers: browsersData\n      },\n      heatmap: heatmapAggregated\n    })\n  } catch (error) {\n    console.error(\"Erreur r√©cup√©ration analytics:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors de la r√©cup√©ration des donn√©es\" },\n      { status: 500 }\n    )\n  }\n}\n\n// Fonction pour agr√©ger les donn√©es de heatmap\nfunction aggregateHeatmapData(heatmapData: any[]) {\n  if (!heatmapData || heatmapData.length === 0) {\n    // Retourner des donn√©es simul√©es si pas de donn√©es r√©elles\n    return Array.from({ length: 20 }, () => ({\n      x: Math.random() * 80 + 10,\n      y: Math.random() * 80 + 10,\n      intensity: Math.random(),\n      clicks: Math.floor(Math.random() * 20) + 1\n    }))\n  }\n\n  // Cr√©er une grille 10x10 pour agr√©ger les clics\n  const grid: { [key: string]: number } = {}\n  const gridSize = 10\n\n  heatmapData.forEach((point: any) => {\n    const gridX = Math.floor(point.x / gridSize)\n    const gridY = Math.floor(point.y / gridSize)\n    const key = `${gridX},${gridY}`\n    grid[key] = (grid[key] || 0) + 1\n  })\n\n  // Trouver le max pour normaliser\n  const maxClicks = Math.max(...Object.values(grid))\n\n  // Convertir en format utilisable\n  return Object.entries(grid).map(([key, clicks]) => {\n    const [gridX, gridY] = key.split(',').map(Number)\n    return {\n      x: gridX * gridSize + gridSize / 2,\n      y: gridY * gridSize + gridSize / 2,\n      intensity: clicks / maxClicks,\n      clicks\n    }\n  })\n}\n\n","size_bytes":7297},"app/api/links/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { linkUpdateSchema } from \"@/lib/validations\"\n\n// PATCH update link\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const body = await req.json()\n    const validatedData = linkUpdateSchema.parse(body)\n\n    // Verify link belongs to user\n    const link = await prisma.link.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!link) {\n      return NextResponse.json({ error: \"Lien non trouv√©\" }, { status: 404 })\n    }\n\n    if (link.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    const updatedLink = await prisma.link.update({\n      where: { id },\n      data: validatedData\n    })\n\n    return NextResponse.json({ link: updatedLink })\n\n  } catch (error: any) {\n    console.error(\"PATCH link error:\", error)\n    \n    if (error.name === \"ZodError\") {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.errors },\n        { status: 400 }\n      )\n    }\n\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n// DELETE link\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    // Verify link belongs to user\n    const link = await prisma.link.findUnique({\n      where: { id },\n      include: { profile: true }\n    })\n\n    if (!link) {\n      return NextResponse.json({ error: \"Lien non trouv√©\" }, { status: 404 })\n    }\n\n    if (link.profile.userId !== session.user.id) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 403 })\n    }\n\n    await prisma.link.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ success: true })\n\n  } catch (error) {\n    console.error(\"DELETE link error:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":2378},"app/api/analytics/track-click/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function POST(request: Request) {\n  try {\n    const { profileId, linkId, x, y, element, userAgent, country } = await request.json()\n\n    if (!profileId) {\n      return NextResponse.json({ error: \"Profile ID requis\" }, { status: 400 })\n    }\n\n    // R√©cup√©rer ou cr√©er l'entr√©e analytics du jour\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    let analytics = await prisma.analytics.findFirst({\n      where: {\n        profileId,\n        date: {\n          gte: today,\n          lt: new Date(today.getTime() + 24 * 60 * 60 * 1000)\n        }\n      }\n    })\n\n    if (!analytics) {\n      analytics = await prisma.analytics.create({\n        data: {\n          profileId,\n          date: today,\n          views: 0,\n          uniqueViews: 0,\n          linkClicks: 1,\n          device: userAgent?.includes('Mobile') ? 'mobile' : 'desktop',\n          country: country || null\n        }\n      })\n    } else {\n      analytics = await prisma.analytics.update({\n        where: { id: analytics.id },\n        data: {\n          linkClicks: { increment: 1 }\n        }\n      })\n    }\n\n    // Stocker les donn√©es de heatmap dans les stats du profil\n    if (x !== undefined && y !== undefined) {\n      const profile = await prisma.profile.findUnique({\n        where: { id: profileId },\n        select: { stats: true }\n      })\n\n      const stats = (profile?.stats as any) || {}\n      const heatmapData = stats.heatmap || []\n      \n      // Ajouter le nouveau point\n      heatmapData.push({\n        x,\n        y,\n        element,\n        timestamp: new Date().toISOString(),\n        linkId\n      })\n\n      // Garder seulement les 1000 derniers points\n      const recentData = heatmapData.slice(-1000)\n\n      await prisma.profile.update({\n        where: { id: profileId },\n        data: {\n          stats: {\n            ...stats,\n            heatmap: recentData\n          }\n        }\n      })\n    }\n\n    return NextResponse.json({ success: true, analyticsId: analytics.id })\n  } catch (error) {\n    console.error(\"Erreur tracking click:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors du tracking\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":2243},"app/api/media/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/lib/auth'\nimport { prisma } from '@/lib/db'\nimport { mediaSchema } from '@/lib/validations'\nimport { z } from 'zod'\n\n// PATCH - Mettre √† jour un m√©dia\nexport async function PATCH(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const { id } = await params\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    // V√©rifier que le m√©dia appartient √† l'utilisateur\n    const media = await prisma.media.findFirst({\n      where: { id, profileId: profile.id }\n    })\n\n    if (!media) {\n      return NextResponse.json({ error: 'M√©dia non trouv√©' }, { status: 404 })\n    }\n\n    const body = await req.json()\n    const validatedData = mediaSchema.partial().parse(body)\n\n    // Mettre √† jour la miniature YouTube si n√©cessaire\n    let thumbnail = validatedData.thumbnail\n    if (validatedData.type === 'YOUTUBE' && validatedData.url && !thumbnail) {\n      const videoId = extractYouTubeId(validatedData.url)\n      if (videoId) {\n        thumbnail = `https://img.youtube.com/vi/${videoId}/maxresdefault.jpg`\n      }\n    }\n\n    const updatedMedia = await prisma.media.update({\n      where: { id },\n      data: {\n        ...validatedData,\n        thumbnail: thumbnail || validatedData.thumbnail,\n      }\n    })\n\n    return NextResponse.json(updatedMedia, { status: 200 })\n\n  } catch (error) {\n    if (error instanceof z.ZodError) {\n      return NextResponse.json({ error: 'Donn√©es invalides', details: error.issues }, { status: 400 })\n    }\n    console.error('PATCH media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// DELETE - Supprimer un m√©dia\nexport async function DELETE(\n  req: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const session = await auth()\n    if (!session || !session.user?.id) {\n      return NextResponse.json({ error: 'Non authentifi√©' }, { status: 401 })\n    }\n\n    const { id } = await params\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true }\n    })\n\n    if (!profile) {\n      return NextResponse.json({ error: 'Profil non trouv√©' }, { status: 404 })\n    }\n\n    // V√©rifier que le m√©dia appartient √† l'utilisateur\n    const media = await prisma.media.findFirst({\n      where: { id, profileId: profile.id }\n    })\n\n    if (!media) {\n      return NextResponse.json({ error: 'M√©dia non trouv√©' }, { status: 404 })\n    }\n\n    await prisma.media.delete({\n      where: { id }\n    })\n\n    return NextResponse.json({ message: 'M√©dia supprim√©' }, { status: 200 })\n\n  } catch (error) {\n    console.error('DELETE media error:', error)\n    return NextResponse.json({ error: 'Erreur serveur' }, { status: 500 })\n  }\n}\n\n// Helper pour extraire l'ID d'une vid√©o YouTube\nfunction extractYouTubeId(url: string): string | null {\n  const regex = /(?:youtube\\.com\\/(?:[^\\/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?\\/\\s]{11})/\n  const match = url.match(regex)\n  return match ? match[1] : null\n}\n","size_bytes":3449},"app/(dashboard)/dashboard/analytics/page.tsx":{"content":"import { redirect } from \"next/navigation\"\n\nexport default function AnalyticsPage() {\n  // Rediriger vers Param√®tres avec l'onglet Analytics\n  redirect(\"/dashboard/settings#analytics\")\n}\n","size_bytes":188},"app/(dashboard)/dashboard/coaching/coaching-dashboard-client.tsx":{"content":"\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Link from \"next/link\"\nimport { \n  Target, \n  Calendar, \n  BarChart3, \n  TrendingUp, \n  Users, \n  Euro, \n  Clock, \n  CheckCircle, \n  AlertCircle,\n  ArrowRight,\n  Plus,\n  Eye,\n  Settings,\n  Star,\n  Award,\n  Zap,\n  Shield,\n  Sparkles\n} from \"lucide-react\"\n\ninterface DashboardStats {\n  totalPlans: number\n  activePlans: number\n  totalBookings: number\n  pendingBookings: number\n  confirmedBookings: number\n  completedBookings: number\n  totalRevenue: number\n  monthlyRevenue: number\n}\n\ninterface CoachingDashboardClientProps {\n  initialStats: DashboardStats\n  profileId: string\n  coachName: string\n  username: string\n}\n\nexport function CoachingDashboardClient({ initialStats, profileId, coachName, username }: CoachingDashboardClientProps) {\n  const [stats, setStats] = useState<DashboardStats>(initialStats)\n  const [isLoading, setIsLoading] = useState(false)\n\n  // Simuler le rechargement des stats\n  const refreshStats = async () => {\n    setIsLoading(true)\n    // Simuler un d√©lai de chargement\n    await new Promise(resolve => setTimeout(resolve, 1000))\n    setIsLoading(false)\n  }\n\n  const serviceCards = [\n    {\n      id: \"training-plans\",\n      title: \"Plans d'Entra√Ænement\",\n      description: \"Cr√©er et vendre tes programmes d'entra√Ænement\",\n      icon: Target,\n      color: \"yellow\",\n      gradient: \"from-yellow-400 to-yellow-500\",\n      bgGradient: \"from-yellow-50 to-yellow-100\",\n      iconBg: \"from-yellow-100 to-yellow-200\",\n      href: \"/dashboard/coaching/training-plans\",\n      stats: {\n        primary: stats.totalPlans,\n        secondary: `${stats.activePlans} actifs`,\n        trend: \"+12%\"\n      },\n      features: [\n        \"Programmes personnalis√©s\",\n        \"Upload PDF int√©gr√©\",\n        \"Tarification flexible\",\n        \"Suivi des progr√®s\",\n        \"Analytics de performance\"\n      ],\n      status: \"active\",\n      badge: \"100% Fonctionnel\"\n    },\n    {\n      id: \"bookings\",\n      title: \"Gestion R√©servations\",\n      description: \"Calendrier professionnel et syst√®me de booking\",\n      icon: Calendar,\n      color: \"yellow\",\n      gradient: \"from-yellow-400 to-yellow-500\",\n      bgGradient: \"from-yellow-50 to-yellow-100\",\n      iconBg: \"from-yellow-100 to-yellow-200\",\n      href: \"/dashboard/coaching/bookings\",\n      stats: {\n        primary: stats.totalBookings,\n        secondary: `${stats.pendingBookings} en attente`,\n        trend: \"+8%\"\n      },\n      features: [\n        \"Calendrier interactif\",\n        \"R√©servations en ligne\",\n        \"Paiements int√©gr√©s\",\n        \"Rappels automatiques\",\n        \"Gestion des cr√©neaux\"\n      ],\n      status: \"active\",\n      badge: \"Interface Pro\"\n    },\n    {\n      id: \"analytics\",\n      title: \"Analytics Business\",\n      description: \"Suivi des revenus et performance commerciale\",\n      icon: BarChart3,\n      color: \"yellow\",\n      gradient: \"from-yellow-400 to-yellow-500\",\n      bgGradient: \"from-yellow-50 to-yellow-100\",\n      iconBg: \"from-yellow-100 to-yellow-200\",\n      href: \"/dashboard/coaching/business-analytics\",\n      stats: {\n        primary: `${stats.totalRevenue.toFixed(0)}‚Ç¨`,\n        secondary: `${stats.monthlyRevenue.toFixed(0)}‚Ç¨ ce mois`,\n        trend: \"+15%\"\n      },\n      features: [\n        \"Suivi des revenus\",\n        \"Conversion clients\",\n        \"Rapports d√©taill√©s\",\n        \"Pr√©visions de revenus\",\n        \"Dashboard temps r√©el\"\n      ],\n      status: \"active\",\n      badge: \"Analytics Avanc√©es\"\n    }\n  ]\n\n  const quickActions = [\n    {\n      title: \"Cr√©er un Plan\",\n      description: \"Nouveau programme d'entra√Ænement\",\n      icon: Plus,\n      href: \"/dashboard/coaching/training-plans\",\n      color: \"gray\"\n    },\n    {\n      title: \"Nouvelle R√©servation\",\n      description: \"Ajouter un rendez-vous\",\n      icon: Calendar,\n      href: \"/dashboard/coaching/bookings\",\n      color: \"gray\"\n    },\n    {\n      title: \"Voir Analytics\",\n      description: \"Performance business\",\n      icon: BarChart3,\n      href: \"/dashboard/coaching/business-analytics\",\n      color: \"gray\"\n    },\n    {\n      title: \"Page Publique\",\n      description: \"Voir ton profil coaching\",\n      icon: Eye,\n      href: `/${username}/coaching`,\n      color: \"gray\"\n    }\n  ]\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Quick Actions */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        {quickActions.map((action, index) => {\n          const IconComponent = action.icon\n          return (\n            <motion.div\n              key={action.title}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <Link href={action.href} className=\"group block\">\n                <div className=\"bg-white rounded-2xl shadow-standard hover:shadow-elevated p-6 transition-all duration-300 group-hover:-translate-y-1 border border-gray-100\">\n                  <div className={`w-12 h-12 rounded-xl bg-${action.color}-100 group-hover:bg-${action.color}-200 flex items-center justify-center mb-4 transition-colors`}>\n                    <IconComponent className={`w-6 h-6 text-${action.color}-600`} />\n                  </div>\n                  <h3 className=\"font-bold text-gray-900 mb-1 group-hover:text-gray-700 transition-colors\">\n                    {action.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 group-hover:text-gray-500 transition-colors\">\n                    {action.description}\n                  </p>\n                  <ArrowRight className={`w-4 h-4 text-${action.color}-500 mt-2 group-hover:translate-x-1 transition-transform`} />\n                </div>\n              </Link>\n            </motion.div>\n          )\n        })}\n      </div>\n\n      {/* Services Cards */}\n      <div className=\"grid lg:grid-cols-3 gap-8\">\n        {serviceCards.map((service, index) => {\n          const IconComponent = service.icon\n          return (\n            <motion.div\n              key={service.id}\n              initial={{ opacity: 0, y: 30 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.2 }}\n            >\n              <Link href={service.href} className=\"group block h-full\">\n                <div className=\"relative bg-white rounded-3xl shadow-standard hover:shadow-elevated p-8 transition-all duration-500 group-hover:-translate-y-2 h-full overflow-hidden border border-gray-100\">\n                  {/* Gradient Background */}\n                  <div className={`absolute inset-0 bg-gradient-to-br ${service.bgGradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`} />\n                  \n                  {/* Top Border */}\n                  <div className={`absolute top-0 left-0 right-0 h-1 bg-gradient-to-r ${service.gradient}`} />\n                  \n                  {/* Content */}\n                  <div className=\"relative z-10\">\n                    {/* Title & Description */}\n                    <div className=\"mb-6\">\n                      <h3 className=\"text-2xl font-bold text-gray-900 mb-2 group-hover:text-gray-800 transition-colors\">\n                        {service.title}\n                      </h3>\n                      <p className=\"text-gray-600 group-hover:text-gray-500 transition-colors\">\n                        {service.description}\n                      </p>\n                    </div>\n\n                    {/* Stats */}\n                    <div className=\"mb-6\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"text-3xl font-bold text-gray-900\">\n                          {service.stats.primary}\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-sm text-gray-600\">{service.stats.secondary}</div>\n                          <div className=\"text-xs text-green-600 font-medium flex items-center gap-1\">\n                            <TrendingUp className=\"w-3 h-3\" />\n                            {service.stats.trend}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Features */}\n                    <div className=\"space-y-3 mb-6\">\n                      {service.features.map((feature, featureIndex) => (\n                        <div key={featureIndex} className=\"flex items-center gap-3\">\n                          <div className={`w-2 h-2 bg-${service.color}-500 rounded-full`} />\n                          <span className=\"text-sm text-gray-700 group-hover:text-gray-600 transition-colors\">\n                            {feature}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n                        <Zap className=\"w-4 h-4\" />\n                        <span>Interface Pro</span>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-2 text-gray-400 group-hover:text-gray-600 transition-colors\">\n                        <span className=\"text-sm font-medium\">Acc√©der</span>\n                        <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Hover Effect */}\n                  <div className={`absolute inset-0 bg-gradient-to-br ${service.gradient} opacity-0 group-hover:opacity-5 transition-opacity duration-500`} />\n                </div>\n              </Link>\n            </motion.div>\n          )\n        })}\n      </div>\n\n      {/* Performance Overview */}\n      <motion.div\n        initial={{ opacity: 0, y: 30 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.8 }}\n        className=\"bg-gradient-to-br from-gray-50 to-white rounded-3xl shadow-standard p-8 border border-gray-200\"\n      >\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">Performance Globale</h3>\n            <p className=\"text-gray-600\">Vue d'ensemble de ton activit√© de coaching</p>\n          </div>\n          \n          <button\n            onClick={refreshStats}\n            disabled={isLoading}\n            className=\"flex items-center gap-2 px-4 py-2 bg-gray-900 hover:bg-gray-800 text-white rounded-xl font-medium transition-colors disabled:opacity-50\"\n          >\n            {isLoading ? (\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n            ) : (\n              <Settings className=\"w-4 h-4\" />\n            )}\n            Actualiser\n          </button>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {/* Plans Performance */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Target className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">Plans d'Entra√Ænement</div>\n                <div className=\"text-lg font-bold text-gray-900\">{stats.totalPlans}</div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.activePlans}/{stats.totalPlans} actifs\n            </div>\n          </div>\n\n          {/* Bookings Performance */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Calendar className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">R√©servations</div>\n                <div className=\"text-lg font-bold text-gray-900\">{stats.totalBookings}</div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.pendingBookings} en attente\n            </div>\n          </div>\n\n          {/* Revenue Performance */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Euro className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">Revenus Total</div>\n                <div className=\"text-lg font-bold text-gray-900\">{stats.totalRevenue.toFixed(0)}‚Ç¨</div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.monthlyRevenue.toFixed(0)}‚Ç¨ ce mois\n            </div>\n          </div>\n\n          {/* Success Rate */}\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 rounded-xl bg-yellow-100 flex items-center justify-center\">\n                <Award className=\"w-5 h-5 text-yellow-600\" />\n              </div>\n              <div>\n                <div className=\"text-sm text-gray-600\">Taux de Succ√®s</div>\n                <div className=\"text-lg font-bold text-gray-900\">\n                  {stats.totalBookings > 0 ? Math.round((stats.completedBookings / stats.totalBookings) * 100) : 0}%\n                </div>\n              </div>\n            </div>\n            <div className=\"text-xs text-gray-600 font-medium\">\n              {stats.completedBookings} s√©ances termin√©es\n            </div>\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Call to Action */}\n      <motion.div\n        initial={{ opacity: 0, y: 30 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 1 }}\n        className=\"relative bg-white rounded-3xl p-8 text-center overflow-hidden border border-gray-200 shadow-lg\"\n      >\n        <div className=\"relative z-10\">\n          <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-yellow-400 to-yellow-500 flex items-center justify-center mx-auto mb-6 shadow-lg\">\n            <Sparkles className=\"w-8 h-8 text-black\" />\n          </div>\n          \n          <h3 className=\"text-3xl font-black text-gray-900 mb-4\">\n            Pr√™t √† d√©velopper ton business ?\n          </h3>\n          <p className=\"text-gray-600 mb-6 max-w-2xl mx-auto text-lg\">\n            Utilise toutes les fonctionnalit√©s professionnelles d'Athlink pour cr√©er une exp√©rience coaching exceptionnelle et d√©velopper ton activit√©.\n          </p>\n          \n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n            <Link\n              href=\"/dashboard/coaching/training-plans\"\n              className=\"inline-flex items-center gap-2 bg-gray-900 text-white hover:bg-gray-800 px-6 py-3 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl hover:scale-105\"\n            >\n              <Plus className=\"w-5 h-5\" />\n              Cr√©er mon premier plan\n            </Link>\n            <Link\n              href={`/${username}/coaching`}\n              className=\"inline-flex items-center gap-2 bg-white text-gray-900 hover:bg-gray-50 px-6 py-3 rounded-xl font-bold transition-all border-2 border-gray-200 hover:border-gray-300\"\n            >\n              <Eye className=\"w-5 h-5\" />\n              Voir ma page publique\n            </Link>\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  )\n}\n","size_bytes":16112},"app/globals.css":{"content":"@import \"tailwindcss\";\n@import \"tw-animate-css\";\n\n@custom-variant dark (&:is(.dark *));\n\n@theme inline {\n  --color-background: var(--background);\n  --color-foreground: var(--foreground);\n  --font-sans: var(--font-geist-sans);\n  --font-mono: var(--font-geist-mono);\n  --color-sidebar-ring: var(--sidebar-ring);\n  --color-sidebar-border: var(--sidebar-border);\n  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);\n  --color-sidebar-accent: var(--sidebar-accent);\n  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);\n  --color-sidebar-primary: var(--sidebar-primary);\n  --color-sidebar-foreground: var(--sidebar-foreground);\n  --color-sidebar: var(--sidebar);\n  --color-chart-5: var(--chart-5);\n  --color-chart-4: var(--chart-4);\n  --color-chart-3: var(--chart-3);\n  --color-chart-2: var(--chart-2);\n  --color-chart-1: var(--chart-1);\n  --color-ring: var(--ring);\n  --color-input: var(--input);\n  --color-border: var(--border);\n  --color-destructive: var(--destructive);\n  --color-accent-foreground: var(--accent-foreground);\n  --color-accent: var(--accent);\n  --color-muted-foreground: var(--muted-foreground);\n  --color-muted: var(--muted);\n  --color-secondary-foreground: var(--secondary-foreground);\n  --color-secondary: var(--secondary);\n  --color-primary-foreground: var(--primary-foreground);\n  --color-primary: var(--primary);\n  --color-popover-foreground: var(--popover-foreground);\n  --color-popover: var(--popover);\n  --color-card-foreground: var(--card-foreground);\n  --color-card: var(--card);\n  --radius-sm: calc(var(--radius) - 4px);\n  --radius-md: calc(var(--radius) - 2px);\n  --radius-lg: var(--radius);\n  --radius-xl: calc(var(--radius) + 4px);\n}\n\n:root {\n  --radius: 0.625rem;\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n}\n\n.dark {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.205 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.205 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.922 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.704 0.191 22.216);\n  --border: oklch(1 0 0 / 10%);\n  --input: oklch(1 0 0 / 15%);\n  --ring: oklch(0.556 0 0);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(1 0 0 / 10%);\n  --sidebar-ring: oklch(0.556 0 0);\n}\n\n@layer base {\n  * {\n    @apply border-border outline-ring/50;\n  }\n  body {\n    @apply bg-background text-foreground;\n  }\n}\n","size_bytes":4168},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\"\nimport { designSystem } from \"./lib/design-system\"\n\nconst config: Config = {\n  darkMode: \"class\",\n  content: [\n    \"./pages/**/*.{ts,tsx}\",\n    \"./components/**/*.{ts,tsx}\",\n    \"./app/**/*.{ts,tsx}\",\n    \"./src/**/*.{ts,tsx}\",\n  ],\n  prefix: \"\",\n  theme: {\n    container: {\n      center: true,\n      padding: {\n        DEFAULT: \"1.25rem\",\n        sm: \"2rem\",\n        lg: \"3rem\",\n      },\n      screens: {\n        \"2xl\": \"1440px\",\n      },\n    },\n    extend: {\n      // Couleurs de base shadcn\n      colors: {\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        \n        // PALETTE VIBRANTE COMPL√àTE\n        'brand-blue': designSystem.colors.blue,\n        'brand-orange': designSystem.colors.orange,\n        'brand-green': designSystem.colors.green,\n        'brand-pink': designSystem.colors.pink,\n        'brand-purple': designSystem.colors.purple,\n        'brand-yellow': designSystem.colors.yellow,\n        'brand-red': designSystem.colors.red,\n        \n        // Couleurs th√©matiques pour les composants\n        'theme-primary': designSystem.colors.blue,\n        'theme-tertiary': designSystem.colors.pink,\n        'theme-quaternary': designSystem.colors.purple,\n        'theme-success': designSystem.colors.green,\n        'theme-warning': designSystem.colors.yellow,\n        'theme-danger': designSystem.colors.red,\n        'theme-accent': designSystem.colors.orange,\n      },\n      \n      // Gradients professionnels\n      backgroundImage: {\n        'gradient-hero': designSystem.gradients.hero,\n        'gradient-performance': designSystem.gradients.performance,\n        'gradient-energy': designSystem.gradients.energy,\n        'gradient-premium': designSystem.gradients.premium,\n        'gradient-sunset': designSystem.gradients.sunset,\n        'gradient-ocean': designSystem.gradients.ocean,\n        'gradient-fire': designSystem.gradients.fire,\n      },\n      \n      // Box shadows professionnelles\n      boxShadow: {\n        'subtle': designSystem.shadows.subtle,\n        'standard': designSystem.shadows.standard,\n        'elevated': designSystem.shadows.elevated,\n        'floating': designSystem.shadows.floating,\n        'glow-blue': designSystem.shadows['glow-blue'],\n        'glow-orange': designSystem.shadows['glow-orange'],\n        'glow-green': designSystem.shadows['glow-green'],\n        'glow-pink': designSystem.shadows['glow-pink'],\n        'glow-purple': designSystem.shadows['glow-purple'],\n      },\n      \n      // Animations fluides\n      animation: {\n        'fade-in-up': 'fadeInUp 0.5s ease-out',\n        'scale-in': 'scaleIn 0.3s ease-out',\n        'slide-in-right': 'slideInRight 0.4s ease-out',\n        'shimmer': 'shimmer 1.5s infinite',\n        'count-up': 'countUp 1s ease-out',\n        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',\n        'bounce-slow': 'bounce 2s infinite',\n        'spin-slow': 'spin 8s linear infinite',\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n      \n      keyframes: {\n        fadeInUp: {\n          '0%': { opacity: '0', transform: 'translateY(20px)' },\n          '100%': { opacity: '1', transform: 'translateY(0)' },\n        },\n        scaleIn: {\n          '0%': { opacity: '0', transform: 'scale(0.95)' },\n          '100%': { opacity: '1', transform: 'scale(1)' },\n        },\n        slideInRight: {\n          '0%': { opacity: '0', transform: 'translateX(-20px)' },\n          '100%': { opacity: '1', transform: 'translateX(0)' },\n        },\n        shimmer: {\n          '0%': { backgroundPosition: '-200% 0' },\n          '100%': { backgroundPosition: '200% 0' },\n        },\n        countUp: {\n          '0%': { opacity: '0' },\n          '100%': { opacity: '1' },\n        },\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      \n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n}\n\nexport default config","size_bytes":5349},"app/api/analytics/track-view/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\nimport { headers } from \"next/headers\"\n\n// Fonction pour obtenir le pays depuis l'IP\nasync function getCountryFromIP(ip: string): Promise<string | null> {\n  // IPs locales ou inconnues\n  if (!ip || ip === 'unknown' || ip === '127.0.0.1' || ip.startsWith('192.168.') || ip.startsWith('10.')) {\n    return null\n  }\n\n  try {\n    // Utiliser ipapi.co (gratuit, 30k requ√™tes/mois)\n    const response = await fetch(`https://ipapi.co/${ip}/country_name/`, {\n      signal: AbortSignal.timeout(3000),\n      headers: {\n        'User-Agent': 'Athlink/1.0'\n      }\n    })\n\n    if (response.ok) {\n      const country = await response.text()\n      return country.trim() || null\n    }\n\n    return null\n  } catch (error) {\n    console.error('Erreur g√©olocalisation IP:', error)\n    return null\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const { profileId } = await request.json()\n\n    if (!profileId) {\n      return NextResponse.json({ error: \"Profile ID requis\" }, { status: 400 })\n    }\n\n    // R√©cup√©rer les informations du visiteur\n    const headersList = await headers()\n    const userAgent = headersList.get('user-agent') || ''\n    const forwarded = headersList.get('x-forwarded-for')\n    const ip = forwarded ? forwarded.split(',')[0] : headersList.get('x-real-ip') || 'unknown'\n    \n    // D√©terminer le type d'appareil\n    const isMobile = /Mobile|Android|iPhone|iPad|iPod/i.test(userAgent)\n    const device = isMobile ? 'mobile' : 'desktop'\n    \n    // D√©terminer le navigateur\n    let browser = 'Other'\n    if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) browser = 'Chrome'\n    else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) browser = 'Safari'\n    else if (userAgent.includes('Firefox')) browser = 'Firefox'\n    else if (userAgent.includes('Edg')) browser = 'Edge'\n    \n    // R√©cup√©rer le pays depuis l'IP\n    const country = await getCountryFromIP(ip)\n\n    // R√©cup√©rer ou cr√©er l'entr√©e analytics du jour\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n\n    let analytics = await prisma.analytics.findFirst({\n      where: {\n        profileId,\n        date: {\n          gte: today,\n          lt: new Date(today.getTime() + 24 * 60 * 60 * 1000)\n        }\n      }\n    })\n\n    if (!analytics) {\n      analytics = await prisma.analytics.create({\n        data: {\n          profileId,\n          date: today,\n          views: 1,\n          uniqueViews: 1,\n          linkClicks: 0,\n          device,\n          country: null // Ne pas stocker de pays unique, utiliser demographics √† la place\n        }\n      })\n    } else {\n      analytics = await prisma.analytics.update({\n        where: { id: analytics.id },\n        data: {\n          views: { increment: 1 }\n        }\n      })\n    }\n\n    // Stocker les donn√©es d√©mographiques dans les stats du profil\n    const profile = await prisma.profile.findUnique({\n      where: { id: profileId },\n      select: { stats: true }\n    })\n\n    const stats = (profile?.stats as any) || {}\n    const demographics = stats.demographics || {\n      devices: {},\n      browsers: {},\n      countries: {}\n    }\n\n    // Incr√©menter les compteurs\n    demographics.devices[device] = (demographics.devices[device] || 0) + 1\n    demographics.browsers[browser] = (demographics.browsers[browser] || 0) + 1\n    if (country) {\n      demographics.countries[country] = (demographics.countries[country] || 0) + 1\n    }\n\n    await prisma.profile.update({\n      where: { id: profileId },\n      data: {\n        stats: {\n          ...stats,\n          demographics\n        }\n      }\n    })\n\n    return NextResponse.json({ \n      success: true, \n      analyticsId: analytics.id,\n      device,\n      browser,\n      country\n    })\n  } catch (error) {\n    console.error(\"Erreur tracking view:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors du tracking\" },\n      { status: 500 }\n    )\n  }\n}\n\n","size_bytes":3975},"app/api/create-checkout-session/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport Stripe from \"stripe\"\nimport { prisma } from \"@/lib/db\"\nimport { STRIPE_PRICES } from \"@/lib/stripe-prices\"\n\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n  apiVersion: \"2025-09-30.clover\",\n})\n\nexport async function POST(req: Request) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.email) {\n      return NextResponse.json({ error: \"Non authentifi√©\" }, { status: 401 })\n    }\n\n    const { planName, billingCycle } = await req.json()\n\n    if (!planName || !billingCycle) {\n      return NextResponse.json({ error: \"Plan et cycle de facturation requis\" }, { status: 400 })\n    }\n\n    // Valider le plan\n    if (![\"Pro\", \"Elite\"].includes(planName)) {\n      return NextResponse.json({ error: \"Plan invalide\" }, { status: 400 })\n    }\n\n    // Valider le cycle de facturation\n    if (![\"monthly\", \"yearly\"].includes(billingCycle)) {\n      return NextResponse.json({ error: \"Cycle de facturation invalide\" }, { status: 400 })\n    }\n\n    // D√©river le priceId sur le serveur (s√©curit√©)\n    const priceMapping: Record<string, Record<string, string>> = {\n      \"Pro\": {\n        \"monthly\": STRIPE_PRICES.pro.monthly,\n        \"yearly\": STRIPE_PRICES.pro.yearly,\n      },\n      \"Elite\": {\n        \"monthly\": STRIPE_PRICES.elite.monthly,\n        \"yearly\": STRIPE_PRICES.elite.yearly,\n      },\n    }\n\n    const priceId = priceMapping[planName][billingCycle]\n\n    const user = await prisma.user.findUnique({\n      where: { email: session.user.email },\n      include: { profile: true }\n    })\n\n    if (!user || !user.profile) {\n      return NextResponse.json({ error: \"Utilisateur non trouv√©\" }, { status: 404 })\n    }\n\n    const origin = req.headers.get(\"origin\") || process.env.NEXTAUTH_URL || \"http://localhost:5000\"\n\n    const checkoutSession = await stripe.checkout.sessions.create({\n      customer_email: user.email,\n      line_items: [\n        {\n          price: priceId,\n          quantity: 1,\n        },\n      ],\n      mode: \"subscription\",\n      success_url: `${origin}/dashboard?upgrade=success&plan=${planName}`,\n      cancel_url: `${origin}/dashboard/upgrade?canceled=true`,\n      metadata: {\n        userId: user.id,\n        profileId: user.profile.id,\n        planName: planName,\n      },\n    })\n\n    return NextResponse.json({ url: checkoutSession.url })\n  } catch (error) {\n    console.error(\"Erreur cr√©ation session Stripe:\", error)\n    return NextResponse.json(\n      { error: \"Erreur lors de la cr√©ation de la session de paiement\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2599},"lib/stripe-prices.ts":{"content":"export const STRIPE_PRICES = {\n  pro: {\n    monthly: \"price_1SLk8KH23JS5N2cDps6VfY3W\",\n    yearly: \"price_1SLk8KH23JS5N2cDps6VfY3W\",\n  },\n  elite: {\n    monthly: \"price_1SLk9TH23JS5N2cDv057Uzv8\",\n    yearly: \"price_1SLkA2H23JS5N2cDiEmU195J\",\n  },\n}\n","size_bytes":249},"app/api/webhooks/stripe/route.ts":{"content":"import { NextResponse } from \"next/server\"\nimport { headers } from \"next/headers\"\nimport Stripe from \"stripe\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@prisma/client\"\n\nconst stripe = new Stripe(process.env.STRIPE_SECRET_KEY!, {\n  apiVersion: \"2025-09-30.clover\",\n})\n\nexport async function POST(req: Request) {\n  const body = await req.text()\n  const headersList = await headers()\n  const signature = headersList.get(\"stripe-signature\")\n\n  if (!signature) {\n    return NextResponse.json({ error: \"Signature manquante\" }, { status: 400 })\n  }\n\n  let event: Stripe.Event\n\n  try {\n    const webhookSecret = process.env.STRIPE_WEBHOOK_SECRET\n    \n    if (!webhookSecret) {\n      console.error(\"STRIPE_WEBHOOK_SECRET non d√©fini\")\n      return NextResponse.json({ error: \"Configuration webhook manquante\" }, { status: 500 })\n    }\n\n    event = stripe.webhooks.constructEvent(body, signature, webhookSecret)\n  } catch (err) {\n    console.error(\"Erreur webhook Stripe:\", err)\n    return NextResponse.json({ error: \"Webhook invalide\" }, { status: 400 })\n  }\n\n  try {\n    switch (event.type) {\n      case \"checkout.session.completed\": {\n        const session = event.data.object as Stripe.Checkout.Session\n        \n        const profileId = session.metadata?.profileId\n        const planName = session.metadata?.planName\n\n        if (!profileId || !planName) {\n          console.error(\"Metadata manquante dans la session Stripe\")\n          return NextResponse.json({ error: \"Metadata manquante\" }, { status: 400 })\n        }\n\n        const planMapping: Record<string, PlanType> = {\n          \"Pro\": PlanType.ELITE,\n          \"Elite\": PlanType.PRO\n        }\n\n        const prismaPlan = planMapping[planName]\n\n        if (!prismaPlan) {\n          console.error(\"Plan invalide:\", planName)\n          return NextResponse.json({ error: \"Plan invalide\" }, { status: 400 })\n        }\n\n        await prisma.profile.update({\n          where: { id: profileId },\n          data: { plan: prismaPlan }\n        })\n\n        console.log(`Plan ${planName} activ√© pour le profil ${profileId}`)\n        break\n      }\n\n      case \"customer.subscription.deleted\": {\n        const subscription = event.data.object as Stripe.Subscription\n        \n        const customerId = subscription.customer as string\n        \n        const customer = await stripe.customers.retrieve(customerId)\n        if (customer.deleted) {\n          console.error(\"Client Stripe supprim√©\")\n          return NextResponse.json({ error: \"Client supprim√©\" }, { status: 400 })\n        }\n\n        const user = await prisma.user.findUnique({\n          where: { email: customer.email! },\n          include: { profile: true }\n        })\n\n        if (user?.profile) {\n          await prisma.profile.update({\n            where: { id: user.profile.id },\n            data: { plan: PlanType.FREE }\n          })\n\n          console.log(`Abonnement annul√© pour le profil ${user.profile.id}`)\n        }\n        break\n      }\n\n      default:\n        console.log(`Event non g√©r√©: ${event.type}`)\n    }\n\n    return NextResponse.json({ received: true })\n  } catch (error) {\n    console.error(\"Erreur traitement webhook:\", error)\n    return NextResponse.json(\n      { error: \"Erreur traitement webhook\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":3285},"components/ui-pro/upgrade-success-toast.tsx":{"content":"\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useSearchParams, useRouter } from \"next/navigation\"\nimport { toast } from \"sonner\"\n\nexport function UpgradeSuccessToast() {\n  const searchParams = useSearchParams()\n  const router = useRouter()\n  \n  useEffect(() => {\n    const upgrade = searchParams.get(\"upgrade\")\n    const plan = searchParams.get(\"plan\")\n    \n    if (upgrade === \"success\" && plan) {\n      toast.success(`üéâ Plan ${plan} activ√© avec succ√®s !`, {\n        description: \"Actualisation de votre profil...\",\n        duration: 3000,\n      })\n      \n      // Nettoyer l'URL et recharger la page pour afficher les nouvelles fonctionnalit√©s\n      window.history.replaceState({}, \"\", \"/dashboard\")\n      \n      // Recharger la page apr√®s 1.5 secondes pour voir les changements\n      setTimeout(() => {\n        router.refresh()\n        toast.success(\"Toutes vos nouvelles fonctionnalit√©s sont maintenant disponibles ! üöÄ\")\n      }, 1500)\n    }\n  }, [searchParams, router])\n  \n  return null\n}\n","size_bytes":1016},"SECRETS_A_COPIER.md":{"content":"# üîë Secrets √† Copier pour le D√©ploiement athlink.fr\n\n## ‚ö†Ô∏è IMPORTANT\nLes secrets ci-dessous sont d√©j√† configur√©s dans votre environnement de d√©veloppement Replit.\nVous devez les copier MANUELLEMENT vers votre d√©ploiement production (athlink.fr).\n\n## üìç O√π faire √ßa ?\n\n1. Dans Replit, cliquez sur le bouton **\"Deploy\"** (ou \"D√©ployer\")\n2. Allez dans **\"Settings\"** ‚Üí **\"Environment Variables\"** ou **\"Secrets\"**\n3. Copiez-collez les secrets ci-dessous UN PAR UN\n\n---\n\n## üîê Secrets √† Copier\n\n### 1. AUTH_SECRET (OBLIGATOIRE)\n**Nom de la variable :** `AUTH_SECRET`\n\n**Valeur :** Allez dans vos **Replit Secrets** (dans la barre lat√©rale) et copiez la valeur de `NEXTAUTH_SECRET`\n\n---\n\n### 2. AUTH_URL (OBLIGATOIRE)\n**Nom de la variable :** `AUTH_URL`\n\n**Valeur exacte √† copier :**\n```\nhttps://athlink.fr\n```\n‚ö†Ô∏è **ATTENTION** : Pas de slash (/) √† la fin !\n\n---\n\n### 3. DATABASE_URL (OBLIGATOIRE)\n**Nom de la variable :** `DATABASE_URL`\n\n**Option A - Base de production Supabase (RECOMMAND√â) :**\nUtilisez votre URL PostgreSQL de production Supabase\n\n**Option B - Utiliser la m√™me base que le dev :**\nAllez dans vos **Replit Secrets** et copiez la valeur de `DATABASE_URL`\n\n‚ö†Ô∏è **ATTENTION** : Si vous utilisez la m√™me base, les comptes seront partag√©s entre dev et prod\n\n---\n\n### 4. STRIPE_SECRET_KEY (OBLIGATOIRE)\n**Nom de la variable :** `STRIPE_SECRET_KEY`\n\n**Valeur :** Allez dans vos **Replit Secrets** et copiez la valeur de `STRIPE_SECRET_KEY`\n\n---\n\n### 5. STRIPE_WEBHOOK_SECRET (OBLIGATOIRE)\n**Nom de la variable :** `STRIPE_WEBHOOK_SECRET`\n\n**Valeur :** Allez dans vos **Replit Secrets** et copiez la valeur de `STRIPE_WEBHOOK_SECRET`\n\n---\n\n### 6. NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY (OBLIGATOIRE)\n**Nom de la variable :** `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`\n\n**Valeur :** Allez dans vos **Replit Secrets** et copiez la valeur de `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`\n\n---\n\n### 7. NEXT_PUBLIC_SUPABASE_URL (OBLIGATOIRE)\n**Nom de la variable :** `NEXT_PUBLIC_SUPABASE_URL`\n\n**Valeur :** Allez dans vos **Replit Secrets** et copiez la valeur de `NEXT_PUBLIC_SUPABASE_URL`\n\n---\n\n### 8. NEXT_PUBLIC_SUPABASE_ANON_KEY (OBLIGATOIRE)\n**Nom de la variable :** `NEXT_PUBLIC_SUPABASE_ANON_KEY`\n\n**Valeur :** Allez dans vos **Replit Secrets** et copiez la valeur de `NEXT_PUBLIC_SUPABASE_ANON_KEY`\n\n---\n\n### 9. NODE_ENV (OPTIONNEL mais recommand√©)\n**Nom de la variable :** `NODE_ENV`\n\n**Valeur exacte √† copier :**\n```\nproduction\n```\n\n---\n\n### 10. NEXT_PUBLIC_APP_URL (OPTIONNEL mais recommand√©)\n**Nom de la variable :** `NEXT_PUBLIC_APP_URL`\n\n**Valeur exacte √† copier :**\n```\nhttps://athlink.fr\n```\n\n---\n\n## ‚úÖ Checklist\n\nCochez quand c'est fait :\n\n- [ ] AUTH_SECRET copi√©\n- [ ] AUTH_URL = `https://athlink.fr`\n- [ ] DATABASE_URL copi√© (ou URL production Supabase)\n- [ ] STRIPE_SECRET_KEY copi√©\n- [ ] STRIPE_WEBHOOK_SECRET copi√©\n- [ ] NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY copi√©\n- [ ] NEXT_PUBLIC_SUPABASE_URL copi√©\n- [ ] NEXT_PUBLIC_SUPABASE_ANON_KEY copi√©\n- [ ] NODE_ENV = `production`\n- [ ] NEXT_PUBLIC_APP_URL = `https://athlink.fr`\n- [ ] Cliqu√© sur **\"Redeploy\"**\n- [ ] Test√© la connexion sur athlink.fr\n\n---\n\n## üéØ Apr√®s avoir copi√© tous les secrets\n\n1. Cliquez sur **\"Redeploy\"** ou **\"Deploy\"**\n2. Attendez que le d√©ploiement se termine (2-3 minutes)\n3. Allez sur **https://athlink.fr/signup** et cr√©ez un nouveau compte\n4. Testez la connexion\n\n---\n\n## ‚ùì Si √ßa ne marche toujours pas\n\n- V√©rifiez que vous n'avez pas de slash (/) √† la fin de `AUTH_URL`\n- V√©rifiez que vous avez bien cliqu√© sur \"Redeploy\" apr√®s avoir ajout√© les secrets\n- V√©rifiez les logs de d√©ploiement pour voir s'il y a des erreurs\n","size_bytes":3668},"DEPLOYMENT_GUIDE.md":{"content":"# Guide de D√©ploiement Athlink sur Replit\n\n## Probl√®me : La connexion fonctionne en preview mais pas en production (athlink.fr)\n\n### Cause\n\nLes **secrets Replit** (variables d'environnement) ne sont PAS automatiquement copi√©s vers votre d√©ploiement production. Vous devez les configurer s√©par√©ment.\n\n---\n\n## Solution : Configurer les Secrets de D√©ploiement\n\n### √âtape 1 : Acc√©der aux Secrets de D√©ploiement\n\n1. Dans Replit, cliquez sur le bouton **\"Deploy\"** (D√©ployer)\n2. Allez dans l'onglet **\"Settings\"** ou **\"Configuration\"**\n3. Cherchez la section **\"Deployment Secrets\"** ou **\"Environment Variables\"**\n\n### √âtape 2 : Ajouter les Variables d'Environnement Essentielles\n\nAjoutez ces secrets **un par un** dans la section Deployment Secrets :\n\n#### üîê Authentification NextAuth (OBLIGATOIRE)\n```\nAUTH_SECRET=votre-secret-nextauth-actuel\n```\n> ‚ö†Ô∏è **IMPORTANT** : Utilisez le M√äME secret que vous avez dans vos Workspace Secrets (celui nomm√© `NEXTAUTH_SECRET`)\n\n```\nAUTH_URL=https://athlink.fr\n```\n> üìù **NOTE** : Pour la production, utilisez `https://athlink.fr` (SANS slash √† la fin). Pour le preview Replit, cette variable n'est pas n√©cessaire car elle est auto-d√©tect√©e.\n\n#### üóÑÔ∏è Base de Donn√©es (OBLIGATOIRE)\n```\nDATABASE_URL=votre-url-postgresql-production\n```\n> ‚ö†Ô∏è **ATTENTION** : NE PAS utiliser la base de donn√©es de d√©veloppement ! Utilisez une base de donn√©es de production s√©par√©e (celle de Supabase par exemple)\n\n#### üí≥ Stripe (OBLIGATOIRE pour les paiements)\n```\nSTRIPE_SECRET_KEY=sk_live_...\nNEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...\nSTRIPE_WEBHOOK_SECRET=whsec_...\n```\n\n#### üìÅ Supabase (OBLIGATOIRE pour le stockage)\n```\nNEXT_PUBLIC_SUPABASE_URL=https://votre-projet.supabase.co\nNEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\n```\n\n#### üåê Configuration Application\n```\nNODE_ENV=production\nNEXT_PUBLIC_APP_URL=https://athlink.fr\n```\n\n#### üîê Google OAuth (OPTIONNEL)\nSi vous voulez activer la connexion Google :\n```\nGOOGLE_CLIENT_ID=votre-client-id.apps.googleusercontent.com\nGOOGLE_CLIENT_SECRET=votre-secret-google\nNEXT_PUBLIC_GOOGLE_OAUTH_ENABLED=true\n```\n\n---\n\n## √âtape 3 : Red√©ployer l'Application\n\n1. Apr√®s avoir ajout√© tous les secrets, cliquez sur **\"Redeploy\"**\n2. Attendez que le build se termine\n3. Testez la connexion sur athlink.fr\n\n---\n\n## V√©rification : Comment tester\n\n1. Allez sur **https://athlink.fr/login**\n2. Essayez de vous connecter avec vos identifiants\n3. Ou essayez de cr√©er un nouveau compte sur **https://athlink.fr/signup**\n\nSi √ßa ne marche toujours pas :\n- V√©rifiez les logs de d√©ploiement dans Replit\n- Assurez-vous que tous les secrets sont bien copi√©s\n- V√©rifiez que `AUTH_URL=https://athlink.fr` (sans slash √† la fin)\n\n---\n\n## Notes Importantes\n\n### ‚ö†Ô∏è Bases de Donn√©es S√©par√©es\n\n- **Preview Replit** = Base de donn√©es de d√©veloppement (Replit PostgreSQL)\n- **athlink.fr** = Base de donn√©es de production (s√©par√©e)\n\nLes comptes cr√©√©s en d√©veloppement N'EXISTENT PAS en production. C'est normal et voulu pour la s√©curit√©.\n\n### üîë G√©n√©rer un AUTH_SECRET\n\nSi vous avez besoin de g√©n√©rer un nouveau secret :\n\n```bash\nopenssl rand -base64 32\n```\n\nOu utilisez ce g√©n√©rateur en ligne : https://generate-secret.vercel.app/32\n\n### ‚öôÔ∏è Configuration Automatique\n\n**Bonne nouvelle !** Certaines configurations sont d√©j√† g√©r√©es automatiquement dans le code :\n- ‚úÖ `trustHost: true` est d√©j√† configur√© dans `lib/auth.ts` (pas besoin de variable d'environnement)\n- ‚úÖ Mode debug activ√© automatiquement en d√©veloppement\n\n### üìã Checklist de D√©ploiement\n\n- [ ] `AUTH_SECRET` configur√© (OBLIGATOIRE)\n- [ ] `AUTH_URL=https://athlink.fr` configur√© (OBLIGATOIRE pour production)\n- [ ] `DATABASE_URL` pointe vers la base de production (OBLIGATOIRE)\n- [ ] `STRIPE_SECRET_KEY` configur√©\n- [ ] `STRIPE_WEBHOOK_SECRET` configur√©\n- [ ] `NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY` configur√©\n- [ ] `NEXT_PUBLIC_SUPABASE_URL` configur√©\n- [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` configur√©\n- [ ] Application red√©ploy√©e\n- [ ] Test de connexion effectu√©\n\n---\n\n## Diff√©rences NextAuth v4 vs v5\n\nNextAuth v5 a chang√© les noms des variables :\n- ~~`NEXTAUTH_SECRET`~~ ‚Üí `AUTH_SECRET`\n- ~~`NEXTAUTH_URL`~~ ‚Üí `AUTH_URL`\n\nLes deux fonctionnent encore (r√©trocompatibilit√©), mais `AUTH_*` est recommand√©.\n\n---\n\n## Besoin d'aide ?\n\nSi vous rencontrez des probl√®mes :\n1. V√©rifiez les logs de d√©ploiement dans Replit\n2. Assurez-vous que tous les secrets sont configur√©s\n3. V√©rifiez que la base de donn√©es de production est accessible\n4. Testez d'abord l'inscription avant la connexion\n","size_bytes":4639},"app/api/public/booking-request/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { coachUsername, clientName, clientEmail, clientPhone, service, message } = body\n\n    // Validation\n    if (!coachUsername || !clientName || !clientEmail || !service) {\n      return NextResponse.json({ error: \"Donn√©es manquantes\" }, { status: 400 })\n    }\n\n    // V√©rifier que le coach existe et a le plan COACH\n    const coach = await prisma.profile.findUnique({\n      where: { username: coachUsername },\n      select: { \n        id: true, \n        plan: true, \n        stats: true,\n        displayName: true,\n        user: {\n          select: { email: true }\n        }\n      }\n    })\n\n    if (!coach || (coach.plan !== \"PRO\" && coach.plan !== \"ELITE\")) {\n      return NextResponse.json({ error: \"Coach non trouv√© ou non disponible\" }, { status: 404 })\n    }\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = coach.stats as any || {}\n    const existingBookings = stats.bookings || []\n\n    // Cr√©er une nouvelle demande de r√©servation avec statut PENDING\n    const newBooking = {\n      id: `booking_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      clientName,\n      clientEmail,\n      clientPhone: clientPhone || null,\n      date: new Date().toISOString().split('T')[0], // Date provisoire (sera modifi√©e par le coach)\n      startTime: \"09:00\", // Heure provisoire\n      endTime: \"10:00\",\n      duration: 60,\n      service: service,\n      price: 0, // Prix √† d√©finir par le coach\n      status: \"PENDING\",\n      notes: message || \"Demande depuis la page publique\",\n      createdAt: new Date().toISOString(),\n      isPublicRequest: true // Marqueur pour identifier les demandes publiques\n    }\n\n    // Ajouter la nouvelle demande\n    const updatedBookings = [newBooking, ...existingBookings]\n\n    // Sauvegarder dans le profil\n    await prisma.profile.update({\n      where: { id: coach.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings: updatedBookings\n        }\n      }\n    })\n\n    // TODO: Envoyer un email de notification au coach\n    // await sendEmailNotification(coach.user.email, {\n    //   subject: `Nouvelle demande de r√©servation de ${clientName}`,\n    //   body: `\n    //     Nouvelle demande de r√©servation:\n    //     Client: ${clientName}\n    //     Email: ${clientEmail}\n    //     Service: ${service}\n    //     Message: ${message}\n    //   `\n    // })\n\n    return NextResponse.json({ \n      success: true,\n      message: \"Demande envoy√©e avec succ√®s\",\n      bookingId: newBooking.id\n    }, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation de la demande:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\n","size_bytes":2864},"app/api/upgrade-plan/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { PROMO_CODES } from \"@/lib/promo-codes\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    const session = await auth()\n    \n    if (!session?.user?.id) {\n      return NextResponse.json(\n        { error: \"Non authentifi√©\" },\n        { status: 401 }\n      )\n    }\n\n    const { plan, promoCode } = await req.json()\n\n    if (!plan || !promoCode) {\n      return NextResponse.json(\n        { error: \"Plan et code promo requis\" },\n        { status: 400 }\n      )\n    }\n\n    // Valider le code promo\n    const upperPromoCode = promoCode.toUpperCase()\n    const promo = PROMO_CODES[upperPromoCode as keyof typeof PROMO_CODES]\n\n    if (!promo) {\n      return NextResponse.json(\n        { error: \"Code promo invalide\" },\n        { status: 400 }\n      )\n    }\n\n    // V√©rifier que le code promo correspond au plan demand√©\n    if (promo.plan !== plan) {\n      return NextResponse.json(\n        { error: \"Ce code promo ne s'applique pas √† ce plan\" },\n        { status: 400 }\n      )\n    }\n\n    // G√©rer les trials avec expiration automatique\n    if (promo.type === \"trial\" && promo.duration) {\n      const trialEndsAt = new Date()\n      trialEndsAt.setDate(trialEndsAt.getDate() + promo.duration)\n\n      const updatedProfile = await prisma.profile.update({\n        where: { userId: session.user.id },\n        data: {\n          plan: plan,\n          trialEndsAt: trialEndsAt,\n          trialPlan: plan,\n          updatedAt: new Date()\n        }\n      })\n\n      return NextResponse.json({\n        success: true,\n        message: `Trial ${plan} activ√© jusqu'au ${trialEndsAt.toLocaleDateString('fr-FR')}`,\n        profile: {\n          plan: updatedProfile.plan,\n          trialEndsAt: updatedProfile.trialEndsAt\n        }\n      })\n    }\n\n    // Mettre √† jour le plan de l'utilisateur (upgrade permanent)\n    const updatedProfile = await prisma.profile.update({\n      where: { userId: session.user.id },\n      data: {\n        plan: plan,\n        trialEndsAt: null,\n        trialPlan: null,\n        updatedAt: new Date()\n      }\n    })\n\n    return NextResponse.json({\n      success: true,\n      message: \"Plan mis √† jour avec succ√®s\",\n      profile: {\n        plan: updatedProfile.plan\n      }\n    })\n\n  } catch (error: any) {\n    console.error(\"POST /api/upgrade-plan error:\", error)\n    \n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la mise √† jour du plan\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2562},"lib/promo-codes.ts":{"content":"export interface PromoCode {\n  type: \"plan_upgrade\" | \"trial\"\n  plan: string\n  duration: number | null\n  discount: number\n  description: string\n}\n\nexport const PROMO_CODES: Record<string, PromoCode> = {\n  \"ATHLINK_PREMIUM\": {\n    type: \"plan_upgrade\",\n    plan: \"PRO\",\n    duration: null,\n    discount: 100,\n    description: \"Acc√®s complet √† toutes les fonctionnalit√©s (PRO)\"\n  },\n  \"ELITE2025\": {\n    type: \"plan_upgrade\",\n    plan: \"ELITE\",\n    duration: null,\n    discount: 0,\n    description: \"Acc√®s ELITE permanent - Toutes les fonctionnalit√©s d√©bloqu√©es\"\n  },\n  \"PRO30FREE\": {\n    type: \"trial\",\n    plan: \"PRO\", \n    duration: 30,\n    discount: 100,\n    description: \"1 mois PRO offert - Rebascule automatiquement en plan gratuit apr√®s 30 jours\"\n  }\n}\n","size_bytes":767},"components/ui-pro/glass-sponsors-grid.tsx":{"content":"\"use client\"\n\nimport { useState } from \"react\"\nimport { motion, AnimatePresence } from \"framer-motion\"\nimport Image from \"next/image\"\nimport { Users, X, ExternalLink } from \"lucide-react\"\n\ninterface Sponsor {\n  id: string\n  name: string\n  logoUrl?: string | null\n  websiteUrl?: string | null\n  promoCode?: string | null\n}\n\ninterface GlassSponsorsGridProps {\n  sponsors: Sponsor[]\n  showAll?: boolean\n}\n\nexport function GlassSponsorsGrid({ sponsors, showAll = false }: GlassSponsorsGridProps) {\n  const [isModalOpen, setIsModalOpen] = useState(false)\n  const displayedSponsors = showAll ? sponsors : sponsors.slice(0, 4)\n  const hasMore = sponsors.length > 4\n\n  return (\n    <>\n      <div className=\"grid grid-cols-2 gap-3\">\n        {displayedSponsors.map((sponsor, index) => (\n          <SponsorCard\n            key={sponsor.id}\n            sponsor={sponsor}\n            index={index}\n          />\n        ))}\n      </div>\n\n      {/* Bouton \"Voir tous\" si plus de 4 sponsors */}\n      {hasMore && !showAll && (\n        <motion.button\n          onClick={() => setIsModalOpen(true)}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          className=\"mt-3 w-full bg-white/5 hover:bg-white/10 rounded-lg p-3 border border-white/20 hover:border-white/30 transition-all flex items-center justify-center gap-2 text-white text-sm font-medium\"\n        >\n          <Users className=\"w-4 h-4\" />\n          Voir tous les sponsors ({sponsors.length})\n        </motion.button>\n      )}\n\n      {/* Modal pour afficher tous les sponsors */}\n      <AnimatePresence>\n        {isModalOpen && (\n          <SponsorsModal\n            sponsors={sponsors}\n            onClose={() => setIsModalOpen(false)}\n          />\n        )}\n      </AnimatePresence>\n    </>\n  )\n}\n\nfunction SponsorCard({ sponsor, index }: { sponsor: Sponsor; index: number }) {\n  return (\n    <motion.a\n      href={sponsor.websiteUrl || \"#\"}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      initial={{ opacity: 0, scale: 0.9 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{ delay: index * 0.1 }}\n      whileHover={{ scale: 1.05 }}\n      className=\"bg-white/5 hover:bg-white/10 rounded-lg p-3 border border-white/10 transition-all text-center group\"\n    >\n      {sponsor.logoUrl ? (\n        <div className=\"w-8 h-8 mx-auto mb-2 rounded-full overflow-hidden\">\n          <Image\n            src={sponsor.logoUrl}\n            alt={sponsor.name}\n            width={32}\n            height={32}\n            className=\"w-full h-full object-cover\"\n          />\n        </div>\n      ) : (\n        <div className=\"w-8 h-8 mx-auto mb-2 bg-purple-500 rounded-full flex items-center justify-center\">\n          <Users className=\"w-4 h-4 text-white\" />\n        </div>\n      )}\n      <p className=\"font-medium text-white text-xs group-hover:text-purple-300\">{sponsor.name}</p>\n      {sponsor.promoCode && (\n        <p className=\"text-gray-400 text-xs mt-1\">{sponsor.promoCode}</p>\n      )}\n    </motion.a>\n  )\n}\n\nfunction SponsorsModal({ sponsors, onClose }: { sponsors: Sponsor[]; onClose: () => void }) {\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-2xl bg-black/80 p-4\"\n      onClick={onClose}\n    >\n      {/* Close button */}\n      <motion.button\n        initial={{ scale: 0 }}\n        animate={{ scale: 1 }}\n        exit={{ scale: 0 }}\n        onClick={onClose}\n        className=\"absolute top-4 right-4 z-10 backdrop-blur-xl bg-white/20 hover:bg-white/30 border border-white/40 p-3 rounded-2xl transition-colors\"\n      >\n        <X className=\"w-5 h-5 text-white\" />\n      </motion.button>\n\n      {/* Modal content */}\n      <motion.div\n        initial={{ scale: 0.9, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        exit={{ scale: 0.9, opacity: 0 }}\n        transition={{ type: \"spring\", damping: 25 }}\n        className=\"relative max-w-4xl w-full max-h-[90vh] overflow-y-auto\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"backdrop-blur-xl bg-white/10 border border-white/20 rounded-3xl p-6 md:p-8\">\n          {/* Header */}\n          <div className=\"mb-6\">\n            <h2 className=\"text-2xl md:text-3xl font-bold text-white mb-2\">Tous les sponsors</h2>\n            <p className=\"text-gray-300 text-sm\">{sponsors.length} sponsors partenaires</p>\n          </div>\n\n          {/* Grid de tous les sponsors */}\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n            {sponsors.map((sponsor, index) => (\n              <motion.a\n                key={sponsor.id}\n                href={sponsor.websiteUrl || \"#\"}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: index * 0.05 }}\n                whileHover={{ scale: 1.05, y: -4 }}\n                className=\"bg-white/5 hover:bg-white/15 rounded-xl p-4 border border-white/10 hover:border-white/30 transition-all text-center group relative\"\n              >\n                {/* Logo */}\n                {sponsor.logoUrl ? (\n                  <div className=\"w-16 h-16 mx-auto mb-3 rounded-full overflow-hidden bg-white/10\">\n                    <Image\n                      src={sponsor.logoUrl}\n                      alt={sponsor.name}\n                      width={64}\n                      height={64}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  </div>\n                ) : (\n                  <div className=\"w-16 h-16 mx-auto mb-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center\">\n                    <Users className=\"w-8 h-8 text-white\" />\n                  </div>\n                )}\n\n                {/* Nom du sponsor */}\n                <p className=\"font-semibold text-white text-sm mb-1 group-hover:text-purple-300 transition-colors\">\n                  {sponsor.name}\n                </p>\n\n                {/* Code promo */}\n                {sponsor.promoCode && (\n                  <div className=\"mt-2 bg-green-500/20 border border-green-400/30 rounded-lg px-2 py-1\">\n                    <p className=\"text-green-300 text-xs font-mono\">{sponsor.promoCode}</p>\n                  </div>\n                )}\n\n                {/* Indicateur de lien externe */}\n                {sponsor.websiteUrl && (\n                  <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <div className=\"bg-white/20 backdrop-blur-sm rounded-lg p-1\">\n                      <ExternalLink className=\"w-3 h-3 text-white\" />\n                    </div>\n                  </div>\n                )}\n              </motion.a>\n            ))}\n          </div>\n        </div>\n      </motion.div>\n    </motion.div>\n  )\n}\n","size_bytes":7115},"components/ui-pro/calendar-heatmap.tsx":{"content":"\"use client\"\n\nimport { useMemo } from \"react\"\nimport HeatMap from \"@uiw/react-heat-map\"\nimport Tooltip from \"@uiw/react-tooltip\"\nimport { motion } from \"framer-motion\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Calendar, TrendingUp, Eye, MousePointer } from \"lucide-react\"\n\ninterface CalendarHeatmapProps {\n  viewsByDate: Array<{ date: string; views: number; uniqueViews: number; clicks: number }>\n  timeRange: string\n  className?: string\n}\n\nexport function CalendarHeatmap({ viewsByDate, timeRange, className }: CalendarHeatmapProps) {\n  // Pr√©parer les donn√©es pour la heatmap\n  const heatmapData = useMemo(() => {\n    return viewsByDate.map(day => ({\n      date: day.date,\n      count: day.views,\n      content: `${day.views} vues | ${day.uniqueViews} visiteurs uniques | ${day.clicks ?? 0} clics`\n    }))\n  }, [viewsByDate])\n\n  // Calculer les stats\n  const stats = useMemo(() => {\n    const totalViews = viewsByDate.reduce((sum, day) => sum + day.views, 0)\n    const totalUniqueViews = viewsByDate.reduce((sum, day) => sum + day.uniqueViews, 0)\n    const totalClicks = viewsByDate.reduce((sum, day) => sum + (day.clicks ?? 0), 0)\n    const avgViewsPerDay = viewsByDate.length > 0 ? (totalViews / viewsByDate.length).toFixed(1) : \"0\"\n    const maxViewsDay = viewsByDate.reduce((max, day) => day.views > max.views ? day : max, { date: \"\", views: 0, uniqueViews: 0, clicks: 0 })\n    \n    return {\n      totalViews,\n      totalUniqueViews,\n      totalClicks,\n      avgViewsPerDay,\n      maxViewsDay,\n      activeDays: viewsByDate.filter(day => day.views > 0).length\n    }\n  }, [viewsByDate])\n\n  // Calculer la date de d√©but\n  const startDate = useMemo(() => {\n    if (viewsByDate.length === 0) return new Date()\n    const firstDate = new Date(viewsByDate[0].date)\n    return firstDate\n  }, [viewsByDate])\n\n  // Calculer la date de fin\n  const endDate = useMemo(() => {\n    if (viewsByDate.length === 0) return new Date()\n    const lastDate = new Date(viewsByDate[viewsByDate.length - 1].date)\n    return lastDate\n  }, [viewsByDate])\n\n  return (\n    <div className={className}>\n      {/* Stats rapides */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.1 }}\n        >\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-1\">Total de vues</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.totalViews.toLocaleString('fr-FR')}</p>\n                </div>\n                <Eye className=\"w-8 h-8 text-blue-500\" />\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.2 }}\n        >\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-1\">Moyenne/jour</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.avgViewsPerDay}</p>\n                </div>\n                <TrendingUp className=\"w-8 h-8 text-green-500\" />\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.3 }}\n        >\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-1\">Jours actifs</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.activeDays}/{viewsByDate.length}</p>\n                </div>\n                <Calendar className=\"w-8 h-8 text-purple-500\" />\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: 0.4 }}\n        >\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-1\">Record du jour</p>\n                  <p className=\"text-2xl font-bold text-gray-900\">{stats.maxViewsDay.views}</p>\n                  <p className=\"text-xs text-gray-500\">{stats.maxViewsDay.date ? new Date(stats.maxViewsDay.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'short' }) : 'N/A'}</p>\n                </div>\n                <MousePointer className=\"w-8 h-8 text-orange-500\" />\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      </div>\n\n      {/* Heatmap calendrier */}\n      <motion.div\n        initial={{ opacity: 0, y: 20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 0.5 }}\n      >\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Calendar className=\"w-5 h-5 text-blue-500\" />\n              Activit√© quotidienne\n            </CardTitle>\n            <p className=\"text-sm text-gray-600\">\n              {timeRange === \"24h\" && \"Derni√®res 24 heures\"}\n              {timeRange === \"7d\" && \"7 derniers jours\"}\n              {timeRange === \"30d\" && \"30 derniers jours\"}\n              {timeRange === \"90d\" && \"90 derniers jours\"}\n              {timeRange === \"1y\" && \"Derni√®re ann√©e\"}\n            </p>\n          </CardHeader>\n          <CardContent>\n            {heatmapData.length > 0 ? (\n              <div className=\"flex justify-center overflow-x-auto pb-4\">\n                <HeatMap\n                  value={heatmapData}\n                  startDate={startDate}\n                  endDate={endDate}\n                  width=\"100%\"\n                  rectSize={14}\n                  space={3}\n                  rectProps={{\n                    rx: 3\n                  }}\n                  panelColors={{\n                    0: '#ebedf0',\n                    2: '#c6e48b',\n                    4: '#7bc96f',\n                    10: '#239a3b',\n                    20: '#196127'\n                  }}\n                  rectRender={(props, data) => {\n                    return (\n                      <Tooltip key={props.key} placement=\"top\" content={data.content || 'Aucune donn√©e'}>\n                        <rect {...props} />\n                      </Tooltip>\n                    )\n                  }}\n                  legendCellSize={0}\n                  monthLabels={['Jan', 'F√©v', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Ao√ª', 'Sep', 'Oct', 'Nov', 'D√©c']}\n                  weekLabels={['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam']}\n                />\n              </div>\n            ) : (\n              <div className=\"flex items-center justify-center h-48 text-gray-500\">\n                <div className=\"text-center\">\n                  <Calendar className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" />\n                  <p className=\"text-sm\">Aucune donn√©e disponible pour cette p√©riode</p>\n                </div>\n              </div>\n            )}\n\n            {/* L√©gende */}\n            <div className=\"mt-6 flex items-center justify-between text-sm text-gray-600\">\n              <div className=\"flex items-center gap-2\">\n                <span>Moins actif</span>\n                <div className=\"flex gap-1\">\n                  <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#ebedf0' }} />\n                  <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#c6e48b' }} />\n                  <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#7bc96f' }} />\n                  <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#239a3b' }} />\n                  <div className=\"w-4 h-4 rounded\" style={{ backgroundColor: '#196127' }} />\n                </div>\n                <span>Plus actif</span>\n              </div>\n            </div>\n\n            {/* Insights */}\n            {stats.activeDays > 0 && (\n              <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n                <p className=\"text-sm font-medium text-blue-900 mb-1\">üí° Insights</p>\n                <div className=\"text-xs text-blue-700 space-y-1\">\n                  <p>‚Ä¢ Vous avez eu de l'activit√© sur {stats.activeDays} jours sur {viewsByDate.length}</p>\n                  <p>‚Ä¢ Votre meilleur jour √©tait le {stats.maxViewsDay.date ? new Date(stats.maxViewsDay.date).toLocaleDateString('fr-FR', { day: 'numeric', month: 'long' }) : 'N/A'} avec {stats.maxViewsDay.views} vues</p>\n                  <p>‚Ä¢ En moyenne, vous g√©n√©rez {stats.avgViewsPerDay} vues par jour</p>\n                  {parseFloat(stats.avgViewsPerDay) > 10 && <p>‚Ä¢ üî• Excellente performance ! Votre profil attire r√©guli√®rement du monde</p>}\n                  {stats.totalClicks > 50 && <p>‚Ä¢ üéØ Vos visiteurs sont engag√©s avec {stats.totalClicks} clics au total</p>}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </motion.div>\n    </div>\n  )\n}\n","size_bytes":9443},"app/api/cron/expire-trials/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { prisma } from \"@/lib/db\"\n\nexport async function GET(req: NextRequest) {\n  try {\n    const cronSecret = process.env.CRON_SECRET\n    \n    if (!cronSecret) {\n      console.error(\"CRON_SECRET non d√©fini - API cron d√©sactiv√©e\")\n      return NextResponse.json(\n        { error: \"Service non disponible - Configuration manquante\" },\n        { status: 503 }\n      )\n    }\n    \n    const authHeader = req.headers.get('authorization')\n    \n    if (authHeader !== `Bearer ${cronSecret}`) {\n      return NextResponse.json(\n        { error: \"Non autoris√©\" },\n        { status: 401 }\n      )\n    }\n\n    const now = new Date()\n    \n    const expiredTrials = await prisma.profile.findMany({\n      where: {\n        trialEndsAt: {\n          lte: now\n        },\n        NOT: {\n          trialEndsAt: null\n        }\n      }\n    })\n\n    const results = []\n    \n    for (const profile of expiredTrials) {\n      const updated = await prisma.profile.update({\n        where: { id: profile.id },\n        data: {\n          plan: \"FREE\",\n          trialEndsAt: null,\n          trialPlan: null,\n          updatedAt: now\n        }\n      })\n      \n      results.push({\n        userId: updated.userId,\n        username: updated.username,\n        previousPlan: profile.trialPlan,\n        newPlan: updated.plan,\n        expiredAt: profile.trialEndsAt\n      })\n    }\n\n    return NextResponse.json({\n      success: true,\n      message: `${results.length} trial(s) expir√©(s)`,\n      expiredTrials: results\n    })\n\n  } catch (error: any) {\n    console.error(\"Erreur lors de l'expiration des trials:\", error)\n    return NextResponse.json(\n      { error: error.message || \"Erreur serveur\" },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1756},"CODES_PROMO.md":{"content":"# üéÅ Codes Promo Athlink\n\n## Codes Promo Actifs\n\n### 1. **ELITE2025** - Acc√®s ELITE Permanent ‚≠ê\n- **Type**: Upgrade permanent\n- **Plan**: ELITE\n- **Dur√©e**: Illimit√©e\n- **Avantages**:\n  - Analytics illimit√©es avec heatmap GitHub\n  - Services de coaching complets\n  - Toutes les fonctionnalit√©s d√©bloqu√©es\n  - Aucune limite sur liens, sponsors, comp√©titions, m√©dias\n\n**Comment l'utiliser**:\n1. Aller sur la page \"Upgrade\" (`/dashboard/upgrade`)\n2. Entrer le code `ELITE2025` dans le champ \"Code promo\"\n3. Cliquer sur \"Valider le code\"\n4. Votre plan sera imm√©diatement mis √† jour vers ELITE\n\n---\n\n### 2. **PRO30FREE** - 1 Mois PRO Offert üéÅ\n- **Type**: Trial avec expiration automatique\n- **Plan**: PRO\n- **Dur√©e**: 30 jours\n- **Avantages temporaires**:\n  - Analytics 7 derniers jours\n  - Pas de coaching (ELITE uniquement)\n  - Jusqu'√† 20 liens, 10 sponsors, 10 comp√©titions, 20 m√©dias\n\n**Important** ‚ö†Ô∏è:\n- Apr√®s 30 jours, votre compte **rebascule automatiquement** en plan **FREE**\n- Vous recevrez un email avant l'expiration (√† impl√©menter)\n- Aucun paiement requis\n\n**Comment l'utiliser**:\n1. Aller sur la page \"Upgrade\" (`/dashboard/upgrade`)\n2. Entrer le code `PRO30FREE` dans le champ \"Code promo\"\n3. Cliquer sur \"Valider le code\"\n4. Votre plan sera mis √† jour vers PRO jusqu'au [date d'expiration]\n5. √Ä la fin de la p√©riode, retour automatique au plan FREE\n\n---\n\n## Gestion des Trials\n\n### V√©rification Automatique de l'Expiration\nLe syst√®me v√©rifie automatiquement l'expiration des trials de deux fa√ßons :\n\n1. **En temps r√©el** : Quand un utilisateur se connecte, le syst√®me v√©rifie si son trial a expir√©\n2. **API Cron** : Route `/api/cron/expire-trials` (√† configurer avec Vercel Cron ou autre)\n\n### Configuration du Cron Job (Vercel)\nAjouter dans `vercel.json` :\n```json\n{\n  \"crons\": [{\n    \"path\": \"/api/cron/expire-trials\",\n    \"schedule\": \"0 */6 * * *\"\n  }]\n}\n```\nCette configuration ex√©cute le script toutes les 6 heures.\n\n### S√©curit√© de l'API Cron\n‚ö†Ô∏è **OBLIGATOIRE** : L'API est prot√©g√©e par un secret. Sans ce secret, l'API cron **ne fonctionnera pas** (erreur 503).\n\nAjouter dans vos secrets Replit :\n```\nCRON_SECRET=votre_secret_aleatoire_genere\n```\n\nG√©n√©rer un secret s√©curis√© :\n```bash\nopenssl rand -base64 32\n```\n\nPour tester manuellement l'expiration :\n```bash\ncurl -H \"Authorization: Bearer votre_secret\" \\\n  https://votre-domaine.com/api/cron/expire-trials\n```\n\n---\n\n## Codes Promo Legacy (D√©sactiv√©s)\n\n### ~~ATHLINK_PREMIUM~~ ‚ùå\n- Remplac√© par ELITE2025\n- Conserv√© dans le code pour compatibilit√©\n\n### ~~ATHLINK100~~ ‚ùå\n- Remplac√© par PRO30FREE\n- Meilleur syst√®me d'expiration automatique\n\n---\n\n## Support Technique\n\n### Ajout d'un Nouveau Code Promo\n√âditer `lib/promo-codes.ts` :\n```typescript\nexport const PROMO_CODES: Record<string, PromoCode> = {\n  \"NOUVEAU_CODE\": {\n    type: \"plan_upgrade\" | \"trial\",\n    plan: \"PRO\" | \"ELITE\",\n    duration: null | 30,  // null = permanent, nombre = jours\n    discount: 0 | 100,    // 0 = aucun, 100 = gratuit\n    description: \"Description du code\"\n  }\n}\n```\n\n### D√©sactivation d'un Code\nSimplement le retirer de `PROMO_CODES` dans `lib/promo-codes.ts`.\n\n---\n\n**Derni√®re mise √† jour** : 25 octobre 2025\n","size_bytes":3232},"lib/check-trial-expiration.ts":{"content":"import { prisma } from \"@/lib/db\"\nimport type { Profile } from \"@prisma/client\"\n\nexport async function checkAndExpireTrial(profile: Profile): Promise<Profile> {\n  if (!profile.trialEndsAt) {\n    return profile\n  }\n\n  const now = new Date()\n  \n  if (profile.trialEndsAt <= now) {\n    const updatedProfile = await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        plan: \"FREE\",\n        trialEndsAt: null,\n        trialPlan: null,\n        updatedAt: now\n      }\n    })\n    \n    return updatedProfile\n  }\n\n  return profile\n}\n\nexport async function getUserProfileWithTrialCheck(userId: string): Promise<Profile | null> {\n  const profile = await prisma.profile.findUnique({\n    where: { userId }\n  })\n\n  if (!profile) {\n    return null\n  }\n\n  return checkAndExpireTrial(profile)\n}\n","size_bytes":804},"app/api/coaching/bookings/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@/lib/features\"\nimport { bookingUpdateSchema } from \"@/lib/validations\"\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n    const booking = bookings.find((b: any) => b.id === id)\n\n    if (!booking) {\n      return NextResponse.json({ error: \"R√©servation non trouv√©e\" }, { status: 404 })\n    }\n\n    return NextResponse.json(booking)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const body = await request.json()\n    \n    // Parser les donn√©es\n    const rawData: any = {}\n    if (body.status) rawData.status = body.status\n    if (body.clientName) rawData.clientName = body.clientName\n    if (body.clientEmail) rawData.clientEmail = body.clientEmail\n    if (body.clientPhone !== undefined) rawData.clientPhone = body.clientPhone || null\n    if (body.date) rawData.date = body.date\n    if (body.startTime) rawData.startTime = body.startTime\n    if (body.duration) rawData.duration = typeof body.duration === 'string' ? parseInt(body.duration) : body.duration\n    if (body.service) rawData.service = body.service\n    if (body.price !== undefined) rawData.price = typeof body.price === 'string' ? parseFloat(body.price) : body.price\n    if (body.notes !== undefined) rawData.notes = body.notes || null\n\n    // Valider avec Zod\n    const validation = bookingUpdateSchema.safeParse(rawData)\n    \n    if (!validation.success) {\n      const errors = validation.error.issues.map((err: any) => `${err.path.join('.')}: ${err.message}`).join(', ')\n      return NextResponse.json({ error: errors }, { status: 400 })\n    }\n\n    const validatedData = validation.data\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n    const bookingIndex = bookings.findIndex((b: any) => b.id === id)\n\n    if (bookingIndex === -1) {\n      return NextResponse.json({ error: \"R√©servation non trouv√©e\" }, { status: 404 })\n    }\n\n    // Recalculer l'heure de fin si n√©cessaire\n    let endTime = bookings[bookingIndex].endTime\n    if (validatedData.startTime && validatedData.duration) {\n      const [hours, minutes] = validatedData.startTime.split(':').map(Number)\n      const endMinutes = hours * 60 + minutes + validatedData.duration\n      const endHours = Math.floor(endMinutes / 60)\n      const endMins = endMinutes % 60\n      endTime = `${String(endHours).padStart(2, '0')}:${String(endMins).padStart(2, '0')}`\n    }\n\n    // Mettre √† jour la r√©servation\n    const updatedBooking = {\n      ...bookings[bookingIndex],\n      ...validatedData,\n      endTime\n    }\n\n    bookings[bookingIndex] = updatedBooking\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings\n        }\n      }\n    })\n\n    return NextResponse.json(updatedBooking)\n  } catch (error) {\n    console.error(\"Erreur lors de la mise √† jour de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n    const bookingIndex = bookings.findIndex((b: any) => b.id === id)\n\n    if (bookingIndex === -1) {\n      return NextResponse.json({ error: \"R√©servation non trouv√©e\" }, { status: 404 })\n    }\n\n    // Supprimer la r√©servation\n    bookings.splice(bookingIndex, 1)\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings\n        }\n      }\n    })\n\n    return NextResponse.json({ message: \"R√©servation supprim√©e avec succ√®s\" })\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":5908},"app/api/coaching/bookings/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@/lib/features\"\nimport { bookingSchema } from \"@/lib/validations\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const stats = profile.stats as any || {}\n    const bookings = stats.bookings || []\n\n    return NextResponse.json(bookings)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des r√©servations:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true, stats: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const body = await request.json()\n    \n    // Parser les donn√©es\n    const rawData = {\n      clientName: body.clientName,\n      clientEmail: body.clientEmail,\n      clientPhone: body.clientPhone || null,\n      date: body.date,\n      startTime: body.startTime,\n      duration: typeof body.duration === 'string' ? parseInt(body.duration) : body.duration,\n      service: body.service,\n      price: typeof body.price === 'string' ? parseFloat(body.price) : body.price,\n      notes: body.notes || null,\n    }\n\n    // Valider avec Zod\n    const validation = bookingSchema.safeParse(rawData)\n    \n    if (!validation.success) {\n      const errors = validation.error.issues.map((err: any) => `${err.path.join('.')}: ${err.message}`).join(', ')\n      return NextResponse.json({ error: errors }, { status: 400 })\n    }\n\n    const validatedData = validation.data\n\n    // Calculer l'heure de fin\n    const [hours, minutes] = validatedData.startTime.split(':').map(Number)\n    const endMinutes = hours * 60 + minutes + validatedData.duration\n    const endHours = Math.floor(endMinutes / 60)\n    const endMins = endMinutes % 60\n    const endTime = `${String(endHours).padStart(2, '0')}:${String(endMins).padStart(2, '0')}`\n\n    // R√©cup√©rer les r√©servations existantes\n    const stats = profile.stats as any || {}\n    const existingBookings = stats.bookings || []\n\n    // Cr√©er la nouvelle r√©servation\n    const newBooking = {\n      id: `booking_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...validatedData,\n      endTime,\n      status: \"PENDING\",\n      createdAt: new Date().toISOString()\n    }\n\n    // Ajouter la nouvelle r√©servation\n    const updatedBookings = [newBooking, ...existingBookings]\n\n    // Sauvegarder dans le profil\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          bookings: updatedBookings\n        }\n      }\n    })\n\n    return NextResponse.json(newBooking, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation de la r√©servation:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3687},"app/api/coaching/training-plans/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@/lib/features\"\nimport { trainingPlanUpdateSchema } from \"@/lib/validations\"\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const plan = plans.find((p: any) => p.id === id)\n\n    if (!plan) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    return NextResponse.json(plan)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const formData = await request.formData()\n    \n    // Parser les donn√©es du formulaire\n    const rawData: any = {}\n    \n    const title = formData.get('title') as string\n    const description = formData.get('description') as string\n    const priceStr = formData.get('price') as string\n    const durationStr = formData.get('duration') as string\n    const difficulty = formData.get('difficulty') as string\n    const category = formData.get('category') as string\n    const isActiveStr = formData.get('isActive') as string\n    const pdfFileNameFromForm = formData.get('pdfFileName') as string\n    \n    if (title) rawData.title = title\n    if (description) rawData.description = description\n    if (priceStr) rawData.price = parseFloat(priceStr)\n    if (durationStr) rawData.duration = parseInt(durationStr)\n    if (difficulty) rawData.difficulty = difficulty\n    if (category) rawData.category = category\n    if (isActiveStr !== null) rawData.isActive = isActiveStr === 'true'\n    if (pdfFileNameFromForm) rawData.pdfFileName = pdfFileNameFromForm\n\n    // Valider avec Zod\n    const validation = trainingPlanUpdateSchema.safeParse(rawData)\n    \n    if (!validation.success) {\n      const errors = validation.error.issues.map((err: any) => `${err.path.join('.')}: ${err.message}`).join(', ')\n      return NextResponse.json({ error: errors }, { status: 400 })\n    }\n\n    const validatedData = validation.data\n\n    // R√©cup√©rer les plans existants\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const planIndex = plans.findIndex((p: any) => p.id === id)\n\n    if (planIndex === -1) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    // Mettre √† jour le plan\n    const updatedPlan = {\n      ...plans[planIndex],\n      ...validatedData\n    }\n\n    plans[planIndex] = updatedPlan\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: plans\n        }\n      }\n    })\n\n    return NextResponse.json(updatedPlan)\n  } catch (error) {\n    console.error(\"Erreur lors de la mise √† jour du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    // R√©cup√©rer les plans existants\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n    const planIndex = plans.findIndex((p: any) => p.id === id)\n\n    if (planIndex === -1) {\n      return NextResponse.json({ error: \"Plan non trouv√©\" }, { status: 404 })\n    }\n\n    // Supprimer le plan\n    plans.splice(planIndex, 1)\n\n    // Sauvegarder\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: plans\n        }\n      }\n    })\n\n    return NextResponse.json({ message: \"Plan supprim√© avec succ√®s\" })\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":5867},"app/api/coaching/training-plans/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@/lib/features\"\nimport { trainingPlanSchema } from \"@/lib/validations\"\nimport { z } from \"zod\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const plans = stats.trainingPlans || []\n\n    return NextResponse.json(plans)\n  } catch (error) {\n    console.error(\"Erreur lors de la r√©cup√©ration des plans:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const formData = await request.formData()\n    \n    // Parser les donn√©es du formulaire\n    const rawData = {\n      title: formData.get('title') as string,\n      description: formData.get('description') as string,\n      price: formData.get('price') ? parseFloat(formData.get('price') as string) : undefined,\n      duration: formData.get('duration') ? parseInt(formData.get('duration') as string) : undefined,\n      difficulty: formData.get('difficulty') as string,\n      category: formData.get('category') as string,\n      isActive: formData.get('isActive') === 'true',\n      pdfFileName: (formData.get('pdfFileName') as string) || null,\n      pdfFileUrl: (formData.get('pdfFileUrl') as string) || null,\n    }\n\n    // Valider avec Zod\n    const validation = trainingPlanSchema.safeParse(rawData)\n    \n    if (!validation.success) {\n      const errors = validation.error.issues.map((err: any) => `${err.path.join('.')}: ${err.message}`).join(', ')\n      return NextResponse.json({ error: errors }, { status: 400 })\n    }\n\n    const validatedData = validation.data\n\n    // R√©cup√©rer les plans existants\n    const profileData = await prisma.profile.findUnique({\n      where: { id: profile.id },\n      select: { stats: true }\n    })\n\n    const stats = profileData?.stats as any || {}\n    const existingPlans = stats.trainingPlans || []\n\n    // Cr√©er le nouveau plan\n    const newPlan = {\n      id: `plan_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      ...validatedData,\n      createdAt: new Date().toISOString(),\n      sessions: [],\n      subscribers: [],\n      _count: {\n        sessions: 0,\n        subscribers: 0\n      }\n    }\n\n    // Ajouter le nouveau plan\n    const updatedPlans = [newPlan, ...existingPlans]\n\n    // Sauvegarder dans le profil\n    await prisma.profile.update({\n      where: { id: profile.id },\n      data: {\n        stats: {\n          ...stats,\n          trainingPlans: updatedPlans\n        }\n      }\n    })\n\n    return NextResponse.json(newPlan, { status: 201 })\n  } catch (error) {\n    console.error(\"Erreur lors de la cr√©ation du plan:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":3822},"app/api/coaching/upload-pdf/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\"\nimport { auth } from \"@/lib/auth\"\nimport { prisma } from \"@/lib/db\"\nimport { PlanType } from \"@/lib/features\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const session = await auth()\n    if (!session) {\n      return NextResponse.json({ error: \"Non autoris√©\" }, { status: 401 })\n    }\n\n    const profile = await prisma.profile.findUnique({\n      where: { userId: session.user.id },\n      select: { id: true, plan: true }\n    })\n\n    if (!profile || (profile.plan !== PlanType.ELITE)) {\n      return NextResponse.json({ error: \"Acc√®s non autoris√©\" }, { status: 403 })\n    }\n\n    const formData = await request.formData()\n    const pdfFile = formData.get('pdfFile') as File\n    const planId = formData.get('planId') as string\n\n    if (!pdfFile) {\n      return NextResponse.json({ error: \"Fichier PDF requis\" }, { status: 400 })\n    }\n\n    if (!pdfFile.type.includes('pdf')) {\n      return NextResponse.json({ error: \"Le fichier doit √™tre un PDF\" }, { status: 400 })\n    }\n\n    const maxSize = 10 * 1024 * 1024 // 10MB\n    if (pdfFile.size > maxSize) {\n      return NextResponse.json({ error: \"Le fichier ne doit pas d√©passer 10MB\" }, { status: 400 })\n    }\n\n    // Pour l'instant, on retourne juste les infos du fichier\n    // Dans une vraie app, on uploadrait vers Supabase Storage\n    const fileUrl = `/uploads/training-plans/${planId}/${pdfFile.name}`\n    \n    return NextResponse.json({\n      fileUrl,\n      originalName: pdfFile.name,\n      size: pdfFile.size\n    }, { status: 200 })\n  } catch (error) {\n    console.error(\"Erreur lors de l'upload du PDF:\", error)\n    return NextResponse.json({ error: \"Erreur serveur\" }, { status: 500 })\n  }\n}\n","size_bytes":1728},"app/api/admin/ambassadors/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/db\";\nimport { requireAdmin } from \"@/lib/auth-admin\";\nimport { z } from \"zod\";\n\nconst createAmbassadorSchema = z.object({\n  name: z.string().min(2, \"Le nom doit contenir au moins 2 caract√®res\"),\n  email: z.string().email(\"Email invalide\"),\n  phone: z.string().optional(),\n  commissionRate: z.number().min(0).max(100).default(20),\n  commissionType: z.enum([\"recurring\", \"one-time\", \"lifetime\"]).default(\"recurring\"),\n  notes: z.string().optional(),\n});\n\nexport async function GET(request: NextRequest) {\n  try {\n    await requireAdmin();\n\n    const { searchParams } = new URL(request.url);\n    const status = searchParams.get(\"status\") || undefined;\n\n    const ambassadors = await prisma.ambassador.findMany({\n      where: status ? { status } : undefined,\n      include: {\n        promoCodes: {\n          select: {\n            id: true,\n            code: true,\n            isActive: true,\n            currentUses: true,\n            maxUses: true,\n          },\n        },\n        _count: {\n          select: {\n            promoCodes: true,\n            usages: true,\n            commissions: true,\n          },\n        },\n      },\n      orderBy: {\n        createdAt: \"desc\",\n      },\n    });\n\n    return NextResponse.json(ambassadors);\n  } catch (error: any) {\n    console.error(\"Error fetching ambassadors:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la r√©cup√©ration des ambassadeurs\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    await requireAdmin();\n\n    const body = await request.json();\n    const validated = createAmbassadorSchema.parse(body);\n\n    const existingAmbassador = await prisma.ambassador.findUnique({\n      where: { email: validated.email },\n    });\n\n    if (existingAmbassador) {\n      return NextResponse.json(\n        { error: \"Un ambassadeur avec cet email existe d√©j√†\" },\n        { status: 400 }\n      );\n    }\n\n    const ambassador = await prisma.ambassador.create({\n      data: {\n        name: validated.name,\n        email: validated.email,\n        phone: validated.phone,\n        commissionRate: validated.commissionRate,\n        commissionType: validated.commissionType,\n        notes: validated.notes,\n      },\n      include: {\n        promoCodes: true,\n      },\n    });\n\n    return NextResponse.json(ambassador, { status: 201 });\n  } catch (error: any) {\n    console.error(\"Error creating ambassador:\", error);\n    \n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.issues },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la cr√©ation de l'ambassadeur\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n","size_bytes":2955},"lib/auth-admin.ts":{"content":"import { auth } from \"@/lib/auth\";\n\nconst ADMIN_EMAILS = [\n  \"admin@athlink.com\",\n  \"contact@athlink.com\",\n];\n\nexport async function isAdmin(): Promise<boolean> {\n  const session = await auth();\n  \n  if (!session?.user?.email) {\n    return false;\n  }\n  \n  return ADMIN_EMAILS.includes(session.user.email);\n}\n\nexport async function requireAdmin() {\n  const admin = await isAdmin();\n  \n  if (!admin) {\n    throw new Error(\"Unauthorized - Admin access required\");\n  }\n}\n","size_bytes":467},"app/api/admin/ambassadors/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/db\";\nimport { requireAdmin } from \"@/lib/auth-admin\";\nimport { z } from \"zod\";\n\nconst updateAmbassadorSchema = z.object({\n  name: z.string().min(2).optional(),\n  email: z.string().email().optional(),\n  phone: z.string().optional().nullable(),\n  status: z.enum([\"active\", \"inactive\", \"suspended\"]).optional(),\n  commissionRate: z.number().min(0).max(100).optional(),\n  commissionType: z.enum([\"recurring\", \"one-time\", \"lifetime\"]).optional(),\n  notes: z.string().optional().nullable(),\n});\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    await requireAdmin();\n\n    const ambassador = await prisma.ambassador.findUnique({\n      where: { id: params.id },\n      include: {\n        promoCodes: {\n          include: {\n            _count: {\n              select: {\n                usages: true,\n              },\n            },\n          },\n        },\n        usages: {\n          include: {\n            promoCode: {\n              select: {\n                code: true,\n              },\n            },\n            user: {\n              select: {\n                email: true,\n                name: true,\n              },\n            },\n          },\n          orderBy: {\n            usedAt: \"desc\",\n          },\n        },\n        commissions: {\n          orderBy: {\n            createdAt: \"desc\",\n          },\n          take: 50,\n        },\n        _count: {\n          select: {\n            promoCodes: true,\n            usages: true,\n            commissions: true,\n          },\n        },\n      },\n    });\n\n    if (!ambassador) {\n      return NextResponse.json(\n        { error: \"Ambassadeur non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json(ambassador);\n  } catch (error: any) {\n    console.error(\"Error fetching ambassador:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la r√©cup√©ration de l'ambassadeur\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n\nexport async function PATCH(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    await requireAdmin();\n\n    const body = await request.json();\n    const validated = updateAmbassadorSchema.parse(body);\n\n    const existingAmbassador = await prisma.ambassador.findUnique({\n      where: { id: params.id },\n    });\n\n    if (!existingAmbassador) {\n      return NextResponse.json(\n        { error: \"Ambassadeur non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    if (validated.email && validated.email !== existingAmbassador.email) {\n      const emailExists = await prisma.ambassador.findUnique({\n        where: { email: validated.email },\n      });\n\n      if (emailExists) {\n        return NextResponse.json(\n          { error: \"Cet email est d√©j√† utilis√© par un autre ambassadeur\" },\n          { status: 400 }\n        );\n      }\n    }\n\n    const ambassador = await prisma.ambassador.update({\n      where: { id: params.id },\n      data: validated,\n      include: {\n        promoCodes: true,\n        _count: {\n          select: {\n            promoCodes: true,\n            usages: true,\n            commissions: true,\n          },\n        },\n      },\n    });\n\n    return NextResponse.json(ambassador);\n  } catch (error: any) {\n    console.error(\"Error updating ambassador:\", error);\n\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.issues },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la mise √† jour de l'ambassadeur\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    await requireAdmin();\n\n    const existingAmbassador = await prisma.ambassador.findUnique({\n      where: { id: params.id },\n      include: {\n        _count: {\n          select: {\n            usages: true,\n            commissions: true,\n          },\n        },\n      },\n    });\n\n    if (!existingAmbassador) {\n      return NextResponse.json(\n        { error: \"Ambassadeur non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    if (existingAmbassador._count.usages > 0 || existingAmbassador._count.commissions > 0) {\n      return NextResponse.json(\n        { \n          error: \"Impossible de supprimer cet ambassadeur car il a d√©j√† des conversions ou commissions. Vous pouvez le d√©sactiver √† la place.\",\n        },\n        { status: 400 }\n      );\n    }\n\n    await prisma.ambassador.delete({\n      where: { id: params.id },\n    });\n\n    return NextResponse.json(\n      { message: \"Ambassadeur supprim√© avec succ√®s\" },\n      { status: 200 }\n    );\n  } catch (error: any) {\n    console.error(\"Error deleting ambassador:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la suppression de l'ambassadeur\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n","size_bytes":5144},"app/api/admin/promo-codes/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/db\";\nimport { requireAdmin } from \"@/lib/auth-admin\";\nimport { z } from \"zod\";\n\nconst createPromoCodeSchema = z.object({\n  ambassadorId: z.string().cuid(),\n  code: z.string()\n    .min(3, \"Le code doit contenir au moins 3 caract√®res\")\n    .max(50)\n    .regex(/^[A-Z0-9_-]+$/, \"Le code ne peut contenir que des lettres majuscules, chiffres, tirets et underscores\")\n    .transform((val) => val.toUpperCase()),\n  description: z.string().optional(),\n  discountType: z.enum([\"percentage\", \"fixed_amount\"]),\n  discountValue: z.number().positive(),\n  applicablePlans: z.array(z.enum([\"FREE\", \"PRO\", \"ELITE\"])).default([]),\n  maxUses: z.number().int().positive().optional().nullable(),\n  maxUsesPerUser: z.number().int().positive().default(1),\n  startsAt: z.string().datetime().optional(),\n  expiresAt: z.string().datetime().optional().nullable(),\n  isActive: z.boolean().default(true),\n});\n\nexport async function GET(request: NextRequest) {\n  try {\n    await requireAdmin();\n\n    const { searchParams } = new URL(request.url);\n    const ambassadorId = searchParams.get(\"ambassadorId\");\n    const isActive = searchParams.get(\"isActive\");\n\n    const promoCodes = await prisma.promoCode.findMany({\n      where: {\n        ...(ambassadorId && { ambassadorId }),\n        ...(isActive !== null && { isActive: isActive === \"true\" }),\n      },\n      include: {\n        ambassador: {\n          select: {\n            id: true,\n            name: true,\n            email: true,\n            status: true,\n          },\n        },\n        _count: {\n          select: {\n            usages: true,\n          },\n        },\n      },\n      orderBy: {\n        createdAt: \"desc\",\n      },\n    });\n\n    return NextResponse.json(promoCodes);\n  } catch (error: any) {\n    console.error(\"Error fetching promo codes:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la r√©cup√©ration des codes promo\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    await requireAdmin();\n\n    const body = await request.json();\n    const validated = createPromoCodeSchema.parse(body);\n\n    const ambassador = await prisma.ambassador.findUnique({\n      where: { id: validated.ambassadorId },\n    });\n\n    if (!ambassador) {\n      return NextResponse.json(\n        { error: \"Ambassadeur non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    const existingCode = await prisma.promoCode.findUnique({\n      where: { code: validated.code },\n    });\n\n    if (existingCode) {\n      return NextResponse.json(\n        { error: \"Ce code promo existe d√©j√†\" },\n        { status: 400 }\n      );\n    }\n\n    if (validated.discountType === \"percentage\" && validated.discountValue > 100) {\n      return NextResponse.json(\n        { error: \"Le pourcentage de r√©duction ne peut pas d√©passer 100%\" },\n        { status: 400 }\n      );\n    }\n\n    const promoCode = await prisma.promoCode.create({\n      data: {\n        ambassadorId: validated.ambassadorId,\n        code: validated.code,\n        description: validated.description,\n        discountType: validated.discountType,\n        discountValue: validated.discountValue,\n        applicablePlans: validated.applicablePlans,\n        maxUses: validated.maxUses,\n        maxUsesPerUser: validated.maxUsesPerUser,\n        startsAt: validated.startsAt ? new Date(validated.startsAt) : undefined,\n        expiresAt: validated.expiresAt ? new Date(validated.expiresAt) : undefined,\n        isActive: validated.isActive,\n      },\n      include: {\n        ambassador: {\n          select: {\n            id: true,\n            name: true,\n            email: true,\n          },\n        },\n      },\n    });\n\n    return NextResponse.json(promoCode, { status: 201 });\n  } catch (error: any) {\n    console.error(\"Error creating promo code:\", error);\n\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.issues },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la cr√©ation du code promo\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n","size_bytes":4316},"app/admin/ambassadors/[id]/page.tsx":{"content":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport { toast } from \"sonner\";\nimport {\n  ArrowLeft,\n  Tag,\n  TrendingUp,\n  DollarSign,\n  Calendar,\n  Mail,\n  Phone,\n  Plus,\n} from \"lucide-react\";\n\ninterface AmbassadorDetails {\n  id: string;\n  name: string;\n  email: string;\n  phone: string | null;\n  status: string;\n  commissionRate: number;\n  commissionType: string;\n  totalReferrals: number;\n  totalRevenue: number;\n  totalCommission: number;\n  notes: string | null;\n  createdAt: string;\n  promoCodes: any[];\n  usages: any[];\n  commissions: any[];\n}\n\nexport default function AmbassadorDetailPage() {\n  const router = useRouter();\n  const params = useParams();\n  const ambassadorId = params.id as string;\n\n  const [ambassador, setAmbassador] = useState<AmbassadorDetails | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [showCreateCodeModal, setShowCreateCodeModal] = useState(false);\n  const [newPromoCode, setNewPromoCode] = useState({\n    code: \"\",\n    description: \"\",\n    discountType: \"percentage\",\n    discountValue: 20,\n    applicablePlans: [] as string[],\n    maxUses: \"\",\n    expiresAt: \"\",\n  });\n\n  useEffect(() => {\n    if (ambassadorId) {\n      fetchAmbassadorDetails();\n    }\n  }, [ambassadorId]);\n\n  const fetchAmbassadorDetails = async () => {\n    try {\n      const response = await fetch(`/api/admin/ambassadors/${ambassadorId}`);\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          toast.error(\"Acc√®s non autoris√©\");\n          router.push(\"/dashboard\");\n          return;\n        }\n        throw new Error(\"Erreur lors du chargement\");\n      }\n\n      const data = await response.json();\n      setAmbassador(data);\n    } catch (error: any) {\n      console.error(\"Error:\", error);\n      toast.error(error.message || \"Erreur lors du chargement\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreatePromoCode = async () => {\n    if (!newPromoCode.code) {\n      toast.error(\"Le code est requis\");\n      return;\n    }\n\n    try {\n      const response = await fetch(\"/api/admin/promo-codes\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          ambassadorId,\n          code: newPromoCode.code.toUpperCase(),\n          description: newPromoCode.description,\n          discountType: newPromoCode.discountType,\n          discountValue: newPromoCode.discountValue,\n          applicablePlans: newPromoCode.applicablePlans,\n          maxUses: newPromoCode.maxUses ? parseInt(newPromoCode.maxUses) : null,\n          expiresAt: newPromoCode.expiresAt || null,\n        }),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Erreur lors de la cr√©ation\");\n      }\n\n      toast.success(\"Code promo cr√©√© avec succ√®s\");\n      setShowCreateCodeModal(false);\n      setNewPromoCode({\n        code: \"\",\n        description: \"\",\n        discountType: \"percentage\",\n        discountValue: 20,\n        applicablePlans: [],\n        maxUses: \"\",\n        expiresAt: \"\",\n      });\n      fetchAmbassadorDetails();\n    } catch (error: any) {\n      toast.error(error.message);\n    }\n  };\n\n  const togglePlan = (plan: string) => {\n    setNewPromoCode((prev) => ({\n      ...prev,\n      applicablePlans: prev.applicablePlans.includes(plan)\n        ? prev.applicablePlans.filter((p) => p !== plan)\n        : [...prev.applicablePlans, plan],\n    }));\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Chargement...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!ambassador) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <p className=\"text-gray-600\">Ambassadeur non trouv√©</p>\n          <button\n            onClick={() => router.push(\"/admin/ambassadors\")}\n            className=\"mt-4 text-blue-600 hover:underline\"\n          >\n            Retour √† la liste\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"container mx-auto px-4 max-w-7xl\">\n        <button\n          onClick={() => router.push(\"/admin/ambassadors\")}\n          className=\"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6\"\n        >\n          <ArrowLeft className=\"w-5 h-5\" />\n          Retour aux ambassadeurs\n        </button>\n\n        <div className=\"bg-white rounded-lg shadow-lg p-6 mb-6\">\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n                {ambassador.name}\n              </h1>\n              <div className=\"flex flex-col gap-2 text-sm text-gray-600\">\n                <div className=\"flex items-center gap-2\">\n                  <Mail className=\"w-4 h-4\" />\n                  {ambassador.email}\n                </div>\n                {ambassador.phone && (\n                  <div className=\"flex items-center gap-2\">\n                    <Phone className=\"w-4 h-4\" />\n                    {ambassador.phone}\n                  </div>\n                )}\n                <div className=\"flex items-center gap-2\">\n                  <Calendar className=\"w-4 h-4\" />\n                  Membre depuis{\" \"}\n                  {new Date(ambassador.createdAt).toLocaleDateString(\"fr-FR\")}\n                </div>\n              </div>\n            </div>\n            <div className=\"flex flex-col items-end gap-2\">\n              <span\n                className={`px-3 py-1 text-sm font-semibold rounded-full ${\n                  ambassador.status === \"active\"\n                    ? \"bg-green-100 text-green-800\"\n                    : \"bg-gray-100 text-gray-800\"\n                }`}\n              >\n                {ambassador.status}\n              </span>\n              <span className=\"text-sm text-gray-600\">\n                Commission: {ambassador.commissionRate}% ({ambassador.commissionType})\n              </span>\n            </div>\n          </div>\n\n          {ambassador.notes && (\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\n              <p className=\"text-sm text-gray-700\">{ambassador.notes}</p>\n            </div>\n          )}\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <TrendingUp className=\"w-8 h-8 text-blue-600\" />\n              </div>\n              <p className=\"text-sm text-gray-600 mb-1\">Conversions</p>\n              <p className=\"text-3xl font-bold text-gray-900\">\n                {ambassador.totalReferrals}\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <DollarSign className=\"w-8 h-8 text-green-600\" />\n              </div>\n              <p className=\"text-sm text-gray-600 mb-1\">Revenu G√©n√©r√©</p>\n              <p className=\"text-3xl font-bold text-gray-900\">\n                {ambassador.totalRevenue.toFixed(2)}‚Ç¨\n              </p>\n            </div>\n\n            <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <Tag className=\"w-8 h-8 text-purple-600\" />\n              </div>\n              <p className=\"text-sm text-gray-600 mb-1\">Commissions</p>\n              <p className=\"text-3xl font-bold text-gray-900\">\n                {ambassador.totalCommission.toFixed(2)}‚Ç¨\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Codes Promo</h2>\n              <button\n                onClick={() => setShowCreateCodeModal(true)}\n                className=\"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700\"\n              >\n                <Plus className=\"w-4 h-4\" />\n                Nouveau Code\n              </button>\n            </div>\n            <div className=\"space-y-3\">\n              {ambassador.promoCodes.length === 0 ? (\n                <p className=\"text-gray-500 text-center py-8\">\n                  Aucun code promo cr√©√©\n                </p>\n              ) : (\n                ambassador.promoCodes.map((code) => (\n                  <div\n                    key={code.id}\n                    className=\"border border-gray-200 rounded-lg p-4\"\n                  >\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <p className=\"font-mono font-bold text-lg text-gray-900\">\n                          {code.code}\n                        </p>\n                        {code.description && (\n                          <p className=\"text-sm text-gray-600\">{code.description}</p>\n                        )}\n                      </div>\n                      <span\n                        className={`px-2 py-1 text-xs font-semibold rounded ${\n                          code.isActive\n                            ? \"bg-green-100 text-green-800\"\n                            : \"bg-gray-100 text-gray-800\"\n                        }`}\n                      >\n                        {code.isActive ? \"Actif\" : \"Inactif\"}\n                      </span>\n                    </div>\n                    <div className=\"flex flex-wrap gap-2 text-xs text-gray-600\">\n                      <span>\n                        R√©duction:{\" \"}\n                        {code.discountType === \"percentage\"\n                          ? `${code.discountValue}%`\n                          : `${code.discountValue}‚Ç¨`}\n                      </span>\n                      <span>‚Ä¢</span>\n                      <span>\n                        Utilisations: {code.currentUses}\n                        {code.maxUses && ` / ${code.maxUses}`}\n                      </span>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <h2 className=\"text-xl font-bold text-gray-900 mb-4\">\n              Conversions R√©centes\n            </h2>\n            <div className=\"space-y-3\">\n              {ambassador.usages.length === 0 ? (\n                <p className=\"text-gray-500 text-center py-8\">\n                  Aucune conversion\n                </p>\n              ) : (\n                ambassador.usages.slice(0, 10).map((usage) => (\n                  <div\n                    key={usage.id}\n                    className=\"border border-gray-200 rounded-lg p-4\"\n                  >\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">\n                          {usage.user.name || usage.user.email}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          {usage.promoCode.code}\n                        </p>\n                      </div>\n                      <p className=\"font-semibold text-gray-900\">\n                        {usage.finalAmount.toFixed(2)}‚Ç¨\n                      </p>\n                    </div>\n                    <div className=\"flex flex-wrap gap-2 text-xs text-gray-600\">\n                      <span>{usage.planType}</span>\n                      <span>‚Ä¢</span>\n                      <span>{usage.billingCycle}</span>\n                      <span>‚Ä¢</span>\n                      <span>\n                        {new Date(usage.usedAt).toLocaleDateString(\"fr-FR\")}\n                      </span>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n        </div>\n\n        {showCreateCodeModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto\">\n              <h2 className=\"text-2xl font-bold mb-4\">Nouveau Code Promo</h2>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Code *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={newPromoCode.code}\n                    onChange={(e) =>\n                      setNewPromoCode({\n                        ...newPromoCode,\n                        code: e.target.value.toUpperCase(),\n                      })\n                    }\n                    placeholder=\"ATHLETE20\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 font-mono\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Description\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={newPromoCode.description}\n                    onChange={(e) =>\n                      setNewPromoCode({\n                        ...newPromoCode,\n                        description: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Type de r√©duction\n                  </label>\n                  <select\n                    value={newPromoCode.discountType}\n                    onChange={(e) =>\n                      setNewPromoCode({\n                        ...newPromoCode,\n                        discountType: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"percentage\">Pourcentage (%)</option>\n                    <option value=\"fixed_amount\">Montant fixe (‚Ç¨)</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Valeur de la r√©duction *\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    value={newPromoCode.discountValue}\n                    onChange={(e) =>\n                      setNewPromoCode({\n                        ...newPromoCode,\n                        discountValue: parseFloat(e.target.value),\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Plans applicables (laisser vide = tous)\n                  </label>\n                  <div className=\"space-y-2\">\n                    {[\"PRO\", \"ELITE\"].map((plan) => (\n                      <label key={plan} className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={newPromoCode.applicablePlans.includes(plan)}\n                          onChange={() => togglePlan(plan)}\n                          className=\"mr-2\"\n                        />\n                        {plan}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Nombre max d'utilisations\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"1\"\n                    value={newPromoCode.maxUses}\n                    onChange={(e) =>\n                      setNewPromoCode({ ...newPromoCode, maxUses: e.target.value })\n                    }\n                    placeholder=\"Illimit√©\"\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Date d'expiration\n                  </label>\n                  <input\n                    type=\"datetime-local\"\n                    value={newPromoCode.expiresAt}\n                    onChange={(e) =>\n                      setNewPromoCode({\n                        ...newPromoCode,\n                        expiresAt: e.target.value,\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 mt-6\">\n                <button\n                  onClick={() => setShowCreateCodeModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\n                >\n                  Annuler\n                </button>\n                <button\n                  onClick={handleCreatePromoCode}\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                >\n                  Cr√©er\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":18547},"app/api/admin/promo-codes/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/db\";\nimport { requireAdmin } from \"@/lib/auth-admin\";\nimport { z } from \"zod\";\n\nconst updatePromoCodeSchema = z.object({\n  code: z.string()\n    .min(3)\n    .max(50)\n    .regex(/^[A-Z0-9_-]+$/)\n    .transform((val) => val.toUpperCase())\n    .optional(),\n  description: z.string().optional().nullable(),\n  discountType: z.enum([\"percentage\", \"fixed_amount\"]).optional(),\n  discountValue: z.number().positive().optional(),\n  applicablePlans: z.array(z.enum([\"FREE\", \"PRO\", \"ELITE\"])).optional(),\n  maxUses: z.number().int().positive().optional().nullable(),\n  maxUsesPerUser: z.number().int().positive().optional(),\n  expiresAt: z.string().datetime().optional().nullable(),\n  isActive: z.boolean().optional(),\n});\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    await requireAdmin();\n\n    const promoCode = await prisma.promoCode.findUnique({\n      where: { id: params.id },\n      include: {\n        ambassador: true,\n        usages: {\n          include: {\n            user: {\n              select: {\n                id: true,\n                email: true,\n                name: true,\n              },\n            },\n          },\n          orderBy: {\n            usedAt: \"desc\",\n          },\n        },\n        _count: {\n          select: {\n            usages: true,\n          },\n        },\n      },\n    });\n\n    if (!promoCode) {\n      return NextResponse.json(\n        { error: \"Code promo non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json(promoCode);\n  } catch (error: any) {\n    console.error(\"Error fetching promo code:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la r√©cup√©ration du code promo\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n\nexport async function PATCH(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    await requireAdmin();\n\n    const body = await request.json();\n    const validated = updatePromoCodeSchema.parse(body);\n\n    const existingPromoCode = await prisma.promoCode.findUnique({\n      where: { id: params.id },\n    });\n\n    if (!existingPromoCode) {\n      return NextResponse.json(\n        { error: \"Code promo non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    if (validated.code && validated.code !== existingPromoCode.code) {\n      const codeExists = await prisma.promoCode.findUnique({\n        where: { code: validated.code },\n      });\n\n      if (codeExists) {\n        return NextResponse.json(\n          { error: \"Ce code promo existe d√©j√†\" },\n          { status: 400 }\n        );\n      }\n    }\n\n    if (validated.discountType === \"percentage\" && validated.discountValue && validated.discountValue > 100) {\n      return NextResponse.json(\n        { error: \"Le pourcentage de r√©duction ne peut pas d√©passer 100%\" },\n        { status: 400 }\n      );\n    }\n\n    const promoCode = await prisma.promoCode.update({\n      where: { id: params.id },\n      data: {\n        ...validated,\n        expiresAt: validated.expiresAt ? new Date(validated.expiresAt) : undefined,\n      },\n      include: {\n        ambassador: true,\n        _count: {\n          select: {\n            usages: true,\n          },\n        },\n      },\n    });\n\n    return NextResponse.json(promoCode);\n  } catch (error: any) {\n    console.error(\"Error updating promo code:\", error);\n\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.issues },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la mise √† jour du code promo\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    await requireAdmin();\n\n    const existingPromoCode = await prisma.promoCode.findUnique({\n      where: { id: params.id },\n      include: {\n        _count: {\n          select: {\n            usages: true,\n          },\n        },\n      },\n    });\n\n    if (!existingPromoCode) {\n      return NextResponse.json(\n        { error: \"Code promo non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    if (existingPromoCode._count.usages > 0) {\n      return NextResponse.json(\n        {\n          error: \"Impossible de supprimer ce code promo car il a d√©j√† √©t√© utilis√©. Vous pouvez le d√©sactiver √† la place.\",\n        },\n        { status: 400 }\n      );\n    }\n\n    await prisma.promoCode.delete({\n      where: { id: params.id },\n    });\n\n    return NextResponse.json(\n      { message: \"Code promo supprim√© avec succ√®s\" },\n      { status: 200 }\n    );\n  } catch (error: any) {\n    console.error(\"Error deleting promo code:\", error);\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de la suppression du code promo\" },\n      { status: error.message?.includes(\"Unauthorized\") ? 401 : 500 }\n    );\n  }\n}\n","size_bytes":5100},"app/admin/ambassadors/page.tsx":{"content":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { toast } from \"sonner\";\nimport { \n  Users, \n  TrendingUp, \n  DollarSign, \n  Tag,\n  Plus,\n  Search,\n  Edit,\n  Trash2,\n  Eye,\n  BarChart3,\n} from \"lucide-react\";\n\ninterface Ambassador {\n  id: string;\n  name: string;\n  email: string;\n  status: string;\n  commissionRate: number;\n  totalReferrals: number;\n  totalRevenue: number;\n  totalCommission: number;\n  promoCodes: any[];\n  createdAt: string;\n}\n\nexport default function AmbassadorsAdminPage() {\n  const router = useRouter();\n  const [ambassadors, setAmbassadors] = useState<Ambassador[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [newAmbassador, setNewAmbassador] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    commissionRate: 20,\n    notes: \"\",\n  });\n\n  useEffect(() => {\n    fetchAmbassadors();\n  }, []);\n\n  const fetchAmbassadors = async () => {\n    try {\n      const response = await fetch(\"/api/admin/ambassadors\");\n      \n      if (!response.ok) {\n        if (response.status === 401) {\n          toast.error(\"Acc√®s non autoris√©\");\n          router.push(\"/dashboard\");\n          return;\n        }\n        throw new Error(\"Erreur lors du chargement\");\n      }\n\n      const data = await response.json();\n      setAmbassadors(data);\n    } catch (error: any) {\n      console.error(\"Error:\", error);\n      toast.error(error.message || \"Erreur lors du chargement des ambassadeurs\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateAmbassador = async () => {\n    if (!newAmbassador.name || !newAmbassador.email) {\n      toast.error(\"Nom et email requis\");\n      return;\n    }\n\n    try {\n      const response = await fetch(\"/api/admin/ambassadors\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(newAmbassador),\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Erreur lors de la cr√©ation\");\n      }\n\n      toast.success(\"Ambassadeur cr√©√© avec succ√®s\");\n      setShowCreateModal(false);\n      setNewAmbassador({\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        commissionRate: 20,\n        notes: \"\",\n      });\n      fetchAmbassadors();\n    } catch (error: any) {\n      toast.error(error.message);\n    }\n  };\n\n  const handleDeleteAmbassador = async (id: string) => {\n    if (!confirm(\"√ätes-vous s√ªr de vouloir supprimer cet ambassadeur ?\")) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`/api/admin/ambassadors/${id}`, {\n        method: \"DELETE\",\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Erreur lors de la suppression\");\n      }\n\n      toast.success(\"Ambassadeur supprim√©\");\n      fetchAmbassadors();\n    } catch (error: any) {\n      toast.error(error.message);\n    }\n  };\n\n  const filteredAmbassadors = ambassadors.filter(\n    (amb) =>\n      amb.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      amb.email.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const totalStats = ambassadors.reduce(\n    (acc, amb) => ({\n      referrals: acc.referrals + amb.totalReferrals,\n      revenue: acc.revenue + amb.totalRevenue,\n      commission: acc.commission + amb.totalCommission,\n    }),\n    { referrals: 0, revenue: 0, commission: 0 }\n  );\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Chargement...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"container mx-auto px-4 max-w-7xl\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n            Gestion des Ambassadeurs\n          </h1>\n          <p className=\"text-gray-600\">\n            Suivez et g√©rez vos ambassadeurs et leurs performances\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Ambassadeurs</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {ambassadors.length}\n                </p>\n              </div>\n              <Users className=\"w-10 h-10 text-blue-500\" />\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Conversions</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {totalStats.referrals}\n                </p>\n              </div>\n              <TrendingUp className=\"w-10 h-10 text-green-500\" />\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Revenu Total</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {totalStats.revenue.toFixed(2)}‚Ç¨\n                </p>\n              </div>\n              <DollarSign className=\"w-10 h-10 text-purple-500\" />\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-gray-600 mb-1\">Commissions</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {totalStats.commission.toFixed(2)}‚Ç¨\n                </p>\n              </div>\n              <Tag className=\"w-10 h-10 text-orange-500\" />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow mb-6\">\n          <div className=\"p-6 border-b border-gray-200\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <div className=\"flex-1 max-w-md\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"Rechercher un ambassadeur...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\n              >\n                <Plus className=\"w-5 h-5\" />\n                Nouvel Ambassadeur\n              </button>\n            </div>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Ambassadeur\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Statut\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Commission\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Codes\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Conversions\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Revenu\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredAmbassadors.map((ambassador) => (\n                  <tr key={ambassador.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">\n                          {ambassador.name}\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {ambassador.email}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <span\n                        className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                          ambassador.status === \"active\"\n                            ? \"bg-green-100 text-green-800\"\n                            : \"bg-gray-100 text-gray-800\"\n                        }`}\n                      >\n                        {ambassador.status}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {ambassador.commissionRate}%\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {ambassador.promoCodes.length}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {ambassador.totalReferrals}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                      {ambassador.totalRevenue.toFixed(2)}‚Ç¨\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      <div className=\"flex items-center gap-2\">\n                        <button\n                          onClick={() =>\n                            router.push(`/admin/ambassadors/${ambassador.id}`)\n                          }\n                          className=\"text-blue-600 hover:text-blue-900\"\n                          title=\"Voir les d√©tails\"\n                        >\n                          <Eye className=\"w-5 h-5\" />\n                        </button>\n                        <button\n                          onClick={() =>\n                            handleDeleteAmbassador(ambassador.id)\n                          }\n                          className=\"text-red-600 hover:text-red-900\"\n                          title=\"Supprimer\"\n                        >\n                          <Trash2 className=\"w-5 h-5\" />\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {showCreateModal && (\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n            <div className=\"bg-white rounded-lg max-w-md w-full p-6\">\n              <h2 className=\"text-2xl font-bold mb-4\">Nouvel Ambassadeur</h2>\n              \n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Nom *\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={newAmbassador.name}\n                    onChange={(e) =>\n                      setNewAmbassador({ ...newAmbassador, name: e.target.value })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Email *\n                  </label>\n                  <input\n                    type=\"email\"\n                    value={newAmbassador.email}\n                    onChange={(e) =>\n                      setNewAmbassador({ ...newAmbassador, email: e.target.value })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    T√©l√©phone\n                  </label>\n                  <input\n                    type=\"tel\"\n                    value={newAmbassador.phone}\n                    onChange={(e) =>\n                      setNewAmbassador({ ...newAmbassador, phone: e.target.value })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Taux de commission (%)\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"100\"\n                    value={newAmbassador.commissionRate}\n                    onChange={(e) =>\n                      setNewAmbassador({\n                        ...newAmbassador,\n                        commissionRate: parseFloat(e.target.value),\n                      })\n                    }\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                    Notes\n                  </label>\n                  <textarea\n                    value={newAmbassador.notes}\n                    onChange={(e) =>\n                      setNewAmbassador({ ...newAmbassador, notes: e.target.value })\n                    }\n                    rows={3}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 mt-6\">\n                <button\n                  onClick={() => setShowCreateModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\n                >\n                  Annuler\n                </button>\n                <button\n                  onClick={handleCreateAmbassador}\n                  className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                >\n                  Cr√©er\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":15871},"app/api/promo-codes/use/route.ts":{"content":"import { NextRequest, NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/db\";\nimport { z } from \"zod\";\n\nconst usePromoCodeSchema = z.object({\n  promoCodeId: z.string().cuid(),\n  userId: z.string().cuid(),\n  planType: z.enum([\"PRO\", \"ELITE\"]),\n  billingCycle: z.enum([\"monthly\", \"yearly\"]),\n  originalAmount: z.number().positive(),\n  discountAmount: z.number().positive(),\n  finalAmount: z.number().positive(),\n  stripeCustomerId: z.string().optional(),\n  stripeSubscriptionId: z.string().optional(),\n  ipAddress: z.string().optional(),\n  userAgent: z.string().optional(),\n});\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json();\n    const validated = usePromoCodeSchema.parse(body);\n\n    const promoCode = await prisma.promoCode.findUnique({\n      where: { id: validated.promoCodeId },\n      include: {\n        ambassador: true,\n      },\n    });\n\n    if (!promoCode) {\n      return NextResponse.json(\n        { error: \"Code promo non trouv√©\" },\n        { status: 404 }\n      );\n    }\n\n    const usage = await prisma.promoCodeUsage.create({\n      data: {\n        promoCodeId: validated.promoCodeId,\n        ambassadorId: promoCode.ambassadorId,\n        userId: validated.userId,\n        planType: validated.planType,\n        billingCycle: validated.billingCycle,\n        originalAmount: validated.originalAmount,\n        discountAmount: validated.discountAmount,\n        finalAmount: validated.finalAmount,\n        stripeCustomerId: validated.stripeCustomerId,\n        stripeSubscriptionId: validated.stripeSubscriptionId,\n        ipAddress: validated.ipAddress,\n        userAgent: validated.userAgent,\n      },\n    });\n\n    await prisma.promoCode.update({\n      where: { id: validated.promoCodeId },\n      data: {\n        currentUses: {\n          increment: 1,\n        },\n        totalRevenue: {\n          increment: validated.finalAmount,\n        },\n      },\n    });\n\n    const commissionAmount = validated.finalAmount * (promoCode.ambassador.commissionRate / 100);\n\n    const commission = await prisma.commission.create({\n      data: {\n        ambassadorId: promoCode.ambassadorId,\n        userId: validated.userId,\n        type: \"signup\",\n        amount: commissionAmount,\n        rate: promoCode.ambassador.commissionRate,\n        planType: validated.planType,\n        revenue: validated.finalAmount,\n        status: \"pending\",\n        period: new Date().toISOString().slice(0, 7),\n      },\n    });\n\n    await prisma.ambassador.update({\n      where: { id: promoCode.ambassadorId },\n      data: {\n        totalReferrals: {\n          increment: 1,\n        },\n        totalRevenue: {\n          increment: validated.finalAmount,\n        },\n        totalCommission: {\n          increment: commissionAmount,\n        },\n      },\n    });\n\n    return NextResponse.json({\n      success: true,\n      usage,\n      commission,\n    });\n  } catch (error: any) {\n    console.error(\"Error recording promo code usage:\", error);\n\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { error: \"Donn√©es invalides\", details: error.issues },\n        { status: 400 }\n      );\n    }\n\n    return NextResponse.json(\n      { error: error.message || \"Erreur lors de l'enregistrement de l'utilisation du code promo\" },\n      { status: 500 }\n    );\n  }\n}\n","size_bytes":3316}},"version":2}